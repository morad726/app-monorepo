"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[4342],{804342:(e,t,n)=>{n.r(t),n.d(t,{default:()=>SettingCurrencyModal});var r=n(586330),i=n(514041),s=n(908867),a=n(490343),o=(n(793239),n(60153)),u=n(791088),c=n(911998),l=n(604343),d=n(254491),f=n(831085),g=[],currencyFilterFn=function(e,t){var n=e.toLowerCase();return t.id.toLowerCase().includes(n)||t.name.toLowerCase().includes(n)},CurrencyItem=function({item:e,onPress:t,currency:n}){var r=(0,i.useCallback)((function(){t(e)}),[e,t]);return(0,f.jsx)(u.c,{title:`${e.id.toUpperCase()} - ${e.unit}`,subtitle:e.name,checkMark:n?.id===e.id,onPress:r})},keyExtractor=function(e){return e.id};function SettingCurrencyModal(){var[e]=(0,l.useSettingsPersistAtom)(),[t,n]=(0,i.useState)(""),u=(0,i.useRef)({id:e.currencyInfo.id,unit:e.currencyInfo.symbol}),[m,p]=(0,i.useState)(u.current),y=(0,s.A)(),h=(0,c.yk)((0,r.A)((function*(){return yield o.A.serviceSetting.getCurrencyList()})),[],{watchLoading:!0}),C=(0,i.useMemo)((function(){if(!h.result)return[];for(var e={crypto:[],fiat:[],popular:[]},n=h.result?.filter((function(e){return currencyFilterFn(t,e)})),_loop=function(){var t=n[r];t.type.forEach((function(n){e[n]&&e[n].push(t)}))},r=0;r<n.length;r+=1)_loop();return[{title:y.formatMessage({id:d.ETranslations.global_popular}),data:e.popular},{title:y.formatMessage({id:d.ETranslations.global_crypto}),data:e.crypto},{title:y.formatMessage({id:d.ETranslations.settings_fiat}),data:e.fiat}].filter((function(e){return e.data.length>0}))}),[h,t,y]),b=(0,i.useCallback)((function(e){p(e)}),[]),S=(0,i.useCallback)((function({item:e}){return(0,f.jsx)(CurrencyItem,{item:e,currency:m,onPress:b})}),[m,b]),x=(0,i.useCallback)((function({section:e}){return(0,f.jsx)(a.SectionList.SectionHeader,{title:e.title})}),[]),k=(0,i.useCallback)((0,r.A)((function*(){m&&(yield o.A.serviceSetting.setCurrency({id:m.id,symbol:m.unit}),setTimeout((function(){o.A.serviceApp.restartApp()})))})),[m]),M=(0,i.useMemo)((function(){return u.current.id===m?.id}),[m?.id]),j=(0,i.useMemo)((function(){return{onChangeText:function({nativeEvent:e}){var t=e.text.trim();n(t)},placeholder:y.formatMessage({id:d.ETranslations.global_search})}}),[y]);return(0,f.jsxs)(a.Page,{children:[(0,f.jsx)(a.Page.Header,{title:y.formatMessage({id:d.ETranslations.settings_default_currency}),headerSearchBarOptions:j}),(0,f.jsx)(a.Page.Body,{children:h?.isLoading?(0,f.jsx)(a.Stack,{h:"$48",justifyContent:"center",alignItems:"center",children:(0,f.jsx)(a.Spinner,{size:"large"})}):(0,f.jsx)(a.SectionList,{estimatedItemSize:"$6",ListEmptyComponent:(0,f.jsx)(a.Empty,{icon:"SearchOutline",title:y.formatMessage({id:d.ETranslations.global_no_results}),description:y.formatMessage({id:d.ETranslations.global_search_no_results_desc})}),sections:null!=C?C:g,renderItem:S,renderSectionHeader:x,extraData:m,keyExtractor})}),(0,f.jsx)(a.Page.Footer,{onConfirm:k,confirmButtonProps:{disabled:M}})]})}}}]);