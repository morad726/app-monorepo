/*! For license information please see 99828.98bfb140d9.chunk.js.LICENSE.txt */
(self.webpackChunkweb=self.webpackChunkweb||[]).push([[99828],{499828:(t,e,r)=>{var i=r(901048).Buffer,n=t.exports;n.version="v"+r(999367).rE,n.versionGuard=function(t){if(void 0!==t){throw new Error("More than one instance of kaspacore-lib found. Please make sure to require kaspacore-lib and check that submodules do not also include their own kaspacore-lib dependency.")}},n.versionGuard(r.g._kaspacoreLibVersion),r.g._kaspacoreLibVersion=n.version;const s=(()=>{let t={},e=new Promise(((e,r)=>{t={resolve:e,reject:r}}));return Object.assign(e,t),e})();n.ready=()=>{s.resolve(!0)},n.initRuntime=()=>s,n.crypto={},n.crypto.BN=r(399066),n.crypto.ECDSA=r(691924),n.crypto.Schnorr=r(453373),n.crypto.Hash=r(901538),n.crypto.Random=r(372589),n.crypto.Point=r(817650),n.crypto.Signature=r(692326),n.encoding={},n.encoding.Base58=r(575974),n.encoding.Base58Check=r(771876),n.encoding.BufferReader=r(855723),n.encoding.BufferWriter=r(849371),n.encoding.Varint=r(873292),n.util={},n.util.buffer=r(205323),n.util.js=r(833698),n.util.preconditions=r(545334),n.util.base32=r(801157),n.util.convertBits=r(41694),n.setDebugLevel=t=>{n.util.js.debugLevel=t},n.errors=r(166938),n.Address=r(958616),n.Block=r(604710),n.MerkleBlock=r(926657),n.BlockHeader=r(863174),n.HDPrivateKey=r(594932),n.HDPublicKey=r(561984),n.Networks=r(827069),n.Opcode=r(663492),n.PrivateKey=r(727184),n.PublicKey=r(342460),n.Script=r(716990),n.Transaction=r(623087),n.URI=r(586414),n.Unit=r(280300),n.deps={},n.deps.bnjs=r(376637),n.deps.bs58=r(939216),n.deps.Buffer=i,n.deps.elliptic=r(913360),n.deps._=r(645250),n.Transaction.sighash=r(520182)},958616:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(545334),o=r(166938),u=r(771876),a=r(827069),h=r(901538),c=r(833698),f=r(342460),p=(r(399066),r(801157)),l=r(41694);function Address(t,e,r){if(!(this instanceof Address))return new Address(t,e,r);if(n.isArray(t)&&n.isNumber(e))return Address.createMultisig(t,e,r);if(t instanceof Address)return t;if(s.checkArgument(t,"First argument is required, please include address data.","guide/address.html"),e&&!a.get(e))throw new TypeError('Second argument must be "livenet", "testnet", or "regtest".');if(r&&r!==Address.PayToPublicKey&&r!==Address.PayToScriptHash)throw new TypeError('Third argument must be "pubkey" or "scripthash".');var i=this._classifyArguments(t,e,r);return i.network=i.network||a.get(e)||a.defaultNetwork,i.type=i.type||r||Address.PayToPublicKey,c.defineImmutable(this,{hashBuffer:i.hashBuffer,network:i.network,type:i.type}),this}function decodeCashAddress(t){function validChecksum(t,e){var r=function prefixToArray(t){for(var e=[],r=0;r<t.length;r++)e.push(31&t.charCodeAt(r));return e}(t).concat([0]);return 0===polymod(r.concat(e))}s.checkArgument(function hasSingleCase(t){var e=t.toLowerCase(),r=t.toUpperCase();return t===e||t===r}(t),"Mixed case");var e,r,n=(t=t.toLowerCase()).split(":");s.checkArgument(n.length<=2,"Invalid format:"+t),2===n.length?(e=n[0],r=n[1]):(e=null,r=n[0]);var o=p.decode(r.toLowerCase());if(e)s.checkArgument(validChecksum(e,o),"Invalid checksum:"+t);else{for(var u,h=["livenet","testnet","regtest"];!e&&(u=h.shift());){var c=a.get(u).prefix;validChecksum(c,o)&&(e=c)}s.checkArgument(e,"Invalid checksum:"+t)}var f=l(o.slice(0,-8),5,8,!0),d=f.shift(),m=f;1==d?s.checkArgument(264==8*m.length,"Invalid hash size:"+t):s.checkArgument(256==8*m.length,"Invalid hash size:"+t);var g=function getType(t){switch(120&t){case 0:return"pubkey";case 8:return"scripthash";default:throw new Error("Invalid address type in version byte:"+t)}}(d),y=a.get(e),v={};return v.hashBuffer=i.from(m),v.network=y,v.type=g,v}Address.prototype._classifyArguments=function(t,e,r){if((t instanceof i||t instanceof Uint8Array)&&32===t.length)return Address._transformPublicKeyBuffer(t);if((t instanceof i||t instanceof Uint8Array)&&21===t.length)return Address._transformBuffer(t,e,r);if(t instanceof f)return Address._transformPublicKey(t);if(t instanceof g)return Address._transformScript(t,e);if("string"==typeof t)return Address._transformString(t,e,r);if(n.isObject(t))return Address._transformObject(t);throw new TypeError("First argument is an unrecognized data format.")},Address.PayToPublicKey="pubkey",Address.PayToScriptHash="scripthash",Address._transformHash=function(t){var e={};if(!(t instanceof i||t instanceof Uint8Array))throw new TypeError("Address supplied is not a buffer.");if(20!==t.length)throw new TypeError("Address hashbuffers must be exactly 20 bytes.");return e.hashBuffer=t,e},Address._transformObject=function(t){return s.checkArgument(t.hash||t.hashBuffer,"Must provide a `hash` or `hashBuffer` property"),s.checkArgument(t.type,"Must provide a `type` property"),{hashBuffer:t.hash?i.from(t.hash,"hex"):t.hashBuffer,network:a.get(t.network)||a.defaultNetwork,type:t.type}},Address._classifyFromVersion=function(t){var e={},r=a.get(t[0],"pubkey"),i=a.get(t[0],"scripthash");return r?(e.network=r,e.type=Address.PayToPublicKey):i&&(e.network=i,e.type=Address.PayToScriptHash),e},Address._transformBuffer=function(t,e,r){var n={};if(!(t instanceof i||t instanceof Uint8Array))throw new TypeError("Address supplied is not a buffer.");if(21!==t.length)throw new TypeError("Address buffers must be exactly 21 bytes.");var s=a.get(e),o=Address._classifyFromVersion(t);if(e&&!s)throw new TypeError("Unknown network");if(!o.network||s&&s!==o.network)throw new TypeError("Address has mismatched network type.");if(!o.type||r&&r!==o.type)throw new TypeError("Address has mismatched type.");return n.hashBuffer=t.slice(1),n.network=o.network,n.type=o.type,n},Address._transformPublicKey=function(t){var e={};if(!(t instanceof f))throw new TypeError("Address must be an instance of PublicKey.");return e.hashBuffer=t.toBuffer(),e.type=Address.PayToPublicKey,e},Address._transformPublicKeyBuffer=function(t){var e={};if(!(t instanceof i))throw new TypeError("pubkeyBuffer must be a buffer");return e.hashBuffer=t,e.type=Address.PayToPublicKey,e},Address._transformScript=function(t,e){s.checkArgument(t instanceof g,"script must be a Script instance");var r=t.getAddressInfo(e);if(!r)throw new o.Script.CantDeriveAddress(t);return r},Address.createMultisig=function(t,e,r){return r=r||t[0].network||a.defaultNetwork,Address.payingTo(g.buildMultisigOut(t,e),r)},Address._decodeCashAddress=decodeCashAddress,Address._transformString=function(t,e,r){if("string"!=typeof t)throw new TypeError("data parameter supplied is not a string.");if(t.length<34)throw new Error("Invalid address");if(t.length>100)throw new TypeError("address string is too long");t=t.trim();var i=a.get(e);if(e&&!i)throw new TypeError("Unknown network");if(t.length>35){var n=decodeCashAddress(t);if(!n.network||i&&i.name!==n.network.name)throw new TypeError("Address has mismatched network type.");if(!n.type||r&&r!==n.type)throw new TypeError("Address has mismatched type.");return n}var s=u.decode(t);return Address._transformBuffer(s,e,r)},Address.fromPublicKey=function(t,e){var r=Address._transformPublicKey(t);return e=e||a.defaultNetwork,new Address(r.hashBuffer,e,r.type)},Address.fromPublicKeyBuffer=function(t,e){var r=Address._transformPublicKeyBuffer(t);return new Address(r.hashBuffer,e,Address.PayToPublicKeyHash)},Address.fromScriptHash=function(t,e){s.checkArgument(t,"hash parameter is required");var r=Address._transformHash(t);return new Address(r.hashBuffer,e,Address.PayToScriptHash)},Address.payingTo=function(t,e){return s.checkArgument(t,"script is required"),s.checkArgument(t instanceof g,"script must be instance of Script"),Address.fromScriptHash(h.sha256ripemd160(t.toBuffer()),e)},Address.fromScript=function(t,e){s.checkArgument(t instanceof g,"script must be a Script instance");var r=Address._transformScript(t,e);return new Address(r.hashBuffer,e,r.type)},Address.fromBuffer=function(t,e,r){var i=Address._transformBuffer(t,e,r);return new Address(i.hashBuffer,i.network,i.type)},Address.fromString=function(t,e,r){var i=Address._transformString(t,e,r);return new Address(i.hashBuffer,i.network,i.type)},Address.fromObject=function fromObject(t){return s.checkState(c.isHexa(t.hash),'Unexpected hash property, "'+t.hash+'", expected to be hex.'),new Address(i.from(t.hash,"hex"),t.network,t.type)},Address.getValidationError=function(t,e,r){var i;try{new Address(t,e,r)}catch(t){i=t}return i},Address.isValid=function(t,e,r){return!Address.getValidationError(t,e,r)},Address.prototype.isPayToPublicKey=function(){return this.type===Address.PayToPublicKey},Address.prototype.isPayToScriptHash=function(){return this.type===Address.PayToScriptHash},Address.prototype.toBuffer=function(){var t=i.from([this.network[this.type]]);return i.concat([t,this.hashBuffer])},Address.prototype.toObject=Address.prototype.toJSON=function toObject(){return{hash:this.hashBuffer.toString("hex"),type:this.type,network:this.network.toString()}},Address.prototype.inspect=function(){return"<Address: "+this.toString()+", type: "+this.type+", network: "+this.network+">"},Address.prototype.toCashBuffer=function(){var t=i.from([this.network[this.type]]);return i.concat([t,this.hashBuffer])},Address.prototype.toLegacyAddress=function(){return u.encode(this.toBuffer())},Address.prototype.toCashAddress=function(t){var e=this.network.prefixArray.concat([0]),r=function getTypeBits(t){switch(t){case"pubkey":return 0;case"scripthash":return 8;default:throw new Error("Invalid type:"+t)}}(this.type),i=Array.prototype.slice.call(this.hashBuffer,0),n=l([r].concat(i),8,5),s=e.concat(n).concat([0,0,0,0,0,0,0,0]),o=n.concat(function checksumToArray(t){for(var e=[],r=0;r<8;++r)e.push(31&t),t/=32;return e.reverse()}(polymod(s)));return!0===t?p.encode(o):this.network.prefix+":"+p.encode(o)},Address.prototype.toString=Address.prototype.toCashAddress;var d=[152,121,243,174,30],m=[4072443489,3077413346,1046459332,783016616,1329849456];function polymod(t){for(var e=0,r=1,i=0,n=0;n<t.length;n++){i=e>>>3,e&=7,e<<=5,e|=r>>>27,r&=134217727,r<<=5,r^=t[n];for(var s=0;s<d.length;++s)i&1<<s&&(e^=d[s],r^=m[s])}return(r^=1)<0&&(r^=1<<31,r+=2*(1<<30)),e*(1<<30)*4+r}t.exports=Address;var g=r(716990)},745687:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(863174),o=r(399066),u=r(205323),a=r(855723),h=r(849371),c=r(901538),f=r(623087),p=r(545334);function Block(t){return this instanceof Block?(n.extend(this,Block._from(t)),this):new Block(t)}Block.MAX_BLOCK_SIZE=1e6,Block._from=function _from(t){var e={};if(u.isBuffer(t))e=Block._fromBufferReader(a(t));else{if(!n.isObject(t))throw new TypeError("Unrecognized argument for Block");e=Block._fromObject(t)}return e},Block._fromObject=function _fromObject(t){var e=[];return t.transactions.forEach((function(t){t instanceof f?e.push(t):e.push(f().fromObject(t))})),{header:s.fromObject(t.header),transactions:e}},Block.fromObject=function fromObject(t){var e=Block._fromObject(t);return new Block(e)},Block._fromBufferReader=function _fromBufferReader(t){var e={};p.checkState(!t.finished(),"No block data received"),e.header=s.fromBufferReader(t);var r=t.readVarintNum();e.transactions=[];for(var i=0;i<r;i++)e.transactions.push(f().fromBufferReader(t));return e},Block.fromBufferReader=function fromBufferReader(t){p.checkArgument(t,"br is required");var e=Block._fromBufferReader(t);return new Block(e)},Block.fromBuffer=function fromBuffer(t){return Block.fromBufferReader(new a(t))},Block.fromString=function fromString(t){var e=i.from(t,"hex");return Block.fromBuffer(e)},Block.fromRawBlock=function fromRawBlock(t){u.isBuffer(t)||(t=i.from(t,"binary"));var e=a(t);e.pos=Block.Values.START_OF_BLOCK;var r=Block._fromBufferReader(e);return new Block(r)},Block.prototype.toObject=Block.prototype.toJSON=function toObject(){var t=[];return this.transactions.forEach((function(e){t.push(e.toObject())})),{header:this.header.toObject(),transactions:t}},Block.prototype.toBuffer=function toBuffer(){return this.toBufferWriter().concat()},Block.prototype.toString=function toString(){return this.toBuffer().toString("hex")},Block.prototype.toBufferWriter=function toBufferWriter(t){t||(t=new h),t.write(this.header.toBuffer()),t.writeVarintNum(this.transactions.length);for(var e=0;e<this.transactions.length;e++)this.transactions[e].toBufferWriter(t);return t},Block.prototype.getTransactionHashes=function getTransactionHashes(){var t=[];if(0===this.transactions.length)return[Block.Values.NULL_HASH];for(var e=0;e<this.transactions.length;e++)t.push(this.transactions[e]._getHash());return t},Block.prototype.getMerkleTree=function getMerkleTree(){for(var t=this.getTransactionHashes(),e=0,r=this.transactions.length;r>1;r=Math.floor((r+1)/2)){for(var n=0;n<r;n+=2){var s=Math.min(n+1,r-1),o=i.concat([t[e+n],t[e+s]]);t.push(c.sha256sha256(o))}e+=r}return t},Block.prototype.getMerkleRoot=function getMerkleRoot(){var t=this.getMerkleTree();return t[t.length-1]},Block.prototype.validMerkleRoot=function validMerkleRoot(){var t=new o(this.header.merkleRoot.toString("hex"),"hex"),e=new o(this.getMerkleRoot().toString("hex"),"hex");return 0===t.cmp(e)},Block.prototype._getHash=function(){return this.header._getHash()};var l={configurable:!1,enumerable:!0,get:function(){return this._id||(this._id=this.header.id),this._id},set:n.noop};Object.defineProperty(Block.prototype,"id",l),Object.defineProperty(Block.prototype,"hash",l),Block.prototype.inspect=function inspect(){return"<Block "+this.id+">"},Block.Values={START_OF_BLOCK:8,NULL_HASH:i.from("0000000000000000000000000000000000000000000000000000000000000000","hex")},t.exports=Block},863174:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(399066),o=r(205323),u=r(855723),a=r(849371),h=r(901538),c=(r(833698),r(545334)),f=function BlockHeader(t){if(!(this instanceof BlockHeader))return new BlockHeader(t);var e=BlockHeader._from(t);return this.version=e.version,this.prevHash=e.prevHash,this.merkleRoot=e.merkleRoot,this.time=e.time,this.timestamp=e.time,this.bits=e.bits,this.nonce=e.nonce,e.hash&&c.checkState(this.hash===e.hash,"Argument object hash property does not match block hash."),this};f._from=function _from(t){var e={};if(o.isBuffer(t))e=f._fromBufferReader(u(t));else{if(!n.isObject(t))throw new TypeError("Unrecognized argument for BlockHeader");e=f._fromObject(t)}return e},f._fromObject=function _fromObject(t){c.checkArgument(t,"data is required");var e=t.prevHash,r=t.merkleRoot;return n.isString(t.prevHash)&&(e=o.reverse(i.from(t.prevHash,"hex"))),n.isString(t.merkleRoot)&&(r=o.reverse(i.from(t.merkleRoot,"hex"))),{hash:t.hash,version:t.version,prevHash:e,merkleRoot:r,time:t.time,timestamp:t.time,bits:t.bits,nonce:t.nonce}},f.fromObject=function fromObject(t){var e=f._fromObject(t);return new f(e)},f.fromRawBlock=function fromRawBlock(t){o.isBuffer(t)||(t=i.from(t,"binary"));var e=u(t);e.pos=f.Constants.START_OF_HEADER;var r=f._fromBufferReader(e);return new f(r)},f.fromBuffer=function fromBuffer(t){var e=f._fromBufferReader(u(t));return new f(e)},f.fromString=function fromString(t){var e=i.from(t,"hex");return f.fromBuffer(e)},f._fromBufferReader=function _fromBufferReader(t){var e={};return e.version=t.readInt32LE(),e.prevHash=t.read(32),e.merkleRoot=t.read(32),e.time=t.readUInt32LE(),e.bits=t.readUInt32LE(),e.nonce=t.readUInt32LE(),e},f.fromBufferReader=function fromBufferReader(t){var e=f._fromBufferReader(t);return new f(e)},f.prototype.toObject=f.prototype.toJSON=function toObject(){return{hash:this.hash,version:this.version,prevHash:o.reverse(this.prevHash).toString("hex"),merkleRoot:o.reverse(this.merkleRoot).toString("hex"),time:this.time,bits:this.bits,nonce:this.nonce}},f.prototype.toBuffer=function toBuffer(){return this.toBufferWriter().concat()},f.prototype.toString=function toString(){return this.toBuffer().toString("hex")},f.prototype.toBufferWriter=function toBufferWriter(t){return t||(t=new a),t.writeInt32LE(this.version),t.write(this.prevHash),t.write(this.merkleRoot),t.writeUInt32LE(this.time),t.writeUInt32LE(this.bits),t.writeUInt32LE(this.nonce),t},f.prototype.getTargetDifficulty=function getTargetDifficulty(t){t=t||this.bits;for(var e=new s(16777215&t),r=8*((t>>>24)-3);r-- >0;)e=e.mul(new s(2));return e},f.prototype.getDifficulty=function getDifficulty(){var t=this.getTargetDifficulty(486604799).mul(new s(Math.pow(10,8))),e=this.getTargetDifficulty(),r=t.div(e).toString(10),i=r.length-8;return r=r.slice(0,i)+"."+r.slice(i),parseFloat(r)},f.prototype._getHash=function hash(){var t=this.toBuffer();return h.sha256sha256(t)};var p={configurable:!1,enumerable:!0,get:function(){return this._id||(this._id=u(this._getHash()).readReverse().toString("hex")),this._id},set:n.noop};Object.defineProperty(f.prototype,"id",p),Object.defineProperty(f.prototype,"hash",p),f.prototype.validTimestamp=function validTimestamp(){var t=Math.round((new Date).getTime()/1e3);return!(this.time>t+f.Constants.MAX_TIME_OFFSET)},f.prototype.validProofOfWork=function validProofOfWork(){var t=new s(this.id,"hex"),e=this.getTargetDifficulty();return!(t.cmp(e)>0)},f.prototype.inspect=function inspect(){return"<BlockHeader "+this.id+">"},f.Constants={START_OF_HEADER:8,MAX_TIME_OFFSET:7200,LARGEST_HASH:new s("10000000000000000000000000000000000000000000000000000000000000000","hex")},t.exports=f},604710:(t,e,r)=>{t.exports=r(745687),t.exports.BlockHeader=r(863174),t.exports.MerkleBlock=r(926657)},926657:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(863174),o=r(205323),u=r(855723),a=r(849371),h=r(901538),c=(r(833698),r(623087)),f=r(166938),p=r(545334);function MerkleBlock(t){if(!(this instanceof MerkleBlock))return new MerkleBlock(t);var e={};if(o.isBuffer(t))e=MerkleBlock._fromBufferReader(u(t));else{if(!n.isObject(t))throw new TypeError("Unrecognized argument for MerkleBlock");e={header:t.header instanceof s?t.header:s.fromObject(t.header),numTransactions:t.numTransactions,hashes:t.hashes,flags:t.flags}}return n.extend(this,e),this._flagBitsUsed=0,this._hashesUsed=0,this}MerkleBlock.fromBuffer=function fromBuffer(t){return MerkleBlock.fromBufferReader(u(t))},MerkleBlock.fromBufferReader=function fromBufferReader(t){return new MerkleBlock(MerkleBlock._fromBufferReader(t))},MerkleBlock.prototype.toBuffer=function toBuffer(){return this.toBufferWriter().concat()},MerkleBlock.prototype.toBufferWriter=function toBufferWriter(t){t||(t=new a),t.write(this.header.toBuffer()),t.writeUInt32LE(this.numTransactions),t.writeVarintNum(this.hashes.length);for(var e=0;e<this.hashes.length;e++)t.write(i.from(this.hashes[e],"hex"));for(t.writeVarintNum(this.flags.length),e=0;e<this.flags.length;e++)t.writeUInt8(this.flags[e]);return t},MerkleBlock.prototype.toObject=MerkleBlock.prototype.toJSON=function toObject(){return{header:this.header.toObject(),numTransactions:this.numTransactions,hashes:this.hashes,flags:this.flags}},MerkleBlock.prototype.validMerkleTree=function validMerkleTree(){if(p.checkState(n.isArray(this.flags),"MerkleBlock flags is not an array"),p.checkState(n.isArray(this.hashes),"MerkleBlock hashes is not an array"),this.hashes.length>this.numTransactions)return!1;if(8*this.flags.length<this.hashes.length)return!1;var t=this._calcTreeHeight(),e={hashesUsed:0,flagBitsUsed:0},r=this._traverseMerkleTree(t,0,e);return e.hashesUsed===this.hashes.length&&o.equals(r,this.header.merkleRoot)},MerkleBlock.prototype.filterdTxsHash=function filterdTxsHash(){if(p.checkState(n.isArray(this.flags),"MerkleBlock flags is not an array"),p.checkState(n.isArray(this.hashes),"MerkleBlock hashes is not an array"),this.hashes.length>this.numTransactions)throw new f.MerkleBlock.InvalidMerkleTree;if(8*this.flags.length<this.hashes.length)throw new f.MerkleBlock.InvalidMerkleTree;if(1===this.hashes.length)return[];var t=this._calcTreeHeight(),e={hashesUsed:0,flagBitsUsed:0},r=this._traverseMerkleTree(t,0,e,!0);if(e.hashesUsed!==this.hashes.length)throw new f.MerkleBlock.InvalidMerkleTree;return r},MerkleBlock.prototype._traverseMerkleTree=function traverseMerkleTree(t,e,r,n){(r=r||{}).txs=r.txs||[],r.flagBitsUsed=r.flagBitsUsed||0,r.hashesUsed=r.hashesUsed||0;n=n||!1;if(r.flagBitsUsed>8*this.flags.length)return null;var s=this.flags[r.flagBitsUsed>>3]>>>(7&r.flagBitsUsed++)&1;if(0!==t&&s){var o=this._traverseMerkleTree(t-1,2*e,r),u=o;return 2*e+1<this._calcTreeWidth(t-1)&&(u=this._traverseMerkleTree(t-1,2*e+1,r)),n?r.txs:h.sha256sha256(new i.concat([o,u]))}if(r.hashesUsed>=this.hashes.length)return null;var a=this.hashes[r.hashesUsed++];return 0===t&&s&&r.txs.push(a),i.from(a,"hex")},MerkleBlock.prototype._calcTreeWidth=function calcTreeWidth(t){return this.numTransactions+(1<<t)-1>>t},MerkleBlock.prototype._calcTreeHeight=function calcTreeHeight(){for(var t=0;this._calcTreeWidth(t)>1;)t++;return t},MerkleBlock.prototype.hasTransaction=function hasTransaction(t){p.checkArgument(!n.isUndefined(t),"tx cannot be undefined"),p.checkArgument(t instanceof c||"string"==typeof t,'Invalid tx given, tx must be a "string" or "Transaction"');var e=t;t instanceof c&&(e=o.reverse(i.from(t.id,"hex")).toString("hex"));var r=[],s=this._calcTreeHeight();return this._traverseMerkleTree(s,0,{txs:r}),-1!==r.indexOf(e)},MerkleBlock._fromBufferReader=function _fromBufferReader(t){p.checkState(!t.finished(),"No merkleblock data received");var e={};e.header=s.fromBufferReader(t),e.numTransactions=t.readUInt32LE();var r=t.readVarintNum();e.hashes=[];for(var i=0;i<r;i++)e.hashes.push(t.read(32).toString("hex"));var n=t.readVarintNum();for(e.flags=[],i=0;i<n;i++)e.flags.push(t.readUInt8());return e},MerkleBlock.fromObject=function fromObject(t){return new MerkleBlock(t)},t.exports=MerkleBlock},399066:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(376637),s=r(545334),o=r(645250),reversebuf=function(t){for(var e=i.alloc(t.length),r=0;r<t.length;r++)e[r]=t[t.length-1-r];return e};n.Zero=new n(0),n.One=new n(1),n.Minus1=new n(-1),n.fromNumber=function(t){return s.checkArgument(o.isNumber(t)),new n(t)},n.fromString=function(t,e){return s.checkArgument(o.isString(t)),new n(t,e)},n.fromBuffer=function(t,e){void 0!==e&&"little"===e.endian&&(t=reversebuf(t));var r=t.toString("hex");return new n(r,16)},n.fromSM=function(t,e){var r;if(0===t.length)return n.fromBuffer(i.from([0]));var s="big";return e&&(s=e.endian),"little"===s&&(t=reversebuf(t)),128&t[0]?(t[0]=127&t[0],(r=n.fromBuffer(t)).neg().copy(r)):r=n.fromBuffer(t),r},n.prototype.toNumber=function(){return parseInt(this.toString(10),10)},n.prototype.toBuffer=function(t){var e,r;if(t&&t.size){var s=(r=this.toString(16,2)).length/2;e=i.from(r,"hex"),s===t.size||(s>t.size?e=n.trim(e,t.size):s<t.size&&(e=n.pad(e,s,t.size)))}else r=this.toString(16,2),e=i.from(r,"hex");return void 0!==t&&"little"===t.endian&&(e=reversebuf(e)),e},n.prototype.toSMBigEndian=function(){var t;return-1===this.cmp(n.Zero)?128&(t=this.neg().toBuffer())[0]?t=i.concat([i.from([128]),t]):t[0]=128|t[0]:128&(t=this.toBuffer())[0]&&(t=i.concat([i.from([0]),t])),1===t.length&0===t[0]&&(t=i.from([])),t},n.prototype.toSM=function(t){var e=t?t.endian:"big",r=this.toSMBigEndian();return"little"===e&&(r=reversebuf(r)),r},n.fromScriptNumBuffer=function(t,e,r){var i=r||4;if(s.checkArgument(t.length<=i,new Error("script number overflow")),e&&t.length>0&&!(127&t[t.length-1]||!(t.length<=1)&&128&t[t.length-2]))throw new Error("non-minimally encoded script number");return n.fromSM(t,{endian:"little"})},n.prototype.toScriptNumBuffer=function(){return this.toSM({endian:"little"})},n.trim=function(t,e){return t.slice(e-t.length,t.length)},n.pad=function(t,e,r){for(var n=i.alloc(r),s=0;s<t.length;s++)n[n.length-1-s]=t[t.length-1-s];for(s=0;s<r-e;s++)n[s]=0;return n},t.exports=n},691924:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(399066),s=r(817650),o=r(692326),u=r(342460),a=r(372589),h=r(901538),c=r(205323),f=r(645250),p=r(545334),l=function ECDSA(t){if(!(this instanceof ECDSA))return new ECDSA(t);t&&this.set(t)};l.prototype.set=function(t){return this.hashbuf=t.hashbuf||this.hashbuf,this.endian=t.endian||this.endian,this.privkey=t.privkey||this.privkey,this.pubkey=t.pubkey||(this.privkey?this.privkey.publicKey:this.pubkey),this.sig=t.sig||this.sig,this.k=t.k||this.k,this.verified=t.verified||this.verified,this},l.prototype.privkey2pubkey=function(){this.pubkey=this.privkey.toPublicKey()},l.prototype.calci=function(){for(var t=0;t<4;t++){var e;this.sig.i=t;try{e=this.toPublicKey()}catch(t){console.error(t);continue}if(e.point.eq(this.pubkey.point))return this.sig.compressed=this.pubkey.compressed,this}throw this.sig.i=void 0,new Error("Unable to find valid recovery factor")},l.fromString=function(t){var e=JSON.parse(t);return new l(e)},l.prototype.randomK=function(){var t,e=s.getN();do{t=n.fromBuffer(a.getRandomBuffer(32))}while(!t.lt(e)||!t.gt(n.Zero));return this.k=t,this},l.prototype.deterministicK=function(t){f.isUndefined(t)&&(t=0);var e=i.alloc(32);e.fill(1);var r=i.alloc(32);r.fill(0);var o=this.privkey.bn.toBuffer({size:32}),u="little"===this.endian?c.reverse(this.hashbuf):this.hashbuf;r=h.sha256hmac(i.concat([e,i.from([0]),o,u]),r),e=h.sha256hmac(e,r),r=h.sha256hmac(i.concat([e,i.from([1]),o,u]),r),e=h.sha256hmac(e,r),e=h.sha256hmac(e,r);for(var a=n.fromBuffer(e),p=s.getN(),l=0;l<t||!a.lt(p)||!a.gt(n.Zero);l++)r=h.sha256hmac(i.concat([e,i.from([0])]),r),e=h.sha256hmac(e,r),e=h.sha256hmac(e,r),a=n.fromBuffer(e);return this.k=a,this},l.prototype.toPublicKey=function(){var t=this.sig.i;p.checkArgument(0===t||1===t||2===t||3===t,new Error("i must be equal to 0, 1, 2, or 3"));var e=n.fromBuffer(this.hashbuf),r=this.sig.r,i=this.sig.s,o=1&t,a=t>>1,h=s.getN(),c=s.getG(),f=a?r.add(h):r,l=s.fromX(o,f);if(!l.mul(h).isInfinity())throw new Error("nR is not a valid curve point");var d=e.neg().umod(h),m=r.invm(h),g=l.mul(i).add(c.mul(d)).mul(m);return u.fromPoint(g,this.sig.compressed)},l.prototype.sigError=function(){if(!c.isBuffer(this.hashbuf)||32!==this.hashbuf.length)return"hashbuf must be a 32 byte buffer";var t=this.sig.r,e=this.sig.s;if(!(t.gt(n.Zero)&&t.lt(s.getN())&&e.gt(n.Zero)&&e.lt(s.getN())))return"r and s not in range";var r=n.fromBuffer(this.hashbuf,this.endian?{endian:this.endian}:void 0),i=s.getN(),o=e.invm(i),u=o.mul(r).umod(i),a=o.mul(t).umod(i),h=s.getG().mulAdd(u,this.pubkey.point,a);return h.isInfinity()?"p is infinity":0!==h.getX().umod(i).cmp(t)&&"Invalid signature"},l.toLowS=function(t){return t.gt(n.fromBuffer(i.from("7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0","hex")))&&(t=s.getN().sub(t)),t},l.prototype._findSignature=function(t,e){var r,i,o,u=s.getN(),a=s.getG(),h=0;do{(!this.k||h>0)&&this.deterministicK(h),h++,r=this.k,i=a.mul(r).x.umod(u),o=r.invm(u).mul(e.add(t.mul(i))).umod(u)}while(i.cmp(n.Zero)<=0||o.cmp(n.Zero)<=0);return{s:o=l.toLowS(o),r:i}},l.prototype.sign=function(){var t=this.hashbuf,e=this.privkey,r=e.bn;p.checkState(t&&e&&r,new Error("invalid parameters")),p.checkState(c.isBuffer(t)&&32===t.length,new Error("hashbuf must be a 32 byte buffer"));var i=n.fromBuffer(t,this.endian?{endian:this.endian}:void 0),s=this._findSignature(r,i);return s.compressed=this.pubkey.compressed,this.sig=new o(s),this},l.prototype.signRandomK=function(){return this.randomK(),this.sign()},l.prototype.toString=function(){var t={};return this.hashbuf&&(t.hashbuf=this.hashbuf.toString("hex")),this.privkey&&(t.privkey=this.privkey.toString()),this.pubkey&&(t.pubkey=this.pubkey.toString()),this.sig&&(t.sig=this.sig.toString()),this.k&&(t.k=this.k.toString()),JSON.stringify(t)},l.prototype.verify=function(){return this.sigError()?this.verified=!1:this.verified=!0,this},l.sign=function(t,e,r){return l().set({hashbuf:t,endian:r,privkey:e}).sign().sig},l.verify=function(t,e,r,i){return l().set({hashbuf:t,endian:i,sig:e,pubkey:r}).verify().verified},t.exports=l},901538:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(483040),s=r(205323),o=r(545334),u=t.exports;u.sha1=function(t){return o.checkArgument(s.isBuffer(t)),n.createHash("sha1").update(t).digest()},u.sha1.blocksize=512,u.sha256=function(t){return o.checkArgument(s.isBuffer(t)),n.createHash("sha256").update(t).digest()},u.sha256.blocksize=512,u.sha256sha256=function(t){return o.checkArgument(s.isBuffer(t)),u.sha256(u.sha256(t))},u.ripemd160=function(t){return o.checkArgument(s.isBuffer(t)),n.createHash("ripemd160").update(t).digest()},u.sha256ripemd160=function(t){return o.checkArgument(s.isBuffer(t)),u.ripemd160(u.sha256(t))},u.sha512=function(t){return o.checkArgument(s.isBuffer(t)),n.createHash("sha512").update(t).digest()},u.sha512.blocksize=1024,u.hmac=function(t,e,r){o.checkArgument(s.isBuffer(e)),o.checkArgument(s.isBuffer(r)),o.checkArgument(t.blocksize);var n=t.blocksize/8;if(r.length>n)r=t(r);else if(r<n){var u=i.alloc(n);u.fill(0),r.copy(u),r=u}var a=i.alloc(n);a.fill(92);var h=i.alloc(n);h.fill(54);for(var c=i.alloc(n),f=i.alloc(n),p=0;p<n;p++)c[p]=a[p]^r[p],f[p]=h[p]^r[p];return t(i.concat([c,t(i.concat([f,e]))]))},u.sha256hmac=function(t,e){return u.hmac(u.sha256,t,e)},u.sha512hmac=function(t,e){return u.hmac(u.sha512,t,e)}},817650:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(399066),s=r(205323),o=new(0,r(913360).ec)("secp256k1"),u=o.curve.point.bind(o.curve),a=o.curve.pointFromX.bind(o.curve),h=function Point(t,e,r){try{var i=u(t,e,r)}catch(t){throw new Error("Invalid Point")}return i.validate(),i};h.prototype=Object.getPrototypeOf(o.curve.point()),h.fromX=function fromX(t,e){try{var r=a(e,t)}catch(t){throw new Error("Invalid X")}return r.validate(),r},h.getG=function getG(){return o.curve.g},h.getN=function getN(){return new n(o.curve.n.toArray())},h.prototype._getX||(h.prototype._getX=h.prototype.getX),h.prototype.getX=function getX(){return new n(this._getX().toArray())},h.prototype._getY||(h.prototype._getY=h.prototype.getY),h.prototype.getY=function getY(){return new n(this._getY().toArray())},h.prototype.validate=function validate(){if(this.isInfinity())throw new Error("Point cannot be equal to Infinity");var t;try{t=a(this.getX(),this.getY().isOdd())}catch(t){throw new Error("Point does not lie on the curve")}if(0!==t.y.cmp(this.y))throw new Error("Invalid y value for curve.");if(!this.mul(h.getN()).isInfinity())throw new Error("Point times N must be infinity");return this},h.pointToCompressed=function pointToCompressed(t){var e,r=t.getX().toBuffer({size:32}),n=t.getY().toBuffer({size:32});return e=n[n.length-1]%2?i.from([3]):i.from([2]),s.concat([e,r])},h.prototype.hasSquare=function(){return!this.isInfinity()&&this.isSquare(this.getY())},h.prototype.isSquare=function(t){let e=new n("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","hex");return new n(t).toRed(n.red(e)).redPow(e.sub(n.One).div(new n(2))).fromRed().eq(new n(1))},t.exports=h},372589:(t,e,r)=>{"use strict";var i=r(901048).Buffer;function Random(){}Random.getRandomBuffer=function(t){return{env:{ONEKEY_PROXY:void 0,NODE_ENV:"production",TAMAGUI_TARGET:"web"}}.browser?Random.getRandomBufferBrowser(t):Random.getRandomBufferNode(t)},Random.getRandomBufferNode=function(t){return r(483040).randomBytes(t)},Random.getRandomBufferBrowser=function(t){if(!window.crypto&&!window.msCrypto)throw new Error("window.crypto not available");if(window.crypto&&window.crypto.getRandomValues)var e=window.crypto;else{if(!window.msCrypto||!window.msCrypto.getRandomValues)throw new Error("window.crypto.getRandomValues not available");e=window.msCrypto}var r=new Uint8Array(t);return e.getRandomValues(r),i.from(r)},Random.getPseudoRandomBuffer=function(t){for(var e,r=i.alloc(t),n=0;n<=t;n++){0===n-4*Math.floor(n/4)?(e=4294967296*Math.random(),r[n]=255&e):r[n]=255&(e>>>=8)}return r},t.exports=Random},453373:(t,e,r)=>{"use strict";var i=r(901048).Buffer;const n=r(374261);var s=r(399066),o=r(817650),u=r(692326),a=(r(342460),r(372589),r(901538)),h=r(205323),c=(r(645250),r(545334)),f=function Schnorr(t){if(!(this instanceof Schnorr))return new Schnorr(t);t&&this.set(t)};function getrBuffer(t){return t.toBuffer().length<32?t.toBuffer({size:32}):t.toBuffer()}f.prototype.set=function(t){return this.hashbuf=t.hashbuf||this.hashbuf,this.endian=t.endian||this.endian,this.privkey=t.privkey||this.privkey,this.pubkey=t.pubkey||(this.privkey?this.privkey.publicKey:this.pubkey),this.sig=t.sig||this.sig,this.verified=t.verified||this.verified,this},f.prototype.privkey2pubkey=function(){this.pubkey=this.privkey.toPublicKey()},f.prototype.toPublicKey=function(){return this.privkey.toPublicKey()},f.prototype.sign=function(){var t=this.hashbuf,e=this.privkey,r=e.bn;c.checkState(t&&e&&r,new Error("invalid parameters")),c.checkState(h.isBuffer(t)&&32===t.length,new Error("hashbuf must be a 32 byte buffer"));var i=s.fromBuffer(t,this.endian?{endian:this.endian}:void 0),n=this._findSignature(r,i);return n.compressed=this.pubkey.compressed,n.isSchnorr=!0,this.sig=new u(n),this},f.prototype._findSignature=function(t,e){let r=o.getN(),n=o.getG();c.checkState(!t.lte(new s(0)),new Error("privkey out of field of curve")),c.checkState(!t.gte(r),new Error("privkey out of field of curve"));let u=this.nonceFunctionRFC6979(t.toBuffer({size:32}),e.toBuffer({size:32})),h=n.mul(t),f=n.mul(u);f.hasSquare()||(u=r.sub(u));let p=f.getX();return{r:p,s:s.fromBuffer(a.sha256(i.concat([getrBuffer(p),o.pointToCompressed(h),e.toBuffer({size:32})]))).mul(t).add(u).mod(r)}},f.prototype.sigError=function(){if(!h.isBuffer(this.hashbuf)||32!==this.hashbuf.length)return"hashbuf must be a 32 byte buffer";let t=getrBuffer(this.sig.r).length+function getsBuffer(t){return t.toBuffer().length<32?t.toBuffer({size:32}):t.toBuffer()}(this.sig.s).length;if(64!==t&&65!==t)return"signature must be a 64 byte or 65 byte array";let e="little"===this.endian?h.reverse(this.hashbuf):this.hashbuf,r=this.pubkey.point,n=o.getG();if(r.isInfinity())return!0;let u=this.sig.r,c=this.sig.s,f=new s("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","hex"),p=o.getN();if(u.gte(f)||c.gte(p))return!0;let l=getrBuffer(this.sig.r),d=o.pointToCompressed(r),m=a.sha256(i.concat([l,d,e])),g=s.fromBuffer(m,"big").umod(p),y=n.mul(c),v=r.mul(p.sub(g)),_=y.add(v);return!(!_.isInfinity()&&_.hasSquare()&&_.getX().eq(u))},f.prototype.verify=function(){return this.sigError()?this.verified=!1:this.verified=!0,this},f.prototype.nonceFunctionRFC6979=function(t,e){let r=i.from("0101010101010101010101010101010101010101010101010101010101010101","hex"),n=i.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),u=i.concat([t,e,i.from("","ascii"),i.from("Schnorr+SHA256  ","ascii")]);n=a.sha256hmac(i.concat([r,i.from("00","hex"),u]),n),r=a.sha256hmac(r,n),n=a.sha256hmac(i.concat([r,i.from("01","hex"),u]),n),r=a.sha256hmac(r,n);let h,f=new s(0);for(;r=a.sha256hmac(r,n),h=s.fromBuffer(r),f=h,c.checkState(r.length>=32,"V length should be >= 32"),!f.gt(new s(0))||!f.lt(o.getN());)n=a.sha256hmac(i.concat([r,i.from("00","hex")]),n),r=a.hmac(a.sha256,r,n);return f},f.sign=function(t,e,r){let s=n.schnorr.sign(i.from(t).toString("hex"),e.toString()),o=u.fromString(s.sig),a=o.toBuffer("schnorr").toString("hex");if(a.length<128)throw new Error(`Invalid Signature\nsecp256k1 sig:${s.sig}\nSignature.fromString:${a}`);return o.compressed=!0,o},f.verify=function(t,e,r,i){return!0},t.exports=f},692326:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(399066),s=r(645250),o=r(545334),u=r(205323),a=r(833698),h=function Signature(t,e,r){if(!(this instanceof Signature))return new Signature(t,e,r);if(t instanceof n)this.set({r:t,s:e,isSchnorr:r});else if(t){var i=t;this.set(i)}};h.prototype.set=function(t){return this.r=t.r||this.r||void 0,this.s=t.s||this.s||void 0,this.i=void 0!==t.i?t.i:this.i,this.compressed=void 0!==t.compressed?t.compressed:this.compressed,this.isSchnorr=t.isSchnorr,this.nhashtype=t.nhashtype||this.nhashtype||void 0,this},h.fromCompact=function(t){o.checkArgument(u.isBuffer(t),"Argument is expected to be a Buffer");var e=new h,r=!0,i=t.slice(0,1)[0]-27-4;i<0&&(r=!1,i+=4);var s=t.slice(1,33),a=t.slice(33,65);return o.checkArgument(0===i||1===i||2===i||3===i,new Error("i must be 0, 1, 2, or 3")),o.checkArgument(32===s.length,new Error("r must be 32 bytes")),o.checkArgument(32===a.length,new Error("s must be 32 bytes")),e.compressed=r,e.i=i,e.r=n.fromBuffer(s),e.s=n.fromBuffer(a),e},h.fromDER=h.fromBuffer=function(t,e){let r=h.parseSchnorrEncodedSig(t),i=new h;return i.r=r.r,i.s=r.s,i.isSchnorr=!0,i},h.fromTxFormat=function(t){var e=t.readUInt8(t.length-1),r=t.slice(0,t.length-1),i=new h.fromDER(r,!1);return i.nhashtype=e,i},h.fromDataFormat=function(t){var e=t.slice(0,t.length);return new h.fromDER(e,!1)},h.fromString=function(t){var e=i.from(t,"hex");return h.fromDER(e)},h.parseSchnorrEncodedSig=function(t){let e,r=t.slice(0,32),i=t.slice(32,64);return 65===t.length&&(e=t.slice(64,65),this.nhashtype=e),{r:n.fromBuffer(r),s:n.fromBuffer(i),nhashtype:e}},h.parseDER=function(t,e){o.checkArgument(u.isBuffer(t),new Error("DER formatted signature should be a buffer")),s.isUndefined(e)&&(e=!0);var r=t[0];o.checkArgument(48===r,new Error("Header byte should be 0x30"));var i=t[1],a=t.slice(2).length;o.checkArgument(!e||i===a,new Error("Length byte should length of what follows")),i=i<a?i:a;var h=t[2];o.checkArgument(2===h,new Error("Integer byte for r should be 0x02"));var c=t[3],f=t.slice(4,4+c),p=n.fromBuffer(f),l=0===t[4];o.checkArgument(c===f.length,new Error("Length of r incorrect"));var d=t[4+c+0];o.checkArgument(2===d,new Error("Integer byte for s should be 0x02"));var m=t[4+c+1],g=t.slice(4+c+2,4+c+2+m),y=n.fromBuffer(g),v=0===t[4+c+2+2];o.checkArgument(m===g.length,new Error("Length of s incorrect"));var _=4+c+2+m;return o.checkArgument(i===_-2,new Error("Length of signature incorrect")),{header:r,length:i,rheader:h,rlength:c,rneg:l,rbuf:f,r:p,sheader:d,slength:m,sneg:v,sbuf:g,s:y}},h.prototype.toCompact=function(t,e){if(t="number"==typeof t?t:this.i,e="boolean"==typeof e?e:this.compressed,0!==t&&1!==t&&2!==t&&3!==t)throw new Error("i must be equal to 0, 1, 2, or 3");var r=t+27+4;!1===e&&(r-=4);var n=i.from([r]),s=this.r.toBuffer({size:32}),o=this.s.toBuffer({size:32});return i.concat([n,s,o])},h.prototype.toBuffer=h.prototype.toDER=function(t){if("schnorr"===(t=t||"ecdsa")){let t=this.r.toBuffer({size:32}),e=this.s.toBuffer({size:32});return i.concat([t,e])}let e=this.r.toBuffer(),r=this.s.toBuffer();var n=!!(128&e[0]),s=!!(128&r[0]),o=n?i.concat([i.from([0]),e]):e,u=s?i.concat([i.from([0]),r]):r,a=o.length,h=u.length,c=2+a+2+h;return i.concat([i.from([48,c,2,a]),o,i.from([2,h]),u])},h.prototype.toString=function(){return this.toDER().toString("hex")},h.isTxDER=function(t){return h.isDER(t.slice(0,t.length-1))},h.isDER=function(t){if(t.length<8||t.length>72)return!1;if(48!=t[0])return!1;if(t[1]!=t.length-2)return!1;if(2!=t[2])return!1;var e=t[3];if(0==e)return!1;if(128&t[4])return!1;if(e>t.length-7)return!1;if(e>1&&0==t[4]&&!(128&t[5]))return!1;var r=e+4;if(2!=t[r])return!1;var i=t[r+1];return 0!=i&&(!(128&t[r+2])&&(r+i+2==t.length&&!(i>1&&0==t[r+2]&&!(128&t[r+3]))))},h.prototype.hasLowS=function(){return!this.s.lt(new n(1))&&!this.s.gt(new n("7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0","hex"))},h.prototype.hasDefinedHashtype=function(){if(!a.isNaturalNumber(this.nhashtype))return!1;var t=~(h.SIGHASH_FORKID|h.SIGHASH_ANYONECANPAY)>>>0,e=this.nhashtype&t;return!(e<h.SIGHASH_ALL||e>h.SIGHASH_SINGLE)},h.prototype.toTxFormat=function(t){var e=this.toDER(t),r=i.alloc(1);return r.writeUInt8(this.nhashtype,0),i.concat([e,r])},h.SIGHASH_ALL=1,h.SIGHASH_NONE=2,h.SIGHASH_SINGLE=3,h.SIGHASH_FORKID=64,h.SIGHASH_ANYONECANPAY=128,t.exports=h},575974:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(939216),o=r(901048),u="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz".split(""),a=function Base58(t){if(!(this instanceof Base58))return new Base58(t);if(i.isBuffer(t)){var e=t;this.fromBuffer(e)}else if("string"==typeof t){var r=t;this.fromString(r)}else t&&this.set(t)};a.validCharacters=function validCharacters(t){return o.Buffer.isBuffer(t)&&(t=t.toString()),n.every(n.map(t,(function(t){return n.includes(u,t)})))},a.prototype.set=function(t){return this.buf=t.buf||this.buf||void 0,this},a.encode=function(t){if(!o.Buffer.isBuffer(t))throw new Error("Input should be a buffer");return s.encode(t)},a.decode=function(t){if("string"!=typeof t)throw new Error("Input should be a string");return i.from(s.decode(t))},a.prototype.fromBuffer=function(t){return this.buf=t,this},a.prototype.fromString=function(t){var e=a.decode(t);return this.buf=e,this},a.prototype.toBuffer=function(){return this.buf},a.prototype.toString=function(){return a.encode(this.buf)},t.exports=a},771876:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(575974),o=(r(901048),r(901538).sha256sha256),u=function Base58Check(t){if(!(this instanceof Base58Check))return new Base58Check(t);if(i.isBuffer(t)){var e=t;this.fromBuffer(e)}else if("string"==typeof t){var r=t;this.fromString(r)}else t&&this.set(t)};u.prototype.set=function(t){return this.buf=t.buf||this.buf||void 0,this},u.validChecksum=function validChecksum(t,e){return n.isString(t)&&(t=i.from(s.decode(t))),n.isString(e)&&(e=i.from(s.decode(e))),e||(e=t.slice(-4),t=t.slice(0,-4)),u.checksum(t).toString("hex")===e.toString("hex")},u.decode=function(t){if("string"!=typeof t)throw new Error("Input must be a string");var e=i.from(s.decode(t));if(e.length<4)throw new Error("Input string too short");var r=e.slice(0,-4),n=e.slice(-4),u=o(r).slice(0,4);if(n.toString("hex")!==u.toString("hex"))throw new Error("Checksum mismatch");return r},u.checksum=function(t){return o(t).slice(0,4)},u.encode=function(t){if(!i.isBuffer(t))throw new Error("Input must be a buffer");var e=i.alloc(t.length+4),r=u.checksum(t);return t.copy(e),r.copy(e,t.length),s.encode(e)},u.prototype.fromBuffer=function(t){return this.buf=t,this},u.prototype.fromString=function(t){var e=u.decode(t);return this.buf=e,this},u.prototype.toBuffer=function(){return this.buf},u.prototype.toString=function(){return u.encode(this.buf)},t.exports=u},855723:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(545334),o=r(205323),u=r(399066),a=function BufferReader(t){if(!(this instanceof BufferReader))return new BufferReader(t);if(!n.isUndefined(t))if(i.isBuffer(t))this.set({buf:t});else if(n.isString(t)){var e=i.from(t,"hex");if(2*e.length!=t.length)throw new TypeError("Invalid hex string");this.set({buf:e})}else{if(!n.isObject(t))throw new TypeError("Unrecognized argument for BufferReader");var r=t;this.set(r)}};a.prototype.set=function(t){return this.buf=t.buf||this.buf||void 0,this.pos=t.pos||this.pos||0,this},a.prototype.eof=function(){return this.pos>=this.buf.length},a.prototype.finished=a.prototype.eof,a.prototype.read=function(t){s.checkArgument(!n.isUndefined(t),"Must specify a length");var e=this.buf.slice(this.pos,this.pos+t);return this.pos=this.pos+t,e},a.prototype.readAll=function(){var t=this.buf.slice(this.pos,this.buf.length);return this.pos=this.buf.length,t},a.prototype.readUInt8=function(){var t=this.buf.readUInt8(this.pos);return this.pos=this.pos+1,t},a.prototype.readUInt16BE=function(){var t=this.buf.readUInt16BE(this.pos);return this.pos=this.pos+2,t},a.prototype.readUInt16LE=function(){var t=this.buf.readUInt16LE(this.pos);return this.pos=this.pos+2,t},a.prototype.readUInt32BE=function(){var t=this.buf.readUInt32BE(this.pos);return this.pos=this.pos+4,t},a.prototype.readUInt32LE=function(){var t=this.buf.readUInt32LE(this.pos);return this.pos=this.pos+4,t},a.prototype.readInt32LE=function(){var t=this.buf.readInt32LE(this.pos);return this.pos=this.pos+4,t},a.prototype.readUInt64BEBN=function(){var t=this.buf.slice(this.pos,this.pos+8),e=u.fromBuffer(t);return this.pos=this.pos+8,e},a.prototype.readUInt64LEBN=function(){var t,e=this.buf.readUInt32LE(this.pos),r=4294967296*this.buf.readUInt32LE(this.pos+4)+e;if(r<=9007199254740991)t=new u(r);else{var i=Array.prototype.slice.call(this.buf,this.pos,this.pos+8);t=new u(i,10,"le")}return this.pos=this.pos+8,t},a.prototype.readVarintNum=function(){var t=this.readUInt8();switch(t){case 253:return this.readUInt16LE();case 254:return this.readUInt32LE();case 255:var e=this.readUInt64LEBN().toNumber();if(e<=Math.pow(2,53))return e;throw new Error("number too large to retain precision - use readVarintBN");default:return t}},a.prototype.readVarLengthBuffer=function(){var t=this.readVarintNum(),e=this.read(t);return s.checkState(e.length===t,"Invalid length while reading varlength buffer. Expected to read: "+t+" and read "+e.length),e},a.prototype.readVarintBuf=function(){switch(this.buf.readUInt8(this.pos)){case 253:return this.read(3);case 254:return this.read(5);case 255:return this.read(9);default:return this.read(1)}},a.prototype.readVarintBN=function(){var t=this.readUInt8();switch(t){case 253:return new u(this.readUInt16LE());case 254:return new u(this.readUInt32LE());case 255:return this.readUInt64LEBN();default:return new u(t)}},a.prototype.reverse=function(){for(var t=i.alloc(this.buf.length),e=0;e<t.length;e++)t[e]=this.buf[this.buf.length-1-e];return this.buf=t,this},a.prototype.readReverse=function(t){n.isUndefined(t)&&(t=this.buf.length);var e=this.buf.slice(this.pos,this.pos+t);return this.pos=this.pos+t,o.reverse(e)},t.exports=a},849371:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(205323),s=r(626093),o=function BufferWriter(t){if(!(this instanceof BufferWriter))return new BufferWriter(t);this.bufLen=0,t?this.set(t):this.bufs=[]};o.prototype.set=function(t){return this.bufs=t.bufs||this.bufs||[],this.bufLen=this.bufs.reduce((function(t,e){return t+e.length}),0),this},o.prototype.toBuffer=function(){return this.concat()},o.prototype.concat=function(){return i.concat(this.bufs,this.bufLen)},o.prototype.write=function(t){return s(n.isBuffer(t)),this.bufs.push(t),this.bufLen+=t.length,this},o.prototype.writeReverse=function(t){return s(n.isBuffer(t)),this.bufs.push(n.reverse(t)),this.bufLen+=t.length,this},o.prototype.writeUInt8=function(t){var e=i.alloc(1);return e.writeUInt8(t,0),this.write(e),this},o.prototype.writeUInt16BE=function(t){var e=i.alloc(2);return e.writeUInt16BE(t,0),this.write(e),this},o.prototype.writeUInt16LE=function(t){var e=i.alloc(2);return e.writeUInt16LE(t,0),this.write(e),this},o.prototype.writeUInt32BE=function(t){var e=i.alloc(4);return e.writeUInt32BE(t,0),this.write(e),this},o.prototype.writeInt32LE=function(t){var e=i.alloc(4);return e.writeInt32LE(t,0),this.write(e),this},o.prototype.writeUInt32LE=function(t){var e=i.alloc(4);return e.writeUInt32LE(t,0),this.write(e),this},o.prototype.writeUInt64BEBN=function(t){var e=t.toBuffer({size:8});return this.write(e),this},o.prototype.writeUInt64LEBN=function(t){var e=t.toBuffer({size:8});return this.writeReverse(e),this},o.prototype.writeVarintNum=function(t){var e=o.varintBufNum(t);return this.write(e),this},o.prototype.writeVarintBN=function(t){var e=o.varintBufBN(t);return this.write(e),this},o.varintBufNum=function(t){var e=void 0;return t<253?(e=i.alloc(1)).writeUInt8(t,0):t<65536?((e=i.alloc(3)).writeUInt8(253,0),e.writeUInt16LE(t,1)):t<4294967296?((e=i.alloc(5)).writeUInt8(254,0),e.writeUInt32LE(t,1)):((e=i.alloc(9)).writeUInt8(255,0),e.writeInt32LE(-1&t,1),e.writeUInt32LE(Math.floor(t/4294967296),5)),e},o.varintBufBN=function(t){var e=void 0,r=t.toNumber();if(r<253)(e=i.alloc(1)).writeUInt8(r,0);else if(r<65536)(e=i.alloc(3)).writeUInt8(253,0),e.writeUInt16LE(r,1);else if(r<4294967296)(e=i.alloc(5)).writeUInt8(254,0),e.writeUInt32LE(r,1);else{var n=new o;n.writeUInt8(255),n.writeUInt64LEBN(t);e=n.concat()}return e},t.exports=o},873292:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(849371),s=r(855723),o=r(399066),u=function Varint(t){if(!(this instanceof Varint))return new Varint(t);if(i.isBuffer(t))this.buf=t;else if("number"==typeof t){var e=t;this.fromNumber(e)}else if(t instanceof o){var r=t;this.fromBN(r)}else if(t){var n=t;this.set(n)}};u.prototype.set=function(t){return this.buf=t.buf||this.buf,this},u.prototype.fromString=function(t){return this.set({buf:i.from(t,"hex")}),this},u.prototype.toString=function(){return this.buf.toString("hex")},u.prototype.fromBuffer=function(t){return this.buf=t,this},u.prototype.fromBufferReader=function(t){return this.buf=t.readVarintBuf(),this},u.prototype.fromBN=function(t){return this.buf=n().writeVarintBN(t).concat(),this},u.prototype.fromNumber=function(t){return this.buf=n().writeVarintNum(t).concat(),this},u.prototype.toBuffer=function(){return this.buf},u.prototype.toBN=function(){return s(this.buf).readVarintBN()},u.prototype.toNumber=function(){return s(this.buf).readVarintNum()},t.exports=u},166938:(t,e,r)=>{"use strict";var i=r(645250);var traverseNode=function(t,e){var NodeError=function(){if(i.isString(e.message))this.message=function format(t,e){return t.replace("{0}",e[0]).replace("{1}",e[1]).replace("{2}",e[2])}(e.message,arguments);else{if(!i.isFunction(e.message))throw new Error("Invalid error definition for "+e.name);this.message=e.message.apply(null,arguments)}this.stack=this.message+"\n"+(new Error).stack};return(NodeError.prototype=Object.create(t.prototype)).name=t.prototype.name+e.name,t[e.name]=NodeError,e.errors&&childDefinitions(NodeError,e.errors),NodeError},childDefinitions=function(t,e){i.each(e,(function(e){traverseNode(t,e)}))},n={Error:function(){this.message="Internal error",this.stack=this.message+"\n"+(new Error).stack}};n.Error.prototype=Object.create(Error.prototype),n.Error.prototype.name="kaspacore.Error";var s,o=r(266859);s=n.Error,childDefinitions(s,o),t.exports=n.Error,t.exports.extend=function(t){return traverseNode(n.Error,t)}},266859:t=>{"use strict";t.exports=[{name:"InvalidB58Char",message:"Invalid Base58 character: {0} in {1}"},{name:"InvalidB58Checksum",message:"Invalid Base58 checksum for {0}"},{name:"InvalidNetwork",message:"Invalid version for network: got {0}"},{name:"InvalidState",message:"Invalid state: {0}"},{name:"NotImplemented",message:"Function {0} was not implemented yet"},{name:"InvalidNetworkArgument",message:'Invalid network: must be "livenet" or "testnet", got {0}'},{name:"InvalidArgument",message:function(){return"Invalid Argument"+(arguments[0]?": "+arguments[0]:"")+(arguments[1]?" Documentation: http://kaspacore.io/"+arguments[1]:"")}},{name:"AbstractMethodInvoked",message:"Abstract Method Invocation: {0}"},{name:"InvalidArgumentType",message:function(){return"Invalid Argument for "+arguments[2]+", expected "+arguments[1]+" but got "+typeof arguments[0]}},{name:"Unit",message:"Internal Error on Unit {0}",errors:[{name:"UnknownCode",message:"Unrecognized unit code: {0}"},{name:"InvalidRate",message:"Invalid exchange rate: {0}"}]},{name:"MerkleBlock",message:"Internal Error on MerkleBlock {0}",errors:[{name:"InvalidMerkleTree",message:"This MerkleBlock contain an invalid Merkle Tree"}]},{name:"Transaction",message:"Internal Error on Transaction {0}",errors:[{name:"Input",message:"Internal Error on Input {0}",errors:[{name:"MissingScript",message:"Need a script to create an input"},{name:"UnsupportedScript",message:"Unsupported input script type: {0}"},{name:"MissingPreviousOutput",message:"No previous output information."},{name:"BlockHeightOutOfRange",message:"Block Height can only be between 0 and 65535"},{name:"LockTimeRange",message:"Seconds needs to be more that 0 and less that 33553920"}]},{name:"NeedMoreInfo",message:"{0}"},{name:"InvalidSorting",message:"The sorting function provided did not return the change output as one of the array elements"},{name:"InvalidOutputAmountSum",message:"{0}"},{name:"MissingSignatures",message:"Some inputs have not been fully signed"},{name:"InvalidIndex",message:"Invalid index: {0} is not between 0, {1}"},{name:"UnableToVerifySignature",message:"Unable to verify signature: {0}"},{name:"DustOutputs",message:"Dust amount detected in one output"},{name:"InvalidSatoshis",message:"Output satoshis are invalid"},{name:"FeeError",message:"Internal Error on Fee {0}",errors:[{name:"TooSmall",message:"Fee is too small: {0}"},{name:"TooLarge",message:"Fee is too large: {0}"},{name:"Different",message:"Unspent value is different from specified fee: {0}"}]},{name:"ChangeAddressMissing",message:"Change address is missing"},{name:"BlockHeightTooHigh",message:"Block Height can be at most 2^32 -1"},{name:"NLockTimeOutOfRange",message:"Block Height can only be between 0 and 499 999 999"},{name:"LockTimeTooEarly",message:"Lock Time can't be earlier than UNIX date 500 000 000"}]},{name:"Script",message:"Internal Error on Script {0}",errors:[{name:"UnrecognizedAddress",message:"Expected argument {0} to be an address"},{name:"CantDeriveAddress",message:"Can't derive address associated with script {0}, needs to be p2pkh in, p2pkh out, p2sh in, or p2sh out."},{name:"InvalidBuffer",message:"Invalid script buffer: can't parse valid script from given buffer {0}"}]},{name:"HDPrivateKey",message:"Internal Error on HDPrivateKey {0}",errors:[{name:"InvalidDerivationArgument",message:"Invalid derivation argument {0}, expected string, or number and boolean"},{name:"InvalidEntropyArgument",message:"Invalid entropy: must be an hexa string or binary buffer, got {0}",errors:[{name:"TooMuchEntropy",message:'Invalid entropy: more than 512 bits is non standard, got "{0}"'},{name:"NotEnoughEntropy",message:'Invalid entropy: at least 128 bits needed, got "{0}"'}]},{name:"InvalidLength",message:"Invalid length for xprivkey string in {0}"},{name:"InvalidPath",message:"Invalid derivation path: {0}"},{name:"UnrecognizedArgument",message:'Invalid argument: creating a HDPrivateKey requires a string, buffer, json or object, got "{0}"'}]},{name:"HDPublicKey",message:"Internal Error on HDPublicKey {0}",errors:[{name:"ArgumentIsPrivateExtended",message:"Argument is an extended private key: {0}"},{name:"InvalidDerivationArgument",message:"Invalid derivation argument: got {0}"},{name:"InvalidLength",message:'Invalid length for xpubkey: got "{0}"'},{name:"InvalidPath",message:'Invalid derivation path, it should look like: "m/1/100", got "{0}"'},{name:"InvalidIndexCantDeriveHardened",message:"Invalid argument: creating a hardened path requires an HDPrivateKey"},{name:"MustSupplyArgument",message:"Must supply an argument to create a HDPublicKey"},{name:"UnrecognizedArgument",message:"Invalid argument for creation, must be string, json, buffer, or object"}]}]},594932:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(626093),s=r(901048),o=r(645250),u=r(545334),a=r(399066),h=r(575974),c=r(771876),f=r(901538),p=r(827069),l=r(817650),d=r(727184),m=r(372589),g=r(166938),y=g.HDPrivateKey,v=r(205323),_=r(833698);function HDPrivateKey(t){if(t instanceof HDPrivateKey)return t;if(!(this instanceof HDPrivateKey))return new HDPrivateKey(t);if(!t)return this._generateRandomly();if(p.get(t))return this._generateRandomly(t);if(o.isString(t)||v.isBuffer(t))if(HDPrivateKey.isValidSerialized(t))this._buildFromSerialized(t);else if(_.isValidJSON(t))this._buildFromJSON(t);else{if(!v.isBuffer(t)||!HDPrivateKey.isValidSerialized(t.toString()))throw HDPrivateKey.getSerializedError(t);this._buildFromSerialized(t.toString())}else{if(!o.isObject(t))throw new y.UnrecognizedArgument(t);this._buildFromObject(t)}}HDPrivateKey.isValidPath=function(t,e){if(o.isString(t)){var r=HDPrivateKey._getDerivationIndexes(t);return null!==r&&o.every(r,HDPrivateKey.isValidPath)}return!!o.isNumber(t)&&(t<HDPrivateKey.Hardened&&!0===e&&(t+=HDPrivateKey.Hardened),t>=0&&t<HDPrivateKey.MaxIndex)},HDPrivateKey._getDerivationIndexes=function(t){var e=t.split("/");if(o.includes(HDPrivateKey.RootElementAlias,t))return[];if(!o.includes(HDPrivateKey.RootElementAlias,e[0]))return null;var r=e.slice(1).map((function(t){var e="'"===t.slice(-1);if(e&&(t=t.slice(0,-1)),!t||"-"===t[0])return NaN;var r=+t;return e&&(r+=HDPrivateKey.Hardened),r}));return o.some(r,isNaN)?null:r},HDPrivateKey.prototype.derive=function(t,e){return this.deriveNonCompliantChild(t,e)},HDPrivateKey.prototype.deriveChild=function(t,e){if(o.isNumber(t))return this._deriveWithNumber(t,e);if(o.isString(t))return this._deriveFromString(t);throw new y.InvalidDerivationArgument(t)},HDPrivateKey.prototype.deriveNonCompliantChild=function(t,e){if(o.isNumber(t))return this._deriveWithNumber(t,e,!0);if(o.isString(t))return this._deriveFromString(t,!0);throw new y.InvalidDerivationArgument(t)},HDPrivateKey.prototype._deriveWithNumber=function(t,e,r){if(!HDPrivateKey.isValidPath(t,e))throw new y.InvalidPath(t);e=t>=HDPrivateKey.Hardened||e,t<HDPrivateKey.Hardened&&!0===e&&(t+=HDPrivateKey.Hardened);var s,o=v.integerAsBuffer(t);if(e&&r){var u=this.privateKey.bn.toBuffer();s=v.concat([i.from([0]),u,o])}else if(e){var h=this.privateKey.bn.toBuffer({size:32});n(32===h.length,"length of private key buffer is expected to be 32 bytes"),s=v.concat([i.from([0]),h,o])}else s=v.concat([this.publicKey.toBuffer(),o]);var c=f.sha512hmac(s,this._buffers.chainCode),p=a.fromBuffer(c.slice(0,32),{size:32}),m=c.slice(32,64),g=p.add(this.privateKey.toBigNumber()).umod(l.getN()).toBuffer({size:32});return d.isValid(g)?new HDPrivateKey({network:this.network,depth:this.depth+1,parentFingerPrint:this.fingerPrint,childIndex:t,chainCode:m,privateKey:g}):this._deriveWithNumber(t+1,null,r)},HDPrivateKey.prototype._deriveFromString=function(t,e){if(!HDPrivateKey.isValidPath(t))throw new y.InvalidPath(t);return HDPrivateKey._getDerivationIndexes(t).reduce((function(t,r){return t._deriveWithNumber(r,null,e)}),this)},HDPrivateKey.isValidSerialized=function(t,e){return!HDPrivateKey.getSerializedError(t,e)},HDPrivateKey.getSerializedError=function(t,e){if(!o.isString(t)&&!v.isBuffer(t))return new y.UnrecognizedArgument("Expected string or buffer");if(!h.validCharacters(t))return new g.InvalidB58Char("(unknown)",t);try{t=c.decode(t)}catch(e){return new g.InvalidB58Checksum(t)}if(t.length!==HDPrivateKey.DataLength)return new y.InvalidLength(t);if(!o.isUndefined(e)){var r=HDPrivateKey._validateNetwork(t,e);if(r)return r}return null},HDPrivateKey._validateNetwork=function(t,e){var r=p.get(e);if(!r)return new g.InvalidNetworkArgument(e);var i=t.slice(0,4);return v.integerFromBuffer(i)!==r.xprivkey?new g.InvalidNetwork(i):null},HDPrivateKey.fromString=function(t){return u.checkArgument(o.isString(t),"No valid string was provided"),new HDPrivateKey(t)},HDPrivateKey.fromObject=function(t){return u.checkArgument(o.isObject(t),"No valid argument was provided"),new HDPrivateKey(t)},HDPrivateKey.prototype._buildFromJSON=function(t){return this._buildFromObject(JSON.parse(t))},HDPrivateKey.prototype._buildFromObject=function(t){var e={version:t.network?v.integerAsBuffer(p.get(t.network).xprivkey):t.version,depth:o.isNumber(t.depth)?v.integerAsSingleByteBuffer(t.depth):t.depth,parentFingerPrint:o.isNumber(t.parentFingerPrint)?v.integerAsBuffer(t.parentFingerPrint):t.parentFingerPrint,childIndex:o.isNumber(t.childIndex)?v.integerAsBuffer(t.childIndex):t.childIndex,chainCode:o.isString(t.chainCode)?i.from(t.chainCode,"hex"):t.chainCode,privateKey:o.isString(t.privateKey)&&_.isHexa(t.privateKey)?i.from(t.privateKey,"hex"):t.privateKey,checksum:t.checksum?t.checksum.length?t.checksum:v.integerAsBuffer(t.checksum):void 0};return this._buildFromBuffers(e)},HDPrivateKey.prototype._buildFromSerialized=function(t){var e=c.decode(t),r={version:e.slice(HDPrivateKey.VersionStart,HDPrivateKey.VersionEnd),depth:e.slice(HDPrivateKey.DepthStart,HDPrivateKey.DepthEnd),parentFingerPrint:e.slice(HDPrivateKey.ParentFingerPrintStart,HDPrivateKey.ParentFingerPrintEnd),childIndex:e.slice(HDPrivateKey.ChildIndexStart,HDPrivateKey.ChildIndexEnd),chainCode:e.slice(HDPrivateKey.ChainCodeStart,HDPrivateKey.ChainCodeEnd),privateKey:e.slice(HDPrivateKey.PrivateKeyStart,HDPrivateKey.PrivateKeyEnd),checksum:e.slice(HDPrivateKey.ChecksumStart,HDPrivateKey.ChecksumEnd),xprivkey:t};return this._buildFromBuffers(r)},HDPrivateKey.prototype._generateRandomly=function(t){return HDPrivateKey.fromSeed(m.getRandomBuffer(64),t)},HDPrivateKey.fromSeed=function(t,e){if(_.isHexaString(t)&&(t=i.from(t,"hex")),!i.isBuffer(t))throw new y.InvalidEntropyArgument(t);if(t.length<16)throw new y.InvalidEntropyArgument.NotEnoughEntropy(t);if(t.length>64)throw new y.InvalidEntropyArgument.TooMuchEntropy(t);var r=f.sha512hmac(t,i.from("Bitcoin seed"));return new HDPrivateKey({network:p.get(e)||p.defaultNetwork,depth:0,parentFingerPrint:0,childIndex:0,privateKey:r.slice(0,32),chainCode:r.slice(32,64)})},HDPrivateKey.prototype._calcHDPublicKey=function(){if(!this._hdPublicKey){var t=r(561984);this._hdPublicKey=new t(this)}},HDPrivateKey.prototype._buildFromBuffers=function(t){HDPrivateKey._validateBufferArguments(t),_.defineImmutable(this,{_buffers:t});var e=[t.version,t.depth,t.parentFingerPrint,t.childIndex,t.chainCode,v.emptyBuffer(1),t.privateKey],r=s.Buffer.concat(e);if(t.checksum&&t.checksum.length){if(t.checksum.toString()!==c.checksum(r).toString())throw new g.InvalidB58Checksum(r)}else t.checksum=c.checksum(r);var n,o=p.get(v.integerFromBuffer(t.version));n=c.encode(s.Buffer.concat(e)),t.xprivkey=i.from(n);var u=new d(a.fromBuffer(t.privateKey),o),h=u.toPublicKey(),l=HDPrivateKey.ParentFingerPrintSize,m=f.sha256ripemd160(h.toBuffer()).slice(0,l);return _.defineImmutable(this,{xprivkey:n,network:o,depth:v.integerFromSingleByteBuffer(t.depth),privateKey:u,publicKey:h,fingerPrint:m}),this._hdPublicKey=null,Object.defineProperty(this,"hdPublicKey",{configurable:!1,enumerable:!0,get:function(){return this._calcHDPublicKey(),this._hdPublicKey}}),Object.defineProperty(this,"xpubkey",{configurable:!1,enumerable:!0,get:function(){return this._calcHDPublicKey(),this._hdPublicKey.xpubkey}}),this},HDPrivateKey._validateBufferArguments=function(t){var checkBuffer=function(e,r){var i=t[e];n(v.isBuffer(i),e+" argument is not a buffer"),n(i.length===r,e+" has not the expected size: found "+i.length+", expected "+r)};checkBuffer("version",HDPrivateKey.VersionSize),checkBuffer("depth",HDPrivateKey.DepthSize),checkBuffer("parentFingerPrint",HDPrivateKey.ParentFingerPrintSize),checkBuffer("childIndex",HDPrivateKey.ChildIndexSize),checkBuffer("chainCode",HDPrivateKey.ChainCodeSize),checkBuffer("privateKey",HDPrivateKey.PrivateKeySize),t.checksum&&t.checksum.length&&checkBuffer("checksum",HDPrivateKey.CheckSumSize)},HDPrivateKey.prototype.toString=function(){return this.xprivkey},HDPrivateKey.prototype.inspect=function(){return"<HDPrivateKey: "+this.xprivkey+">"},HDPrivateKey.prototype.toObject=HDPrivateKey.prototype.toJSON=function toObject(){return{network:p.get(v.integerFromBuffer(this._buffers.version),"xprivkey").name,depth:v.integerFromSingleByteBuffer(this._buffers.depth),fingerPrint:v.integerFromBuffer(this.fingerPrint),parentFingerPrint:v.integerFromBuffer(this._buffers.parentFingerPrint),childIndex:v.integerFromBuffer(this._buffers.childIndex),chainCode:this._buffers.chainCode.toString("hex"),privateKey:this.privateKey.toBuffer().toString("hex"),checksum:v.integerFromBuffer(this._buffers.checksum),xprivkey:this.xprivkey}},HDPrivateKey.fromBuffer=function(t){return new HDPrivateKey(t.toString())},HDPrivateKey.prototype.toBuffer=function(){return v.copy(this._buffers.xprivkey)},HDPrivateKey.DefaultDepth=0,HDPrivateKey.DefaultFingerprint=0,HDPrivateKey.DefaultChildIndex=0,HDPrivateKey.Hardened=2147483648,HDPrivateKey.MaxIndex=2*HDPrivateKey.Hardened,HDPrivateKey.RootElementAlias=["m","M","m'","M'"],HDPrivateKey.VersionSize=4,HDPrivateKey.DepthSize=1,HDPrivateKey.ParentFingerPrintSize=4,HDPrivateKey.ChildIndexSize=4,HDPrivateKey.ChainCodeSize=32,HDPrivateKey.PrivateKeySize=32,HDPrivateKey.CheckSumSize=4,HDPrivateKey.DataLength=78,HDPrivateKey.SerializedByteSize=82,HDPrivateKey.VersionStart=0,HDPrivateKey.VersionEnd=HDPrivateKey.VersionStart+HDPrivateKey.VersionSize,HDPrivateKey.DepthStart=HDPrivateKey.VersionEnd,HDPrivateKey.DepthEnd=HDPrivateKey.DepthStart+HDPrivateKey.DepthSize,HDPrivateKey.ParentFingerPrintStart=HDPrivateKey.DepthEnd,HDPrivateKey.ParentFingerPrintEnd=HDPrivateKey.ParentFingerPrintStart+HDPrivateKey.ParentFingerPrintSize,HDPrivateKey.ChildIndexStart=HDPrivateKey.ParentFingerPrintEnd,HDPrivateKey.ChildIndexEnd=HDPrivateKey.ChildIndexStart+HDPrivateKey.ChildIndexSize,HDPrivateKey.ChainCodeStart=HDPrivateKey.ChildIndexEnd,HDPrivateKey.ChainCodeEnd=HDPrivateKey.ChainCodeStart+HDPrivateKey.ChainCodeSize,HDPrivateKey.PrivateKeyStart=HDPrivateKey.ChainCodeEnd+1,HDPrivateKey.PrivateKeyEnd=HDPrivateKey.PrivateKeyStart+HDPrivateKey.PrivateKeySize,HDPrivateKey.ChecksumStart=HDPrivateKey.PrivateKeyEnd,HDPrivateKey.ChecksumEnd=HDPrivateKey.ChecksumStart+HDPrivateKey.CheckSumSize,n(HDPrivateKey.ChecksumEnd===HDPrivateKey.SerializedByteSize),t.exports=HDPrivateKey},561984:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(545334),o=r(399066),u=r(575974),a=r(771876),h=r(901538),c=r(594932),f=r(827069),p=r(817650),l=r(342460),d=r(166938),m=d,g=d.HDPublicKey,y=r(626093),v=r(833698),_=r(205323);function HDPublicKey(t){if(t instanceof HDPublicKey)return t;if(!(this instanceof HDPublicKey))return new HDPublicKey(t);if(t){if(n.isString(t)||_.isBuffer(t)){var e=HDPublicKey.getSerializedError(t);if(e){if(_.isBuffer(t)&&!HDPublicKey.getSerializedError(t.toString()))return this._buildFromSerialized(t.toString());if(e instanceof g.ArgumentIsPrivateExtended)return new c(t).hdPublicKey;throw e}return this._buildFromSerialized(t)}if(n.isObject(t))return t instanceof c?this._buildFromPrivate(t):this._buildFromObject(t);throw new g.UnrecognizedArgument(t)}throw new g.MustSupplyArgument}HDPublicKey.isValidPath=function(t){if(n.isString(t)){var e=c._getDerivationIndexes(t);return null!==e&&n.every(e,HDPublicKey.isValidPath)}return!!n.isNumber(t)&&(t>=0&&t<HDPublicKey.Hardened)},HDPublicKey.prototype.derive=function(t,e){return this.deriveChild(t,e)},HDPublicKey.prototype.deriveChild=function(t,e){if(n.isNumber(t))return this._deriveWithNumber(t,e);if(n.isString(t))return this._deriveFromString(t);throw new g.InvalidDerivationArgument(t)},HDPublicKey.prototype._deriveWithNumber=function(t,e){if(t>=HDPublicKey.Hardened||e)throw new g.InvalidIndexCantDeriveHardened;if(t<0)throw new g.InvalidPath(t);var r,i=_.integerAsBuffer(t),n=_.concat([this.publicKey.toBuffer(),i]),s=h.sha512hmac(n,this._buffers.chainCode),u=o.fromBuffer(s.slice(0,32),{size:32}),a=s.slice(32,64);try{r=l.fromPoint(p.getG().mul(u).add(this.publicKey.point))}catch(e){return this._deriveWithNumber(t+1)}return new HDPublicKey({network:this.network,depth:this.depth+1,parentFingerPrint:this.fingerPrint,childIndex:t,chainCode:a,publicKey:r})},HDPublicKey.prototype._deriveFromString=function(t){if(n.includes(t,"'"))throw new g.InvalidIndexCantDeriveHardened;if(!HDPublicKey.isValidPath(t))throw new g.InvalidPath(t);return c._getDerivationIndexes(t).reduce((function(t,e){return t._deriveWithNumber(e)}),this)},HDPublicKey.isValidSerialized=function(t,e){return n.isNull(HDPublicKey.getSerializedError(t,e))},HDPublicKey.getSerializedError=function(t,e){if(!n.isString(t)&&!_.isBuffer(t))return new g.UnrecognizedArgument("expected buffer or string");if(!u.validCharacters(t))return new m.InvalidB58Char("(unknown)",t);try{t=a.decode(t)}catch(e){return new m.InvalidB58Checksum(t)}if(t.length!==HDPublicKey.DataSize)return new g.InvalidLength(t);if(!n.isUndefined(e)){var r=HDPublicKey._validateNetwork(t,e);if(r)return r}var i=_.integerFromBuffer(t.slice(0,4));return i===f.livenet.xprivkey||i===f.testnet.xprivkey?new g.ArgumentIsPrivateExtended:null},HDPublicKey._validateNetwork=function(t,e){var r=f.get(e);if(!r)return new m.InvalidNetworkArgument(e);var i=t.slice(HDPublicKey.VersionStart,HDPublicKey.VersionEnd);return _.integerFromBuffer(i)!==r.xpubkey?new m.InvalidNetwork(i):null},HDPublicKey.prototype._buildFromPrivate=function(t){var e=n.clone(t._buffers),r=p.getG().mul(o.fromBuffer(e.privateKey));return e.publicKey=p.pointToCompressed(r),e.version=_.integerAsBuffer(f.get(_.integerFromBuffer(e.version)).xpubkey),e.privateKey=void 0,e.checksum=void 0,e.xprivkey=void 0,this._buildFromBuffers(e)},HDPublicKey.prototype._buildFromObject=function(t){var e={version:t.network?_.integerAsBuffer(f.get(t.network).xpubkey):t.version,depth:n.isNumber(t.depth)?_.integerAsSingleByteBuffer(t.depth):t.depth,parentFingerPrint:n.isNumber(t.parentFingerPrint)?_.integerAsBuffer(t.parentFingerPrint):t.parentFingerPrint,childIndex:n.isNumber(t.childIndex)?_.integerAsBuffer(t.childIndex):t.childIndex,chainCode:n.isString(t.chainCode)?i.from(t.chainCode,"hex"):t.chainCode,publicKey:n.isString(t.publicKey)?i.from(t.publicKey,"hex"):_.isBuffer(t.publicKey)?t.publicKey:t.publicKey.toBuffer(),checksum:n.isNumber(t.checksum)?_.integerAsBuffer(t.checksum):t.checksum};return this._buildFromBuffers(e)},HDPublicKey.prototype._buildFromSerialized=function(t){var e=a.decode(t),r={version:e.slice(HDPublicKey.VersionStart,HDPublicKey.VersionEnd),depth:e.slice(HDPublicKey.DepthStart,HDPublicKey.DepthEnd),parentFingerPrint:e.slice(HDPublicKey.ParentFingerPrintStart,HDPublicKey.ParentFingerPrintEnd),childIndex:e.slice(HDPublicKey.ChildIndexStart,HDPublicKey.ChildIndexEnd),chainCode:e.slice(HDPublicKey.ChainCodeStart,HDPublicKey.ChainCodeEnd),publicKey:e.slice(HDPublicKey.PublicKeyStart,HDPublicKey.PublicKeyEnd),checksum:e.slice(HDPublicKey.ChecksumStart,HDPublicKey.ChecksumEnd),xpubkey:t};return this._buildFromBuffers(r)},HDPublicKey.prototype._buildFromBuffers=function(t){HDPublicKey._validateBufferArguments(t),v.defineImmutable(this,{_buffers:t});var e=[t.version,t.depth,t.parentFingerPrint,t.childIndex,t.chainCode,t.publicKey],r=_.concat(e),n=a.checksum(r);if(t.checksum&&t.checksum.length){if(t.checksum.toString("hex")!==n.toString("hex"))throw new m.InvalidB58Checksum(r,n)}else t.checksum=n;var s,o=f.get(_.integerFromBuffer(t.version));s=a.encode(_.concat(e)),t.xpubkey=i.from(s);var u=new l(t.publicKey,{network:o}),c=HDPublicKey.ParentFingerPrintSize,p=h.sha256ripemd160(u.toBuffer()).slice(0,c);return v.defineImmutable(this,{xpubkey:s,network:o,depth:_.integerFromSingleByteBuffer(t.depth),publicKey:u,fingerPrint:p}),this},HDPublicKey._validateBufferArguments=function(t){var checkBuffer=function(e,r){var i=t[e];y(_.isBuffer(i),e+" argument is not a buffer, it's "+typeof i),y(i.length===r,e+" has not the expected size: found "+i.length+", expected "+r)};checkBuffer("version",HDPublicKey.VersionSize),checkBuffer("depth",HDPublicKey.DepthSize),checkBuffer("parentFingerPrint",HDPublicKey.ParentFingerPrintSize),checkBuffer("childIndex",HDPublicKey.ChildIndexSize),checkBuffer("chainCode",HDPublicKey.ChainCodeSize),checkBuffer("publicKey",HDPublicKey.PublicKeySize),t.checksum&&t.checksum.length&&checkBuffer("checksum",HDPublicKey.CheckSumSize)},HDPublicKey.fromString=function(t){return s.checkArgument(n.isString(t),"No valid string was provided"),new HDPublicKey(t)},HDPublicKey.fromObject=function(t){return s.checkArgument(n.isObject(t),"No valid argument was provided"),new HDPublicKey(t)},HDPublicKey.prototype.toString=function(){return this.xpubkey},HDPublicKey.prototype.inspect=function(){return"<HDPublicKey: "+this.xpubkey+">"},HDPublicKey.prototype.toObject=HDPublicKey.prototype.toJSON=function toObject(){return{network:f.get(_.integerFromBuffer(this._buffers.version)).name,depth:_.integerFromSingleByteBuffer(this._buffers.depth),fingerPrint:_.integerFromBuffer(this.fingerPrint),parentFingerPrint:_.integerFromBuffer(this._buffers.parentFingerPrint),childIndex:_.integerFromBuffer(this._buffers.childIndex),chainCode:i.from(this._buffers.chainCode,"hex"),publicKey:this.publicKey.toString(),checksum:_.integerFromBuffer(this._buffers.checksum),xpubkey:this.xpubkey}},HDPublicKey.fromBuffer=function(t){return new HDPublicKey(t)},HDPublicKey.prototype.toBuffer=function(){return _.copy(this._buffers.xpubkey)},HDPublicKey.Hardened=2147483648,HDPublicKey.RootElementAlias=["m","M"],HDPublicKey.VersionSize=4,HDPublicKey.DepthSize=1,HDPublicKey.ParentFingerPrintSize=4,HDPublicKey.ChildIndexSize=4,HDPublicKey.ChainCodeSize=32,HDPublicKey.PublicKeySize=33,HDPublicKey.CheckSumSize=4,HDPublicKey.DataSize=78,HDPublicKey.SerializedByteSize=82,HDPublicKey.VersionStart=0,HDPublicKey.VersionEnd=HDPublicKey.VersionStart+HDPublicKey.VersionSize,HDPublicKey.DepthStart=HDPublicKey.VersionEnd,HDPublicKey.DepthEnd=HDPublicKey.DepthStart+HDPublicKey.DepthSize,HDPublicKey.ParentFingerPrintStart=HDPublicKey.DepthEnd,HDPublicKey.ParentFingerPrintEnd=HDPublicKey.ParentFingerPrintStart+HDPublicKey.ParentFingerPrintSize,HDPublicKey.ChildIndexStart=HDPublicKey.ParentFingerPrintEnd,HDPublicKey.ChildIndexEnd=HDPublicKey.ChildIndexStart+HDPublicKey.ChildIndexSize,HDPublicKey.ChainCodeStart=HDPublicKey.ChildIndexEnd,HDPublicKey.ChainCodeEnd=HDPublicKey.ChainCodeStart+HDPublicKey.ChainCodeSize,HDPublicKey.PublicKeyStart=HDPublicKey.ChainCodeEnd,HDPublicKey.PublicKeyEnd=HDPublicKey.PublicKeyStart+HDPublicKey.PublicKeySize,HDPublicKey.ChecksumStart=HDPublicKey.PublicKeyEnd,HDPublicKey.ChecksumEnd=HDPublicKey.ChecksumStart+HDPublicKey.CheckSumSize,y(HDPublicKey.PublicKeyEnd===HDPublicKey.DataSize),y(HDPublicKey.ChecksumEnd===HDPublicKey.SerializedByteSize),t.exports=HDPublicKey},827069:(t,e,r)=>{"use strict";var i=r(645250),n=r(205323),s=r(833698),o=[],u={};function Network(){}function get(t,e){if(~o.indexOf(t))return t;if(!e)return u[t];i.isArray(e)||(e=[e]);for(var r=0;r<o.length;r++){var n=o[r],s=i.pick(n,e);if(~i.values(s).indexOf(t))return n}}function prefixToArray(t){for(var e=[],r=0;r<t.length;r++)e.push(31&t.charCodeAt(r));return e}function addNetwork(t){var e=new Network;s.defineImmutable(e,{name:t.name,alias:t.alias,pubkeyhash:t.pubkeyhash,privatekey:t.privatekey,scripthash:t.scripthash,xpubkey:t.xpubkey,xprivkey:t.xprivkey});var r=t.indexBy||Object.keys(t);return t.prefix&&i.extend(e,{prefix:t.prefix,prefixArray:prefixToArray(t.prefix)}),t.networkMagic&&i.extend(e,{networkMagic:n.integerAsBuffer(t.networkMagic)}),t.port&&i.extend(e,{port:t.port}),t.dnsSeeds&&i.extend(e,{dnsSeeds:t.dnsSeeds}),o.push(e),function indexNetworkBy(t,e){for(var r=0;r<e.length;r++){var n=t[e[r]];i.isUndefined(n)||i.isObject(n)||(u[n]=t)}}(e,r),e}Network.prototype.toString=function toString(){return this.name};var a=["seed.bitcoinabc.org","seed-abc.bitcoinforks.org","btccash-seeder.bitcoinunlimited.info","seeder.jasonbcox.com","seed.deadalnix.me","seed.bchd.cash"],h={name:"livenet",alias:"mainnet",prefix:"bitcoincash",pubkeyhash:28,privatekey:128,scripthash:40,xpubkey:76067358,xprivkey:76066276,networkMagic:3823236072,port:8333,dnsSeeds:a};addNetwork({name:"testnet",prefix:"bchtest",pubkeyhash:111,privatekey:239,scripthash:196,xpubkey:70617039,xprivkey:70615956,networkMagic:4108710900,port:18333,dnsSeeds:a}),addNetwork({name:"regtest",prefix:"bchreg",pubkeyhash:111,privatekey:239,scripthash:196,xpubkey:70617039,xprivkey:70615956,networkMagic:3669344250,port:18444,dnsSeeds:[],indexBy:["port","name","prefix","networkMagic"]}),addNetwork(h);var c=get("livenet"),f=get("regtest"),p=get("testnet");["kaspa","kaspadev","kaspareg","kaspatest","kaspasim"].map((t=>{addNetwork({name:t,prefix:t,pubkeyhash:0,privatekey:128,scripthash:5,xpubkey:76067358,xprivkey:76066276,networkMagic:3669344250})})),t.exports={add:addNetwork,remove:function removeNetwork(t){for(var e=0;e<o.length;e++)o[e]===t&&o.splice(e,1);!function unindexNetworkBy(t,e){for(var r=0;r<e.length;r++){var i=e[r];u[i]===t&&delete u[i]}}(t,Object.keys(u))},defaultNetwork:c,livenet:c,mainnet:c,testnet:p,regtest:f,get,enableRegtest:function enableRegtest(){p.regtestEnabled=!0},disableRegtest:function disableRegtest(){p.regtestEnabled=!1}}},663492:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(545334),o=r(205323),u=r(833698);function Opcode(t){if(!(this instanceof Opcode))return new Opcode(t);var e;if(n.isNumber(t))e=t;else{if(!n.isString(t))throw new TypeError('Unrecognized num type: "'+typeof t+'" for Opcode');e=Opcode.map[t]}return u.defineImmutable(this,{num:e}),this}for(var a in Opcode.fromBuffer=function(t){return s.checkArgument(o.isBuffer(t)),new Opcode(Number("0x"+t.toString("hex")))},Opcode.fromNumber=function(t){return s.checkArgument(n.isNumber(t)),new Opcode(t)},Opcode.fromString=function(t){s.checkArgument(n.isString(t));var e=Opcode.map[t];if(void 0===e)throw new TypeError("Invalid opcodestr");return new Opcode(e)},Opcode.prototype.toHex=function(){return this.num.toString(16)},Opcode.prototype.toBuffer=function(){return i.from(this.toHex(),"hex")},Opcode.prototype.toNumber=function(){return this.num},Opcode.prototype.toString=function(){var t=Opcode.reverseMap[this.num];if(void 0===t)throw new Error("Opcode does not have a string representation");return t},Opcode.smallInt=function(t){return s.checkArgument(n.isNumber(t),"Invalid Argument: n should be number"),s.checkArgument(t>=0&&t<=16,"Invalid Argument: n must be between 0 and 16"),0===t?Opcode("OP_0"):new Opcode(Opcode.map.OP_1+t-1)},Opcode.map={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SPLIT:127,OP_NUM2BIN:128,OP_BIN2NUM:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_BLAKE2B:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP1:176,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKDATASIG:186,OP_CHECKDATASIGVERIFY:187,OP_REVERSEBYTES:188,OP_PREFIX_BEGIN:240,OP_PREFIX_END:241,OP_SMALLINTEGER:250,OP_PUBKEYS:251,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255},Opcode.reverseMap=[],Opcode.map)Opcode.reverseMap[Opcode.map[a]]=a;n.extend(Opcode,Opcode.map),Opcode.isSmallIntOp=function(t){return t instanceof Opcode&&(t=t.toNumber()),t===Opcode.map.OP_0||t>=Opcode.map.OP_1&&t<=Opcode.map.OP_16},Opcode.prototype.inspect=function(){return"<Opcode: "+this.toString()+", hex: "+this.toHex()+", decimal: "+this.num+">"},t.exports=Opcode},727184:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(958616),o=r(771876),u=r(399066),a=r(833698),h=r(827069),c=r(817650),f=r(342460),p=r(372589),l=r(545334);const d=r(374261);function PrivateKey(t,e){if(!(this instanceof PrivateKey))return new PrivateKey(t,e);if(t instanceof PrivateKey)return t;var r=this._classifyArguments(t,e);if(!r.bn||0===r.bn.cmp(new u(0)))throw new TypeError("Number can not be equal to zero, undefined, null or false");if(!r.bn.lt(c.getN()))throw new TypeError("Number must be less than N");if(void 0===r.network)throw new TypeError('Must specify the network ("livenet" or "testnet")');return a.defineImmutable(this,{bn:r.bn,compressed:r.compressed,network:r.network}),Object.defineProperty(this,"publicKey",{configurable:!1,enumerable:!0,get:this.toPublicKey.bind(this)}),this}PrivateKey.prototype._classifyArguments=function(t,e){var r={compressed:!0,network:e?h.get(e):h.defaultNetwork};if(n.isUndefined(t)||n.isNull(t))r.bn=PrivateKey._getRandomBN();else if(t instanceof u)r.bn=t;else if(t instanceof i||t instanceof Uint8Array)r=PrivateKey._transformBuffer(t,e);else if(t.bn&&t.network)r=PrivateKey._transformObject(t);else if(!e&&h.get(t))r.bn=PrivateKey._getRandomBN(),r.network=h.get(t);else{if("string"!=typeof t)throw new TypeError("First argument is an unrecognized data type.");a.isHexa(t)?r.bn=new u(i.from(t,"hex")):r=PrivateKey._transformWIF(t,e)}return r},PrivateKey._getRandomBN=function(){var t,e;do{var r=p.getRandomBuffer(32);t=(e=u.fromBuffer(r)).lt(c.getN())}while(!t);return e},PrivateKey._transformBuffer=function(t,e){var r={};if(32===t.length)return PrivateKey._transformBNBuffer(t,e);if(r.network=h.get(t[0],"privatekey"),!r.network)throw new Error("Invalid network");if(e&&r.network!==h.get(e))throw new TypeError("Private key network mismatch");if(34===t.length&&1===t[33])r.compressed=!0;else{if(33!==t.length)throw new Error("Length of buffer must be 33 (uncompressed) or 34 (compressed)");r.compressed=!1}return r.bn=u.fromBuffer(t.slice(1,33)),r},PrivateKey._transformBNBuffer=function(t,e){var r={};return r.network=h.get(e)||h.defaultNetwork,r.bn=u.fromBuffer(t),r.compressed=!1,r},PrivateKey._transformWIF=function(t,e){return PrivateKey._transformBuffer(o.decode(t),e)},PrivateKey.fromBuffer=function(t,e){return new PrivateKey(t,e)},PrivateKey._transformObject=function(t){return{bn:new u(t.bn,"hex"),network:h.get(t.network),compressed:t.compressed}},PrivateKey.fromString=PrivateKey.fromWIF=function(t){return l.checkArgument(n.isString(t),"First argument is expected to be a string."),new PrivateKey(t)},PrivateKey.fromObject=function(t){return l.checkArgument(n.isObject(t),"First argument is expected to be an object."),new PrivateKey(t)},PrivateKey.fromRandom=function(t){var e=PrivateKey._getRandomBN();return new PrivateKey(e,t)},PrivateKey.getValidationError=function(t,e){var r;try{new PrivateKey(t,e)}catch(t){r=t}return r},PrivateKey.isValid=function(t,e){return!!t&&!PrivateKey.getValidationError(t,e)},PrivateKey.prototype.toString=function(){return this.toBuffer().toString("hex")},PrivateKey.prototype.toWIF=function(){var t,e=this.network;return t=this.compressed?i.concat([i.from([e.privatekey]),this.bn.toBuffer({size:32}),i.from([1])]):i.concat([i.from([e.privatekey]),this.bn.toBuffer({size:32})]),o.encode(t)},PrivateKey.prototype.toBigNumber=function(){return this.bn},PrivateKey.prototype.toBuffer=function(){return this.bn.toBuffer({size:32})},PrivateKey.prototype.toBufferNoPadding=function(){return this.bn.toBuffer()},PrivateKey.prototype.toPublicKey=function(){if(!this._pubkey){let t=d.getPublicKey(this.toString(),!0);this._pubkey=new f(i.from(t),{network:this.network.name})}return this._pubkey},PrivateKey.prototype.toAddress=function(t){var e=this.toPublicKey();return s.fromPublicKey(e,t||this.network)},PrivateKey.prototype.toObject=PrivateKey.prototype.toJSON=function toObject(){return{bn:this.bn.toString("hex"),compressed:this.compressed,network:this.network.toString()}},PrivateKey.prototype.inspect=function(){var t=this.compressed?"":", uncompressed";return"<PrivateKey: "+this.toString()+", network: "+this.network+t+">"},t.exports=PrivateKey},342460:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(399066),s=r(817650),o=r(901538),u=r(833698),a=r(827069),h=r(645250),c=r(545334);function PublicKey(t,e){if(!(this instanceof PublicKey))return new PublicKey(t,e);if(c.checkArgument(t,"First argument is required, please include public key data."),t instanceof PublicKey)return t;e=e||{};var r=this._classifyArgs(t,e);return r.point.validate(),u.defineImmutable(this,{point:r.point,compressed:r.compressed,network:r.network||a.defaultNetwork}),this}PublicKey.prototype._classifyArgs=function(t,e){var r={compressed:h.isUndefined(e.compressed)||e.compressed};if(t instanceof s)r.point=t;else if(t.x&&t.y)r=PublicKey._transformObject(t);else if("string"==typeof t)r=PublicKey._transformDER(i.from(t,"hex"));else if(PublicKey._isBuffer(t))r=PublicKey._transformDER(t);else{if(!PublicKey._isPrivateKey(t))throw new TypeError("First argument is an unrecognized data format.");r=PublicKey._transformPrivateKey(t)}return r.network||(r.network=h.isUndefined(e.network)?void 0:a.get(e.network)),r},PublicKey._isPrivateKey=function(t){return t instanceof r(727184)},PublicKey._isBuffer=function(t){return t instanceof i||t instanceof Uint8Array},PublicKey._transformPrivateKey=function(t){c.checkArgument(PublicKey._isPrivateKey(t),"Must be an instance of PrivateKey");var e={};return e.point=s.getG().mul(t.bn),e.compressed=t.compressed,e.network=t.network,e},PublicKey._transformDER=function(t,e){c.checkArgument(PublicKey._isBuffer(t),"Must be a hex buffer of DER encoded public key");var r,i,o,u,a={};if(e=!!h.isUndefined(e)||e,4!==t[0]&&(e||6!==t[0]&&7!==t[0]))if(3===t[0])o=t.slice(1),r=new n(o),(a=PublicKey._transformX(!0,r)).compressed=!0;else{if(2!==t[0])throw new TypeError("Invalid DER format public key");o=t.slice(1),r=new n(o),(a=PublicKey._transformX(!1,r)).compressed=!0}else{if(o=t.slice(1,33),u=t.slice(33,65),32!==o.length||32!==u.length||65!==t.length)throw new TypeError("Length of x and y must be 32 bytes");r=new n(o),i=new n(u),a.point=new s(r,i),a.compressed=!1}return a},PublicKey._transformX=function(t,e){c.checkArgument("boolean"==typeof t,"Must specify whether y is odd or not (true or false)");var r={};return r.point=s.fromX(t,e),r},PublicKey._transformObject=function(t){var e=new n(t.x,"hex"),r=new n(t.y,"hex");return new PublicKey(new s(e,r),{compressed:t.compressed})},PublicKey.fromPrivateKey=function(t){c.checkArgument(PublicKey._isPrivateKey(t),"Must be an instance of PrivateKey");var e=PublicKey._transformPrivateKey(t);return new PublicKey(e.point,{compressed:e.compressed,network:e.network})},PublicKey.fromDER=PublicKey.fromBuffer=function(t,e){c.checkArgument(PublicKey._isBuffer(t),"Must be a hex buffer of DER encoded public key");var r=PublicKey._transformDER(t,e);return new PublicKey(r.point,{compressed:r.compressed})},PublicKey.fromPoint=function(t,e){return c.checkArgument(t instanceof s,"First argument must be an instance of Point."),new PublicKey(t,{compressed:e})},PublicKey.fromString=function(t,e){var r=i.from(t,e||"hex"),n=PublicKey._transformDER(r);return new PublicKey(n.point,{compressed:n.compressed})},PublicKey.fromX=function(t,e){var r=PublicKey._transformX(t,e);return new PublicKey(r.point,{compressed:r.compressed})},PublicKey.getValidationError=function(t){var e;try{new PublicKey(t)}catch(t){e=t}return e},PublicKey.isValid=function(t){return!PublicKey.getValidationError(t)},PublicKey.prototype.toObject=PublicKey.prototype.toJSON=function toObject(){return{x:this.point.getX().toString("hex",2),y:this.point.getY().toString("hex",2),compressed:this.compressed}},PublicKey.prototype.toBuffer=PublicKey.prototype.toDER=function(){return this.point.getX().toBuffer({size:32})},PublicKey.prototype._getID=function _getID(){return o.sha256ripemd160(this.toBuffer())},PublicKey.prototype.toAddress=function(t){return r(958616).fromPublicKey(this,t||this.network)},PublicKey.prototype.toString=function(){return this.toDER().toString("hex")},PublicKey.prototype.inspect=function(){return"<PublicKey: "+this.toString()+(this.compressed?"":", uncompressed")+">"},t.exports=PublicKey},716990:(t,e,r)=>{t.exports=r(322487),t.exports.Interpreter=r(945920)},945920:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(322487),o=r(663492),u=r(399066),a=r(901538),h=r(692326),c=r(342460),f=r(691924),p=r(453373),l=function Interpreter(t){if(!(this instanceof Interpreter))return new Interpreter(t);t?(this.initialize(),this.set(t)):this.initialize()};l.prototype.verify=function(t,e,i,o,u,a){var h,c=r(623087);if(n.isUndefined(i)&&(i=new c),n.isUndefined(o)&&(o=0),n.isUndefined(u)&&(u=0),u&l.SCRIPT_ENABLE_SIGHASH_FORKID&&(u|=l.SCRIPT_VERIFY_STRICTENC,!a))throw new Error("internal error - need satoshisBN to verify FORKID transactions");if(this.set({script:t,tx:i,nin:o,flags:u,satoshisBN:a}),u&l.SCRIPT_VERIFY_SIGPUSHONLY&&!t.isPushOnly())return this.errstr="SCRIPT_ERR_SIG_PUSHONLY",!1;if(!this.evaluate())return!1;u&l.SCRIPT_VERIFY_P2SH&&(h=this.stack.slice());var f=this.stack;if(this.initialize(),this.set({script:e,stack:f,tx:i,nin:o,flags:u,satoshisBN:a}),!this.evaluate())return!1;if(0===this.stack.length)return this.errstr="SCRIPT_ERR_EVAL_FALSE_NO_RESULT",!1;var p=this.stack[this.stack.length-1];if(!l.castToBool(p))return this.errstr="SCRIPT_ERR_EVAL_FALSE_IN_STACK",!1;if(u&l.SCRIPT_VERIFY_P2SH&&e.isScriptHashOut()){if(!t.isPushOnly())return this.errstr="SCRIPT_ERR_SIG_PUSHONLY",!1;if(0===h.length)throw new Error("internal error - stack copy empty");var d=h[h.length-1],m=s.fromBuffer(d);if(h.pop(),this.initialize(),this.set({script:m,stack:h,tx:i,nin:o,flags:u,satoshisBN:a}),!this.evaluate())return!1;if(0===h.length)return this.errstr="SCRIPT_ERR_EVAL_FALSE_NO_P2SH_STACK",!1;if(!l.castToBool(h[h.length-1]))return this.errstr="SCRIPT_ERR_EVAL_FALSE_IN_P2SH_STACK",!1}if(u&l.SCRIPT_VERIFY_CLEANSTACK){if(!(u&l.SCRIPT_VERIFY_P2SH))throw new Error("internal error - CLEANSTACK without P2SH");if(1!=h.length)return this.errstr="SCRIPT_ERR_CLEANSTACK",!1}return!0},t.exports=l,l.prototype.initialize=function(t){this.stack=[],this.altstack=[],this.pc=0,this.pbegincodehash=0,this.nOpCount=0,this.vfExec=[],this.errstr="",this.flags=0},l.prototype.set=function(t){this.script=t.script||this.script,this.tx=t.tx||this.tx,this.nin=void 0!==t.nin?t.nin:this.nin,this.satoshisBN=t.satoshisBN||this.satoshisBN,this.stack=t.stack||this.stack,this.altstack=t.altack||this.altstack,this.pc=void 0!==t.pc?t.pc:this.pc,this.pbegincodehash=void 0!==t.pbegincodehash?t.pbegincodehash:this.pbegincodehash,this.nOpCount=void 0!==t.nOpCount?t.nOpCount:this.nOpCount,this.vfExec=t.vfExec||this.vfExec,this.errstr=t.errstr||this.errstr,this.flags=void 0!==t.flags?t.flags:this.flags},l.true=i.from([1]),l.false=i.from([]),l.MAX_SCRIPT_ELEMENT_SIZE=520,l.MAXIMUM_ELEMENT_SIZE=4,l.LOCKTIME_THRESHOLD_BN=new u(l.LOCKTIME_THRESHOLD=5e8),l.SCRIPT_VERIFY_NONE=0,l.SCRIPT_VERIFY_P2SH=1,l.SCRIPT_VERIFY_STRICTENC=2,l.SCRIPT_VERIFY_DERSIG=4,l.SCRIPT_VERIFY_LOW_S=8,l.SCRIPT_VERIFY_NULLDUMMY=16,l.SCRIPT_VERIFY_SIGPUSHONLY=32,l.SCRIPT_VERIFY_MINIMALDATA=64,l.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS=128,l.SCRIPT_VERIFY_CLEANSTACK=256,l.SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY=512,l.SCRIPT_VERIFY_CHECKSEQUENCEVERIFY=1024,l.SCRIPT_VERIFY_MINIMALIF=8192,l.SCRIPT_VERIFY_NULLFAIL=16384,l.SCRIPT_VERIFY_COMPRESSED_PUBKEYTYPE=32768,l.SCRIPT_ENABLE_SIGHASH_FORKID=65536,l.SCRIPT_ENABLE_REPLAY_PROTECTION=1<<17,l.SCRIPT_ENABLE_CHECKDATASIG=1<<18,l.SCRIPT_DISALLOW_SEGWIT_RECOVERY=1<<20,l.SCRIPT_ENABLE_SCHNORR_MULTISIG=1<<21,l.SEQUENCE_LOCKTIME_DISABLE_FLAG=1<<31,l.SEQUENCE_LOCKTIME_TYPE_FLAG=1<<22,l.SEQUENCE_LOCKTIME_MASK=65535,l.castToBool=function(t){for(var e=0;e<t.length;e++)if(0!==t[e])return e!==t.length-1||128!==t[e];return!1},l.isSchnorrSig=function(t){return(64===t.length||65===t.length)&&48!==t[0]},l.prototype.checkRawSignatureEncoding=function(t){return!!l.isSchnorrSig(t)||(this.flags&(l.SCRIPT_VERIFY_DERSIG|l.SCRIPT_VERIFY_LOW_S|l.SCRIPT_VERIFY_STRICTENC)&&!h.isDER(t)?(this.errstr="SCRIPT_ERR_SIG_DER_INVALID_FORMAT",!1):!(this.flags&l.SCRIPT_VERIFY_LOW_S&&!h.fromTxFormat(t).hasLowS())||(this.errstr="SCRIPT_ERR_SIG_DER_HIGH_S",!1))},l.prototype.checkSignatureEncoding=l.prototype.checkTxSignatureEncoding=function(t){if(0==t.length)return!0;if(!this.checkRawSignatureEncoding(t.slice(0,t.length-1)))return!1;if(this.flags&l.SCRIPT_VERIFY_STRICTENC){var e=h.fromTxFormat(t);if(!e.hasDefinedHashtype())return this.errstr="SCRIPT_ERR_SIG_HASHTYPE",!1;if(!(this.flags&l.SCRIPT_ENABLE_SIGHASH_FORKID)&&e.nhashtype&h.SIGHASH_FORKID)return this.errstr="SCRIPT_ERR_ILLEGAL_FORKID",!1;if(this.flags&l.SCRIPT_ENABLE_SIGHASH_FORKID&&!(e.nhashtype&h.SIGHASH_FORKID))return this.errstr="SCRIPT_ERR_MUST_USE_FORKID",!1}return!0},l.prototype.checkDataSignatureEncoding=function(t){return 0==t.length||this.checkRawSignatureEncoding(t)},l.prototype.checkPubkeyEncoding=function(t){return!(this.flags&l.SCRIPT_VERIFY_STRICTENC&&!c.isValid(t)&&!function IsCompressedOrUncompressedPubkey(t){switch(t.length){case 33:return 2===t[0]||3===t[0];case 64:return 4===t[0];default:return!1}}(t))||(this.errstr="SCRIPT_ERR_PUBKEYTYPE",!1)},l._isMinimallyEncoded=function(t,e){return e=e||l.MAXIMUM_ELEMENT_SIZE,!(t.length>e)&&!(t.length>0&&!(127&t[t.length-1]||!(t.length<=1)&&128&t[t.length-2]))},l._minimallyEncode=function(t){if(0==t.length)return t;var e=t[t.length-1];if(127&e)return t;if(1==t.length)return i.from("");if(128&t[t.length-2])return t;for(var r=t.length-1;r>0;r--)if(0!=t[r-1])return 128&t[r-1]?t[r++]=e:t[r-1]|=e,t.slice(0,r);return i.from("")},l.prototype.evaluate=function(){if(this.script.toBuffer().length>1e4)return this.errstr="SCRIPT_ERR_SCRIPT_SIZE",!1;try{for(;this.pc<this.script.chunks.length;){if(!this.step())return!1}if(this.stack.length+this.altstack.length>1e3)return this.errstr="SCRIPT_ERR_STACK_SIZE",!1}catch(t){return this.errstr="SCRIPT_ERR_UNKNOWN_ERROR: "+t,!1}return!(this.vfExec.length>0)||(this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1)},l.prototype.checkLockTime=function(t){return!!(this.tx.nLockTime<l.LOCKTIME_THRESHOLD&&t.lt(l.LOCKTIME_THRESHOLD_BN)||this.tx.nLockTime>=l.LOCKTIME_THRESHOLD&&t.gte(l.LOCKTIME_THRESHOLD_BN))&&(!t.gt(new u(this.tx.nLockTime))&&!!this.tx.inputs[this.nin].isFinal())},l.prototype.checkSequence=function(t){var e=this.tx.inputs[this.nin].sequenceNumber;if(this.tx.version<2)return!1;if(e&SEQUENCE_LOCKTIME_DISABLE_FLAG)return!1;var r=l.SEQUENCE_LOCKTIME_TYPE_FLAG|l.SEQUENCE_LOCKTIME_MASK,i=new u(e&r),n=t.and(r),s=new u(l.SEQUENCE_LOCKTIME_TYPE_FLAG);return!!(i.lt(s)&&n.lt(s)||i.gte(s)&&n.gte(s))&&!n.gt(i)},l.prototype.step=function(){var t=this;function stacktop(e){return t.stack[t.stack.length+e]}var e,r,d,m,g,y,v,_,b,S,I,P,k,w,B,E,O,A,T=!!(this.flags&l.SCRIPT_VERIFY_MINIMALDATA),N=-1===this.vfExec.indexOf(!1),M=this.script.chunks[this.pc];this.pc++;var R=M.opcodenum;if(n.isUndefined(R))return this.errstr="SCRIPT_ERR_UNDEFINED_OPCODE",!1;if(M.buf&&M.buf.length>l.MAX_SCRIPT_ELEMENT_SIZE)return this.errstr="SCRIPT_ERR_PUSH_SIZE",!1;if(R>o.OP_16&&++this.nOpCount>201)return this.errstr="SCRIPT_ERR_OP_COUNT",!1;if(function isOpcodeDisabled(t){switch(t){case o.OP_INVERT:case o.OP_2MUL:case o.OP_2DIV:case o.OP_MUL:case o.OP_LSHIFT:case o.OP_RSHIFT:return!0;case o.OP_DIV:case o.OP_MOD:case o.OP_SPLIT:case o.OP_CAT:case o.OP_AND:case o.OP_OR:case o.OP_XOR:case o.OP_BIN2NUM:case o.OP_NUM2BIN:return!1}return!1}(R))return this.errstr="SCRIPT_ERR_DISABLED_OPCODE",!1;if(N&&0<=R&&R<=o.OP_PUSHDATA4){if(T&&!this.script.checkMinimalPush(this.pc-1))return this.errstr="SCRIPT_ERR_MINIMALDATA",!1;if(M.buf){if(M.len!==M.buf.length)throw new Error("Length of push value not equal to length of data");this.stack.push(M.buf)}else this.stack.push(l.false)}else if(N||o.OP_IF<=R&&R<=o.OP_ENDIF)switch(R){case o.OP_1NEGATE:case o.OP_1:case o.OP_2:case o.OP_3:case o.OP_4:case o.OP_5:case o.OP_6:case o.OP_7:case o.OP_8:case o.OP_9:case o.OP_10:case o.OP_11:case o.OP_12:case o.OP_13:case o.OP_14:case o.OP_15:case o.OP_16:g=R-(o.OP_1-1),e=new u(g).toScriptNumBuffer(),this.stack.push(e);break;case o.OP_NOP:break;case o.OP_NOP2:case o.OP_CHECKLOCKTIMEVERIFY:if(!(this.flags&l.SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY)){if(this.flags&l.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS)return this.errstr="SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS",!1;break}if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var K=u.fromScriptNumBuffer(this.stack[this.stack.length-1],T,5);if(K.lt(new u(0)))return this.errstr="SCRIPT_ERR_NEGATIVE_LOCKTIME",!1;if(!this.checkLockTime(K))return this.errstr="SCRIPT_ERR_UNSATISFIED_LOCKTIME",!1;break;case o.OP_NOP3:case o.OP_CHECKSEQUENCEVERIFY:if(!(this.flags&l.SCRIPT_VERIFY_CHECKSEQUENCEVERIFY)){if(this.flags&l.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS)return this.errstr="SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS",!1;break}if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var H=u.fromScriptNumBuffer(stacktop(-1),T,5);if(H.lt(new u(0)))return this.errstr="SCRIPT_ERR_NEGATIVE_LOCKTIME",!1;if(H&l.SEQUENCE_LOCKTIME_DISABLE_FLAG)break;if(!this.checkSequence(H))return this.errstr="SCRIPT_ERR_UNSATISFIED_LOCKTIME",!1;break;case o.OP_NOP1:case o.OP_NOP4:case o.OP_NOP5:case o.OP_NOP6:case o.OP_NOP7:case o.OP_NOP8:case o.OP_NOP9:case o.OP_NOP10:if(this.flags&l.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS)return this.errstr="SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS",!1;break;case o.OP_IF:case o.OP_NOTIF:if(O=!1,N){if(this.stack.length<1)return this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1;if(e=stacktop(-1),this.flags&l.SCRIPT_VERIFY_MINIMALIF){if(e.length>1)return this.errstr="SCRIPT_ERR_MINIMALIF",!1;if(1==e.length&&1!=e[0])return this.errstr="SCRIPT_ERR_MINIMALIF",!1}O=l.castToBool(e),R===o.OP_NOTIF&&(O=!O),this.stack.pop()}this.vfExec.push(O);break;case o.OP_ELSE:if(0===this.vfExec.length)return this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1;this.vfExec[this.vfExec.length-1]=!this.vfExec[this.vfExec.length-1];break;case o.OP_ENDIF:if(0===this.vfExec.length)return this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1;this.vfExec.pop();break;case o.OP_VERIFY:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(e=stacktop(-1),!(O=l.castToBool(e)))return this.errstr="SCRIPT_ERR_VERIFY",!1;this.stack.pop();break;case o.OP_RETURN:return this.errstr="SCRIPT_ERR_OP_RETURN",!1;case o.OP_TOALTSTACK:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.altstack.push(this.stack.pop());break;case o.OP_FROMALTSTACK:if(this.altstack.length<1)return this.errstr="SCRIPT_ERR_INVALID_ALTSTACK_OPERATION",!1;this.stack.push(this.altstack.pop());break;case o.OP_2DROP:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.pop(),this.stack.pop();break;case o.OP_2DUP:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;r=stacktop(-2),d=stacktop(-1),this.stack.push(r),this.stack.push(d);break;case o.OP_3DUP:if(this.stack.length<3)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;r=stacktop(-3),d=stacktop(-2);var x=stacktop(-1);this.stack.push(r),this.stack.push(d),this.stack.push(x);break;case o.OP_2OVER:if(this.stack.length<4)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;r=stacktop(-4),d=stacktop(-3),this.stack.push(r),this.stack.push(d);break;case o.OP_2ROT:if(this.stack.length<6)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;m=this.stack.splice(this.stack.length-6,2),this.stack.push(m[0]),this.stack.push(m[1]);break;case o.OP_2SWAP:if(this.stack.length<4)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;m=this.stack.splice(this.stack.length-4,2),this.stack.push(m[0]),this.stack.push(m[1]);break;case o.OP_IFDUP:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;e=stacktop(-1),(O=l.castToBool(e))&&this.stack.push(e);break;case o.OP_DEPTH:e=new u(this.stack.length).toScriptNumBuffer(),this.stack.push(e);break;case o.OP_DROP:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.pop();break;case o.OP_DUP:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.push(stacktop(-1));break;case o.OP_NIP:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.splice(this.stack.length-2,1);break;case o.OP_OVER:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.push(stacktop(-2));break;case o.OP_PICK:case o.OP_ROLL:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(e=stacktop(-1),g=(_=u.fromScriptNumBuffer(e,T)).toNumber(),this.stack.pop(),g<0||g>=this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;e=stacktop(-g-1),R===o.OP_ROLL&&this.stack.splice(this.stack.length-g-1,1),this.stack.push(e);break;case o.OP_ROT:if(this.stack.length<3)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;y=stacktop(-3),v=stacktop(-2);var D=stacktop(-1);this.stack[this.stack.length-3]=v,this.stack[this.stack.length-2]=D,this.stack[this.stack.length-1]=y;break;case o.OP_SWAP:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;y=stacktop(-2),v=stacktop(-1),this.stack[this.stack.length-2]=v,this.stack[this.stack.length-1]=y;break;case o.OP_TUCK:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.splice(this.stack.length-2,0,stacktop(-1));break;case o.OP_SIZE:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;_=new u(stacktop(-1).length),this.stack.push(_.toScriptNumBuffer());break;case o.OP_AND:case o.OP_OR:case o.OP_XOR:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(r=stacktop(-2),d=stacktop(-1),r.length!==d.length)return this.errstr="SCRIPT_ERR_INVALID_OPERAND_SIZE",!1;switch(R){case o.OP_AND:for(var C=0;C<r.length;C++)r[C]&=d[C];break;case o.OP_OR:for(C=0;C<r.length;C++)r[C]|=d[C];break;case o.OP_XOR:for(C=0;C<r.length;C++)r[C]^=d[C]}this.stack.pop();break;case o.OP_EQUAL:case o.OP_EQUALVERIFY:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;r=stacktop(-2),d=stacktop(-1);var U=r.toString("hex")===d.toString("hex");if(this.stack.pop(),this.stack.pop(),this.stack.push(U?l.true:l.false),R===o.OP_EQUALVERIFY){if(!U)return this.errstr="SCRIPT_ERR_EQUALVERIFY",!1;this.stack.pop()}break;case o.OP_1ADD:case o.OP_1SUB:case o.OP_NEGATE:case o.OP_ABS:case o.OP_NOT:case o.OP_0NOTEQUAL:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;switch(e=stacktop(-1),_=u.fromScriptNumBuffer(e,T),R){case o.OP_1ADD:_=_.add(u.One);break;case o.OP_1SUB:_=_.sub(u.One);break;case o.OP_NEGATE:_=_.neg();break;case o.OP_ABS:_.cmp(u.Zero)<0&&(_=_.neg());break;case o.OP_NOT:_=new u((0===_.cmp(u.Zero))+0);break;case o.OP_0NOTEQUAL:_=new u((0!==_.cmp(u.Zero))+0)}this.stack.pop(),this.stack.push(_.toScriptNumBuffer());break;case o.OP_ADD:case o.OP_SUB:case o.OP_MOD:case o.OP_DIV:case o.OP_BOOLAND:case o.OP_BOOLOR:case o.OP_NUMEQUAL:case o.OP_NUMEQUALVERIFY:case o.OP_NUMNOTEQUAL:case o.OP_LESSTHAN:case o.OP_GREATERTHAN:case o.OP_LESSTHANOREQUAL:case o.OP_GREATERTHANOREQUAL:case o.OP_MIN:case o.OP_MAX:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;switch(b=u.fromScriptNumBuffer(stacktop(-2),T),S=u.fromScriptNumBuffer(stacktop(-1),T),_=new u(0),R){case o.OP_ADD:_=b.add(S);break;case o.OP_SUB:_=b.sub(S);break;case o.OP_DIV:if(0==S)return this.errstr="SCRIPT_ERR_DIV_BY_ZERO",!1;_=b.div(S);break;case o.OP_MOD:if(0==S)return this.errstr="SCRIPT_ERR_DIV_BY_ZERO",!1;_=b.mod(S);break;case o.OP_BOOLAND:_=new u((0!==b.cmp(u.Zero)&&0!==S.cmp(u.Zero))+0);break;case o.OP_BOOLOR:_=new u((0!==b.cmp(u.Zero)||0!==S.cmp(u.Zero))+0);break;case o.OP_NUMEQUAL:case o.OP_NUMEQUALVERIFY:_=new u((0===b.cmp(S))+0);break;case o.OP_NUMNOTEQUAL:_=new u((0!==b.cmp(S))+0);break;case o.OP_LESSTHAN:_=new u((b.cmp(S)<0)+0);break;case o.OP_GREATERTHAN:_=new u((b.cmp(S)>0)+0);break;case o.OP_LESSTHANOREQUAL:_=new u((b.cmp(S)<=0)+0);break;case o.OP_GREATERTHANOREQUAL:_=new u((b.cmp(S)>=0)+0);break;case o.OP_MIN:_=b.cmp(S)<0?b:S;break;case o.OP_MAX:_=b.cmp(S)>0?b:S}if(this.stack.pop(),this.stack.pop(),this.stack.push(_.toScriptNumBuffer()),R===o.OP_NUMEQUALVERIFY){if(!l.castToBool(stacktop(-1)))return this.errstr="SCRIPT_ERR_NUMEQUALVERIFY",!1;this.stack.pop()}break;case o.OP_WITHIN:if(this.stack.length<3)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;b=u.fromScriptNumBuffer(stacktop(-3),T),S=u.fromScriptNumBuffer(stacktop(-2),T);var F=u.fromScriptNumBuffer(stacktop(-1),T);O=S.cmp(b)<=0&&b.cmp(F)<0,this.stack.pop(),this.stack.pop(),this.stack.pop(),this.stack.push(O?l.true:l.false);break;case o.OP_RIPEMD160:case o.OP_SHA1:case o.OP_SHA256:case o.OP_HASH160:case o.OP_HASH256:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var L;e=stacktop(-1),R===o.OP_RIPEMD160?L=a.ripemd160(e):R===o.OP_SHA1?L=a.sha1(e):R===o.OP_SHA256?L=a.sha256(e):R===o.OP_HASH160?L=a.sha256ripemd160(e):R===o.OP_HASH256&&(L=a.sha256sha256(e)),this.stack.pop(),this.stack.push(L);break;case o.OP_CODESEPARATOR:this.pbegincodehash=this.pc;break;case o.OP_CHECKSIG:case o.OP_CHECKSIGVERIFY:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(I=stacktop(-2),P=stacktop(-1),!this.checkTxSignatureEncoding(I)||!this.checkPubkeyEncoding(P))return!1;w=(new s).set({chunks:this.script.chunks.slice(this.pbegincodehash)});var V=(new s).add(I);w.findAndDelete(V);try{B=h.fromTxFormat(I),E=c.fromBuffer(P,!1),A=B.isSchnorr?this.tx.verifySignature(B,E,this.nin,w,this.satoshisBN,this.flags,"schnorr"):this.tx.verifySignature(B,E,this.nin,w,this.satoshisBN,this.flags)}catch(t){A=!1}if(!A&&this.flags&l.SCRIPT_VERIFY_NULLFAIL&&I.length)return this.errstr="SCRIPT_ERR_NULLFAIL",!1;if(this.stack.pop(),this.stack.pop(),this.stack.push(A?l.true:l.false),R===o.OP_CHECKSIGVERIFY){if(!A)return this.errstr="SCRIPT_ERR_CHECKSIGVERIFY",!1;this.stack.pop()}break;case o.OP_CHECKDATASIG:case o.OP_CHECKDATASIGVERIFY:if(this.stack.length<3)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(I=stacktop(-3),k=stacktop(-2),P=stacktop(-1),!this.checkDataSignatureEncoding(I)||!this.checkPubkeyEncoding(P))return!1;A=!1;try{B=h.fromDataFormat(I),E=c.fromBuffer(P,!1),L=a.sha256(k),A=B.isSchnorr?p.verify(L,B,E,"big"):f.verify(L,B,E,"big")}catch(t){A=!1}if(!A&&this.flags&l.SCRIPT_VERIFY_NULLFAIL&&I.length)return this.errstr="SCRIPT_ERR_NULLFAIL",!1;if(this.stack.pop(),this.stack.pop(),this.stack.pop(),this.stack.push(A?l.true:l.false),R===o.OP_CHECKDATASIGVERIFY){if(!A)return this.errstr="SCRIPT_ERR_CHECKDATASIGVERIFY",!1;this.stack.pop()}break;case o.OP_REVERSEBYTES:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;r=stacktop(-1);var z=i.from(r).reverse();this.stack.pop(),this.stack.push(z);break;case o.OP_CHECKMULTISIG:case o.OP_CHECKMULTISIGVERIFY:{let t=(C=1)+1;if(this.stack.length<C)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var j=u.fromScriptNumBuffer(stacktop(-C),T).toNumber(),G=t+j;if(j<0||j>20)return this.errstr="SCRIPT_ERR_PUBKEY_COUNT",!1;if(this.nOpCount+=j,this.nOpCount>201)return this.errstr="SCRIPT_ERR_OP_COUNT",!1;var Y=++C,q=G+1;C+=j;var Z=j+2;if(this.stack.length<C)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var W=u.fromScriptNumBuffer(stacktop(-G),T).toNumber(),X=q+W;if(W<0||W>j)return this.errstr="SCRIPT_ERR_SIG_COUNT",!1;var Q=++C;if(C+=W,this.stack.length<X)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(w=(new s).set({chunks:this.script.chunks.slice(this.pbegincodehash)}),A=!0,this.flags&l.SCRIPT_ENABLE_SCHNORR_MULTISIG&&0!==stacktop(-X).length){let e=function DecodeBitfield(t,e){if(e>32)return this.errstr="INVALID_BITFIELD_SIZE",{result:!1};let r=Math.floor((e+7)/8);if(t.length!==r)return this.errstr="INVALID_BITFIELD_SIZE",{result:!1};let i=0,n=Uint32Array.from(t);for(let t=0;t<r;t++)i|=n[t]<<8*t;return(i&(1<<e)-1)!=i?(this.errstr="INVALID_BIT_RANGE",{result:!1}):{result:!0,bitfield:i}}(stacktop(-X),j);e.result||(A=!1);let r=new Uint8Array([W]),i=Uint32Array.from(r);(function countBits(t){return 16843009*((t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135)>>24})(e.bitfield)!==i[0]&&(this.errstr="INVALID_BIT_COUNT",A=!1);var J=t+j-1,$=q+W-1;let n=0;for(let t=0;t<W;t++,n++){for(e.bitfield>>n||(this.errstr="INVALID_BIT_RANGE",A=!1);!(e.bitfield>>n&1);){if(n>=j){this.errstr="wrong",A=!1;break}n++}n>=j&&(this.errstr="PUBKEY_COUNT",A=!1);let r=stacktop(-$+t),i=stacktop(-J+n);this.checkRawSignatureEncoding(r)&&this.checkPubkeyEncoding(i)||(A=!1);let s=h.fromTxFormat(r),o=c.fromBuffer(i,!1);this.tx.verifySignature(s,o,this.nin,w,this.satoshisBN,this.flags,"schnorr")||(this.errstr="SIG_NULLFAIL",A=!1)}e.bitfield>>n&&(this.errstr="INVALID_BIT_COUNT",A=!1)}else{for(var tt=0;tt<W;tt++)I=stacktop(-Q-tt),w.findAndDelete((new s).add(I));for(;A&&W>0;){if(I=stacktop(-Q),P=stacktop(-Y),!this.checkTxSignatureEncoding(I)||!this.checkPubkeyEncoding(P))return!1;var et;try{B=h.fromTxFormat(I),E=c.fromBuffer(P,!1),et=this.tx.verifySignature(B,E,this.nin,w,this.satoshisBN,this.flags)}catch(t){et=!1}et&&(Q++,W--),Y++,W>--j&&(A=!1)}}for(;C-- >1;){if(!A&&this.flags&l.SCRIPT_VERIFY_NULLFAIL&&!Z&&stacktop(-1).length)return this.errstr="SCRIPT_ERR_NULLFAIL",!1;Z>0&&Z--,this.stack.pop()}if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(this.flags&l.SCRIPT_VERIFY_NULLDUMMY&&stacktop(-1).length)return this.errstr="SCRIPT_ERR_SIG_NULLDUMMY",!1;if(this.stack.pop(),this.stack.push(A?l.true:l.false),R===o.OP_CHECKMULTISIGVERIFY){if(!A)return this.errstr="SCRIPT_ERR_CHECKMULTISIGVERIFY",!1;this.stack.pop()}}break;case o.OP_CAT:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(r=stacktop(-2),d=stacktop(-1),r.length+d.length>l.MAX_SCRIPT_ELEMENT_SIZE)return this.errstr="SCRIPT_ERR_PUSH_SIZE",!1;this.stack[this.stack.length-2]=i.concat([r,d]),this.stack.pop();break;case o.OP_SPLIT:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;r=stacktop(-2);var rt=u.fromScriptNumBuffer(stacktop(-1),T).toNumber();if(rt<0||rt>r.length)return this.errstr="SCRIPT_ERR_INVALID_SPLIT_RANGE",!1;var it=i.from(r);this.stack[this.stack.length-2]=it.slice(0,rt),this.stack[this.stack.length-1]=it.slice(rt);break;case o.OP_NUM2BIN:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var nt=u.fromScriptNumBuffer(stacktop(-1),T).toNumber();if(nt>l.MAX_SCRIPT_ELEMENT_SIZE)return this.errstr="SCRIPT_ERR_PUSH_SIZE",!1;this.stack.pop();var st=stacktop(-1);if((st=l._minimallyEncode(st)).length>nt)return this.errstr="SCRIPT_ERR_IMPOSSIBLE_ENCODING",!1;if(st.length==nt){this.stack[this.stack.length-1]=st;break}var ot=0;st.length>0&&(ot=128&st[st.length-1],st[st.length-1]&=127);var ut=i.alloc(nt);st.copy(ut,0);for(var at=st.length-1;at++<nt-2;)ut[at]=0;ut[at]=ot,this.stack[this.stack.length-1]=ut;break;case o.OP_BIN2NUM:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(r=stacktop(-1),d=l._minimallyEncode(r),this.stack[this.stack.length-1]=d,!l._isMinimallyEncoded(d))return this.errstr="SCRIPT_ERR_INVALID_NUMBER_RANGE",!1;break;default:return this.errstr="SCRIPT_ERR_BAD_OPCODE",!1}return!0}},322487:(t,e,r)=>{var i=r(901048).Buffer,n=r(958616),s=r(855723),o=r(849371),u=r(901538),a=r(663492),h=r(342460),c=r(692326),f=r(827069),p=r(545334),l=r(645250),d=r(166938),m=(r(901048),r(205323)),g=r(833698),y=function Script(t){return this instanceof Script?(this.chunks=[],m.isBuffer(t)?Script.fromBuffer(t):t instanceof n?Script.fromAddress(t):t instanceof Script?Script.fromBuffer(t.toBuffer()):l.isString(t)?Script.fromString(t):void(l.isObject(t)&&l.isArray(t.chunks)&&this.set(t))):new Script(t)};y.prototype.set=function(t){return p.checkArgument(l.isObject(t)),p.checkArgument(l.isArray(t.chunks)),this.chunks=t.chunks,this},y.fromBuffer=function(t){var e=new y;e.chunks=[];for(var r=new s(t);!r.finished();)try{var i,n,o=r.readUInt8();o>0&&o<a.OP_PUSHDATA1?(i=o,e.chunks.push({buf:r.read(i),len:i,opcodenum:o})):o===a.OP_PUSHDATA1?(i=r.readUInt8(),n=r.read(i),e.chunks.push({buf:n,len:i,opcodenum:o})):o===a.OP_PUSHDATA2?(i=r.readUInt16LE(),n=r.read(i),e.chunks.push({buf:n,len:i,opcodenum:o})):o===a.OP_PUSHDATA4?(i=r.readUInt32LE(),n=r.read(i),e.chunks.push({buf:n,len:i,opcodenum:o})):e.chunks.push({opcodenum:o})}catch(e){if(e instanceof RangeError)throw new d.Script.InvalidBuffer(t.toString("hex"));throw e}return e},y.prototype.toBuffer=function(){for(var t=new o,e=0;e<this.chunks.length;e++){var r=this.chunks[e],i=r.opcodenum;t.writeUInt8(r.opcodenum),r.buf&&(i<a.OP_PUSHDATA1?t.write(r.buf):i===a.OP_PUSHDATA1?(t.writeUInt8(r.len),t.write(r.buf)):i===a.OP_PUSHDATA2?(t.writeUInt16LE(r.len),t.write(r.buf)):i===a.OP_PUSHDATA4&&(t.writeUInt32LE(r.len),t.write(r.buf)))}return t.concat()},y.fromASM=function(t){var e=new y;e.chunks=[];for(var r=t.split(" "),n=0;n<r.length;){var s=r[n],o=a(s).toNumber();if(l.isUndefined(o)){var u=i.from(r[n],"hex"),h=u.length;h>=0&&h<a.OP_PUSHDATA1?o=h:h<Math.pow(2,8)?o=a.OP_PUSHDATA1:h<Math.pow(2,16)?o=a.OP_PUSHDATA2:h<Math.pow(2,32)&&(o=a.OP_PUSHDATA4),e.chunks.push({buf:u,len:u.length,opcodenum:o}),n+=1}else e.chunks.push({opcodenum:o}),n+=1}return e},y.fromHex=function(t){return new y(i.from(t,"hex"))},y.fromString=function(t){if(g.isHexa(t)||0===t.length)return new y(i.from(t,"hex"));var e=new y;e.chunks=[];for(var r=t.split(" "),n=0;n<r.length;){var s=r[n],o=a(s).toNumber();if(l.isUndefined(o)){if(!((o=parseInt(s))>0&&o<a.OP_PUSHDATA1))throw new Error("Invalid script: "+JSON.stringify(t));e.chunks.push({buf:i.from(r[n+1].slice(2),"hex"),len:o,opcodenum:o}),n+=2}else if(o===a.OP_PUSHDATA1||o===a.OP_PUSHDATA2||o===a.OP_PUSHDATA4){if("0x"!==r[n+2].slice(0,2))throw new Error("Pushdata data must start with 0x");e.chunks.push({buf:i.from(r[n+2].slice(2),"hex"),len:parseInt(r[n+1]),opcodenum:o}),n+=3}else e.chunks.push({opcodenum:o}),n+=1}return e},y.prototype._chunkToString=function(t,e){var r=t.opcodenum,i="asm"===e,n="";if(t.buf)i||r!==a.OP_PUSHDATA1&&r!==a.OP_PUSHDATA2&&r!==a.OP_PUSHDATA4||(n=n+" "+a(r).toString()),t.len>0&&(n=i?n+" "+t.buf.toString("hex"):n+" "+t.len+" 0x"+t.buf.toString("hex"));else if(void 0!==a.reverseMap[r])i?0===r?n+=" 0":79===r?n+=" -1":n=n+" "+a(r).toString():n=n+" "+a(r).toString();else{var s=r.toString(16);s.length%2!=0&&(s="0"+s),n=i?n+" "+s:n+" 0x"+s}return n},y.prototype.toASM=function(){for(var t="",e=0;e<this.chunks.length;e++){var r=this.chunks[e];t+=this._chunkToString(r,"asm")}return t.substr(1)},y.prototype.toString=function(){for(var t="",e=0;e<this.chunks.length;e++){var r=this.chunks[e];t+=this._chunkToString(r)}return t.substr(1)},y.prototype.toHex=function(){return this.toBuffer().toString("hex")},y.prototype.inspect=function(){return"<Script: "+this.toString()+">"},y.prototype.isPublicKeyHashOut=function(){return!(5!==this.chunks.length||this.chunks[0].opcodenum!==a.OP_DUP||this.chunks[1].opcodenum!==a.OP_HASH160||!this.chunks[2].buf||20!==this.chunks[2].buf.length||this.chunks[3].opcodenum!==a.OP_EQUALVERIFY||this.chunks[4].opcodenum!==a.OP_CHECKSIG)},y.prototype.isPublicKeyHashIn=function(){if(2===this.chunks.length){var t=this.chunks[0].buf,e=this.chunks[1].buf;if(t&&t.length&&e&&e.length){var r=e[0];if((4===r||6===r||7===r)&&65===e.length)return!0;if((3===r||2===r)&&33===e.length)return!0}}return!1},y.prototype.getPublicKey=function(){return p.checkState(this.isPublicKeyOut(),"Can't retrieve PublicKey from a non-PK output"),this.chunks[0].buf},y.prototype.getPublicKeyHash=function(){return p.checkState(this.isPublicKeyHashOut(),"Can't retrieve PublicKeyHash from a non-PKH output"),this.chunks[2].buf},y.prototype.isPublicKeyOut=function(){return!(2!==this.chunks.length||!this.chunks[0].buf||32!==this.chunks[0].buf.length||this.chunks[1].opcodenum!==a.OP_CHECKSIG)},y.prototype.isPublicKeyIn=function(){if(1===this.chunks.length){var t=this.chunks[0].buf;if(t&&t.length&&48===t[0])return!0}return!1},y.prototype.isScriptHashOut=function(){var t=this.toBuffer();return 23===t.length&&t[0]===a.OP_HASH160&&20===t[1]&&t[t.length-1]===a.OP_EQUAL},y.prototype.isScriptHashIn=function(){if(this.chunks.length<=1)return!1;var t,e=this.chunks[this.chunks.length-1].buf;if(!e)return!1;try{t=y.fromBuffer(e)}catch(t){if(t instanceof d.Script.InvalidBuffer)return!1;throw t}return t.classify()!==y.types.UNKNOWN},y.prototype.isMultisigOut=function(){return this.chunks.length>3&&a.isSmallIntOp(this.chunks[0].opcodenum)&&this.chunks.slice(1,this.chunks.length-2).every((function(t){return t.buf&&m.isBuffer(t.buf)}))&&a.isSmallIntOp(this.chunks[this.chunks.length-2].opcodenum)&&this.chunks[this.chunks.length-1].opcodenum===a.OP_CHECKMULTISIG},y.prototype.isMultisigIn=function(){return this.chunks.length>=2&&0===this.chunks[0].opcodenum&&this.chunks.slice(1,this.chunks.length).every((function(t){return t.buf&&m.isBuffer(t.buf)&&c.isTxDER(t.buf)}))},y.prototype.isDataOut=function(){if(!(this.chunks.length>=1&&this.chunks[0].opcodenum===a.OP_RETURN&&this.toBuffer().length<=223))return!1;var t=this.chunks.slice(1);return new y({chunks:t}).isPushOnly()},y.prototype.getData=function(){if(this.isDataOut()||this.isScriptHashOut())return l.isUndefined(this.chunks[1])?i.alloc(0):i.from(this.chunks[1].buf);if(this.isPublicKeyHashOut())return i.from(this.chunks[2].buf);throw new Error("Unrecognized script type to get data from")},y.prototype.isPushOnly=function(){return l.every(this.chunks,(function(t){return t.opcodenum<=a.OP_16||t.opcodenum===a.OP_PUSHDATA1||t.opcodenum===a.OP_PUSHDATA2||t.opcodenum===a.OP_PUSHDATA4}))},(y.types={}).UNKNOWN="Unknown",y.types.PUBKEY_OUT="Pay to public key",y.types.PUBKEY_IN="Spend from public key",y.types.PUBKEYHASH_OUT="Pay to public key hash",y.types.PUBKEYHASH_IN="Spend from public key hash",y.types.SCRIPTHASH_OUT="Pay to script hash",y.types.SCRIPTHASH_IN="Spend from script hash",y.types.MULTISIG_OUT="Pay to multisig",y.types.MULTISIG_IN="Spend from multisig",y.types.DATA_OUT="Data push",y.OP_RETURN_STANDARD_SIZE=220,y.prototype.classify=function(){if(this._isInput)return this.classifyInput();if(this._isOutput)return this.classifyOutput();var t=this.classifyOutput();return t!=y.types.UNKNOWN?t:this.classifyInput()},(y.outputIdentifiers={}).PUBKEY_OUT=y.prototype.isPublicKeyOut,y.outputIdentifiers.PUBKEYHASH_OUT=y.prototype.isPublicKeyHashOut,y.outputIdentifiers.MULTISIG_OUT=y.prototype.isMultisigOut,y.outputIdentifiers.SCRIPTHASH_OUT=y.prototype.isScriptHashOut,y.outputIdentifiers.DATA_OUT=y.prototype.isDataOut,y.prototype.classifyOutput=function(){for(var t in y.outputIdentifiers)if(y.outputIdentifiers[t].bind(this)())return y.types[t];return y.types.UNKNOWN},(y.inputIdentifiers={}).PUBKEY_IN=y.prototype.isPublicKeyIn,y.inputIdentifiers.PUBKEYHASH_IN=y.prototype.isPublicKeyHashIn,y.inputIdentifiers.MULTISIG_IN=y.prototype.isMultisigIn,y.inputIdentifiers.SCRIPTHASH_IN=y.prototype.isScriptHashIn,y.prototype.classifyInput=function(){for(var t in y.inputIdentifiers)if(y.inputIdentifiers[t].bind(this)())return y.types[t];return y.types.UNKNOWN},y.prototype.isStandard=function(){return this.classify()!==y.types.UNKNOWN},y.prototype.prepend=function(t){return this._addByType(t,!0),this},y.prototype.equals=function(t){if(p.checkState(t instanceof y,"Must provide another script"),this.chunks.length!==t.chunks.length)return!1;var e;for(e=0;e<this.chunks.length;e++){if(m.isBuffer(this.chunks[e].buf)&&!m.isBuffer(t.chunks[e].buf))return!1;if(m.isBuffer(this.chunks[e].buf)&&!m.equals(this.chunks[e].buf,t.chunks[e].buf))return!1;if(this.chunks[e].opcodenum!==t.chunks[e].opcodenum)return!1}return!0},y.prototype.add=function(t){return this._addByType(t,!1),this},y.prototype._addByType=function(t,e){if("string"==typeof t)this._addOpcode(t,e);else if("number"==typeof t)this._addOpcode(t,e);else if(t instanceof a)this._addOpcode(t,e);else if(m.isBuffer(t))this._addBuffer(t,e);else if(t instanceof y)this.chunks=this.chunks.concat(t.chunks);else{if("object"!=typeof t)throw new Error("Invalid script chunk");this._insertAtPosition(t,e)}},y.prototype._insertAtPosition=function(t,e){e?this.chunks.unshift(t):this.chunks.push(t)},y.prototype._addOpcode=function(t,e){var r;return r="number"==typeof t?t:t instanceof a?t.toNumber():a(t).toNumber(),this._insertAtPosition({opcodenum:r},e),this},y.prototype._addBuffer=function(t,e){var r,i=t.length;if(i>=0&&i<a.OP_PUSHDATA1)r=i;else if(i<Math.pow(2,8))r=a.OP_PUSHDATA1;else if(i<Math.pow(2,16))r=a.OP_PUSHDATA2;else{if(!(i<Math.pow(2,32)))throw new Error("You can't push that much data");r=a.OP_PUSHDATA4}return this._insertAtPosition({buf:t,len:i,opcodenum:r},e),this},y.prototype.removeCodeseparators=function(){for(var t=[],e=0;e<this.chunks.length;e++)this.chunks[e].opcodenum!==a.OP_CODESEPARATOR&&t.push(this.chunks[e]);return this.chunks=t,this},y.buildMultisigOut=function(t,e,r){p.checkArgument(e<=t.length,"Number of required signatures must be less than or equal to the number of public keys"),r=r||{};var i=new y;i.add(a.smallInt(e));var n=t=l.map(t,h);r.noSorting||(n=l.sortBy(t,(function(t){return t.toString("hex")})));for(var s=0;s<n.length;s++){var o=n[s];i.add(o.toBuffer())}return i.add(a.smallInt(t.length)),i.add(a.OP_CHECKMULTISIG),i},y.buildMultisigIn=function(t,e,r,n){p.checkArgument(l.isArray(t)),p.checkArgument(l.isNumber(e)),p.checkArgument(l.isArray(r)),n=n||{};var s=new y;if("schnorr"===n.signingMethod&&n.checkBits){let e=i.from(n.checkBits).reverse().join(""),r=parseInt(e,2),o=parseInt(r.toString(16),16),u=t.length;u>=1&&u<=4?s.add(a(o)):u>=5&&u<=8?129===o?s.add(a("OP_1NEGATE")):o>16?(s.add(1),s.add(o)):s.add(a(o)):u>=9&&u<=16?(s.add(2),s.add(o)):u>=17&&u<=20&&(s.add(3),s.add(o))}else s.add(a.OP_0);return l.each(r,(function(t){p.checkArgument(m.isBuffer(t),"Signatures must be an array of Buffers"),s.add(t)})),s},y.buildP2SHMultisigIn=function(t,e,r,n){p.checkArgument(l.isArray(t)),p.checkArgument(l.isNumber(e)),p.checkArgument(l.isArray(r)),n=n||{};var s=new y;if("schnorr"===n.signingMethod&&n.checkBits){let e=i.from(n.checkBits).reverse().join(""),r=parseInt(e,2),o=parseInt(r.toString(16),16),u=t.length;u>=1&&u<=4?s.add(a.smallInt(r)):u>=5&&u<=8?129===o?s.add(a("OP_1NEGATE")):o>16?(s.add(1),s.add(o)):s.add(a.smallInt(r)):u>=9&&u<=16?(s.add(2),s.add(o)):u>=17&&u<=20&&(s.add(3),s.add(o))}else s.add(a.OP_0);return l.each(r,(function(t){p.checkArgument(m.isBuffer(t),"Signatures must be an array of Buffers"),s.add(t)})),s.add((n.cachedMultisig||y.buildMultisigOut(t,e,n)).toBuffer()),s},y.buildPublicKeyHashOut=function(t){p.checkArgument(!l.isUndefined(t)),p.checkArgument(t instanceof h||t instanceof n||l.isString(t)),t instanceof h?t=t.toAddress():l.isString(t)&&(t=new n(t));let e=a.OP_CHECKSIG;33==t.hashBuffer.length&&(e=a.OP_CODESEPARATOR);var r=new y;return r.add(t.hashBuffer).add(e),r._network=t.network,r},y.buildPublicKeyOut=function(t){p.checkArgument(t instanceof h);var e=new y;return e.add(t.toBuffer()).add(a.OP_CHECKSIG),e},y.buildDataOut=function(t,e){p.checkArgument(l.isUndefined(t)||l.isString(t)||m.isBuffer(t)),l.isString(t)&&(t=i.from(t,e));var r=new y;return r.add(a.OP_RETURN),l.isUndefined(t)||r.add(t),r},y.buildScriptHashOut=function(t){p.checkArgument(t instanceof y||t instanceof n&&t.isPayToScriptHash());var e=new y;return e.add(a.OP_BLAKE2B).add(t instanceof n?t.hashBuffer:u.sha256ripemd160(t.toBuffer())).add(a.OP_EQUAL),e._network=t._network||t.network,e},y.buildPublicKeyIn=function(t,e){return p.checkArgument(t instanceof c||m.isBuffer(t)),p.checkArgument(l.isUndefined(e)||l.isNumber(e)),t instanceof c&&(t=t.toBuffer()),(new y).add(m.concat([t,m.integerAsSingleByteBuffer(e||c.SIGHASH_ALL)]))},y.buildPublicKeyHashIn=function(t,e,r){return p.checkArgument(e instanceof c||m.isBuffer(e)),p.checkArgument(l.isUndefined(r)||l.isNumber(r)),e instanceof c&&(e=e.toBuffer()),(new y).add(m.concat([e,m.integerAsSingleByteBuffer(r||c.SIGHASH_ALL)])).add(new h(t).toBuffer().slice(1))},y.empty=function(){return new y},y.prototype.toScriptHashOut=function(){return y.buildScriptHashOut(this)},y.fromAddress=function(t){if((t=n(t)).isPayToScriptHash())return y.buildScriptHashOut(t);if(t.isPayToPublicKey())return y.buildPublicKeyHashOut(t);throw new d.Script.UnrecognizedAddress(t)},y.prototype.getAddressInfo=function(t){if(this._isInput)return this._getInputAddressInfo();if(this._isOutput)return this._getOutputAddressInfo();var e=this._getOutputAddressInfo();return e||this._getInputAddressInfo()},y.prototype._getOutputAddressInfo=function(){var t={};if(this.isScriptHashOut())t.hashBuffer=this.getData(),t.type=n.PayToScriptHash;else{if(!this.isPublicKeyHashOut())return!1;t.hashBuffer=this.getData(),t.type=n.PayToPublicKey}return t},y.prototype._getInputAddressInfo=function(){var t={};if(this.isPublicKeyHashIn())t.hashBuffer=u.sha256ripemd160(this.chunks[1].buf),t.type=n.PayToPublicKey;else{if(!this.isScriptHashIn())return!1;t.hashBuffer=u.sha256ripemd160(this.chunks[this.chunks.length-1].buf),t.type=n.PayToScriptHash}return t},y.prototype.toAddress=function(t){var e=this.getAddressInfo();return!!e&&(e.network=f.get(t)||this._network||f.defaultNetwork,new n(e))},y.prototype.findAndDelete=function(t){for(var e=t.toBuffer().toString("hex"),r=0;r<this.chunks.length;r++){e===y({chunks:[this.chunks[r]]}).toBuffer().toString("hex")&&this.chunks.splice(r,1)}return this},y.prototype.checkMinimalPush=function(t){var e=this.chunks[t],r=e.buf,i=e.opcodenum;return!r||(0===r.length?i===a.OP_0:!(1===r.length&&r[0]>=1&&r[0]<=16)&&((1!==r.length||129!==r[0])&&(r.length<=75?i===r.length:r.length<=255?i===a.OP_PUSHDATA1:!(r.length<=65535)||i===a.OP_PUSHDATA2)))},y.prototype._decodeOP_N=function(t){if(t===a.OP_0)return 0;if(t>=a.OP_1&&t<=a.OP_16)return t-(a.OP_1-1);throw new Error("Invalid opcode: "+JSON.stringify(t))},y.prototype.getSignatureOperationsCount=function(t){t=!!l.isUndefined(t)||t;var e=this,r=0,i=a.OP_INVALIDOPCODE;return l.each(e.chunks,(function getChunk(n){var s=n.opcodenum;s==a.OP_CHECKSIG||s==a.OP_CHECKSIGVERIFY?r++:s!=a.OP_CHECKMULTISIG&&s!=a.OP_CHECKMULTISIGVERIFY||(t&&i>=a.OP_1&&i<=a.OP_16?r+=e._decodeOP_N(i):r+=20),i=s})),r},t.exports=y},623087:(t,e,r)=>{t.exports=r(355923),t.exports.Input=r(584720),t.exports.Output=r(923386),t.exports.UnspentOutput=r(693431),t.exports.Signature=r(506009),t.exports.Sighash=r(520182)},584720:(t,e,r)=>{t.exports=r(723824),t.exports.PublicKey=r(803420),t.exports.PublicKeyHash=r(610364),t.exports.MultiSig=r(277832),t.exports.MultiSigScriptHash=r(875411)},723824:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(545334),o=r(166938),u=r(399066),a=r(849371),h=(r(855723),r(901048),r(205323)),c=r(833698);const{LogBuffer:f}=c;var p=r(716990),l=r(520182),d=r(923386),m=(r(114783).logLevels,4294967295),g=m-2,y=m,v=m-1;const _=Math.pow(2,31),b=Math.pow(2,22),S=65535,I=Math.pow(2,16)-1;function Input(t){return this instanceof Input?t?this._fromObject(t):void 0:new Input(t)}Input.MAXINT=m,Input.DEFAULT_SEQNUMBER=y,Input.DEFAULT_LOCKTIME_SEQNUMBER=v,Input.DEFAULT_RBF_SEQNUMBER=g,Input.SEQUENCE_LOCKTIME_TYPE_FLAG=b,Object.defineProperty(Input.prototype,"script",{configurable:!1,enumerable:!0,get:function(){return this.isNull()?null:(this._script||(this._script=new p(this._scriptBuffer),this._script._isInput=!0),this._script)}}),Input.fromObject=function(t){return s.checkArgument(n.isObject(t)),(new Input)._fromObject(t)},Input.prototype.version=0,Input.prototype._fromObject=function(t){var e;if(e=n.isString(t.prevTxId)&&c.isHexa(t.prevTxId)?i.from(t.prevTxId,"hex"):t.prevTxId,this.output=t.output?t.output instanceof d?t.output:new d(t.output):void 0,this.prevTxId=e||t.txidbuf,this.outputIndex=n.isUndefined(t.outputIndex)?t.txoutnum:t.outputIndex,this.sequenceNumber=n.isUndefined(t.sequenceNumber)?n.isUndefined(t.seqnum)?y:t.seqnum:t.sequenceNumber,n.isUndefined(t.script)&&n.isUndefined(t.scriptBuffer))throw new o.Transaction.Input.MissingScript;return this.setScript(t.scriptBuffer||t.script),void 0!==t.version&&(this.version=t.version),this},Input.prototype.toObject=Input.prototype.toJSON=function toObject(){var t={prevTxId:this.prevTxId.toString("hex"),outputIndex:this.outputIndex,sequenceNumber:this.sequenceNumber,script:this._scriptBuffer.toString("hex"),version:this.version};return this.script&&(t.scriptString=this.script.toString()),this.output&&(t.output=this.output.toObject()),t},Input.fromBufferReader=function(t){var e=new Input;e.prevTxId=t.read(32),e.outputIndex=t.readUInt32LE();let r=t.readUInt64LEBN().toNumber();return r&&(r-=2,e.version=t.readUInt16LE()),e._scriptBuffer=t.read(r),e.sequenceNumber=t.readUInt64LEBN().toNumber(),e};const P=u.fromNumber(0),k=u.fromNumber(1),w={0:P.toBuffer({endian:"little",size:2}),1:k.toBuffer({endian:"little",size:2})};Input.prototype.toBufferWriter=function(t){if(t||(t=new a),t.write(this.prevTxId),t.writeUInt32LE(this.outputIndex),this._scriptBuffer.length){let e=i.concat([w[this.version],this._scriptBuffer]);t.writeUInt64LEBN(u.fromNumber(e.length)),t.write(e)}else t.writeUInt64LEBN(P);return t.writeUInt64LEBN(u.fromNumber(this.sequenceNumber)),t},Input.prototype.setScript=function(t){if(this._script=null,t instanceof p)this._script=t,this._script._isInput=!0,this._scriptBuffer=t.toBuffer();else if(null===t)this._script=p.empty(),this._script._isInput=!0,this._scriptBuffer=this._script.toBuffer();else if(c.isHexa(t))this._scriptBuffer=i.from(t,"hex");else if(n.isString(t))this._script=new p(t),this._script._isInput=!0,this._scriptBuffer=this._script.toBuffer();else{if(!h.isBuffer(t))throw new TypeError("Invalid argument type: script");this._scriptBuffer=i.from(t)}return this},Input.prototype.getSignatures=function(){throw new o.AbstractMethodInvoked("Trying to sign unsupported output type (only P2PKH and P2SH multisig inputs are supported) for input: "+JSON.stringify(this))},Input.prototype.isFullySigned=function(){throw new o.AbstractMethodInvoked("Input#isFullySigned")},Input.prototype.isFinal=function(){return 4294967295!==this.sequenceNumber},Input.prototype.addSignature=function(){throw new o.AbstractMethodInvoked("Input#addSignature")},Input.prototype.clearSignatures=function(){throw new o.AbstractMethodInvoked("Input#clearSignatures")},Input.prototype.isValidSignature=function(t,e,r){return e.signature.nhashtype=e.sigtype,l.verify(t,e.signature,e.publicKey,e.inputIndex,this.output.script,this.output.satoshisBN,void 0,r)},Input.prototype.isNull=function(){return"0000000000000000000000000000000000000000000000000000000000000000"===this.prevTxId.toString("hex")&&4294967295===this.outputIndex},Input.prototype._estimateSize=function(){return this.toBufferWriter().toBuffer().length},Input.prototype.lockForSeconds=function(t){if(s.checkArgument(n.isNumber(t)),t<0||t>=33553920)throw new o.Transaction.Input.LockTimeRange;return t=parseInt(Math.floor(t/512)),this.sequenceNumber=t|b,this},Input.prototype.lockUntilBlockHeight=function(t){if(s.checkArgument(n.isNumber(t)),t<0||t>=I)throw new o.Transaction.Input.BlockHeightOutOfRange;return this.sequenceNumber=t,this},Input.prototype.getLockTime=function(){return this.sequenceNumber&_?null:this.sequenceNumber&b?512*(this.sequenceNumber&S):this.sequenceNumber&S},t.exports=Input},277832:(t,e,r)=>{"use strict";var i=r(645250),n=r(576161),s=(r(355923),r(723824)),o=r(923386),u=r(545334),a=r(716990),h=r(692326),c=r(520182),f=(r(342460),r(205323)),p=r(506009);function MultiSigInput(t,e,r,n,o){o=o||{},s.apply(this,arguments);var h=this;e=e||t.publicKeys,r=r||t.threshold,n=n||t.signatures,o.noSorting?this.publicKeys=e:this.publicKeys=i.sortBy(e,(function(t){return t.toString("hex")})),u.checkState(a.buildMultisigOut(this.publicKeys,r).equals(this.output.script),"Provided public keys don't match to the provided output script"),this.publicKeyIndex={},i.each(this.publicKeys,(function(t,e){h.publicKeyIndex[t.toString()]=e})),this.threshold=r,this.signatures=n?this._deserializeSignatures(n):new Array(this.publicKeys.length)}n(MultiSigInput,s),MultiSigInput.prototype.toObject=function(){var t=s.prototype.toObject.apply(this,arguments);return t.threshold=this.threshold,t.publicKeys=i.map(this.publicKeys,(function(t){return t.toString()})),t.signatures=this._serializeSignatures(),t},MultiSigInput.prototype._deserializeSignatures=function(t){return i.map(t,(function(t){if(t)return new p(t)}))},MultiSigInput.prototype._serializeSignatures=function(){return i.map(this.signatures,(function(t){if(t)return t.toObject()}))},MultiSigInput.prototype.getSignatures=function(t,e,r,n,s,a){u.checkState(this.output instanceof o),n=n||h.SIGHASH_ALL|h.SIGHASH_FORKID;var f=this,l=[];return i.each(this.publicKeys,(function(i){i.toString()===e.publicKey.toString()&&l.push(new p({publicKey:e.publicKey,prevTxId:f.prevTxId,outputIndex:f.outputIndex,inputIndex:r,signature:c.sign(t,e,n,r,f.output.script,f.output.satoshisBN,void 0,a),sigtype:n}))})),l},MultiSigInput.prototype.addSignature=function(t,e,r){return u.checkState(!this.isFullySigned(),"All needed signatures have already been added"),u.checkArgument(!i.isUndefined(this.publicKeyIndex[e.publicKey.toString()]),"Signature has no matching public key"),u.checkState(this.isValidSignature(t,e,r)),this.signatures[this.publicKeyIndex[e.publicKey.toString()]]=e,this._updateScript(r),this},MultiSigInput.prototype._updateScript=function(t){return this.setScript(a.buildMultisigIn(this.publicKeys,this.threshold,this._createSignatures(t))),this},MultiSigInput.prototype._createSignatures=function(t){return i.map(i.filter(this.signatures,(function(t){return!i.isUndefined(t)})),(function(e){return f.concat([e.signature.toDER(t),f.integerAsSingleByteBuffer(e.sigtype)])}))},MultiSigInput.prototype.clearSignatures=function(){this.signatures=new Array(this.publicKeys.length),this._updateScript()},MultiSigInput.prototype.isFullySigned=function(){return this.countSignatures()===this.threshold},MultiSigInput.prototype.countMissingSignatures=function(){return this.threshold-this.countSignatures()},MultiSigInput.prototype.countSignatures=function(){return i.reduce(this.signatures,(function(t,e){return t+!!e}),0)},MultiSigInput.prototype.publicKeysWithoutSignature=function(){var t=this;return i.filter(this.publicKeys,(function(e){return!t.signatures[t.publicKeyIndex[e.toString()]]}))},MultiSigInput.prototype.isValidSignature=function(t,e,r){return e.signature.nhashtype=e.sigtype,c.verify(t,e.signature,e.publicKey,e.inputIndex,this.output.script,this.output.satoshisBN,void 0,r)},MultiSigInput.normalizeSignatures=function(t,e,r,i,n,s){return n.map((function(n){var o=null;return i=i.filter((function(i){if(o)return!0;var u=new p({signature:h.fromTxFormat(i),publicKey:n,prevTxId:e.prevTxId,outputIndex:e.outputIndex,inputIndex:r,sigtype:h.SIGHASH_ALL});return u.signature.nhashtype=u.sigtype,!c.verify(t,u.signature,u.publicKey,u.inputIndex,e.output.script,void 0,s)||(o=u,!1)})),o||null}))},MultiSigInput.OPCODES_SIZE=1,MultiSigInput.SIGNATURE_SIZE=73,MultiSigInput.prototype._estimateSize=function(){return MultiSigInput.OPCODES_SIZE+this.threshold*MultiSigInput.SIGNATURE_SIZE},t.exports=MultiSigInput},875411:(t,e,r)=>{"use strict";var i=r(645250),n=r(576161),s=r(723824),o=r(923386),u=r(545334),a=r(716990),h=r(692326),c=r(520182),f=(r(342460),r(205323)),p=r(506009);function MultiSigScriptHashInput(t,e,r,n,o){o=o||{},s.apply(this,arguments);var h=this;e=e||t.publicKeys,r=r||t.threshold,n=n||t.signatures,o.noSorting?this.publicKeys=e:this.publicKeys=i.sortBy(e,(function(t){return t.toString("hex")})),this.redeemScript=a.buildMultisigOut(this.publicKeys,r,o),u.checkState(a.buildScriptHashOut(this.redeemScript).equals(this.output.script),"Provided public keys don't hash to the provided output"),this.publicKeyIndex={},i.each(this.publicKeys,(function(t,e){h.publicKeyIndex[t.toString()]=e})),this.threshold=r,this.signatures=n?this._deserializeSignatures(n):new Array(this.publicKeys.length),this.checkBitsField=new Uint8Array(this.publicKeys.length)}n(MultiSigScriptHashInput,s),MultiSigScriptHashInput.prototype.toObject=function(){var t=s.prototype.toObject.apply(this,arguments);return t.threshold=this.threshold,t.publicKeys=i.map(this.publicKeys,(function(t){return t.toString()})),t.signatures=this._serializeSignatures(),t},MultiSigScriptHashInput.prototype._deserializeSignatures=function(t){return i.map(t,(function(t){if(t)return new p(t)}))},MultiSigScriptHashInput.prototype._serializeSignatures=function(){return i.map(this.signatures,(function(t){if(t)return t.toObject()}))},MultiSigScriptHashInput.prototype.getSignatures=function(t,e,r,n,s,a){u.checkState(this.output instanceof o),n=n||h.SIGHASH_ALL|h.SIGHASH_FORKID;var f=this,l=[];return i.each(this.publicKeys,(function(i){i.toString()===e.publicKey.toString()&&l.push(new p({publicKey:e.publicKey,prevTxId:f.prevTxId,outputIndex:f.outputIndex,inputIndex:r,signature:c.sign(t,e,n,r,f.redeemScript,f.output.satoshisBN,void 0,a),sigtype:n}))})),l},MultiSigScriptHashInput.prototype.addSignature=function(t,e,r){return u.checkState(!this.isFullySigned(),"All needed signatures have already been added"),u.checkArgument(!i.isUndefined(this.publicKeyIndex[e.publicKey.toString()]),"Signature has no matching public key"),u.checkState(this.isValidSignature(t,e,r)),this.signatures[this.publicKeyIndex[e.publicKey.toString()]]=e,this.checkBitsField[this.publicKeyIndex[e.publicKey.toString()]]=void 0!==e?1:0,this._updateScript(r,this.checkBitsField),this},MultiSigScriptHashInput.prototype._updateScript=function(t,e){return this.setScript(a.buildP2SHMultisigIn(this.publicKeys,this.threshold,this._createSignatures(t),{cachedMultisig:this.redeemScript,checkBits:e,signingMethod:t})),this},MultiSigScriptHashInput.prototype._createSignatures=function(t){return i.map(i.filter(this.signatures,(function(t){return!i.isUndefined(t)})),(function(e){return f.concat([e.signature.toDER(t),f.integerAsSingleByteBuffer(e.sigtype)])}))},MultiSigScriptHashInput.prototype.clearSignatures=function(){this.signatures=new Array(this.publicKeys.length),this._updateScript()},MultiSigScriptHashInput.prototype.isFullySigned=function(){return this.countSignatures()===this.threshold},MultiSigScriptHashInput.prototype.countMissingSignatures=function(){return this.threshold-this.countSignatures()},MultiSigScriptHashInput.prototype.countSignatures=function(){return i.reduce(this.signatures,(function(t,e){return t+!!e}),0)},MultiSigScriptHashInput.prototype.publicKeysWithoutSignature=function(){var t=this;return i.filter(this.publicKeys,(function(e){return!t.signatures[t.publicKeyIndex[e.toString()]]}))},MultiSigScriptHashInput.prototype.isValidSignature=function(t,e,r){return r=r||"ecdsa",e.signature.nhashtype=e.sigtype,c.verify(t,e.signature,e.publicKey,e.inputIndex,this.redeemScript,this.output.satoshisBN,void 0,r)},MultiSigScriptHashInput.OPCODES_SIZE=7,MultiSigScriptHashInput.SIGNATURE_SIZE=74,MultiSigScriptHashInput.PUBKEY_SIZE=34,MultiSigScriptHashInput.prototype._estimateSize=function(){return MultiSigScriptHashInput.OPCODES_SIZE+this.threshold*MultiSigScriptHashInput.SIGNATURE_SIZE+this.publicKeys.length*MultiSigScriptHashInput.PUBKEY_SIZE},t.exports=MultiSigScriptHashInput},803420:(t,e,r)=>{"use strict";var i=r(576161),n=r(545334),s=(r(205323),r(723824)),o=r(923386),u=r(520182),a=r(716990),h=r(692326),c=r(506009);function PublicKeyInput(){s.apply(this,arguments)}i(PublicKeyInput,s),PublicKeyInput.prototype.getSignatures=function(t,e,r,i,s,a){n.checkState(this.output instanceof o),i=i||h.SIGHASH_ALL|h.SIGHASH_FORKID;var f=e.toPublicKey();return f.toString()===this.output.script.getPublicKey().toString("hex")?[new c({publicKey:f,prevTxId:this.prevTxId,outputIndex:this.outputIndex,inputIndex:r,signature:u.sign(t,e,i,r,this.output.script,this.output.satoshisBN,void 0,a),sigtype:i})]:[]},PublicKeyInput.prototype.addSignature=function(t,e,r){return n.checkState(this.isValidSignature(t,e,r),"Signature is invalid"),this.setScript(a.buildPublicKeyIn(e.signature.toDER(r),e.sigtype)),this},PublicKeyInput.prototype.clearSignatures=function(){return this.setScript(a.empty()),this},PublicKeyInput.prototype.isFullySigned=function(){return this.script.isPublicKeyIn()},PublicKeyInput.SCRIPT_MAX_SIZE=73,PublicKeyInput.prototype._estimateSize=function(){return PublicKeyInput.SCRIPT_MAX_SIZE},t.exports=PublicKeyInput},610364:(t,e,r)=>{"use strict";var i=r(576161),n=r(545334),s=(r(205323),r(901538)),o=r(723824),u=r(923386),a=r(520182),h=r(716990),c=r(692326),f=r(506009);function PublicKeyHashInput(){o.apply(this,arguments)}i(PublicKeyHashInput,o),PublicKeyHashInput.prototype.getSignatures=function(t,e,r,i,o,h){return n.checkState(this.output instanceof u),o=o||s.sha256ripemd160(e.publicKey.toBuffer()),i=i||c.SIGHASH_ALL|c.SIGHASH_FORKID,[new f({publicKey:e.publicKey,prevTxId:this.prevTxId,outputIndex:this.outputIndex,inputIndex:r,signature:a.sign(t,e,i,r,this.output.script,this.output.satoshisBN,void 0,h),sigtype:i})]},PublicKeyHashInput.prototype.addSignature=function(t,e,r){return n.checkState(this.isValidSignature(t,e,r),"Signature is invalid"),this.setScript(h.buildPublicKeyHashIn(e.publicKey,e.signature.toDER(r),e.sigtype)),this},PublicKeyHashInput.prototype.clearSignatures=function(){return this.setScript(h.empty()),this},PublicKeyHashInput.prototype.isFullySigned=function(){return this.script.isPublicKeyHashIn()},PublicKeyHashInput.SCRIPT_MAX_SIZE=107,PublicKeyHashInput.prototype._estimateSize=function(){return PublicKeyHashInput.SCRIPT_MAX_SIZE},t.exports=PublicKeyHashInput},923386:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(399066),o=(r(901048),r(205323)),u=r(833698),a=r(849371),h=r(716990),c=r(545334),f=r(166938);function Output(t){if(!(this instanceof Output))return new Output(t);if(!n.isObject(t))throw new TypeError("Unrecognized argument for Output");var e;this.satoshis=t.satoshis,o.isBuffer(t.script)?this._scriptBuffer=t.script:(e=n.isString(t.script)&&u.isHexa(t.script)?i.from(t.script,"hex"):t.script,this.setScript(e))}Object.defineProperty(Output.prototype,"script",{configurable:!1,enumerable:!0,get:function(){return this._script||this.setScriptFromBuffer(this._scriptBuffer),this._script}}),Object.defineProperty(Output.prototype,"satoshis",{configurable:!1,enumerable:!0,get:function(){return this._satoshis},set:function(t){t instanceof s?(this._satoshisBN=t,this._satoshis=t.toNumber()):n.isString(t)?(this._satoshis=parseInt(t),this._satoshisBN=s.fromNumber(this._satoshis)):(c.checkArgument(u.isNaturalNumber(t),"Output satoshis is not a natural number"),this._satoshisBN=s.fromNumber(t),this._satoshis=t),c.checkState(u.isNaturalNumber(this._satoshis),"Output satoshis is not a natural number")}}),Output.prototype.invalidSatoshis=function(){return this._satoshis>9007199254740991?"transaction txout satoshis greater than max safe integer":this._satoshis!==this._satoshisBN.toNumber()?"transaction txout satoshis has corrupted value":this._satoshis<0&&"transaction txout negative"},Object.defineProperty(Output.prototype,"satoshisBN",{configurable:!1,enumerable:!0,get:function(){return this._satoshisBN},set:function(t){this._satoshisBN=t,this._satoshis=t.toNumber(),c.checkState(u.isNaturalNumber(this._satoshis),"Output satoshis is not a natural number")}}),Output.prototype.toObject=Output.prototype.toJSON=function toObject(){var t={satoshis:this.satoshis};return t.script=this._scriptBuffer.toString("hex"),t},Output.fromObject=function(t){return new Output(t)},Output.prototype.setScriptFromBuffer=function(t){this._scriptBuffer=t;try{this._script=h.fromBuffer(this._scriptBuffer),this._script._isOutput=!0}catch(t){if(!(t instanceof f.Script.InvalidBuffer))throw t;this._script=null}},Output.prototype.setScript=function(t){if(t instanceof h)this._scriptBuffer=t.toBuffer(),this._script=t,this._script._isOutput=!0;else if(n.isString(t))this._script=h.fromString(t),this._scriptBuffer=this._script.toBuffer(),this._script._isOutput=!0;else{if(!o.isBuffer(t))throw new TypeError("Invalid argument type: script");this.setScriptFromBuffer(t)}return this},Output.prototype.inspect=function(){var t;return t=this.script?this.script.inspect():this._scriptBuffer.toString("hex"),"<Output ("+this.satoshis+" sats) "+t+">"},Output.fromBufferReader=function(t){var e={};e.satoshis=t.readUInt64LEBN();t.readUInt16LE();var r=t.readUInt64LEBN().toNumber();return e.script=0!==r?t.read(r):i.from([]),new Output(e)},Output.prototype.toBufferWriter=function(t){t||(t=new a),t.writeUInt64LEBN(this._satoshisBN),t.writeUInt16LE(0);var e=this._scriptBuffer;let r=s.fromNumber(e.length);return t.writeUInt64LEBN(r),t.write(e),t},t.exports=Output},520182:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=(r(901048),r(692326)),s=(r(716990),r(923386),r(855723),r(849371)),o=r(399066),u=(r(901538),r(691924)),a=r(453373),h=r(545334),c=(r(205323),r(945920)),f=r(645250);r(833698);const{blake2b:p}=r(74042);c.SCRIPT_ENABLE_SIGHASH_FORKID;const l=i.from("TransactionSigningHash");function isSighashAnyoneCanPay(t){return(t&n.SIGHASH_ANYONECANPAY)===n.SIGHASH_ANYONECANPAY}function isSighashSingle(t){return(31&t)===n.SIGHASH_SINGLE}function isSighashNone(t){return(31&t)===n.SIGHASH_NONE}function HashWriter(){this.hash={hash:p.create({dkLen:32,key:l}),bw:new s,update:function(t){this.bw.write(t),this.hash.update(t)},digest:function(){return i.from(this.hash.digest())}}}function zeroHash(){return i.alloc(32)}function hashOutpoint(t,e){t.writeHash(e.prevTxId),t.writeUInt32LE(e.outputIndex)}function sighash(t,e,n,s,o,u,a={}){r(355923);const h=new HashWriter;h.writeUInt16LE(t.version),h.writeHash(function getPreviousOutputsHash(t,e,r){if(isSighashAnyoneCanPay(e))return zeroHash();if(f.isUndefined(r.previousOutputsHash)){const e=new HashWriter;t.inputs.forEach((t=>hashOutpoint(e,t))),r.previousOutputsHash=e.finalize()}return r.previousOutputsHash}(t,e,a)),h.writeHash(function getSequencesHash(t,e,r){if(isSighashSingle(e)||isSighashAnyoneCanPay(e)||isSighashNone(e))return zeroHash();if(f.isUndefined(r.sequencesHash)){const e=new HashWriter;t.inputs.forEach((t=>e.writeUInt64LE(t.sequenceNumber))),r.sequencesHash=e.finalize()}return r.sequencesHash}(t,e,a)),h.writeHash(function getSigOpCountsHash(t,e,r){if(isSighashAnyoneCanPay(e))return zeroHash();if(f.isUndefined(r.sigOpCountsHash)){const e=new HashWriter;t.inputs.forEach((t=>e.writeUInt8(1))),r.sigOpCountsHash=e.finalize()}return r.sigOpCountsHash}(t,e,a));const c=t.inputs[n];return hashOutpoint(h,c),h.writeUInt16LE(0),h.writeVarBytes(c.output.script.toBuffer()),h.writeUInt64LE(c.output.satoshis),h.writeUInt64LE(c.sequenceNumber),h.writeUInt8(1),h.writeHash(function getOutputsHash(t,e,r,i){if(isSighashNone(r))return zeroHash();if(isSighashSingle(r))return e>=t.outputs.length?zeroHash():(new HashWriter).finalize();if(f.isUndefined(i.outputsHash)){const e=new HashWriter;t.outputs.forEach((t=>function hashTxOut(t,e){t.writeUInt64LE(e.satoshis),t.writeUInt16LE(0),t.writeVarBytes(e.script.toBuffer())}(e,t))),i.outputsHash=e.finalize()}return i.outputsHash}(t,n,e,a)),h.writeUInt64LE(t.nLockTime),h.writeHash(function zeroSubnetworkID(){return i.alloc(20)}()),h.writeUInt64LE(0),h.writeHash(zeroHash()),h.writeUInt8(e),h.finalize()}HashWriter.prototype.writeUInt8=function(t){const e=new s;e.writeUInt8(t),this.hash.update(e.toBuffer())},HashWriter.prototype.writeUInt16LE=function(t){const e=new s;e.writeUInt16LE(t),this.hash.update(e.toBuffer())},HashWriter.prototype.writeUInt32LE=function(t){const e=new s;e.writeUInt32LE(t),this.hash.update(e.toBuffer())},HashWriter.prototype.writeUInt64LE=function(t){const e=new s;e.writeUInt64LEBN(o.fromNumber(t)),this.hash.update(e.toBuffer())},HashWriter.prototype.writeVarBytes=function(t){this.writeUInt64LE(t.length),this.hash.update(t)},HashWriter.prototype.writeHash=function(t){this.hash.update(t)},HashWriter.prototype.finalize=function(){return this.hash.digest()};t.exports={sighash,sign:function sign(t,e,r,i,n,s,o,h){var c=sighash(t,r,i);let f;return"schnorr"===(h=h||"ecdsa")?(f=a.sign(c,e,"little").set({nhashtype:r}),f):"ecdsa"===h?(f=u.sign(c,e,"little").set({nhashtype:r}),f):void 0},verify:function verify(t,e,r,i,n,s,o,c){h.checkArgument(!f.isUndefined(t)),h.checkArgument(!f.isUndefined(e)&&!f.isUndefined(e.nhashtype));var p=sighash(t,e.nhashtype,i);return"schnorr"===(c=c||"ecdsa")?a.verify(p,e,r,"little"):"ecdsa"===c?u.verify(p,e,r,"little"):void 0}}},506009:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(545334),o=r(576161),u=r(205323),a=r(833698),h=r(342460),c=r(166938),f=r(692326);function TransactionSignature(t){if(!(this instanceof TransactionSignature))return new TransactionSignature(t);if(t instanceof TransactionSignature)return t;if(n.isObject(t))return this._fromObject(t);throw new c.InvalidArgument("TransactionSignatures must be instantiated from an object")}o(TransactionSignature,f),TransactionSignature.prototype._fromObject=function(t){return this._checkObjectArgs(t),this.publicKey=new h(t.publicKey),this.prevTxId=u.isBuffer(t.prevTxId)?t.prevTxId:i.from(t.prevTxId,"hex"),this.outputIndex=t.outputIndex,this.inputIndex=t.inputIndex,this.signature=t.signature instanceof f?t.signature:u.isBuffer(t.signature)?f.fromBuffer(t.signature):f.fromString(t.signature),this.sigtype=t.sigtype,this},TransactionSignature.prototype._checkObjectArgs=function(t){s.checkArgument(h(t.publicKey),"publicKey"),s.checkArgument(!n.isUndefined(t.inputIndex),"inputIndex"),s.checkArgument(!n.isUndefined(t.outputIndex),"outputIndex"),s.checkState(n.isNumber(t.inputIndex),"inputIndex must be a number"),s.checkState(n.isNumber(t.outputIndex),"outputIndex must be a number"),s.checkArgument(t.signature,"signature"),s.checkArgument(t.prevTxId,"prevTxId"),s.checkState(t.signature instanceof f||u.isBuffer(t.signature)||a.isHexa(t.signature),"signature must be a buffer or hexa value"),s.checkState(u.isBuffer(t.prevTxId)||a.isHexa(t.prevTxId),"prevTxId must be a buffer or hexa value"),s.checkArgument(t.sigtype,"sigtype"),s.checkState(n.isNumber(t.sigtype),"sigtype must be a number")},TransactionSignature.prototype.toObject=TransactionSignature.prototype.toJSON=function toObject(){return{publicKey:this.publicKey.toString(),prevTxId:this.prevTxId.toString("hex"),outputIndex:this.outputIndex,inputIndex:this.inputIndex,signature:this.signature.toString(),sigtype:this.sigtype}},TransactionSignature.fromObject=function(t){return s.checkArgument(t),new TransactionSignature(t)},t.exports=TransactionSignature},355923:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(645250),s=r(545334),o=r(901048),u=i.compare||r(142490),a=r(166938),h=r(205323),c=r(833698);const{LogBuffer:f}=c;var p=r(855723),l=r(849371),d=r(901538),m=r(692326),g=r(520182),y=r(958616),v=r(693431),_=r(584720),b=_.PublicKeyHash,S=_.PublicKey,I=_.MultiSigScriptHash,P=_.MultiSig,k=r(923386),w=r(716990),B=r(727184),E=r(399066),O=r(114783).logLevels;function Transaction(t){if(!(this instanceof Transaction))return new Transaction(t);if(this.inputMap=new Map,this.inputs=[],this.outputs=[],this._inputAmount=void 0,this._outputAmount=void 0,t){if(t instanceof Transaction)return Transaction.shallowCopy(t);if(c.isHexa(t))this.fromString(t);else if(h.isBuffer(t))this.fromBuffer(t);else{if(!n.isObject(t))throw new a.InvalidArgument("Must provide an object or string to deserialize a transaction");this.fromObject(t)}}else this._newTransaction()}Transaction.MassPerSigOp=1e3,Transaction.MassPerTxByte=1,Transaction.MassPerScriptPubKeyByte=10,Transaction.EstimatedOutputMass=27,Transaction.EstimatedStandaloneMassWithoutInputs=94+2*Transaction.EstimatedOutputMass,Transaction.DUST_AMOUNT=546,Transaction.FEE_SECURITY_MARGIN=150,Transaction.MAX_MONEY=21e14,Transaction.NLOCKTIME_BLOCKHEIGHT_LIMIT=5e8,Transaction.NLOCKTIME_MAX_VALUE=4294967295,Transaction.FEE_PER_KB=1e5,Transaction.CHANGE_OUTPUT_MAX_SIZE=62,Transaction.MAXIMUM_EXTRA_SIZE=26,Transaction.shallowCopy=function(t){return new Transaction(t.toBuffer())};var A={configurable:!1,enumerable:!0,get:function(){return this._hash=new p(this._getHash()).readReverse().toString("hex"),this._hash}};Object.defineProperty(Transaction.prototype,"hash",A),Object.defineProperty(Transaction.prototype,"id",A);var T={configurable:!1,enumerable:!0,get:function(){return this._getInputAmount()}};Object.defineProperty(Transaction.prototype,"inputAmount",T),T.get=function(){return this._getOutputAmount()},Object.defineProperty(Transaction.prototype,"outputAmount",T),Transaction.prototype._getHash=function(){return d.sha256sha256(this.toBuffer())},Transaction.prototype.serialize=function(t){return!0===t||t&&t.disableAll?this.uncheckedSerialize():this.checkedSerialize(t)},Transaction.prototype.uncheckedSerialize=Transaction.prototype.toString=function(){return this.toBuffer().toString("hex")},Transaction.prototype.checkedSerialize=function(t){var e=this.getSerializationError(t);if(e)throw e.message+=" - For more information please see: https://kaspacore.io/api/lib/transaction#serialization-checks",e;return this.uncheckedSerialize()},Transaction.prototype.invalidSatoshis=function(){for(var t=!1,e=0;e<this.outputs.length;e++)this.outputs[e].invalidSatoshis()&&(t=!0);return t},Transaction.prototype.getSerializationError=function(t){if(t=t||{},this.invalidSatoshis())return new a.Transaction.InvalidSatoshis;var e,r=this._getUnspentValue();return r<0?t.disableMoreOutputThanInput||(e=new a.Transaction.InvalidOutputAmountSum):e=this._hasFeeError(t,r),e||this._hasDustOutputs(t)||this._isMissingSignatures(t)},Transaction.prototype._hasFeeError=function(t,e){if(!n.isUndefined(this._fee)&&this._fee!==e)return new a.Transaction.FeeError.Different("Unspent value is "+e+" but specified fee is "+this._fee);if(!t.disableLargeFees){var r=Math.floor(Transaction.FEE_SECURITY_MARGIN*this._estimateFee());if(e>r)return this._missingChange()?new a.Transaction.ChangeAddressMissing("Fee is too large and no change address was provided"):new a.Transaction.FeeError.TooLarge("expected less than "+r+" but got "+e)}if(!t.disableSmallFees){var i=Math.ceil(this._estimateFee()/Transaction.FEE_SECURITY_MARGIN);if(e<i)return new a.Transaction.FeeError.TooSmall("expected more than "+i+" but got "+e)}},Transaction.prototype._missingChange=function(){return!this._changeScript},Transaction.prototype._hasDustOutputs=function(t){var e,r;if(!t.disableDustOutputs)for(e in this.outputs)if((r=this.outputs[e]).satoshis<Transaction.DUST_AMOUNT&&!r.script.isDataOut())return new a.Transaction.DustOutputs},Transaction.prototype._isMissingSignatures=function(t){if(!t.disableIsFullySigned)return this.isFullySigned()?void 0:new a.Transaction.MissingSignatures},Transaction.prototype.inspect=function(){return"<Transaction: "+this.uncheckedSerialize()+">"},Transaction.prototype.toBuffer=function(t=!1){var e=new l;return this.toBufferWriter(e,{skipInputs:t}).toBuffer()};const N=i.from("0000000000000000000000000000000000000000","hex"),M=i.from("0000000000000000","hex"),R=i.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),K=i.from("0000000000000000","hex");Transaction.prototype.toBufferWriter=function(t,e){t.writeUInt16LE(this.version);let r=E.fromNumber(this.inputs.length);t.writeUInt64LEBN(r);let{skipInputs:i=!1}=e||{};return i||n.each(this.inputs,(function(e){e.lockUntilBlockHeight(0),e.toBufferWriter(t)})),r=E.fromNumber(this.outputs.length),t.writeUInt64LEBN(r),n.each(this.outputs,(function(e){e.toBufferWriter(t)})),r=E.fromNumber(this.nLockTime),t.writeUInt64LEBN(r),t.write(N),t.write(M),t.write(R),t.write(K),t},Transaction.prototype.getStandaloneMass=function(){let t=this.toBuffer(!0).length;t+=151*this.inputs.length;let e=0;return this.outputs.forEach((t=>{e+=2,e+=t._scriptBuffer.length})),{txSize:t,mass:t*Transaction.MassPerTxByte+e*Transaction.MassPerScriptPubKeyByte}},Transaction.prototype.getMassAndSize=function(){let{txSize:t,mass:e}=this.getStandaloneMass(),r=0;return this.inputs.forEach((t=>{r+=t.output.script.getSignatureOperationsCount()})),{txSize:t,mass:e+r*Transaction.MassPerSigOp}},Transaction.prototype.fromBuffer=function(t){var e=new p(t);return this.fromBufferReader(e)},Transaction.prototype.fromBufferReader=function(t){var e,r,i;for(s.checkArgument(!t.finished(),"No transaction data received"),this.version=t.readUInt16LE(),r=t.readUInt64LEBN().toNumber(),e=0;e<r;e++){var n=_.fromBufferReader(t);this.inputs.push(n)}for(i=t.readUInt64LEBN().toNumber(),e=0;e<i;e++)this.outputs.push(k.fromBufferReader(t));return this.nLockTime=t.readUInt32LE(),this},Transaction.prototype.toObject=Transaction.prototype.toJSON=function toObject(){var t=[];this.inputs.forEach((function(e){t.push(e.toObject())}));var e=[];this.outputs.forEach((function(t){e.push(t.toObject())}));var r={hash:this.hash,version:this.version,inputs:t,outputs:e,nLockTime:this.nLockTime};return this._changeScript&&(r.changeScript=this._changeScript.toString()),n.isUndefined(this._changeIndex)||(r.changeIndex=this._changeIndex),n.isUndefined(this._fee)||(r.fee=this._fee),r},Transaction.prototype.fromObject=function fromObject(t){s.checkArgument(n.isObject(t)||t instanceof Transaction);var e,r=this;return e=t instanceof Transaction?e.toObject():t,n.each(e.inputs,(function(t){if(t.output&&t.output.script){var e,i=new w(t.output.script);if(i.isPublicKeyHashOut())e=new _.PublicKeyHash(t);else if(i.isScriptHashOut()&&t.publicKeys&&t.threshold)e=new _.MultiSigScriptHash(t,t.publicKeys,t.threshold,t.signatures);else{if(!i.isPublicKeyOut())throw new a.Transaction.Input.UnsupportedScript(t.output.script);e=new _.PublicKey(t)}r.addInput(e)}else r.uncheckedAddInput(new _(t))})),n.each(e.outputs,(function(t){r.addOutput(new k(t))})),e.changeIndex&&(this._changeIndex=e.changeIndex),e.changeScript&&(this._changeScript=new w(e.changeScript)),e.fee&&(this._fee=e.fee),this.nLockTime=e.nLockTime,this.version=e.version,this._checkConsistency(t),this},Transaction.prototype._checkConsistency=function(t){n.isUndefined(this._changeIndex)||(s.checkState(this._changeScript,"Change script is expected."),s.checkState(this.outputs[this._changeIndex],"Change index points to undefined output."),s.checkState(this.outputs[this._changeIndex].script.toString()===this._changeScript.toString(),"Change output has an unexpected script.")),t&&t.hash&&s.checkState(t.hash===this.hash,"Hash in object does not match transaction hash.")},Transaction.prototype.lockUntilDate=function(t){if(s.checkArgument(t),n.isNumber(t)&&t<Transaction.NLOCKTIME_BLOCKHEIGHT_LIMIT)throw new a.Transaction.LockTimeTooEarly;n.isDate(t)&&(t=t.getTime()/1e3);for(var e=0;e<this.inputs.length;e++)this.inputs[e].sequenceNumber===_.DEFAULT_SEQNUMBER&&(this.inputs[e].sequenceNumber=_.DEFAULT_LOCKTIME_SEQNUMBER);return this.nLockTime=t,this},Transaction.prototype.lockUntilBlockHeight=function(t){if(s.checkArgument(n.isNumber(t)),t>=Transaction.NLOCKTIME_BLOCKHEIGHT_LIMIT)throw new a.Transaction.BlockHeightTooHigh;if(t<0)throw new a.Transaction.NLockTimeOutOfRange;for(var e=0;e<this.inputs.length;e++)this.inputs[e].sequenceNumber===_.DEFAULT_SEQNUMBER&&(this.inputs[e].sequenceNumber=_.DEFAULT_LOCKTIME_SEQNUMBER);return this.nLockTime=t,this},Transaction.prototype.getLockTime=function(){return this.nLockTime?this.nLockTime<Transaction.NLOCKTIME_BLOCKHEIGHT_LIMIT?this.nLockTime:new Date(1e3*this.nLockTime):null},Transaction.prototype.fromString=function(t){this.fromBuffer(o.Buffer.from(t,"hex"))},Transaction.prototype._newTransaction=function(){this.version=2,this.nLockTime=0},Transaction.prototype.from=function(t,e,r,i){if(c.debugLevel==O.debug&&console.log("Transaction:from utxo:",t),n.isArray(t)){var s=this;return n.each(t,(function(t){s.from(t,e,r,i)})),this}return n.some(this.inputs,(function(e){return e.prevTxId.toString("hex")===t.txId&&e.outputIndex===t.outputIndex}))||(e&&r?this._fromMultisigUtxo(t,e,r,i):this._fromNonP2SH(t)),this},Transaction.prototype._fromNonP2SH=function(t){var e;const{scriptPublicKeyVersion:r}=t;e=(t=new v(t)).script.isPublicKeyHashOut()?b:t.script.isPublicKeyOut()?S:_,this.addInput(new e({output:new k({script:t.script,satoshis:t.satoshis}),prevTxId:t.txId,outputIndex:t.outputIndex,script:w.empty(),version:r}))},Transaction.prototype._fromMultisigUtxo=function(t,e,r,i){var n;if(s.checkArgument(r<=e.length,"Number of required signatures must be greater than the number of public keys"),(t=new v(t)).script.isMultisigOut())n=P;else{if(!t.script.isScriptHashOut())throw new Error("@TODO");n=I}this.addInput(new n({output:new k({script:t.script,satoshis:t.satoshis}),prevTxId:t.txId,outputIndex:t.outputIndex,script:w.empty()},e,r,void 0,i))},Transaction.prototype.addInput=function(t,e,r){if(s.checkArgumentType(t,_,"input"),!t.output&&(n.isUndefined(e)||n.isUndefined(r)))throw new a.Transaction.NeedMoreInfo("Need information about the UTXO script and satoshis");return t.output||!e||n.isUndefined(r)||(e=e instanceof w?e:new w(e),s.checkArgumentType(r,"number","satoshis"),t.output=new k({script:e,satoshis:r})),this.uncheckedAddInput(t)},Transaction.prototype.uncheckedAddInput=function(t){return s.checkArgumentType(t,_,"input"),this.inputs.push(t),this._inputAmount=void 0,this._updateChangeOutput(),this},Transaction.prototype.hasAllUtxoInfo=function(){return n.every(this.inputs.map((function(t){return!!t.output})))},Transaction.prototype.fee=function(t){return s.checkArgument(n.isNumber(t),"amount must be a number"),this._fee=t,this._updateChangeOutput(),this},Transaction.prototype.feePerKb=function(t){return s.checkArgument(n.isNumber(t),"amount must be a number"),this._feePerKb=t,this._updateChangeOutput(),this},Transaction.prototype.feePerByte=function(t){return s.checkArgument(n.isNumber(t),"amount must be a number"),this._feePerByte=t,this._updateChangeOutput(),this},Transaction.prototype.change=function(t){return s.checkArgument(t,"address is required"),this._changeScript=w.fromAddress(t),this._updateChangeOutput(),this},Transaction.prototype.getChangeOutput=function(){return n.isUndefined(this._changeIndex)?null:this.outputs[this._changeIndex]},Transaction.prototype.to=function(t,e){if(n.isArray(t)){var r=this;return n.each(t,(function(t){r.to(t.address,t.amount||t.satoshis)})),this}return s.checkArgument(c.isNaturalNumber(e),"Amount is expected to be a positive integer"),this.addOutput(new k({script:w(new y(t)),satoshis:e})),this},Transaction.prototype.addData=function(t){return this.addOutput(new k({script:w.buildDataOut(t),satoshis:0})),this},Transaction.prototype.addOutput=function(t){return s.checkArgumentType(t,k,"output"),this._addOutput(t),this._updateChangeOutput(),this},Transaction.prototype.clearOutputs=function(){return this.outputs=[],this._clearSignatures(),this._outputAmount=void 0,this._changeIndex=void 0,this._updateChangeOutput(),this},Transaction.prototype._addOutput=function(t){this.outputs.push(t),this._outputAmount=void 0},Transaction.prototype._getOutputAmount=function(){if(n.isUndefined(this._outputAmount)){var t=this;this._outputAmount=0,n.each(this.outputs,(function(e){t._outputAmount+=e.satoshis}))}return this._outputAmount},Transaction.prototype._getInputAmount=function(){return n.isUndefined(this._inputAmount)&&(this._inputAmount=n.sumBy(this.inputs,(function(t){if(n.isUndefined(t.output))throw new a.Transaction.Input.MissingPreviousOutput;return t.output.satoshis}))),this._inputAmount},Transaction.prototype._updateChangeOutput=function(){if(this._changeScript){this._clearSignatures(),n.isUndefined(this._changeIndex)||this._removeOutput(this._changeIndex);var t=this._getUnspentValue()-this.getFee();t>0?(this._changeIndex=this.outputs.length,this._addOutput(new k({script:this._changeScript,satoshis:t}))):this._changeIndex=void 0}},Transaction.prototype.getFee=function(){return this.isCoinbase()?0:n.isUndefined(this._fee)?this._changeScript?this._estimateFee():this._getUnspentValue():this._fee},Transaction.prototype._estimateFee=function(){var t=this._estimateSize(),e=this._getUnspentValue(),r=this._feePerByte||(this._feePerKb||Transaction.FEE_PER_KB)/1e3;function getFee(t){return t*r}var i=Math.ceil(getFee(t)),n=Math.ceil(getFee(t)+getFee(Transaction.CHANGE_OUTPUT_MAX_SIZE));return!this._changeScript||e<=n?i:n},Transaction.prototype._getUnspentValue=function(){return this._getInputAmount()-this._getOutputAmount()},Transaction.prototype._clearSignatures=function(){n.each(this.inputs,(function(t){t.clearSignatures()}))},Transaction.prototype._estimateSize=function(){var t=Transaction.MAXIMUM_EXTRA_SIZE;return n.each(this.inputs,(function(e){t+=e._estimateSize()})),n.each(this.outputs,(function(e){t+=e.script.toBuffer().length+9})),t},Transaction.prototype._removeOutput=function(t){var e=this.outputs[t];this.outputs=n.without(this.outputs,e),this._outputAmount=void 0},Transaction.prototype.removeOutput=function(t){this._removeOutput(t),this._updateChangeOutput()},Transaction.prototype.sort=function(){return this.sortInputs((function(t){var e=Array.prototype.concat.apply([],t);let r=0;return e.forEach((t=>{t.i=r++})),e.sort((function(t,e){return u(t.prevTxId,e.prevTxId)||t.outputIndex-e.outputIndex||t.i-e.i})),e})),this.sortOutputs((function(t){var e=Array.prototype.concat.apply([],t);let r=0;return e.forEach((t=>{t.i=r++})),e.sort((function(t,e){return t.satoshis-e.satoshis||u(t.script.toBuffer(),e.script.toBuffer())||t.i-e.i})),e})),this},Transaction.prototype.shuffleOutputs=function(){return this.sortOutputs(n.shuffle)},Transaction.prototype.sortOutputs=function(t){var e=t(this.outputs);return this._newOutputOrder(e)},Transaction.prototype.sortInputs=function(t){return this.inputs=t(this.inputs),this._clearSignatures(),this},Transaction.prototype._newOutputOrder=function(t){if(this.outputs.length!==t.length||0!==n.difference(this.outputs,t).length)throw new a.Transaction.InvalidSorting;if(!n.isUndefined(this._changeIndex)){var e=this.outputs[this._changeIndex];this._changeIndex=n.findIndex(t,e)}return this.outputs=t,this},Transaction.prototype.removeInput=function(t,e){var r;if(r=!e&&n.isNumber(t)?t:n.findIndex(this.inputs,(function(r){return r.prevTxId.toString("hex")===t&&r.outputIndex===e})),r<0||r>=this.inputs.length)throw new a.Transaction.InvalidIndex(r,this.inputs.length);var i=this.inputs[r];this.inputs=n.without(this.inputs,i),this._inputAmount=void 0,this._updateChangeOutput()},Transaction.prototype.sign=function(t,e,r){return this.inputMap=new Map,this.inputs.map(((t,e)=>{let r=t.output.script.getPublicKey().toString("hex"),i=this.inputMap.get(r);i||(i=[],this.inputMap.set(r,i)),i.push({input:t,index:e})})),this._sign(t,e,r),this},Transaction.prototype._sign=function(t,e,r){r=r||"ecdsa",s.checkState(this.hasAllUtxoInfo(),"Not all utxo information is available to sign the transaction.");var i=this;if(n.isArray(t))return t=n.uniq(t),n.each(t,(function(t){i._sign(t,e,r)})),this;return(this.getSignatures(t,e,r)||[]).map((t=>{this.applySignature(t,r)})),this},Transaction.prototype.getSignatures=function(t,e,r){t=new B(t),e=e||m.SIGHASH_ALL|m.SIGHASH_FORKID;let i,n=this,s=[],o=t.publicKey.toBuffer(),u=o.toString("hex");return(this.inputMap.get(u)||[]).map((({input:u,index:a})=>{i=u.getSignatures(n,t,a,e,o,r)||[],s.push(...i)})),s},Transaction.prototype.applySignature=function(t,e){return this.inputs[t.inputIndex].addSignature(this,t,e),this},Transaction.prototype.isFullySigned=function(){return n.each(this.inputs,(function(t){if(t.isFullySigned===_.prototype.isFullySigned)throw new a.Transaction.UnableToVerifySignature("Unrecognized script kind, or not enough information to execute script.This usually happens when creating a transaction from a serialized transaction")})),n.every(n.map(this.inputs,(function(t){return t.isFullySigned()})))},Transaction.prototype.isValidSignature=function(t){if(this.inputs[t.inputIndex].isValidSignature===_.prototype.isValidSignature)throw new a.Transaction.UnableToVerifySignature("Unrecognized script kind, or not enough information to execute script.This usually happens when creating a transaction from a serialized transaction");return this.inputs[t.inputIndex].isValidSignature(this,t)},Transaction.prototype.verifySignature=function(t,e,r,i,n,s,o){return g.verify(this,t,e,r,i,n,s,o)},Transaction.prototype.verify=function(){if(0===this.inputs.length)return"transaction txins empty";if(0===this.outputs.length)return"transaction txouts empty";for(var t=new E(0),e=0;e<this.outputs.length;e++){var r=this.outputs[e];if(r.invalidSatoshis())return"transaction txout "+e+" satoshis is invalid";if(r._satoshisBN.gt(new E(Transaction.MAX_MONEY,10)))return"transaction txout "+e+" greater than MAX_MONEY";if((t=t.add(r._satoshisBN)).gt(new E(Transaction.MAX_MONEY)))return"transaction txout "+e+" total output greater than MAX_MONEY"}if(this.toBuffer().length>1e6)return"transaction over the maximum block size";var i={};for(e=0;e<this.inputs.length;e++){var s=this.inputs[e],o=s.prevTxId+":"+s.outputIndex;if(!n.isUndefined(i[o]))return"transaction input "+e+" duplicate input";i[o]=!0}if(this.isCoinbase()){var u=this.inputs[0]._scriptBuffer;if(u.length<2||u.length>100)return"coinbase transaction script size invalid"}else for(e=0;e<this.inputs.length;e++)if(this.inputs[e].isNull())return"transaction input "+e+" has null input";return!0},Transaction.prototype.isCoinbase=function(){return 1===this.inputs.length&&this.inputs[0].isNull()},Transaction.prototype.setVersion=function(t){return s.checkArgument(c.isNaturalNumber(t)&&t<=2,"Wrong version number"),this.version=t,this},t.exports=Transaction},693431:(t,e,r)=>{"use strict";var i=r(645250),n=r(545334),s=r(833698),o=r(716990),u=r(958616),a=r(280300);function UnspentOutput(t){if(!(this instanceof UnspentOutput))return new UnspentOutput(t);n.checkArgument(i.isObject(t),"Must provide an object from where to extract data");var e=t.address?new u(t.address):void 0,r=t.txid?t.txid:t.txId;if(!r||!s.isHexaString(r)||r.length>64)throw new Error("Invalid TXID in object",t);var h=i.isUndefined(t.vout)?t.outputIndex:t.vout;if(!i.isNumber(h))throw new Error("Invalid outputIndex, received "+h);n.checkArgument(!i.isUndefined(t.scriptPubKey)||!i.isUndefined(t.script),"Must provide the scriptPubKey for that output!");var c=new o(t.scriptPubKey||t.script);n.checkArgument(!i.isUndefined(t.amount)||!i.isUndefined(t.satoshis),"Must provide an amount for the output");var f=i.isUndefined(t.amount)?t.satoshis:new a.fromBTC(t.amount).toSatoshis();n.checkArgument(i.isNumber(f),"Amount must be a number"),s.defineImmutable(this,{address:e,txId:r,outputIndex:h,script:c,satoshis:f})}UnspentOutput.prototype.inspect=function(){return"<UnspentOutput: "+this.txId+":"+this.outputIndex+", satoshis: "+this.satoshis+", address: "+this.address+">"},UnspentOutput.prototype.toString=function(){return this.txId+":"+this.outputIndex},UnspentOutput.fromObject=function(t){return new UnspentOutput(t)},UnspentOutput.prototype.toObject=UnspentOutput.prototype.toJSON=function toObject(){return{address:this.address?this.address.toString():void 0,txid:this.txId,vout:this.outputIndex,scriptPubKey:this.script.toBuffer().toString("hex"),amount:a.fromSatoshis(this.satoshis).toBTC()}},t.exports=UnspentOutput},280300:(t,e,r)=>{"use strict";var i=r(645250),n=r(166938),s=r(545334),o={BTC:[1e8,8],mBTC:[1e5,5],uBTC:[100,2],bits:[100,2],satoshis:[1,0]};function Unit(t,e){if(!(this instanceof Unit))return new Unit(t,e);if(i.isNumber(e)){if(e<=0)throw new n.Unit.InvalidRate(e);t/=e,e=Unit.BTC}this._value=this._from(t,e);var r=this;Object.keys(o).forEach((function(t){Object.defineProperty(r,t,{get:function(){return r.to(t)},enumerable:!0})}))}Object.keys(o).forEach((function(t){Unit[t]=t})),Unit.fromObject=function fromObject(t){return s.checkArgument(i.isObject(t),"Argument is expected to be an object"),new Unit(t.amount,t.code)},Unit.fromBTC=function(t){return new Unit(t,Unit.BTC)},Unit.fromMillis=Unit.fromMilis=function(t){return new Unit(t,Unit.mBTC)},Unit.fromMicros=Unit.fromBits=function(t){return new Unit(t,Unit.bits)},Unit.fromSatoshis=function(t){return new Unit(t,Unit.satoshis)},Unit.fromFiat=function(t,e){return new Unit(t,e)},Unit.prototype._from=function(t,e){if(!o[e])throw new n.Unit.UnknownCode(e);return parseInt((t*o[e][0]).toFixed())},Unit.prototype.to=function(t){if(i.isNumber(t)){if(t<=0)throw new n.Unit.InvalidRate(t);return parseFloat((this.BTC*t).toFixed(2))}if(!o[t])throw new n.Unit.UnknownCode(t);var e=this._value/o[t][0];return parseFloat(e.toFixed(o[t][1]))},Unit.prototype.toBTC=function(){return this.to(Unit.BTC)},Unit.prototype.toMillis=Unit.prototype.toMilis=function(){return this.to(Unit.mBTC)},Unit.prototype.toMicros=Unit.prototype.toBits=function(){return this.to(Unit.bits)},Unit.prototype.toSatoshis=function(){return this.to(Unit.satoshis)},Unit.prototype.atRate=function(t){return this.to(t)},Unit.prototype.toString=function(){return this.satoshis+" satoshis"},Unit.prototype.toObject=Unit.prototype.toJSON=function toObject(){return{amount:this.BTC,code:Unit.BTC}},Unit.prototype.inspect=function(){return"<Unit: "+this.toString()+">"},t.exports=Unit},586414:(t,e,r)=>{"use strict";var i=r(645250),n=r(775442),s=r(958616),o=r(827069),u=r(280300),URI=function(t,e){if(!(this instanceof URI))return new URI(t,e);if(this.extras={},this.knownParams=e||[],this.address=this.network=this.amount=this.message=null,"string"==typeof t){var r=URI.parse(t);r.amount&&(r.amount=this._parseAmount(r.amount)),this._fromObject(r)}else{if("object"!=typeof t)throw new TypeError("Unrecognized data format.");this._fromObject(t)}};URI.fromString=function fromString(t){if("string"!=typeof t)throw new TypeError("Expected a string");return new URI(t)},URI.fromObject=function fromObject(t){return new URI(t)},URI.isValid=function(t,e){try{new URI(t,e)}catch(t){return!1}return!0},URI.parse=function(t){var e=n.parse(t,!0);if(o.get(e.protocol.replace(":",""),"prefix")){var r=/[^:]*:\/?\/?([^?]*)/.exec(t);return e.query.address=r&&r[1]||void 0,e.query}throw new TypeError("Invalid bitcoin URI")},URI.Members=["address","amount","message","label","r"],URI.prototype._fromObject=function(t){if(!s.isValid(t.address))throw new TypeError("Invalid bitcoin address");for(var e in this.address=new s(t.address),this.network=this.address.network,this.amount=t.amount,t)if("address"!==e&&"amount"!==e){if(/^req-/.exec(e)&&-1===this.knownParams.indexOf(e))throw Error("Unknown required argument "+e);(URI.Members.indexOf(e)>-1?this:this.extras)[e]=t[e]}},URI.prototype._parseAmount=function(t){if(t=Number(t),isNaN(t))throw new TypeError("Invalid amount");return u.fromBTC(t).toSatoshis()},URI.prototype.toObject=URI.prototype.toJSON=function toObject(){for(var t={},e=0;e<URI.Members.length;e++){var r=URI.Members[e];this.hasOwnProperty(r)&&void 0!==this[r]&&(t[r]=this[r].toString())}return i.extend(t,this.extras),t},URI.prototype.toString=function(){var t={};return this.amount&&(t.amount=u.fromSatoshis(this.amount).toBTC()),this.message&&(t.message=this.message),this.label&&(t.label=this.label),this.r&&(t.r=this.r),i.extend(t,this.extras),n.format({protocol:o.get(this.network,"name").prefix+":",host:this.address.toString(!0),query:t})},URI.prototype.inspect=function(){return"<URI: "+this.toString()+">"},t.exports=URI},801157:(t,e,r)=>{"use strict";var i=r(545334),n={q:0,p:1,z:2,r:3,y:4,9:5,x:6,8:7,g:8,f:9,2:10,t:11,v:12,d:13,w:14,0:15,s:16,3:17,j:18,n:19,5:20,4:21,k:22,h:23,c:24,e:25,6:26,m:27,u:28,a:29,7:30,l:31};t.exports={encode:function encode(t){i.checkArgument(t instanceof Array,"Must be Array");for(var e="",r=0;r<t.length;r++){var n=t[r];i.checkArgument(0<=n&&n<32,"value "+n),e+="qpzry9x8gf2tvdw0s3jn54khce6mua7l"[n]}return e},decode:function decode(t){i.checkArgument("string"==typeof t,"Must be base32-encoded string");for(var e=[],r=0;r<t.length;r++){var s=t[r];i.checkArgument(s in n,"value "+s),e.push(n[s])}return e}}},205323:(t,e,r)=>{"use strict";var i=r(901048).Buffer,n=r(901048),s=(r(626093),r(833698),r(545334));function equals(t,e){if(t.length!==e.length)return!1;for(var r=t.length,i=0;i<r;i++)if(t[i]!==e[i])return!1;return!0}t.exports={fill:function fill(t,e){s.checkArgumentType(t,"Buffer","buffer"),s.checkArgumentType(e,"number","value");for(var r=t.length,i=0;i<r;i++)t[i]=e;return t},copy:function(t){var e=i.alloc(t.length);return t.copy(e),e},isBuffer:function isBuffer(t){return n.Buffer.isBuffer(t)||t instanceof Uint8Array},emptyBuffer:function emptyBuffer(t){s.checkArgumentType(t,"number","bytes");for(var e=i.alloc(t),r=0;r<t;r++)e.write("\0",r);return e},concat:n.Buffer.concat,equals,equal:equals,integerAsSingleByteBuffer:function integerAsSingleByteBuffer(t){return s.checkArgumentType(t,"number","integer"),i.from([255&t])},integerAsBuffer:function integerAsBuffer(t){s.checkArgumentType(t,"number","integer");var e=[];return e.push(t>>24&255),e.push(t>>16&255),e.push(t>>8&255),e.push(255&t),i.from(e)},integerFromBuffer:function integerFromBuffer(t){return s.checkArgumentType(t,"Buffer","buffer"),t[0]<<24|t[1]<<16|t[2]<<8|t[3]},integerFromSingleByteBuffer:function integerFromBuffer(t){return s.checkArgumentType(t,"Buffer","buffer"),t[0]},bufferToHex:function bufferToHex(t){return s.checkArgumentType(t,"Buffer","buffer"),t.toString("hex")},reverse:function reverse(t){return i.from(t).reverse()}},t.exports.NULL_HASH=t.exports.fill(i.alloc(32),0),t.exports.EMPTY_BUFFER=i.alloc(0)},41694:(t,e,r)=>{"use strict";var i=r(545334);t.exports=function(t,e,r,n){n=n||!1;for(var s=0,o=0,u=[],a=(1<<r)-1,h=0;h<t.length;h++){var c=t[h];for(i.checkArgument(!(c<0||c>>e),"value "+c),s=s<<e|c,o+=e;o>=r;)o-=r,u.push(s>>o&a)}return n?i.checkState(!(o>=e||s<<r-o&a),"Conversion requires padding but strict mode was used"):o>0&&u.push(s<<r-o&a),u}},833698:(t,e,r)=>{"use strict";var i=r(645250),n=r(114783).logLevels,s=function isHexa(t){return!!i.isString(t)&&/^[0-9a-fA-F]+$/.test(t)};const o={debugLevel:0,LogBufferActive:!1,LogBuffer(...t){!o.LogBufferActive||o.debugLevel<n.debug||(t[t.length-1]=t[t.length-1].map((t=>t.toString("hex"))),console.log(...t))},isValidJSON:function isValidJSON(t){var e;if(!i.isString(t))return!1;try{e=JSON.parse(t)}catch(t){return!1}return"object"==typeof e},isHexa:s,isHexaString:s,cloneArray:function(t){return[].concat(t)},defineImmutable:function defineImmutable(t,e){return Object.keys(e).forEach((function(r){Object.defineProperty(t,r,{configurable:!1,enumerable:!0,value:e[r]})})),t},isNaturalNumber:function isNaturalNumber(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t&&t>=0}};t.exports=o},114783:t=>{t.exports={logLevels:{error:0,warn:1,info:2,verbose:3,debug:4}}},545334:(t,e,r)=>{"use strict";var i=r(166938),n=r(645250);t.exports={checkState:function(t,e){if(!t)throw new i.InvalidState(e)},checkArgument:function(t,e,r,n){if(!t)throw new i.InvalidArgument(e,r,n)},checkArgumentType:function(t,e,s){if(s=s||"(unknown name)",n.isString(e)){if("Buffer"===e){if(!r(901048).Buffer.isBuffer(t))throw new i.InvalidArgumentType(t,e,s)}else if(typeof t!==e)throw new i.InvalidArgumentType(t,e,s)}else if(!(t instanceof e))throw new i.InvalidArgumentType(t,e.name,s)}}},376637:function(t,e,r){!function(t,e){"use strict";function assert(t,e){if(!t)throw new Error(e||"Assertion failed")}function inherits(t,e){t.super_=e;var TempCtor=function(){};TempCtor.prototype=e.prototype,t.prototype=new TempCtor,t.prototype.constructor=t}function BN(t,e,r){if(BN.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var i;"object"==typeof t?t.exports=BN:e.BN=BN,BN.BN=BN,BN.wordSize=26;try{i=r(440745).Buffer}catch(t){}function parseHex(t,e,r){for(var i=0,n=Math.min(t.length,r),s=e;s<n;s++){var o=t.charCodeAt(s)-48;i<<=4,i|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return i}function parseBase(t,e,r,i){for(var n=0,s=Math.min(t.length,r),o=e;o<s;o++){var u=t.charCodeAt(o)-48;n*=i,n+=u>=49?u-49+10:u>=17?u-17+10:u}return n}BN.isBN=function isBN(t){return t instanceof BN||null!==t&&"object"==typeof t&&t.constructor.wordSize===BN.wordSize&&Array.isArray(t.words)},BN.max=function max(t,e){return t.cmp(e)>0?t:e},BN.min=function min(t,e){return t.cmp(e)<0?t:e},BN.prototype._init=function init(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),assert(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&i++,16===e?this._parseHex(t,i):this._parseBase(t,e,i),"-"===t[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),e,r)},BN.prototype._initNumber=function _initNumber(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(assert(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},BN.prototype._initArray=function _initArray(t,e,r){if(assert("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var n,s,o=0;if("be"===r)for(i=t.length-1,n=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[n]|=s<<o&67108863,this.words[n+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);else if("le"===r)for(i=0,n=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[n]|=s<<o&67108863,this.words[n+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);return this.strip()},BN.prototype._parseHex=function _parseHex(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,n,s=0;for(r=t.length-6,i=0;r>=e;r-=6)n=parseHex(t,r,r+6),this.words[i]|=n<<s&67108863,this.words[i+1]|=n>>>26-s&4194303,(s+=24)>=26&&(s-=26,i++);r+6!==e&&(n=parseHex(t,e,r+6),this.words[i]|=n<<s&67108863,this.words[i+1]|=n>>>26-s&4194303),this.strip()},BN.prototype._parseBase=function _parseBase(t,e,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=e)i++;i--,n=n/e|0;for(var s=t.length-r,o=s%i,u=Math.min(s,s-o)+r,a=0,h=r;h<u;h+=i)a=parseBase(t,h,h+i,e),this.imuln(n),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(0!==o){var c=1;for(a=parseBase(t,h,t.length,e),h=0;h<o;h++)c*=e;this.imuln(c),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}},BN.prototype.copy=function copy(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},BN.prototype.clone=function clone(){var t=new BN(null);return this.copy(t),t},BN.prototype._expand=function _expand(t){for(;this.length<t;)this.words[this.length++]=0;return this},BN.prototype.strip=function strip(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},BN.prototype._normSign=function _normSign(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},BN.prototype.inspect=function inspect(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var n=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],s=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],o=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function smallMulTo(t,e,r){r.negative=e.negative^t.negative;var i=t.length+e.length|0;r.length=i,i=i-1|0;var n=0|t.words[0],s=0|e.words[0],o=n*s,u=67108863&o,a=o/67108864|0;r.words[0]=u;for(var h=1;h<i;h++){for(var c=a>>>26,f=67108863&a,p=Math.min(h,e.length-1),l=Math.max(0,h-t.length+1);l<=p;l++){var d=h-l|0;c+=(o=(n=0|t.words[d])*(s=0|e.words[l])+f)/67108864|0,f=67108863&o}r.words[h]=0|f,a=0|c}return 0!==a?r.words[h]=0|a:r.length--,r.strip()}BN.prototype.toString=function toString(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,u=0,a=0;a<this.length;a++){var h=this.words[a],c=(16777215&(h<<i|u)).toString(16);r=0!==(u=h>>>24-i&16777215)||a!==this.length-1?n[6-c.length]+c+r:c+r,(i+=2)>=26&&(i-=26,a--)}for(0!==u&&(r=u.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var f=s[t],p=o[t];r="";var l=this.clone();for(l.negative=0;!l.isZero();){var d=l.modn(p).toString(t);r=(l=l.idivn(p)).isZero()?d+r:n[f-d.length]+d+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}assert(!1,"Base should be between 2 and 36")},BN.prototype.toNumber=function toNumber(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&assert(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},BN.prototype.toJSON=function toJSON(){return this.toString(16)},BN.prototype.toBuffer=function toBuffer(t,e){return assert(void 0!==i),this.toArrayLike(i,t,e)},BN.prototype.toArray=function toArray(t,e){return this.toArrayLike(Array,t,e)},BN.prototype.toArrayLike=function toArrayLike(t,e,r){var i=this.byteLength(),n=r||Math.max(1,i);assert(i<=n,"byte array longer than desired length"),assert(n>0,"Requested array length <= 0"),this.strip();var s,o,u="le"===e,a=new t(n),h=this.clone();if(u){for(o=0;!h.isZero();o++)s=h.andln(255),h.iushrn(8),a[o]=s;for(;o<n;o++)a[o]=0}else{for(o=0;o<n-i;o++)a[o]=0;for(o=0;!h.isZero();o++)s=h.andln(255),h.iushrn(8),a[n-o-1]=s}return a},Math.clz32?BN.prototype._countBits=function _countBits(t){return 32-Math.clz32(t)}:BN.prototype._countBits=function _countBits(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},BN.prototype._zeroBits=function _zeroBits(t){if(0===t)return 26;var e=t,r=0;return 8191&e||(r+=13,e>>>=13),127&e||(r+=7,e>>>=7),15&e||(r+=4,e>>>=4),3&e||(r+=2,e>>>=2),1&e||r++,r},BN.prototype.bitLength=function bitLength(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8)},BN.prototype.toTwos=function toTwos(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},BN.prototype.fromTwos=function fromTwos(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},BN.prototype.isNeg=function isNeg(){return 0!==this.negative},BN.prototype.neg=function neg(){return this.clone().ineg()},BN.prototype.ineg=function ineg(){return this.isZero()||(this.negative^=1),this},BN.prototype.iuor=function iuor(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},BN.prototype.ior=function ior(t){return assert(!(this.negative|t.negative)),this.iuor(t)},BN.prototype.or=function or(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},BN.prototype.uor=function uor(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},BN.prototype.iuand=function iuand(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},BN.prototype.iand=function iand(t){return assert(!(this.negative|t.negative)),this.iuand(t)},BN.prototype.and=function and(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},BN.prototype.uand=function uand(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},BN.prototype.iuxor=function iuxor(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var i=0;i<r.length;i++)this.words[i]=e.words[i]^r.words[i];if(this!==e)for(;i<e.length;i++)this.words[i]=e.words[i];return this.length=e.length,this.strip()},BN.prototype.ixor=function ixor(t){return assert(!(this.negative|t.negative)),this.iuxor(t)},BN.prototype.xor=function xor(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},BN.prototype.uxor=function uxor(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},BN.prototype.inotn=function inotn(t){assert("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},BN.prototype.notn=function notn(t){return this.clone().inotn(t)},BN.prototype.setn=function setn(t,e){assert("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},BN.prototype.iadd=function iadd(t){var e,r,i;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,i=t):(r=t,i=this);for(var n=0,s=0;s<i.length;s++)e=(0|r.words[s])+(0|i.words[s])+n,this.words[s]=67108863&e,n=e>>>26;for(;0!==n&&s<r.length;s++)e=(0|r.words[s])+n,this.words[s]=67108863&e,n=e>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},BN.prototype.add=function add(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},BN.prototype.isub=function isub(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,i,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=t):(r=t,i=this);for(var s=0,o=0;o<i.length;o++)s=(e=(0|r.words[o])-(0|i.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<r.length;o++)s=(e=(0|r.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},BN.prototype.sub=function sub(t){return this.clone().isub(t)};var u=function comb10MulTo(t,e,r){var i,n,s,o=t.words,u=e.words,a=r.words,h=0,c=0|o[0],f=8191&c,p=c>>>13,l=0|o[1],d=8191&l,m=l>>>13,g=0|o[2],y=8191&g,v=g>>>13,_=0|o[3],b=8191&_,S=_>>>13,I=0|o[4],P=8191&I,k=I>>>13,w=0|o[5],B=8191&w,E=w>>>13,O=0|o[6],A=8191&O,T=O>>>13,N=0|o[7],M=8191&N,R=N>>>13,K=0|o[8],H=8191&K,x=K>>>13,D=0|o[9],C=8191&D,U=D>>>13,F=0|u[0],L=8191&F,V=F>>>13,z=0|u[1],j=8191&z,G=z>>>13,Y=0|u[2],q=8191&Y,Z=Y>>>13,W=0|u[3],X=8191&W,Q=W>>>13,J=0|u[4],$=8191&J,tt=J>>>13,et=0|u[5],rt=8191&et,it=et>>>13,nt=0|u[6],st=8191&nt,ot=nt>>>13,ut=0|u[7],at=8191&ut,ht=ut>>>13,ct=0|u[8],ft=8191&ct,pt=ct>>>13,dt=0|u[9],mt=8191&dt,yt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var vt=(h+(i=Math.imul(f,L))|0)+((8191&(n=(n=Math.imul(f,V))+Math.imul(p,L)|0))<<13)|0;h=((s=Math.imul(p,V))+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,i=Math.imul(d,L),n=(n=Math.imul(d,V))+Math.imul(m,L)|0,s=Math.imul(m,V);var _t=(h+(i=i+Math.imul(f,j)|0)|0)+((8191&(n=(n=n+Math.imul(f,G)|0)+Math.imul(p,j)|0))<<13)|0;h=((s=s+Math.imul(p,G)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,i=Math.imul(y,L),n=(n=Math.imul(y,V))+Math.imul(v,L)|0,s=Math.imul(v,V),i=i+Math.imul(d,j)|0,n=(n=n+Math.imul(d,G)|0)+Math.imul(m,j)|0,s=s+Math.imul(m,G)|0;var bt=(h+(i=i+Math.imul(f,q)|0)|0)+((8191&(n=(n=n+Math.imul(f,Z)|0)+Math.imul(p,q)|0))<<13)|0;h=((s=s+Math.imul(p,Z)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,i=Math.imul(b,L),n=(n=Math.imul(b,V))+Math.imul(S,L)|0,s=Math.imul(S,V),i=i+Math.imul(y,j)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(v,j)|0,s=s+Math.imul(v,G)|0,i=i+Math.imul(d,q)|0,n=(n=n+Math.imul(d,Z)|0)+Math.imul(m,q)|0,s=s+Math.imul(m,Z)|0;var St=(h+(i=i+Math.imul(f,X)|0)|0)+((8191&(n=(n=n+Math.imul(f,Q)|0)+Math.imul(p,X)|0))<<13)|0;h=((s=s+Math.imul(p,Q)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,i=Math.imul(P,L),n=(n=Math.imul(P,V))+Math.imul(k,L)|0,s=Math.imul(k,V),i=i+Math.imul(b,j)|0,n=(n=n+Math.imul(b,G)|0)+Math.imul(S,j)|0,s=s+Math.imul(S,G)|0,i=i+Math.imul(y,q)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(v,q)|0,s=s+Math.imul(v,Z)|0,i=i+Math.imul(d,X)|0,n=(n=n+Math.imul(d,Q)|0)+Math.imul(m,X)|0,s=s+Math.imul(m,Q)|0;var It=(h+(i=i+Math.imul(f,$)|0)|0)+((8191&(n=(n=n+Math.imul(f,tt)|0)+Math.imul(p,$)|0))<<13)|0;h=((s=s+Math.imul(p,tt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,i=Math.imul(B,L),n=(n=Math.imul(B,V))+Math.imul(E,L)|0,s=Math.imul(E,V),i=i+Math.imul(P,j)|0,n=(n=n+Math.imul(P,G)|0)+Math.imul(k,j)|0,s=s+Math.imul(k,G)|0,i=i+Math.imul(b,q)|0,n=(n=n+Math.imul(b,Z)|0)+Math.imul(S,q)|0,s=s+Math.imul(S,Z)|0,i=i+Math.imul(y,X)|0,n=(n=n+Math.imul(y,Q)|0)+Math.imul(v,X)|0,s=s+Math.imul(v,Q)|0,i=i+Math.imul(d,$)|0,n=(n=n+Math.imul(d,tt)|0)+Math.imul(m,$)|0,s=s+Math.imul(m,tt)|0;var Pt=(h+(i=i+Math.imul(f,rt)|0)|0)+((8191&(n=(n=n+Math.imul(f,it)|0)+Math.imul(p,rt)|0))<<13)|0;h=((s=s+Math.imul(p,it)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,i=Math.imul(A,L),n=(n=Math.imul(A,V))+Math.imul(T,L)|0,s=Math.imul(T,V),i=i+Math.imul(B,j)|0,n=(n=n+Math.imul(B,G)|0)+Math.imul(E,j)|0,s=s+Math.imul(E,G)|0,i=i+Math.imul(P,q)|0,n=(n=n+Math.imul(P,Z)|0)+Math.imul(k,q)|0,s=s+Math.imul(k,Z)|0,i=i+Math.imul(b,X)|0,n=(n=n+Math.imul(b,Q)|0)+Math.imul(S,X)|0,s=s+Math.imul(S,Q)|0,i=i+Math.imul(y,$)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(v,$)|0,s=s+Math.imul(v,tt)|0,i=i+Math.imul(d,rt)|0,n=(n=n+Math.imul(d,it)|0)+Math.imul(m,rt)|0,s=s+Math.imul(m,it)|0;var kt=(h+(i=i+Math.imul(f,st)|0)|0)+((8191&(n=(n=n+Math.imul(f,ot)|0)+Math.imul(p,st)|0))<<13)|0;h=((s=s+Math.imul(p,ot)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,i=Math.imul(M,L),n=(n=Math.imul(M,V))+Math.imul(R,L)|0,s=Math.imul(R,V),i=i+Math.imul(A,j)|0,n=(n=n+Math.imul(A,G)|0)+Math.imul(T,j)|0,s=s+Math.imul(T,G)|0,i=i+Math.imul(B,q)|0,n=(n=n+Math.imul(B,Z)|0)+Math.imul(E,q)|0,s=s+Math.imul(E,Z)|0,i=i+Math.imul(P,X)|0,n=(n=n+Math.imul(P,Q)|0)+Math.imul(k,X)|0,s=s+Math.imul(k,Q)|0,i=i+Math.imul(b,$)|0,n=(n=n+Math.imul(b,tt)|0)+Math.imul(S,$)|0,s=s+Math.imul(S,tt)|0,i=i+Math.imul(y,rt)|0,n=(n=n+Math.imul(y,it)|0)+Math.imul(v,rt)|0,s=s+Math.imul(v,it)|0,i=i+Math.imul(d,st)|0,n=(n=n+Math.imul(d,ot)|0)+Math.imul(m,st)|0,s=s+Math.imul(m,ot)|0;var wt=(h+(i=i+Math.imul(f,at)|0)|0)+((8191&(n=(n=n+Math.imul(f,ht)|0)+Math.imul(p,at)|0))<<13)|0;h=((s=s+Math.imul(p,ht)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,i=Math.imul(H,L),n=(n=Math.imul(H,V))+Math.imul(x,L)|0,s=Math.imul(x,V),i=i+Math.imul(M,j)|0,n=(n=n+Math.imul(M,G)|0)+Math.imul(R,j)|0,s=s+Math.imul(R,G)|0,i=i+Math.imul(A,q)|0,n=(n=n+Math.imul(A,Z)|0)+Math.imul(T,q)|0,s=s+Math.imul(T,Z)|0,i=i+Math.imul(B,X)|0,n=(n=n+Math.imul(B,Q)|0)+Math.imul(E,X)|0,s=s+Math.imul(E,Q)|0,i=i+Math.imul(P,$)|0,n=(n=n+Math.imul(P,tt)|0)+Math.imul(k,$)|0,s=s+Math.imul(k,tt)|0,i=i+Math.imul(b,rt)|0,n=(n=n+Math.imul(b,it)|0)+Math.imul(S,rt)|0,s=s+Math.imul(S,it)|0,i=i+Math.imul(y,st)|0,n=(n=n+Math.imul(y,ot)|0)+Math.imul(v,st)|0,s=s+Math.imul(v,ot)|0,i=i+Math.imul(d,at)|0,n=(n=n+Math.imul(d,ht)|0)+Math.imul(m,at)|0,s=s+Math.imul(m,ht)|0;var Bt=(h+(i=i+Math.imul(f,ft)|0)|0)+((8191&(n=(n=n+Math.imul(f,pt)|0)+Math.imul(p,ft)|0))<<13)|0;h=((s=s+Math.imul(p,pt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,i=Math.imul(C,L),n=(n=Math.imul(C,V))+Math.imul(U,L)|0,s=Math.imul(U,V),i=i+Math.imul(H,j)|0,n=(n=n+Math.imul(H,G)|0)+Math.imul(x,j)|0,s=s+Math.imul(x,G)|0,i=i+Math.imul(M,q)|0,n=(n=n+Math.imul(M,Z)|0)+Math.imul(R,q)|0,s=s+Math.imul(R,Z)|0,i=i+Math.imul(A,X)|0,n=(n=n+Math.imul(A,Q)|0)+Math.imul(T,X)|0,s=s+Math.imul(T,Q)|0,i=i+Math.imul(B,$)|0,n=(n=n+Math.imul(B,tt)|0)+Math.imul(E,$)|0,s=s+Math.imul(E,tt)|0,i=i+Math.imul(P,rt)|0,n=(n=n+Math.imul(P,it)|0)+Math.imul(k,rt)|0,s=s+Math.imul(k,it)|0,i=i+Math.imul(b,st)|0,n=(n=n+Math.imul(b,ot)|0)+Math.imul(S,st)|0,s=s+Math.imul(S,ot)|0,i=i+Math.imul(y,at)|0,n=(n=n+Math.imul(y,ht)|0)+Math.imul(v,at)|0,s=s+Math.imul(v,ht)|0,i=i+Math.imul(d,ft)|0,n=(n=n+Math.imul(d,pt)|0)+Math.imul(m,ft)|0,s=s+Math.imul(m,pt)|0;var Et=(h+(i=i+Math.imul(f,mt)|0)|0)+((8191&(n=(n=n+Math.imul(f,yt)|0)+Math.imul(p,mt)|0))<<13)|0;h=((s=s+Math.imul(p,yt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,i=Math.imul(C,j),n=(n=Math.imul(C,G))+Math.imul(U,j)|0,s=Math.imul(U,G),i=i+Math.imul(H,q)|0,n=(n=n+Math.imul(H,Z)|0)+Math.imul(x,q)|0,s=s+Math.imul(x,Z)|0,i=i+Math.imul(M,X)|0,n=(n=n+Math.imul(M,Q)|0)+Math.imul(R,X)|0,s=s+Math.imul(R,Q)|0,i=i+Math.imul(A,$)|0,n=(n=n+Math.imul(A,tt)|0)+Math.imul(T,$)|0,s=s+Math.imul(T,tt)|0,i=i+Math.imul(B,rt)|0,n=(n=n+Math.imul(B,it)|0)+Math.imul(E,rt)|0,s=s+Math.imul(E,it)|0,i=i+Math.imul(P,st)|0,n=(n=n+Math.imul(P,ot)|0)+Math.imul(k,st)|0,s=s+Math.imul(k,ot)|0,i=i+Math.imul(b,at)|0,n=(n=n+Math.imul(b,ht)|0)+Math.imul(S,at)|0,s=s+Math.imul(S,ht)|0,i=i+Math.imul(y,ft)|0,n=(n=n+Math.imul(y,pt)|0)+Math.imul(v,ft)|0,s=s+Math.imul(v,pt)|0;var Ot=(h+(i=i+Math.imul(d,mt)|0)|0)+((8191&(n=(n=n+Math.imul(d,yt)|0)+Math.imul(m,mt)|0))<<13)|0;h=((s=s+Math.imul(m,yt)|0)+(n>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,i=Math.imul(C,q),n=(n=Math.imul(C,Z))+Math.imul(U,q)|0,s=Math.imul(U,Z),i=i+Math.imul(H,X)|0,n=(n=n+Math.imul(H,Q)|0)+Math.imul(x,X)|0,s=s+Math.imul(x,Q)|0,i=i+Math.imul(M,$)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(R,$)|0,s=s+Math.imul(R,tt)|0,i=i+Math.imul(A,rt)|0,n=(n=n+Math.imul(A,it)|0)+Math.imul(T,rt)|0,s=s+Math.imul(T,it)|0,i=i+Math.imul(B,st)|0,n=(n=n+Math.imul(B,ot)|0)+Math.imul(E,st)|0,s=s+Math.imul(E,ot)|0,i=i+Math.imul(P,at)|0,n=(n=n+Math.imul(P,ht)|0)+Math.imul(k,at)|0,s=s+Math.imul(k,ht)|0,i=i+Math.imul(b,ft)|0,n=(n=n+Math.imul(b,pt)|0)+Math.imul(S,ft)|0,s=s+Math.imul(S,pt)|0;var At=(h+(i=i+Math.imul(y,mt)|0)|0)+((8191&(n=(n=n+Math.imul(y,yt)|0)+Math.imul(v,mt)|0))<<13)|0;h=((s=s+Math.imul(v,yt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,i=Math.imul(C,X),n=(n=Math.imul(C,Q))+Math.imul(U,X)|0,s=Math.imul(U,Q),i=i+Math.imul(H,$)|0,n=(n=n+Math.imul(H,tt)|0)+Math.imul(x,$)|0,s=s+Math.imul(x,tt)|0,i=i+Math.imul(M,rt)|0,n=(n=n+Math.imul(M,it)|0)+Math.imul(R,rt)|0,s=s+Math.imul(R,it)|0,i=i+Math.imul(A,st)|0,n=(n=n+Math.imul(A,ot)|0)+Math.imul(T,st)|0,s=s+Math.imul(T,ot)|0,i=i+Math.imul(B,at)|0,n=(n=n+Math.imul(B,ht)|0)+Math.imul(E,at)|0,s=s+Math.imul(E,ht)|0,i=i+Math.imul(P,ft)|0,n=(n=n+Math.imul(P,pt)|0)+Math.imul(k,ft)|0,s=s+Math.imul(k,pt)|0;var Tt=(h+(i=i+Math.imul(b,mt)|0)|0)+((8191&(n=(n=n+Math.imul(b,yt)|0)+Math.imul(S,mt)|0))<<13)|0;h=((s=s+Math.imul(S,yt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,i=Math.imul(C,$),n=(n=Math.imul(C,tt))+Math.imul(U,$)|0,s=Math.imul(U,tt),i=i+Math.imul(H,rt)|0,n=(n=n+Math.imul(H,it)|0)+Math.imul(x,rt)|0,s=s+Math.imul(x,it)|0,i=i+Math.imul(M,st)|0,n=(n=n+Math.imul(M,ot)|0)+Math.imul(R,st)|0,s=s+Math.imul(R,ot)|0,i=i+Math.imul(A,at)|0,n=(n=n+Math.imul(A,ht)|0)+Math.imul(T,at)|0,s=s+Math.imul(T,ht)|0,i=i+Math.imul(B,ft)|0,n=(n=n+Math.imul(B,pt)|0)+Math.imul(E,ft)|0,s=s+Math.imul(E,pt)|0;var Nt=(h+(i=i+Math.imul(P,mt)|0)|0)+((8191&(n=(n=n+Math.imul(P,yt)|0)+Math.imul(k,mt)|0))<<13)|0;h=((s=s+Math.imul(k,yt)|0)+(n>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,i=Math.imul(C,rt),n=(n=Math.imul(C,it))+Math.imul(U,rt)|0,s=Math.imul(U,it),i=i+Math.imul(H,st)|0,n=(n=n+Math.imul(H,ot)|0)+Math.imul(x,st)|0,s=s+Math.imul(x,ot)|0,i=i+Math.imul(M,at)|0,n=(n=n+Math.imul(M,ht)|0)+Math.imul(R,at)|0,s=s+Math.imul(R,ht)|0,i=i+Math.imul(A,ft)|0,n=(n=n+Math.imul(A,pt)|0)+Math.imul(T,ft)|0,s=s+Math.imul(T,pt)|0;var Mt=(h+(i=i+Math.imul(B,mt)|0)|0)+((8191&(n=(n=n+Math.imul(B,yt)|0)+Math.imul(E,mt)|0))<<13)|0;h=((s=s+Math.imul(E,yt)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,i=Math.imul(C,st),n=(n=Math.imul(C,ot))+Math.imul(U,st)|0,s=Math.imul(U,ot),i=i+Math.imul(H,at)|0,n=(n=n+Math.imul(H,ht)|0)+Math.imul(x,at)|0,s=s+Math.imul(x,ht)|0,i=i+Math.imul(M,ft)|0,n=(n=n+Math.imul(M,pt)|0)+Math.imul(R,ft)|0,s=s+Math.imul(R,pt)|0;var Rt=(h+(i=i+Math.imul(A,mt)|0)|0)+((8191&(n=(n=n+Math.imul(A,yt)|0)+Math.imul(T,mt)|0))<<13)|0;h=((s=s+Math.imul(T,yt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,i=Math.imul(C,at),n=(n=Math.imul(C,ht))+Math.imul(U,at)|0,s=Math.imul(U,ht),i=i+Math.imul(H,ft)|0,n=(n=n+Math.imul(H,pt)|0)+Math.imul(x,ft)|0,s=s+Math.imul(x,pt)|0;var Kt=(h+(i=i+Math.imul(M,mt)|0)|0)+((8191&(n=(n=n+Math.imul(M,yt)|0)+Math.imul(R,mt)|0))<<13)|0;h=((s=s+Math.imul(R,yt)|0)+(n>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,i=Math.imul(C,ft),n=(n=Math.imul(C,pt))+Math.imul(U,ft)|0,s=Math.imul(U,pt);var Ht=(h+(i=i+Math.imul(H,mt)|0)|0)+((8191&(n=(n=n+Math.imul(H,yt)|0)+Math.imul(x,mt)|0))<<13)|0;h=((s=s+Math.imul(x,yt)|0)+(n>>>13)|0)+(Ht>>>26)|0,Ht&=67108863;var xt=(h+(i=Math.imul(C,mt))|0)+((8191&(n=(n=Math.imul(C,yt))+Math.imul(U,mt)|0))<<13)|0;return h=((s=Math.imul(U,yt))+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,a[0]=vt,a[1]=_t,a[2]=bt,a[3]=St,a[4]=It,a[5]=Pt,a[6]=kt,a[7]=wt,a[8]=Bt,a[9]=Et,a[10]=Ot,a[11]=At,a[12]=Tt,a[13]=Nt,a[14]=Mt,a[15]=Rt,a[16]=Kt,a[17]=Ht,a[18]=xt,0!==h&&(a[19]=h,r.length++),r};function jumboMulTo(t,e,r){return(new FFTM).mulp(t,e,r)}function FFTM(t,e){this.x=t,this.y=e}Math.imul||(u=smallMulTo),BN.prototype.mulTo=function mulTo(t,e){var r,i=this.length+t.length;return r=10===this.length&&10===t.length?u(this,t,e):i<63?smallMulTo(this,t,e):i<1024?function bigMulTo(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var i=0,n=0,s=0;s<r.length-1;s++){var o=n;n=0;for(var u=67108863&i,a=Math.min(s,e.length-1),h=Math.max(0,s-t.length+1);h<=a;h++){var c=s-h,f=(0|t.words[c])*(0|e.words[h]),p=67108863&f;u=67108863&(p=p+u|0),n+=(o=(o=o+(f/67108864|0)|0)+(p>>>26)|0)>>>26,o&=67108863}r.words[s]=u,i=o,o=n}return 0!==i?r.words[s]=i:r.length--,r.strip()}(this,t,e):jumboMulTo(this,t,e),r},FFTM.prototype.makeRBT=function makeRBT(t){for(var e=new Array(t),r=BN.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,r,t);return e},FFTM.prototype.revBin=function revBin(t,e,r){if(0===t||t===r-1)return t;for(var i=0,n=0;n<e;n++)i|=(1&t)<<e-n-1,t>>=1;return i},FFTM.prototype.permute=function permute(t,e,r,i,n,s){for(var o=0;o<s;o++)i[o]=e[t[o]],n[o]=r[t[o]]},FFTM.prototype.transform=function transform(t,e,r,i,n,s){this.permute(s,t,e,r,i,n);for(var o=1;o<n;o<<=1)for(var u=o<<1,a=Math.cos(2*Math.PI/u),h=Math.sin(2*Math.PI/u),c=0;c<n;c+=u)for(var f=a,p=h,l=0;l<o;l++){var d=r[c+l],m=i[c+l],g=r[c+l+o],y=i[c+l+o],v=f*g-p*y;y=f*y+p*g,g=v,r[c+l]=d+g,i[c+l]=m+y,r[c+l+o]=d-g,i[c+l+o]=m-y,l!==u&&(v=a*f-h*p,p=a*p+h*f,f=v)}},FFTM.prototype.guessLen13b=function guessLen13b(t,e){var r=1|Math.max(e,t),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},FFTM.prototype.conjugate=function conjugate(t,e,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=t[i];t[i]=t[r-i-1],t[r-i-1]=n,n=e[i],e[i]=-e[r-i-1],e[r-i-1]=-n}},FFTM.prototype.normalize13b=function normalize13b(t,e){for(var r=0,i=0;i<e/2;i++){var n=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+r;t[i]=67108863&n,r=n<67108864?0:n/67108864|0}return t},FFTM.prototype.convert13b=function convert13b(t,e,r,i){for(var n=0,s=0;s<e;s++)n+=0|t[s],r[2*s]=8191&n,n>>>=13,r[2*s+1]=8191&n,n>>>=13;for(s=2*e;s<i;++s)r[s]=0;assert(0===n),assert(!(-8192&n))},FFTM.prototype.stub=function stub(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},FFTM.prototype.mulp=function mulp(t,e,r){var i=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(i),s=this.stub(i),o=new Array(i),u=new Array(i),a=new Array(i),h=new Array(i),c=new Array(i),f=new Array(i),p=r.words;p.length=i,this.convert13b(t.words,t.length,o,i),this.convert13b(e.words,e.length,h,i),this.transform(o,s,u,a,i,n),this.transform(h,s,c,f,i,n);for(var l=0;l<i;l++){var d=u[l]*c[l]-a[l]*f[l];a[l]=u[l]*f[l]+a[l]*c[l],u[l]=d}return this.conjugate(u,a,i),this.transform(u,a,p,s,i,n),this.conjugate(p,s,i),this.normalize13b(p,i),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},BN.prototype.mul=function mul(t){var e=new BN(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},BN.prototype.mulf=function mulf(t){var e=new BN(null);return e.words=new Array(this.length+t.length),jumboMulTo(this,t,e)},BN.prototype.imul=function imul(t){return this.clone().mulTo(t,this)},BN.prototype.imuln=function imuln(t){assert("number"==typeof t),assert(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,n=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=n>>>26,this.words[r]=67108863&n}return 0!==e&&(this.words[r]=e,this.length++),this},BN.prototype.muln=function muln(t){return this.clone().imuln(t)},BN.prototype.sqr=function sqr(){return this.mul(this)},BN.prototype.isqr=function isqr(){return this.imul(this.clone())},BN.prototype.pow=function pow(t){var e=function toBitArray(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var i=r/26|0,n=r%26;e[r]=(t.words[i]&1<<n)>>>n}return e}(t);if(0===e.length)return new BN(1);for(var r=this,i=0;i<e.length&&0===e[i];i++,r=r.sqr());if(++i<e.length)for(var n=r.sqr();i<e.length;i++,n=n.sqr())0!==e[i]&&(r=r.mul(n));return r},BN.prototype.iushln=function iushln(t){assert("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,n=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var o=this.words[e]&n,u=(0|this.words[e])-o<<r;this.words[e]=u|s,s=o>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},BN.prototype.ishln=function ishln(t){return assert(0===this.negative),this.iushln(t)},BN.prototype.iushrn=function iushrn(t,e,r){var i;assert("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var n=t%26,s=Math.min((t-n)/26,this.length),o=67108863^67108863>>>n<<n,u=r;if(i-=s,i=Math.max(0,i),u){for(var a=0;a<s;a++)u.words[a]=this.words[a];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,a=0;a<this.length;a++)this.words[a]=this.words[a+s];else this.words[0]=0,this.length=1;var h=0;for(a=this.length-1;a>=0&&(0!==h||a>=i);a--){var c=0|this.words[a];this.words[a]=h<<26-n|c>>>n,h=c&o}return u&&0!==h&&(u.words[u.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},BN.prototype.ishrn=function ishrn(t,e,r){return assert(0===this.negative),this.iushrn(t,e,r)},BN.prototype.shln=function shln(t){return this.clone().ishln(t)},BN.prototype.ushln=function ushln(t){return this.clone().iushln(t)},BN.prototype.shrn=function shrn(t){return this.clone().ishrn(t)},BN.prototype.ushrn=function ushrn(t){return this.clone().iushrn(t)},BN.prototype.testn=function testn(t){assert("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},BN.prototype.imaskn=function imaskn(t){assert("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(assert(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},BN.prototype.maskn=function maskn(t){return this.clone().imaskn(t)},BN.prototype.iaddn=function iaddn(t){return assert("number"==typeof t),assert(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},BN.prototype._iaddn=function _iaddn(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},BN.prototype.isubn=function isubn(t){if(assert("number"==typeof t),assert(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},BN.prototype.addn=function addn(t){return this.clone().iaddn(t)},BN.prototype.subn=function subn(t){return this.clone().isubn(t)},BN.prototype.iabs=function iabs(){return this.negative=0,this},BN.prototype.abs=function abs(){return this.clone().iabs()},BN.prototype._ishlnsubmul=function _ishlnsubmul(t,e,r){var i,n,s=t.length+r;this._expand(s);var o=0;for(i=0;i<t.length;i++){n=(0|this.words[i+r])+o;var u=(0|t.words[i])*e;o=((n-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&n}for(;i<this.length-r;i++)o=(n=(0|this.words[i+r])+o)>>26,this.words[i+r]=67108863&n;if(0===o)return this.strip();for(assert(-1===o),o=0,i=0;i<this.length;i++)o=(n=-(0|this.words[i])+o)>>26,this.words[i]=67108863&n;return this.negative=1,this.strip()},BN.prototype._wordDiv=function _wordDiv(t,e){var r=(this.length,t.length),i=this.clone(),n=t,s=0|n.words[n.length-1];0!==(r=26-this._countBits(s))&&(n=n.ushln(r),i.iushln(r),s=0|n.words[n.length-1]);var o,u=i.length-n.length;if("mod"!==e){(o=new BN(null)).length=u+1,o.words=new Array(o.length);for(var a=0;a<o.length;a++)o.words[a]=0}var h=i.clone()._ishlnsubmul(n,1,u);0===h.negative&&(i=h,o&&(o.words[u]=1));for(var c=u-1;c>=0;c--){var f=67108864*(0|i.words[n.length+c])+(0|i.words[n.length+c-1]);for(f=Math.min(f/s|0,67108863),i._ishlnsubmul(n,f,c);0!==i.negative;)f--,i.negative=0,i._ishlnsubmul(n,1,c),i.isZero()||(i.negative^=1);o&&(o.words[c]=f)}return o&&o.strip(),i.strip(),"div"!==e&&0!==r&&i.iushrn(r),{div:o||null,mod:i}},BN.prototype.divmod=function divmod(t,e,r){return assert(!t.isZero()),this.isZero()?{div:new BN(0),mod:new BN(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(n=s.mod.neg(),r&&0!==n.negative&&n.iadd(t)),{div:i,mod:n}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):this.negative&t.negative?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(n=s.mod.neg(),r&&0!==n.negative&&n.isub(t)),{div:s.div,mod:n}):t.length>this.length||this.cmp(t)<0?{div:new BN(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new BN(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new BN(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,n,s},BN.prototype.div=function div(t){return this.divmod(t,"div",!1).div},BN.prototype.mod=function mod(t){return this.divmod(t,"mod",!1).mod},BN.prototype.umod=function umod(t){return this.divmod(t,"mod",!0).mod},BN.prototype.divRound=function divRound(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,i=t.ushrn(1),n=t.andln(1),s=r.cmp(i);return s<0||1===n&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},BN.prototype.modn=function modn(t){assert(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},BN.prototype.idivn=function idivn(t){assert(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},BN.prototype.divn=function divn(t){return this.clone().idivn(t)},BN.prototype.egcd=function egcd(t){assert(0===t.negative),assert(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new BN(1),n=new BN(0),s=new BN(0),o=new BN(1),u=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++u;for(var a=r.clone(),h=e.clone();!e.isZero();){for(var c=0,f=1;!(e.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(e.iushrn(c);c-- >0;)(i.isOdd()||n.isOdd())&&(i.iadd(a),n.isub(h)),i.iushrn(1),n.iushrn(1);for(var p=0,l=1;!(r.words[0]&l)&&p<26;++p,l<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||o.isOdd())&&(s.iadd(a),o.isub(h)),s.iushrn(1),o.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(s),n.isub(o)):(r.isub(e),s.isub(i),o.isub(n))}return{a:s,b:o,gcd:r.iushln(u)}},BN.prototype._invmp=function _invmp(t){assert(0===t.negative),assert(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,n=new BN(1),s=new BN(0),o=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,a=1;!(e.words[0]&a)&&u<26;++u,a<<=1);if(u>0)for(e.iushrn(u);u-- >0;)n.isOdd()&&n.iadd(o),n.iushrn(1);for(var h=0,c=1;!(r.words[0]&c)&&h<26;++h,c<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(o),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),n.isub(s)):(r.isub(e),s.isub(n))}return(i=0===e.cmpn(1)?n:s).cmpn(0)<0&&i.iadd(t),i},BN.prototype.gcd=function gcd(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var i=0;e.isEven()&&r.isEven();i++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=e.cmp(r);if(n<0){var s=e;e=r,r=s}else if(0===n||0===r.cmpn(1))break;e.isub(r)}return r.iushln(i)},BN.prototype.invm=function invm(t){return this.egcd(t).a.umod(t)},BN.prototype.isEven=function isEven(){return!(1&this.words[0])},BN.prototype.isOdd=function isOdd(){return!(1&~this.words[0])},BN.prototype.andln=function andln(t){return this.words[0]&t},BN.prototype.bincn=function bincn(t){assert("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var n=i,s=r;0!==n&&s<this.length;s++){var o=0|this.words[s];n=(o+=n)>>>26,o&=67108863,this.words[s]=o}return 0!==n&&(this.words[s]=n,this.length++),this},BN.prototype.isZero=function isZero(){return 1===this.length&&0===this.words[0]},BN.prototype.cmpn=function cmpn(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),assert(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},BN.prototype.cmp=function cmp(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},BN.prototype.ucmp=function ucmp(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|t.words[r];if(i!==n){i<n?e=-1:i>n&&(e=1);break}}return e},BN.prototype.gtn=function gtn(t){return 1===this.cmpn(t)},BN.prototype.gt=function gt(t){return 1===this.cmp(t)},BN.prototype.gten=function gten(t){return this.cmpn(t)>=0},BN.prototype.gte=function gte(t){return this.cmp(t)>=0},BN.prototype.ltn=function ltn(t){return-1===this.cmpn(t)},BN.prototype.lt=function lt(t){return-1===this.cmp(t)},BN.prototype.lten=function lten(t){return this.cmpn(t)<=0},BN.prototype.lte=function lte(t){return this.cmp(t)<=0},BN.prototype.eqn=function eqn(t){return 0===this.cmpn(t)},BN.prototype.eq=function eq(t){return 0===this.cmp(t)},BN.red=function red(t){return new Red(t)},BN.prototype.toRed=function toRed(t){return assert(!this.red,"Already a number in reduction context"),assert(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},BN.prototype.fromRed=function fromRed(){return assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},BN.prototype._forceRed=function _forceRed(t){return this.red=t,this},BN.prototype.forceRed=function forceRed(t){return assert(!this.red,"Already a number in reduction context"),this._forceRed(t)},BN.prototype.redAdd=function redAdd(t){return assert(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},BN.prototype.redIAdd=function redIAdd(t){return assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},BN.prototype.redSub=function redSub(t){return assert(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},BN.prototype.redISub=function redISub(t){return assert(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},BN.prototype.redShl=function redShl(t){return assert(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},BN.prototype.redMul=function redMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},BN.prototype.redIMul=function redIMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},BN.prototype.redSqr=function redSqr(){return assert(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},BN.prototype.redISqr=function redISqr(){return assert(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},BN.prototype.redSqrt=function redSqrt(){return assert(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},BN.prototype.redInvm=function redInvm(){return assert(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},BN.prototype.redNeg=function redNeg(){return assert(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},BN.prototype.redPow=function redPow(t){return assert(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var a={k256:null,p224:null,p192:null,p25519:null};function MPrime(t,e){this.name=t,this.p=new BN(e,16),this.n=this.p.bitLength(),this.k=new BN(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Red(t){if("string"==typeof t){var e=BN._prime(t);this.m=e.p,this.prime=e}else assert(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function Mont(t){Red.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new BN(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}MPrime.prototype._tmp=function _tmp(){var t=new BN(null);return t.words=new Array(Math.ceil(this.n/13)),t},MPrime.prototype.ireduce=function ireduce(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var i=e<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):r.strip(),r},MPrime.prototype.split=function split(t,e){t.iushrn(this.n,0,e)},MPrime.prototype.imulK=function imulK(t){return t.imul(this.k)},inherits(K256,MPrime),K256.prototype.split=function split(t,e){for(var r=4194303,i=Math.min(t.length,9),n=0;n<i;n++)e.words[n]=t.words[n];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=s&r,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(o&r)<<4|s>>>22,s=o}s>>>=22,t.words[n-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},K256.prototype.imulK=function imulK(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var i=0|t.words[r];e+=977*i,t.words[r]=67108863&e,e=64*i+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},inherits(P224,MPrime),inherits(P192,MPrime),inherits(P25519,MPrime),P25519.prototype.imulK=function imulK(t){for(var e=0,r=0;r<t.length;r++){var i=19*(0|t.words[r])+e,n=67108863&i;i>>>=26,t.words[r]=n,e=i}return 0!==e&&(t.words[t.length++]=e),t},BN._prime=function prime(t){if(a[t])return a[t];var prime;if("k256"===t)prime=new K256;else if("p224"===t)prime=new P224;else if("p192"===t)prime=new P192;else{if("p25519"!==t)throw new Error("Unknown prime "+t);prime=new P25519}return a[t]=prime,prime},Red.prototype._verify1=function _verify1(t){assert(0===t.negative,"red works only with positives"),assert(t.red,"red works only with red numbers")},Red.prototype._verify2=function _verify2(t,e){assert(!(t.negative|e.negative),"red works only with positives"),assert(t.red&&t.red===e.red,"red works only with red numbers")},Red.prototype.imod=function imod(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},Red.prototype.neg=function neg(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},Red.prototype.add=function add(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},Red.prototype.iadd=function iadd(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},Red.prototype.sub=function sub(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},Red.prototype.isub=function isub(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},Red.prototype.shl=function shl(t,e){return this._verify1(t),this.imod(t.ushln(e))},Red.prototype.imul=function imul(t,e){return this._verify2(t,e),this.imod(t.imul(e))},Red.prototype.mul=function mul(t,e){return this._verify2(t,e),this.imod(t.mul(e))},Red.prototype.isqr=function isqr(t){return this.imul(t,t.clone())},Red.prototype.sqr=function sqr(t){return this.mul(t,t)},Red.prototype.sqrt=function sqrt(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(assert(e%2==1),3===e){var r=this.m.add(new BN(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),n=0;!i.isZero()&&0===i.andln(1);)n++,i.iushrn(1);assert(!i.isZero());var s=new BN(1).toRed(this),o=s.redNeg(),u=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new BN(2*a*a).toRed(this);0!==this.pow(a,u).cmp(o);)a.redIAdd(o);for(var h=this.pow(a,i),c=this.pow(t,i.addn(1).iushrn(1)),f=this.pow(t,i),p=n;0!==f.cmp(s);){for(var l=f,d=0;0!==l.cmp(s);d++)l=l.redSqr();assert(d<p);var m=this.pow(h,new BN(1).iushln(p-d-1));c=c.redMul(m),h=m.redSqr(),f=f.redMul(h),p=d}return c},Red.prototype.invm=function invm(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},Red.prototype.pow=function pow(t,e){if(e.isZero())return new BN(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new BN(1).toRed(this),r[1]=t;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],t);var n=r[0],s=0,o=0,u=e.bitLength()%26;for(0===u&&(u=26),i=e.length-1;i>=0;i--){for(var a=e.words[i],h=u-1;h>=0;h--){var c=a>>h&1;n!==r[0]&&(n=this.sqr(n)),0!==c||0!==s?(s<<=1,s|=c,(4===++o||0===i&&0===h)&&(n=this.mul(n,r[s]),o=0,s=0)):o=0}u=26}return n},Red.prototype.convertTo=function convertTo(t){var e=t.umod(this.m);return e===t?e.clone():e},Red.prototype.convertFrom=function convertFrom(t){var e=t.clone();return e.red=null,e},BN.mont=function mont(t){return new Mont(t)},inherits(Mont,Red),Mont.prototype.convertTo=function convertTo(t){return this.imod(t.ushln(this.shift))},Mont.prototype.convertFrom=function convertFrom(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},Mont.prototype.imul=function imul(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},Mont.prototype.mul=function mul(t,e){if(t.isZero()||e.isZero())return new BN(0)._forceRed(this);var r=t.mul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},Mont.prototype.invm=function invm(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=r.nmd(t),this)},576161:t=>{"function"==typeof Object.create?t.exports=function inherits(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function inherits(t,e){t.super_=e;var TempCtor=function(){};TempCtor.prototype=e.prototype,t.prototype=new TempCtor,t.prototype.constructor=t}},55287:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BLAKE2=e.SIGMA=void 0;const i=r(798460),n=r(849074);e.SIGMA=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]);class BLAKE2 extends n.Hash{constructor(t,e,r={},s,o,u){if(super(),this.blockLen=t,this.outputLen=e,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,(0,i.number)(t),(0,i.number)(e),(0,i.number)(s),e<0||e>s)throw new Error("outputLen bigger than keyLen");if(void 0!==r.key&&(r.key.length<1||r.key.length>s))throw new Error(`key must be up 1..${s} byte long or undefined`);if(void 0!==r.salt&&r.salt.length!==o)throw new Error(`salt must be ${o} byte long or undefined`);if(void 0!==r.personalization&&r.personalization.length!==u)throw new Error(`personalization must be ${u} byte long or undefined`);this.buffer32=(0,n.u32)(this.buffer=new Uint8Array(t))}update(t){(0,i.exists)(this);const{blockLen:e,buffer:r,buffer32:s}=this,o=(t=(0,n.toBytes)(t)).length,u=t.byteOffset,a=t.buffer;for(let i=0;i<o;){this.pos===e&&(this.compress(s,0,!1),this.pos=0);const n=Math.min(e-this.pos,o-i),h=u+i;if(n!==e||h%4||!(i+n<o))r.set(t.subarray(i,i+n),this.pos),this.pos+=n,this.length+=n,i+=n;else{const t=new Uint32Array(a,h,Math.floor((o-i)/4));for(let r=0;i+e<o;r+=s.length,i+=e)this.length+=e,this.compress(t,r,!1)}}return this}digestInto(t){(0,i.exists)(this),(0,i.output)(t,this);const{pos:e,buffer32:r}=this;this.finished=!0,this.buffer.subarray(e).fill(0),this.compress(r,0,!0);const s=(0,n.u32)(t);this.get().forEach(((t,e)=>s[e]=t))}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){const{buffer:e,length:r,finished:i,destroyed:n,outputLen:s,pos:o}=this;return t||(t=new this.constructor({dkLen:s})),t.set(...this.get()),t.length=r,t.finished=i,t.destroyed=n,t.outputLen=s,t.buffer.set(e),t.pos=o,t}}e.BLAKE2=BLAKE2},74042:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.blake2b=void 0;const i=r(55287),n=r(398081),s=r(849074),o=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),u=new Uint32Array(32);function G1(t,e,r,i,s,o){const a=s[o],h=s[o+1];let c=u[2*t],f=u[2*t+1],p=u[2*e],l=u[2*e+1],d=u[2*r],m=u[2*r+1],g=u[2*i],y=u[2*i+1],v=n.default.add3L(c,p,a);f=n.default.add3H(v,f,l,h),c=0|v,({Dh:y,Dl:g}={Dh:y^f,Dl:g^c}),({Dh:y,Dl:g}={Dh:n.default.rotr32H(y,g),Dl:n.default.rotr32L(y,g)}),({h:m,l:d}=n.default.add(m,d,y,g)),({Bh:l,Bl:p}={Bh:l^m,Bl:p^d}),({Bh:l,Bl:p}={Bh:n.default.rotrSH(l,p,24),Bl:n.default.rotrSL(l,p,24)}),u[2*t]=c,u[2*t+1]=f,u[2*e]=p,u[2*e+1]=l,u[2*r]=d,u[2*r+1]=m,u[2*i]=g,u[2*i+1]=y}function G2(t,e,r,i,s,o){const a=s[o],h=s[o+1];let c=u[2*t],f=u[2*t+1],p=u[2*e],l=u[2*e+1],d=u[2*r],m=u[2*r+1],g=u[2*i],y=u[2*i+1],v=n.default.add3L(c,p,a);f=n.default.add3H(v,f,l,h),c=0|v,({Dh:y,Dl:g}={Dh:y^f,Dl:g^c}),({Dh:y,Dl:g}={Dh:n.default.rotrSH(y,g,16),Dl:n.default.rotrSL(y,g,16)}),({h:m,l:d}=n.default.add(m,d,y,g)),({Bh:l,Bl:p}={Bh:l^m,Bl:p^d}),({Bh:l,Bl:p}={Bh:n.default.rotrBH(l,p,63),Bl:n.default.rotrBL(l,p,63)}),u[2*t]=c,u[2*t+1]=f,u[2*e]=p,u[2*e+1]=l,u[2*r]=d,u[2*r+1]=m,u[2*i]=g,u[2*i+1]=y}class BLAKE2b extends i.BLAKE2{constructor(t={}){super(128,void 0===t.dkLen?64:t.dkLen,t,64,16,16),this.v0l=0|o[0],this.v0h=0|o[1],this.v1l=0|o[2],this.v1h=0|o[3],this.v2l=0|o[4],this.v2h=0|o[5],this.v3l=0|o[6],this.v3h=0|o[7],this.v4l=0|o[8],this.v4h=0|o[9],this.v5l=0|o[10],this.v5h=0|o[11],this.v6l=0|o[12],this.v6h=0|o[13],this.v7l=0|o[14],this.v7h=0|o[15];const e=t.key?t.key.length:0;if(this.v0l^=this.outputLen|e<<8|65536|1<<24,t.salt){const e=(0,s.u32)((0,s.toBytes)(t.salt));this.v4l^=e[0],this.v4h^=e[1],this.v5l^=e[2],this.v5h^=e[3]}if(t.personalization){const e=(0,s.u32)((0,s.toBytes)(t.personalization));this.v6l^=e[0],this.v6h^=e[1],this.v7l^=e[2],this.v7h^=e[3]}if(t.key){const e=new Uint8Array(this.blockLen);e.set((0,s.toBytes)(t.key)),this.update(e)}}get(){let{v0l:t,v0h:e,v1l:r,v1h:i,v2l:n,v2h:s,v3l:o,v3h:u,v4l:a,v4h:h,v5l:c,v5h:f,v6l:p,v6h:l,v7l:d,v7h:m}=this;return[t,e,r,i,n,s,o,u,a,h,c,f,p,l,d,m]}set(t,e,r,i,n,s,o,u,a,h,c,f,p,l,d,m){this.v0l=0|t,this.v0h=0|e,this.v1l=0|r,this.v1h=0|i,this.v2l=0|n,this.v2h=0|s,this.v3l=0|o,this.v3h=0|u,this.v4l=0|a,this.v4h=0|h,this.v5l=0|c,this.v5h=0|f,this.v6l=0|p,this.v6h=0|l,this.v7l=0|d,this.v7h=0|m}compress(t,e,r){this.get().forEach(((t,e)=>u[e]=t)),u.set(o,16);let{h:s,l:a}=n.default.fromBig(BigInt(this.length));u[24]=o[8]^a,u[25]=o[9]^s,r&&(u[28]=~u[28],u[29]=~u[29]);let h=0;const c=i.SIGMA;for(let r=0;r<12;r++)G1(0,4,8,12,t,e+2*c[h++]),G2(0,4,8,12,t,e+2*c[h++]),G1(1,5,9,13,t,e+2*c[h++]),G2(1,5,9,13,t,e+2*c[h++]),G1(2,6,10,14,t,e+2*c[h++]),G2(2,6,10,14,t,e+2*c[h++]),G1(3,7,11,15,t,e+2*c[h++]),G2(3,7,11,15,t,e+2*c[h++]),G1(0,5,10,15,t,e+2*c[h++]),G2(0,5,10,15,t,e+2*c[h++]),G1(1,6,11,12,t,e+2*c[h++]),G2(1,6,11,12,t,e+2*c[h++]),G1(2,7,8,13,t,e+2*c[h++]),G2(2,7,8,13,t,e+2*c[h++]),G1(3,4,9,14,t,e+2*c[h++]),G2(3,4,9,14,t,e+2*c[h++]);this.v0l^=u[0]^u[16],this.v0h^=u[1]^u[17],this.v1l^=u[2]^u[18],this.v1h^=u[3]^u[19],this.v2l^=u[4]^u[20],this.v2h^=u[5]^u[21],this.v3l^=u[6]^u[22],this.v3h^=u[7]^u[23],this.v4l^=u[8]^u[24],this.v4h^=u[9]^u[25],this.v5l^=u[10]^u[26],this.v5h^=u[11]^u[27],this.v6l^=u[12]^u[28],this.v6h^=u[13]^u[29],this.v7l^=u[14]^u[30],this.v7h^=u[15]^u[31],u.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}e.blake2b=(0,s.wrapConstructorWithOpts)((t=>new BLAKE2b(t)))},142490:t=>{t.exports=function(t,e){if("function"==typeof t.compare)return t.compare(e);if(t===e)return 0;for(var r=t.length,i=e.length,n=0,s=Math.min(r,i);n<s&&t[n]===e[n];)++n;return n!==s&&(r=t[n],i=e[n]),r<i?-1:i<r?1:0}},999367:t=>{"use strict";t.exports={rE:"1.6.5"}}}]);