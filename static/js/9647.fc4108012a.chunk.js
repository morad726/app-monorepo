/*! For license information please see 9647.fc4108012a.chunk.js.LICENSE.txt */
(self.webpackChunkweb=self.webpackChunkweb||[]).push([[9647],{970742:(t,e,r)=>{"use strict";var i=r(939216),n=r(825636).Buffer;t.exports=function(t){function decodeRaw(e){var r=e.slice(0,-4),i=e.slice(-4),n=t(r);if(!(i[0]^n[0]|i[1]^n[1]|i[2]^n[2]|i[3]^n[3]))return r}return{encode:function encode(e){var r=t(e);return i.encode(n.concat([e,r],e.length+4))},decode:function decode(t){var e=decodeRaw(i.decode(t));if(!e)throw new Error("Invalid checksum");return e},decodeUnsafe:function decodeUnsafe(t){var e=i.decodeUnsafe(t);if(e)return decodeRaw(e)}}}},222747:(t,e,r)=>{"use strict";var i=r(213257),n=r(970742);t.exports=n((function sha256x2(t){var e=i("sha256").update(t).digest();return i("sha256").update(e).digest()}))},335344:(t,e,r)=>{var i=r(222747),n=r(850630),s=r(901048).Buffer,o={Legacy:"legacy",Bitpay:"bitpay",Cashaddr:"cashaddr"},a={Mainnet:"mainnet",Testnet:"testnet"},u={};function detectAddressFormat(t){return decodeAddress(t).format}function detectAddressNetwork(t){return decodeAddress(t).network}function detectAddressType(t){return decodeAddress(t).type}u.P2PKH="p2pkh",u.P2SH="p2sh";var h={};function decodeAddress(t){try{return function decodeBase58Address(t){try{var e=i.decode(t);if(e.length!==c)throw new InvalidAddressError;var r=e[0],n=Array.prototype.slice.call(e,1);switch(r){case h[o.Legacy][a.Mainnet][u.P2PKH]:return{hash:n,format:o.Legacy,network:a.Mainnet,type:u.P2PKH};case h[o.Legacy][a.Mainnet][u.P2SH]:return{hash:n,format:o.Legacy,network:a.Mainnet,type:u.P2SH};case h[o.Legacy][a.Testnet][u.P2PKH]:return{hash:n,format:o.Legacy,network:a.Testnet,type:u.P2PKH};case h[o.Legacy][a.Testnet][u.P2SH]:return{hash:n,format:o.Legacy,network:a.Testnet,type:u.P2SH};case h[o.Bitpay][a.Mainnet][u.P2PKH]:return{hash:n,format:o.Bitpay,network:a.Mainnet,type:u.P2PKH};case h[o.Bitpay][a.Mainnet][u.P2SH]:return{hash:n,format:o.Bitpay,network:a.Mainnet,type:u.P2SH}}}catch(t){}throw new InvalidAddressError}(t)}catch(t){}try{return function decodeCashAddress(t){if(-1!==t.indexOf(":"))try{return decodeCashAddressWithPrefix(t)}catch(t){}else for(var e=["bitcoincash","bchtest","bchreg"],r=0;r<e.length;++r)try{return decodeCashAddressWithPrefix(e[r]+":"+t)}catch(t){}throw new InvalidAddressError}(t)}catch(t){}throw new InvalidAddressError}h[o.Legacy]={},h[o.Legacy][a.Mainnet]={},h[o.Legacy][a.Mainnet][u.P2PKH]=0,h[o.Legacy][a.Mainnet][u.P2SH]=5,h[o.Legacy][a.Testnet]={},h[o.Legacy][a.Testnet][u.P2PKH]=111,h[o.Legacy][a.Testnet][u.P2SH]=196,h[o.Bitpay]={},h[o.Bitpay][a.Mainnet]={},h[o.Bitpay][a.Mainnet][u.P2PKH]=28,h[o.Bitpay][a.Mainnet][u.P2SH]=40,h[o.Bitpay][a.Testnet]={},h[o.Bitpay][a.Testnet][u.P2PKH]=111,h[o.Bitpay][a.Testnet][u.P2SH]=196;var c=21;function decodeCashAddressWithPrefix(t){try{var e=n.decode(t),r=Array.prototype.slice.call(e.hash,0),i="P2PKH"===e.type?u.P2PKH:u.P2SH;switch(e.prefix){case"bitcoincash":return{hash:r,format:o.Cashaddr,network:a.Mainnet,type:i};case"bchtest":case"bchreg":return{hash:r,format:o.Cashaddr,network:a.Testnet,type:i}}}catch(t){}throw new InvalidAddressError}function InvalidAddressError(){var t=new Error;this.name=t.name="InvalidAddressError",this.message=t.message="Received an invalid Bitcoin Cash address as input.",this.stack=t.stack}InvalidAddressError.prototype=Object.create(Error.prototype),t.exports={Format:o,Network:a,Type:u,isValidAddress:function isValidAddress(t){try{return decodeAddress(t),!0}catch(t){return!1}},detectAddressFormat,detectAddressNetwork,detectAddressType,toLegacyAddress:function toLegacyAddress(t){var e=decodeAddress(t);return e.format===o.Legacy?t:function encodeAsLegacy(t){var e=h[o.Legacy][t.network][t.type],r=s.alloc(1+t.hash.length);return r[0]=e,r.set(t.hash,1),i.encode(r)}(e)},toBitpayAddress:function toBitpayAddress(t){var e=decodeAddress(t);return e.format===o.Bitpay?t:function encodeAsBitpay(t){var e=h[o.Bitpay][t.network][t.type],r=s.alloc(1+t.hash.length);return r[0]=e,r.set(t.hash,1),i.encode(r)}(e)},toCashAddress:function toCashAddress(t){return function encodeAsCashaddr(t){var e=t.network===a.Mainnet?"bitcoincash":"bchtest",r=t.type===u.P2PKH?"P2PKH":"P2SH",i=new Uint8Array(t.hash);return n.encode(e,r,i)}(decodeAddress(t))},isLegacyAddress:function isLegacyAddress(t){return detectAddressFormat(t)===o.Legacy},isBitpayAddress:function isBitpayAddress(t){return detectAddressFormat(t)===o.Bitpay},isCashAddress:function isCashAddress(t){return detectAddressFormat(t)===o.Cashaddr},isMainnetAddress:function isMainnetAddress(t){return detectAddressNetwork(t)===a.Mainnet},isTestnetAddress:function isTestnetAddress(t){return detectAddressNetwork(t)===a.Testnet},isP2PKHAddress:function isP2PKHAddress(t){return detectAddressType(t)===u.P2PKH},isP2SHAddress:function isP2SHAddress(t){return detectAddressType(t)===u.P2SH},InvalidAddressError}},626355:(t,e,r)=>{var i=r(253610),n={};for(var s in i){n[i[s]]=s}t.exports=n},786360:t=>{"use strict";for(var e="qpzry9x8gf2tvdw0s3jn54khce6mua7l",r={},i=0;i<32;i++){var n=e.charAt(i);if(void 0!==r[n])throw new TypeError(n+" is ambiguous");r[n]=i}function polymodStep(t){var e=t>>25;return(33554431&t)<<5^996825010&-(1&e)^642813549&-(e>>1&1)^513874426&-(e>>2&1)^1027748829&-(e>>3&1)^705979059&-(e>>4&1)}function prefixChk(t){for(var e=1,r=0;r<t.length;++r){var i=t.charCodeAt(r);if(i<33||i>126)return"Invalid prefix ("+t+")";e=polymodStep(e)^i>>5}for(e=polymodStep(e),r=0;r<t.length;++r){var n=t.charCodeAt(r);e=polymodStep(e)^31&n}return e}function __decode(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var i=t.toLowerCase(),n=t.toUpperCase();if(t!==i&&t!==n)return"Mixed-case string "+t;var s=(t=i).lastIndexOf("1");if(-1===s)return"No separator character for "+t;if(0===s)return"Missing prefix for "+t;var o=t.slice(0,s),a=t.slice(s+1);if(a.length<6)return"Data too short";var u=prefixChk(o);if("string"==typeof u)return u;for(var h=[],c=0;c<a.length;++c){var p=a.charAt(c),l=r[p];if(void 0===l)return"Unknown character "+p;u=polymodStep(u)^l,c+6>=a.length||h.push(l)}return 1!==u?"Invalid checksum for "+t:{prefix:o,words:h}}function convert(t,e,r,i){for(var n=0,s=0,o=(1<<r)-1,a=[],u=0;u<t.length;++u)for(n=n<<e|t[u],s+=e;s>=r;)s-=r,a.push(n>>s&o);if(i)s>0&&a.push(n<<r-s&o);else{if(s>=e)return"Excess padding";if(n<<r-s&o)return"Non-zero padding"}return a}t.exports={decodeUnsafe:function decodeUnsafe(){var t=__decode.apply(null,arguments);if("object"==typeof t)return t},decode:function decode(t){var e=__decode.apply(null,arguments);if("object"==typeof e)return e;throw new Error(e)},encode:function encode(t,r,i){if(i=i||90,t.length+7+r.length>i)throw new TypeError("Exceeds length limit");var n=prefixChk(t=t.toLowerCase());if("string"==typeof n)throw new Error(n);for(var s=t+"1",o=0;o<r.length;++o){var a=r[o];if(a>>5)throw new Error("Non 5-bit word");n=polymodStep(n)^a,s+=e.charAt(a)}for(o=0;o<6;++o)n=polymodStep(n);for(n^=1,o=0;o<6;++o){s+=e.charAt(n>>5*(5-o)&31)}return s},toWordsUnsafe:function toWordsUnsafe(t){var e=convert(t,8,5,!0);if(Array.isArray(e))return e},toWords:function toWords(t){var e=convert(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)},fromWordsUnsafe:function fromWordsUnsafe(t){var e=convert(t,5,8,!1);if(Array.isArray(e))return e},fromWords:function fromWords(t){var e=convert(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}}},295720:(t,e,r)=>{"use strict";var i=r(901048).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(744229),s=r(990807),o=r(345586),a=r(420973),u=r(546952),h=a.BufferN(32),c=a.compile({wif:a.UInt8,bip32:{public:a.UInt32,private:a.UInt32}}),p={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},l=2147483648,f=Math.pow(2,31)-1;function BIP32Path(t){return a.String(t)&&null!==t.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}function UInt31(t){return a.UInt32(t)&&t<=f}class BIP32{constructor(t,e,r,i,n=0,s=0,o=0){this.__D=t,this.__Q=e,this.chainCode=r,this.network=i,this.__DEPTH=n,this.__INDEX=s,this.__PARENT_FINGERPRINT=o,a(c,i),this.lowR=!1}get depth(){return this.__DEPTH}get index(){return this.__INDEX}get parentFingerprint(){return this.__PARENT_FINGERPRINT}get publicKey(){return void 0===this.__Q&&(this.__Q=o.pointFromScalar(this.__D,!0)),this.__Q}get privateKey(){return this.__D}get identifier(){return n.hash160(this.publicKey)}get fingerprint(){return this.identifier.slice(0,4)}get compressed(){return!0}isNeutered(){return void 0===this.__D}neutered(){return fromPublicKeyLocal(this.publicKey,this.chainCode,this.network,this.depth,this.index,this.parentFingerprint)}toBase58(){const t=this.network,e=this.isNeutered()?t.bip32.public:t.bip32.private,r=i.allocUnsafe(78);return r.writeUInt32BE(e,0),r.writeUInt8(this.depth,4),r.writeUInt32BE(this.parentFingerprint,5),r.writeUInt32BE(this.index,9),this.chainCode.copy(r,13),this.isNeutered()?this.publicKey.copy(r,45):(r.writeUInt8(0,45),this.privateKey.copy(r,46)),s.encode(r)}toWIF(){if(!this.privateKey)throw new TypeError("Missing private key");return u.encode(this.network.wif,this.privateKey,!0)}derive(t){a(a.UInt32,t);const e=t>=l,r=i.allocUnsafe(37);if(e){if(this.isNeutered())throw new TypeError("Missing private key for hardened child key");r[0]=0,this.privateKey.copy(r,1),r.writeUInt32BE(t,33)}else this.publicKey.copy(r,0),r.writeUInt32BE(t,33);const s=n.hmacSHA512(this.chainCode,r),u=s.slice(0,32),h=s.slice(32);if(!o.isPrivate(u))return this.derive(t+1);let c;if(this.isNeutered()){const e=o.pointAddScalar(this.publicKey,u,!0);if(null===e)return this.derive(t+1);c=fromPublicKeyLocal(e,h,this.network,this.depth+1,t,this.fingerprint.readUInt32BE(0))}else{const e=o.privateAdd(this.privateKey,u);if(null==e)return this.derive(t+1);c=fromPrivateKeyLocal(e,h,this.network,this.depth+1,t,this.fingerprint.readUInt32BE(0))}return c}deriveHardened(t){return a(UInt31,t),this.derive(t+l)}derivePath(t){a(BIP32Path,t);let e=t.split("/");if("m"===e[0]){if(this.parentFingerprint)throw new TypeError("Expected master, got child");e=e.slice(1)}return e.reduce(((t,e)=>{let r;return"'"===e.slice(-1)?(r=parseInt(e.slice(0,-1),10),t.deriveHardened(r)):(r=parseInt(e,10),t.derive(r))}),this)}sign(t,e){if(!this.privateKey)throw new Error("Missing private key");if(void 0===e&&(e=this.lowR),!1===e)return o.sign(t,this.privateKey);{let e=o.sign(t,this.privateKey);const r=i.alloc(32,0);let n=0;for(;e[0]>127;)n++,r.writeUIntLE(n,0,6),e=o.signWithEntropy(t,this.privateKey,r);return e}}verify(t,e){return o.verify(t,this.publicKey,e)}}function fromPrivateKey(t,e,r){return fromPrivateKeyLocal(t,e,r)}function fromPrivateKeyLocal(t,e,r,i,n,s){if(a({privateKey:h,chainCode:h},{privateKey:t,chainCode:e}),r=r||p,!o.isPrivate(t))throw new TypeError("Private key not in range [1, n)");return new BIP32(t,void 0,e,r,i,n,s)}function fromPublicKeyLocal(t,e,r,i,n,s){if(a({publicKey:a.BufferN(33),chainCode:h},{publicKey:t,chainCode:e}),r=r||p,!o.isPoint(t))throw new TypeError("Point is not on the curve");return new BIP32(void 0,t,e,r,i,n,s)}e.fromBase58=function fromBase58(t,e){const r=s.decode(t);if(78!==r.length)throw new TypeError("Invalid buffer length");e=e||p;const i=r.readUInt32BE(0);if(i!==e.bip32.private&&i!==e.bip32.public)throw new TypeError("Invalid network version");const n=r[4],o=r.readUInt32BE(5);if(0===n&&0!==o)throw new TypeError("Invalid parent fingerprint");const a=r.readUInt32BE(9);if(0===n&&0!==a)throw new TypeError("Invalid index");const u=r.slice(13,45);let h;if(i===e.bip32.private){if(0!==r.readUInt8(45))throw new TypeError("Invalid private key");h=fromPrivateKeyLocal(r.slice(46,78),u,e,n,a,o)}else{h=fromPublicKeyLocal(r.slice(45,78),u,e,n,a,o)}return h},e.fromPrivateKey=fromPrivateKey,e.fromPublicKey=function fromPublicKey(t,e,r){return fromPublicKeyLocal(t,e,r)},e.fromSeed=function fromSeed(t,e){if(a(a.Buffer,t),t.length<16)throw new TypeError("Seed should be at least 128 bits");if(t.length>64)throw new TypeError("Seed should be at most 512 bits");e=e||p;const r=n.hmacSHA512(i.from("Bitcoin seed","utf8"),t);return fromPrivateKey(r.slice(0,32),r.slice(32),e)}},744229:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(213257),n=r(745262);e.hash160=function hash160(t){const e=i("sha256").update(t).digest();try{return i("rmd160").update(e).digest()}catch(t){return i("ripemd160").update(e).digest()}},e.hmacSHA512=function hmacSHA512(t,e){return n("sha512",t).update(e).digest()}},408930:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(295720);e.fromSeed=i.fromSeed,e.fromBase58=i.fromBase58,e.fromPublicKey=i.fromPublicKey,e.fromPrivateKey=i.fromPrivateKey},254330:(t,e,r)=>{"use strict";var i=r(939216),n=r(825636).Buffer;t.exports=function(t){function decodeRaw(e){var r=e.slice(0,-4),i=e.slice(-4),n=t(r);if(!(i[0]^n[0]|i[1]^n[1]|i[2]^n[2]|i[3]^n[3]))return r}return{encode:function encode(e){var r=t(e);return i.encode(n.concat([e,r],e.length+4))},decode:function decode(t){var e=decodeRaw(i.decode(t));if(!e)throw new Error("Invalid checksum");return e},decodeUnsafe:function decodeUnsafe(t){var e=i.decodeUnsafe(t);if(e)return decodeRaw(e)}}}},990807:(t,e,r)=>{"use strict";var i=r(213257),n=r(254330);t.exports=n((function sha256x2(t){var e=i("sha256").update(t).digest();return i("sha256").update(e).digest()}))},910150:(t,e,r)=>{"use strict";var i=r(901048).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(644931),s=r(5491),o=r(385320),a=r(962119),u=r(701763),h=r(786360),c=r(990807),p=r(420973);function fromBase58Check(t){if(n.VALID_PREFIXES.indexOf(t.split(":")[0])>-1){const e=n.decode(t);let r,o;switch(e.prefix){case"bitcoincash":r=s.bitcoin;break;case"bchtest":r=s.testnet;break;case"bchreg":r=s.regtest}switch(e.type){case"P2PKH":o=r.pubKeyHash;break;case"P2SH":o=r.scriptHash}if(e.hash.length<20)throw new TypeError(t+" is too short");if(e.hash.length>20)throw new TypeError(t+" is too long");return{version:o,hash:i.from(e.hash)}}{const e=c.decode(t);if(e.length<21)throw new TypeError(t+" is too short");if(e.length>21)throw new TypeError(t+" is too long");return{version:e.readUInt8(0),hash:e.slice(1)}}}function fromBech32(t){const e=h.decode(t),r=h.fromWords(e.words.slice(1));return{version:e.words[0],prefix:e.prefix,data:i.from(r)}}e.fromBase58Check=fromBase58Check,e.fromBech32=fromBech32,e.toBase58Check=function toBase58Check(t,e){p(u.tuple(u.Hash160bit,u.UInt8),arguments);const r=i.allocUnsafe(21);return r.writeUInt8(e,0),t.copy(r,1),c.encode(r)},e.toBech32=function toBech32(t,e,r){const i=h.toWords(t);return i.unshift(e),h.encode(r,i)},e.fromOutputScript=function fromOutputScript(t,e){e=e||s.bitcoin;try{return o.p2pkh({output:t,network:e}).address}catch(t){}try{return o.p2sh({output:t,network:e}).address}catch(t){}try{return o.p2wpkh({output:t,network:e}).address}catch(t){}try{return o.p2wsh({output:t,network:e}).address}catch(t){}throw new Error(a.toASM(t)+" has no matching Address")},e.toOutputScript=function toOutputScript(t,e){let r,i;e=e||s.bitcoin;try{r=fromBase58Check(t)}catch(t){}if(r){if(r.version===e.pubKeyHash)return o.p2pkh({hash:r.hash}).output;if(r.version===e.scriptHash)return o.p2sh({hash:r.hash}).output}else{try{i=fromBech32(t)}catch(t){}if(i){if(i.prefix!==e.bech32)throw new Error(t+" has an invalid prefix");if(0===i.version){if(20===i.data.length)return o.p2wpkh({hash:i.data}).output;if(32===i.data.length)return o.p2wsh({hash:i.data}).output}}}throw new Error(t+" has no matching Script")}},288127:(t,e,r)=>{"use strict";var i=r(901048).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(165649),s=r(604033),o=r(432082),a=r(701763),u=r(28158),h=r(420973),c=r(377820),p=new TypeError("Cannot compute merkle root for zero transactions"),l=new TypeError("Cannot compute witness commit for non-segwit block");class Block{constructor(){this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}static fromBuffer(t){if(t.length<80)throw new Error("Buffer too small (< 80 bytes)");const e=new n.BufferReader(t),r=new Block;if(r.version=e.readInt32(),r.prevHash=e.readSlice(32),r.merkleRoot=e.readSlice(32),r.timestamp=e.readUInt32(),r.bits=e.readUInt32(),r.nonce=e.readUInt32(),80===t.length)return r;const readTransaction=()=>{const t=o.Transaction.fromBuffer(e.buffer.slice(e.offset),!0);return e.offset+=t.byteLength(),t},i=e.readVarInt();r.transactions=[];for(let t=0;t<i;++t){const t=readTransaction();r.transactions.push(t)}const s=r.getWitnessCommit();return s&&(r.witnessCommit=s),r}static fromHex(t){return Block.fromBuffer(i.from(t,"hex"))}static calculateTarget(t){const e=((4278190080&t)>>24)-3,r=8388607&t,n=i.alloc(32,0);return n.writeUIntBE(r,29-e,3),n}static calculateMerkleRoot(t,e){if(h([{getHash:a.Function}],t),0===t.length)throw p;if(e&&!txesHaveWitnessCommit(t))throw l;const r=t.map((t=>t.getHash(e))),n=u(r,s.hash256);return e?s.hash256(i.concat([n,t[0].ins[0].witness[0]])):n}getWitnessCommit(){if(!txesHaveWitnessCommit(this.transactions))return null;const t=this.transactions[0].outs.filter((t=>t.script.slice(0,6).equals(i.from("6a24aa21a9ed","hex")))).map((t=>t.script.slice(6,38)));if(0===t.length)return null;const e=t[t.length-1];return e instanceof i&&32===e.length?e:null}hasWitnessCommit(){return this.witnessCommit instanceof i&&32===this.witnessCommit.length||null!==this.getWitnessCommit()}hasWitness(){return function anyTxHasWitness(t){return t instanceof Array&&t.some((t=>"object"==typeof t&&t.ins instanceof Array&&t.ins.some((t=>"object"==typeof t&&t.witness instanceof Array&&t.witness.length>0))))}(this.transactions)}weight(){return 3*this.byteLength(!1,!1)+this.byteLength(!1,!0)}byteLength(t,e=!0){return t||!this.transactions?80:80+c.encodingLength(this.transactions.length)+this.transactions.reduce(((t,r)=>t+r.byteLength(e)),0)}getHash(){return s.hash256(this.toBuffer(!0))}getId(){return n.reverseBuffer(this.getHash()).toString("hex")}getUTCDate(){const t=new Date(0);return t.setUTCSeconds(this.timestamp),t}toBuffer(t){const e=i.allocUnsafe(this.byteLength(t)),r=new n.BufferWriter(e);return r.writeInt32(this.version),r.writeSlice(this.prevHash),r.writeSlice(this.merkleRoot),r.writeUInt32(this.timestamp),r.writeUInt32(this.bits),r.writeUInt32(this.nonce),t||!this.transactions||(c.encode(this.transactions.length,e,r.offset),r.offset+=c.encode.bytes,this.transactions.forEach((t=>{const i=t.byteLength();t.toBuffer(e,r.offset),r.offset+=i}))),e}toHex(t){return this.toBuffer(t).toString("hex")}checkTxRoots(){const t=this.hasWitnessCommit();return!(!t&&this.hasWitness())&&(this.__checkMerkleRoot()&&(!t||this.__checkWitnessCommit()))}checkProofOfWork(){const t=n.reverseBuffer(this.getHash()),e=Block.calculateTarget(this.bits);return t.compare(e)<=0}__checkMerkleRoot(){if(!this.transactions)throw p;const t=Block.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(t)}__checkWitnessCommit(){if(!this.transactions)throw p;if(!this.hasWitnessCommit())throw l;const t=Block.calculateMerkleRoot(this.transactions,!0);return 0===this.witnessCommit.compare(t)}}function txesHaveWitnessCommit(t){return t instanceof Array&&t[0]&&t[0].ins&&t[0].ins instanceof Array&&t[0].ins[0]&&t[0].ins[0].witness&&t[0].ins[0].witness instanceof Array&&t[0].ins[0].witness.length>0}e.Block=Block},165649:(t,e,r)=>{"use strict";var i=r(901048).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(701763),s=r(420973),o=r(377820);function verifuint(t,e){if("number"!=typeof t)throw new Error("cannot write a non-number as a number");if(t<0)throw new Error("specified a negative value for writing an unsigned value");if(t>e)throw new Error("RangeError: value out of range");if(Math.floor(t)!==t)throw new Error("value has a fractional component")}function readUInt64LE(t,e){const r=t.readUInt32LE(e);let i=t.readUInt32LE(e+4);return i*=4294967296,verifuint(i+r,9007199254740991),i+r}function writeUInt64LE(t,e,r){return verifuint(e,9007199254740991),t.writeInt32LE(-1&e,r),t.writeUInt32LE(Math.floor(e/4294967296),r+4),r+8}e.readUInt64LE=readUInt64LE,e.writeUInt64LE=writeUInt64LE,e.reverseBuffer=function reverseBuffer(t){if(t.length<1)return t;let e=t.length-1,r=0;for(let i=0;i<t.length/2;i++)r=t[i],t[i]=t[e],t[e]=r,e--;return t},e.cloneBuffer=function cloneBuffer(t){const e=i.allocUnsafe(t.length);return t.copy(e),e};e.BufferWriter=class BufferWriter{constructor(t,e=0){this.buffer=t,this.offset=e,s(n.tuple(n.Buffer,n.UInt32),[t,e])}writeUInt8(t){this.offset=this.buffer.writeUInt8(t,this.offset)}writeInt32(t){this.offset=this.buffer.writeInt32LE(t,this.offset)}writeUInt32(t){this.offset=this.buffer.writeUInt32LE(t,this.offset)}writeUInt64(t){this.offset=writeUInt64LE(this.buffer,t,this.offset)}writeVarInt(t){o.encode(t,this.buffer,this.offset),this.offset+=o.encode.bytes}writeSlice(t){if(this.buffer.length<this.offset+t.length)throw new Error("Cannot write slice out of bounds");this.offset+=t.copy(this.buffer,this.offset)}writeVarSlice(t){this.writeVarInt(t.length),this.writeSlice(t)}writeVector(t){this.writeVarInt(t.length),t.forEach((t=>this.writeVarSlice(t)))}};e.BufferReader=class BufferReader{constructor(t,e=0){this.buffer=t,this.offset=e,s(n.tuple(n.Buffer,n.UInt32),[t,e])}readUInt8(){const t=this.buffer.readUInt8(this.offset);return this.offset++,t}readInt32(){const t=this.buffer.readInt32LE(this.offset);return this.offset+=4,t}readUInt32(){const t=this.buffer.readUInt32LE(this.offset);return this.offset+=4,t}readUInt64(){const t=readUInt64LE(this.buffer,this.offset);return this.offset+=8,t}readVarInt(){const t=o.decode(this.buffer,this.offset);return this.offset+=o.decode.bytes,t}readSlice(t){if(this.buffer.length<this.offset+t)throw new Error("Cannot read slice out of bounds");const e=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,e}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){const t=this.readVarInt(),e=[];for(let r=0;r<t;r++)e.push(this.readVarSlice());return e}}},614199:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(555624),n={q:0,p:1,z:2,r:3,y:4,9:5,x:6,8:7,g:8,f:9,2:10,t:11,v:12,d:13,w:14,0:15,s:16,3:17,j:18,n:19,5:20,4:21,k:22,h:23,c:24,e:25,6:26,m:27,u:28,a:29,7:30,l:31};e.encode=function encode(t){i.validate(t instanceof Uint8Array,"Invalid data: "+t+".");let e="";for(const r of t)i.validate(0<=r&&r<32,"Invalid value: "+r+"."),e+="qpzry9x8gf2tvdw0s3jn54khce6mua7l"[r];return e},e.decode=function decode(t){i.validate("string"==typeof t,"Invalid base32-encoded string: "+t+".");const e=new Uint8Array(t.length);for(let r=0;r<t.length;++r){const s=t[r];i.validate(s in n,"Invalid value: "+s+"."),e[r]=n[s]}return e}},331224:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(555624);e.convertBits=function convertBits(t,e,r,n){const s=n?Math.floor(t.length*e/r):Math.ceil(t.length*e/r),o=(1<<r)-1,a=new Uint8Array(s);let u=0,h=0,c=0;for(const n of t)for(i.validate(0<=n&&!(n>>e),"Invalid value: "+n+"."),h=h<<e|n,c+=e;c>=r;)c-=r,a[u]=h>>c&o,++u;return n?i.validate(c<e&&!(h<<r-c&o),"Input cannot be converted to "+r+" bits without padding, but strict mode was used."):c>0&&(a[u]=h<<r-c&o,++u),a}},644931:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(396599),n=r(614199),s=r(331224),o=r(555624),a=o.validate;function prefixToUint5Array(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=31&t[r].charCodeAt(0);return e}function concat(t,e){const r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function polymod(t){const e=[656907472481,522768456162,0xf33e5fb3c4,748107326120,130178868336];let r=i(1);for(const i of t){const t=r.shiftRight(35);r=r.and(34359738367).shiftLeft(5).xor(i);for(let i=0;i<e.length;++i)t.shiftRight(i).and(1).equals(1)&&(r=r.xor(e[i]))}return r.xor(1)}function hasSingleCase(t){return t===t.toLowerCase()||t===t.toUpperCase()}e.encode=function encode(t,r,i){a("string"==typeof t&&function isValidPrefix(t){return hasSingleCase(t)&&-1!==e.VALID_PREFIXES.indexOf(t.toLowerCase())}(t),"Invalid prefix: "+t+"."),a("string"==typeof r,"Invalid type: "+r+"."),a(i instanceof Uint8Array,"Invalid hash: "+i+".");const o=concat(prefixToUint5Array(t),new Uint8Array(1)),u=function getTypeBits(t){switch(t){case"P2PKH":return 0;case"P2SH":return 8;default:throw new e.ValidationError("Invalid type: "+t+".")}}(r)+function getHashSizeBits(t){switch(8*t.length){case 160:return 0;case 192:return 1;case 224:return 2;case 256:return 3;case 320:return 4;case 384:return 5;case 448:return 6;case 512:return 7;default:throw new e.ValidationError("Invalid hash size: "+t.length+".")}}(i),h=function toUint5Array(t){return s.convertBits(t,8,5)}(concat(new Uint8Array([u]),i)),c=concat(concat(o,h),new Uint8Array(8)),p=concat(h,function checksumToUint5Array(t){const e=new Uint8Array(8);for(let r=0;r<8;++r)e[7-r]=t.and(31).toJSNumber(),t=t.shiftRight(5);return e}(polymod(c)));return t+":"+n.encode(p)},e.decode=function decode(t){a("string"==typeof t&&hasSingleCase(t),"Invalid address: "+t+".");const r=t.toLowerCase().split(":");a(2===r.length,"Missing prefix: "+t+".");const i=r[0],o=n.decode(r[1]);a(function validChecksum(t,e){const r=concat(prefixToUint5Array(t),new Uint8Array(1)),i=concat(r,e);return polymod(i).equals(0)}(i,o),"Invalid checksum: "+t+".");const u=function fromUint5Array(t){return s.convertBits(t,5,8,!0)}(o.subarray(0,-8)),h=u[0],c=u.subarray(1);a(function getHashSize(t){switch(7&t){case 0:return 160;case 1:return 192;case 2:return 224;case 3:return 256;case 4:return 320;case 5:return 384;case 6:return 448;case 7:return 512;default:throw new e.ValidationError("Invalid versionByte: "+(7&t)+".")}}(h)===8*c.length,"Invalid hash size: "+t+".");const p=function getType(t){switch(120&t){case 0:return"P2PKH";case 8:return"P2SH";default:throw new e.ValidationError("Invalid address type in version byte: "+t+".")}}(h);return{prefix:i,type:p,hash:c}},e.ValidationError=o.ValidationError,e.VALID_PREFIXES=["bitcoincash","bchtest","bchreg"]},555624:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});class ValidationError extends Error{constructor(t){super(t),this.name="ValidationError",Object.setPrototypeOf(this,ValidationError.prototype)}}e.ValidationError=ValidationError,e.validate=function validate(t,e){if(!t)throw new ValidationError(e)}},91034:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(962119),n=r(670645),s=r(188213),o=r(312213),a=r(532569),u=r(970520),h=r(741775),c=r(773408),p=r(637165),l={P2MS:"multisig",NONSTANDARD:"nonstandard",NULLDATA:"nulldata",P2PK:"pubkey",P2PKH:"pubkeyhash",P2SH:"scripthash",P2WPKH:"witnesspubkeyhash",P2WSH:"witnessscripthash",WITNESS_COMMITMENT:"witnesscommitment"};e.types=l,e.output=function classifyOutput(t){if(c.output.check(t))return l.P2WPKH;if(p.output.check(t))return l.P2WSH;if(a.output.check(t))return l.P2PKH;if(u.output.check(t))return l.P2SH;const e=i.decompile(t);if(!e)throw new TypeError("Invalid script");return n.output.check(e)?l.P2MS:o.output.check(e)?l.P2PK:h.output.check(e)?l.WITNESS_COMMITMENT:s.output.check(e)?l.NULLDATA:l.NONSTANDARD},e.input=function classifyInput(t,e){const r=i.decompile(t);if(!r)throw new TypeError("Invalid script");return a.input.check(r)?l.P2PKH:u.input.check(r,e)?l.P2SH:n.input.check(r,e)?l.P2MS:o.input.check(r)?l.P2PK:l.NONSTANDARD},e.witness=function classifyWitness(t,e){const r=i.decompile(t);if(!r)throw new TypeError("Invalid script");return c.input.check(r)?l.P2WPKH:p.input.check(r,e)?l.P2WSH:l.NONSTANDARD}},604033:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(213257);function ripemd160(t){try{return i("rmd160").update(t).digest()}catch(e){return i("ripemd160").update(t).digest()}}function sha256(t){return i("sha256").update(t).digest()}e.ripemd160=ripemd160,e.sha1=function sha1(t){return i("sha1").update(t).digest()},e.sha256=sha256,e.hash160=function hash160(t){return ripemd160(sha256(t))},e.hash256=function hash256(t){return sha256(sha256(t))}},628596:(t,e,r)=>{"use strict";var i=r(901048).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(5491),s=r(701763),o=r(345586),a=r(222644),u=r(420973),h=r(546952),c=u.maybe(u.compile({compressed:s.maybe(s.Boolean),network:s.maybe(s.Network)}));class ECPair{constructor(t,e,r){this.__D=t,this.__Q=e,this.lowR=!1,void 0===r&&(r={}),this.compressed=void 0===r.compressed||r.compressed,this.network=r.network||n.bitcoin,void 0!==e&&(this.__Q=o.pointCompress(e,this.compressed))}get privateKey(){return this.__D}get publicKey(){return this.__Q||(this.__Q=o.pointFromScalar(this.__D,this.compressed)),this.__Q}toWIF(){if(!this.__D)throw new Error("Missing private key");return h.encode(this.network.wif,this.__D,this.compressed)}sign(t,e){if(!this.__D)throw new Error("Missing private key");if(void 0===e&&(e=this.lowR),!1===e)return o.sign(t,this.__D);{let e=o.sign(t,this.__D);const r=i.alloc(32,0);let n=0;for(;e[0]>127;)n++,r.writeUIntLE(n,0,6),e=o.signWithEntropy(t,this.__D,r);return e}}verify(t,e){return o.verify(t,this.publicKey,e)}}function fromPrivateKey(t,e){if(u(s.Buffer256bit,t),!o.isPrivate(t))throw new TypeError("Private key not in range [1, n)");return u(c,e),new ECPair(t,void 0,e)}e.fromPrivateKey=fromPrivateKey,e.fromPublicKey=function fromPublicKey(t,e){return u(o.isPoint,t),u(c,e),new ECPair(void 0,t,e)},e.fromWIF=function fromWIF(t,e){const r=h.decode(t),i=r.version;if(s.Array(e)){if(!(e=e.filter((t=>i===t.wif)).pop()))throw new Error("Unknown network version")}else if(e=e||n.bitcoin,i!==e.wif)throw new Error("Invalid network version");return fromPrivateKey(r.privateKey,{compressed:r.compressed,network:e})},e.makeRandom=function makeRandom(t){u(c,t),void 0===t&&(t={});const e=t.rng||a;let r;do{r=e(32),u(s.Buffer256bit,r)}while(!o.isPrivate(r));return fromPrivateKey(r,t)}},610638:(t,e,r)=>{"use strict";r(408930);r(910150);r(604033);r(628596);r(5491);r(385320);r(962119),r(288127).Block;var i=r(675355);e.iL=i.Psbt,r(962119).OPS,r(432082).Transaction,r(497318).TransactionBuilder},5491:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bitcoingold={messagePrefix:"Bitcoin Gold Signed Message:\n",bech32:"btg",bip32:{public:76067358,private:76066276},pubKeyHash:38,scriptHash:23,wif:128},e.bitcoin={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},e.regtest={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},e.testnet={messagePrefix:"Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}},655993:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(5491),n=r(962119),s=r(298332),o=r(420973),a=n.OPS;e.p2data=function p2data(t,e){if(!t.data&&!t.output)throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),o({network:o.maybe(o.Object),output:o.maybe(o.Buffer),data:o.maybe(o.arrayOf(o.Buffer))},t);const r={name:"embed",network:t.network||i.bitcoin};if(s.prop(r,"output",(()=>{if(t.data)return n.compile([a.OP_RETURN].concat(t.data))})),s.prop(r,"data",(()=>{if(t.output)return n.decompile(t.output).slice(1)})),e.validate&&t.output){const e=n.decompile(t.output);if(e[0]!==a.OP_RETURN)throw new TypeError("Output is invalid");if(!e.slice(1).every(o.Buffer))throw new TypeError("Output is invalid");if(t.data&&!function stacksEqual(t,e){return t.length===e.length&&t.every(((t,r)=>t.equals(e[r])))}(t.data,r.data))throw new TypeError("Data mismatch")}return Object.assign(r,t)}},385320:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(655993);e.embed=i.p2data;const n=r(657524);e.p2ms=n.p2ms;const s=r(529141);e.p2pk=s.p2pk;const o=r(6033);e.p2pkh=o.p2pkh;const a=r(276283);e.p2sh=a.p2sh;const u=r(499904);e.p2wpkh=u.p2wpkh;const h=r(813728);e.p2wsh=h.p2wsh},298332:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prop=function prop(t,e,r){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){const t=r.call(this);return this[e]=t,t},set(t){Object.defineProperty(this,e,{configurable:!0,enumerable:!0,value:t,writable:!0})}})},e.value=function value(t){let e;return()=>(void 0!==e||(e=t()),e)}},657524:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(5491),n=r(962119),s=r(298332),o=n.OPS,a=r(420973),u=r(345586),h=o.OP_RESERVED;function stacksEqual(t,e){return t.length===e.length&&t.every(((t,r)=>t.equals(e[r])))}e.p2ms=function p2ms(t,e){if(!(t.input||t.output||t.pubkeys&&void 0!==t.m||t.signatures))throw new TypeError("Not enough data");function isAcceptableSignature(t){return n.isCanonicalScriptSignature(t)||void 0!==(e.allowIncomplete&&t===o.OP_0)}e=Object.assign({validate:!0},e||{}),a({network:a.maybe(a.Object),m:a.maybe(a.Number),n:a.maybe(a.Number),output:a.maybe(a.Buffer),pubkeys:a.maybe(a.arrayOf(u.isPoint)),signatures:a.maybe(a.arrayOf(isAcceptableSignature)),input:a.maybe(a.Buffer)},t);const r={network:t.network||i.bitcoin};let c=[],p=!1;function decode(t){p||(p=!0,c=n.decompile(t),r.m=c[0]-h,r.n=c[c.length-2]-h,r.pubkeys=c.slice(1,-2))}if(s.prop(r,"output",(()=>{if(t.m&&r.n&&t.pubkeys)return n.compile([].concat(h+t.m,t.pubkeys,h+r.n,o.OP_CHECKMULTISIG))})),s.prop(r,"m",(()=>{if(r.output)return decode(r.output),r.m})),s.prop(r,"n",(()=>{if(r.pubkeys)return r.pubkeys.length})),s.prop(r,"pubkeys",(()=>{if(t.output)return decode(t.output),r.pubkeys})),s.prop(r,"signatures",(()=>{if(t.input)return n.decompile(t.input).slice(1)})),s.prop(r,"input",(()=>{if(t.signatures)return n.compile([o.OP_0].concat(t.signatures))})),s.prop(r,"witness",(()=>{if(r.input)return[]})),s.prop(r,"name",(()=>{if(r.m&&r.n)return`p2ms(${r.m} of ${r.n})`})),e.validate){if(t.output){if(decode(t.output),!a.Number(c[0]))throw new TypeError("Output is invalid");if(!a.Number(c[c.length-2]))throw new TypeError("Output is invalid");if(c[c.length-1]!==o.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(r.m<=0||r.n>16||r.m>r.n||r.n!==c.length-3)throw new TypeError("Output is invalid");if(!r.pubkeys.every((t=>u.isPoint(t))))throw new TypeError("Output is invalid");if(void 0!==t.m&&t.m!==r.m)throw new TypeError("m mismatch");if(void 0!==t.n&&t.n!==r.n)throw new TypeError("n mismatch");if(t.pubkeys&&!stacksEqual(t.pubkeys,r.pubkeys))throw new TypeError("Pubkeys mismatch")}if(t.pubkeys){if(void 0!==t.n&&t.n!==t.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(r.n=t.pubkeys.length,r.n<r.m)throw new TypeError("Pubkey count cannot be less than m")}if(t.signatures){if(t.signatures.length<r.m)throw new TypeError("Not enough signatures provided");if(t.signatures.length>r.m)throw new TypeError("Too many signatures provided")}if(t.input){if(t.input[0]!==o.OP_0)throw new TypeError("Input is invalid");if(0===r.signatures.length||!r.signatures.every(isAcceptableSignature))throw new TypeError("Input has invalid signature(s)");if(t.signatures&&!stacksEqual(t.signatures,r.signatures))throw new TypeError("Signature mismatch");if(void 0!==t.m&&t.m!==t.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(r,t)}},529141:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(5491),n=r(962119),s=r(298332),o=r(420973),a=n.OPS,u=r(345586);e.p2pk=function p2pk(t,e){if(!(t.input||t.output||t.pubkey||t.input||t.signature))throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),o({network:o.maybe(o.Object),output:o.maybe(o.Buffer),pubkey:o.maybe(u.isPoint),signature:o.maybe(n.isCanonicalScriptSignature),input:o.maybe(o.Buffer)},t);const r=s.value((()=>n.decompile(t.input))),h={name:"p2pk",network:t.network||i.bitcoin};if(s.prop(h,"output",(()=>{if(t.pubkey)return n.compile([t.pubkey,a.OP_CHECKSIG])})),s.prop(h,"pubkey",(()=>{if(t.output)return t.output.slice(1,-1)})),s.prop(h,"signature",(()=>{if(t.input)return r()[0]})),s.prop(h,"input",(()=>{if(t.signature)return n.compile([t.signature])})),s.prop(h,"witness",(()=>{if(h.input)return[]})),e.validate){if(t.output){if(t.output[t.output.length-1]!==a.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!u.isPoint(h.pubkey))throw new TypeError("Output pubkey is invalid");if(t.pubkey&&!t.pubkey.equals(h.pubkey))throw new TypeError("Pubkey mismatch")}if(t.signature&&t.input&&!t.input.equals(h.input))throw new TypeError("Signature mismatch");if(t.input){if(1!==r().length)throw new TypeError("Input is invalid");if(!n.isCanonicalScriptSignature(h.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(h,t)}},6033:(t,e,r)=>{"use strict";var i=r(901048).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(604033),s=r(5491),o=r(962119),a=r(298332),u=r(420973),h=o.OPS,c=r(345586),p=r(990807);e.p2pkh=function p2pkh(t,e){if(!(t.address||t.hash||t.output||t.pubkey||t.input))throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),u({network:u.maybe(u.Object),address:u.maybe(u.String),hash:u.maybe(u.BufferN(20)),output:u.maybe(u.BufferN(25)),pubkey:u.maybe(c.isPoint),signature:u.maybe(o.isCanonicalScriptSignature),input:u.maybe(u.Buffer)},t);const r=a.value((()=>{const e=p.decode(t.address);return{version:e.readUInt8(0),hash:e.slice(1)}})),l=a.value((()=>o.decompile(t.input))),f=t.network||s.bitcoin,d={name:"p2pkh",network:f};if(a.prop(d,"address",(()=>{if(!d.hash)return;const t=i.allocUnsafe(21);return t.writeUInt8(f.pubKeyHash,0),d.hash.copy(t,1),p.encode(t)})),a.prop(d,"hash",(()=>t.output?t.output.slice(3,23):t.address?r().hash:t.pubkey||d.pubkey?n.hash160(t.pubkey||d.pubkey):void 0)),a.prop(d,"output",(()=>{if(d.hash)return o.compile([h.OP_DUP,h.OP_HASH160,d.hash,h.OP_EQUALVERIFY,h.OP_CHECKSIG])})),a.prop(d,"pubkey",(()=>{if(t.input)return l()[1]})),a.prop(d,"signature",(()=>{if(t.input)return l()[0]})),a.prop(d,"input",(()=>{if(t.pubkey&&t.signature)return o.compile([t.signature,t.pubkey])})),a.prop(d,"witness",(()=>{if(d.input)return[]})),e.validate){let e=i.from([]);if(t.address){if(r().version!==f.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(20!==r().hash.length)throw new TypeError("Invalid address");e=r().hash}if(t.hash){if(e.length>0&&!e.equals(t.hash))throw new TypeError("Hash mismatch");e=t.hash}if(t.output){if(25!==t.output.length||t.output[0]!==h.OP_DUP||t.output[1]!==h.OP_HASH160||20!==t.output[2]||t.output[23]!==h.OP_EQUALVERIFY||t.output[24]!==h.OP_CHECKSIG)throw new TypeError("Output is invalid");const r=t.output.slice(3,23);if(e.length>0&&!e.equals(r))throw new TypeError("Hash mismatch");e=r}if(t.pubkey){const r=n.hash160(t.pubkey);if(e.length>0&&!e.equals(r))throw new TypeError("Hash mismatch");e=r}if(t.input){const r=l();if(2!==r.length)throw new TypeError("Input is invalid");if(!o.isCanonicalScriptSignature(r[0]))throw new TypeError("Input has invalid signature");if(!c.isPoint(r[1]))throw new TypeError("Input has invalid pubkey");if(t.signature&&!t.signature.equals(r[0]))throw new TypeError("Signature mismatch");if(t.pubkey&&!t.pubkey.equals(r[1]))throw new TypeError("Pubkey mismatch");const i=n.hash160(r[1]);if(e.length>0&&!e.equals(i))throw new TypeError("Hash mismatch")}}return Object.assign(d,t)}},276283:(t,e,r)=>{"use strict";var i=r(901048).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(604033),s=r(5491),o=r(962119),a=r(298332),u=r(420973),h=o.OPS,c=r(990807);e.p2sh=function p2sh(t,e){if(!(t.address||t.hash||t.output||t.redeem||t.input))throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),u({network:u.maybe(u.Object),address:u.maybe(u.String),hash:u.maybe(u.BufferN(20)),output:u.maybe(u.BufferN(23)),redeem:u.maybe({network:u.maybe(u.Object),output:u.maybe(u.Buffer),input:u.maybe(u.Buffer),witness:u.maybe(u.arrayOf(u.Buffer))}),input:u.maybe(u.Buffer),witness:u.maybe(u.arrayOf(u.Buffer))},t);let r=t.network;r||(r=t.redeem&&t.redeem.network||s.bitcoin);const p={network:r},l=a.value((()=>{const e=c.decode(t.address);return{version:e.readUInt8(0),hash:e.slice(1)}})),f=a.value((()=>o.decompile(t.input))),d=a.value((()=>{const e=f();return{network:r,output:e[e.length-1],input:o.compile(e.slice(0,-1)),witness:t.witness||[]}}));if(a.prop(p,"address",(()=>{if(!p.hash)return;const t=i.allocUnsafe(21);return t.writeUInt8(p.network.scriptHash,0),p.hash.copy(t,1),c.encode(t)})),a.prop(p,"hash",(()=>t.output?t.output.slice(2,22):t.address?l().hash:p.redeem&&p.redeem.output?n.hash160(p.redeem.output):void 0)),a.prop(p,"output",(()=>{if(p.hash)return o.compile([h.OP_HASH160,p.hash,h.OP_EQUAL])})),a.prop(p,"redeem",(()=>{if(t.input)return d()})),a.prop(p,"input",(()=>{if(t.redeem&&t.redeem.input&&t.redeem.output)return o.compile([].concat(o.decompile(t.redeem.input),t.redeem.output))})),a.prop(p,"witness",(()=>p.redeem&&p.redeem.witness?p.redeem.witness:p.input?[]:void 0)),a.prop(p,"name",(()=>{const t=["p2sh"];return void 0!==p.redeem&&t.push(p.redeem.name),t.join("-")})),e.validate){let e=i.from([]);if(t.address){if(l().version!==r.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(20!==l().hash.length)throw new TypeError("Invalid address");e=l().hash}if(t.hash){if(e.length>0&&!e.equals(t.hash))throw new TypeError("Hash mismatch");e=t.hash}if(t.output){if(23!==t.output.length||t.output[0]!==h.OP_HASH160||20!==t.output[1]||t.output[22]!==h.OP_EQUAL)throw new TypeError("Output is invalid");const r=t.output.slice(2,22);if(e.length>0&&!e.equals(r))throw new TypeError("Hash mismatch");e=r}const checkRedeem=t=>{if(t.output){const r=o.decompile(t.output);if(!r||r.length<1)throw new TypeError("Redeem.output too short");const i=n.hash160(t.output);if(e.length>0&&!e.equals(i))throw new TypeError("Hash mismatch");e=i}if(t.input){const e=t.input.length>0,r=t.witness&&t.witness.length>0;if(!e&&!r)throw new TypeError("Empty input");if(e&&r)throw new TypeError("Input and witness provided");if(e){const e=o.decompile(t.input);if(!o.isPushOnly(e))throw new TypeError("Non push-only scriptSig")}}};if(t.input){const t=f();if(!t||t.length<1)throw new TypeError("Input too short");if(!i.isBuffer(d().output))throw new TypeError("Input is invalid");checkRedeem(d())}if(t.redeem){if(t.redeem.network&&t.redeem.network!==r)throw new TypeError("Network mismatch");if(t.input){const e=d();if(t.redeem.output&&!t.redeem.output.equals(e.output))throw new TypeError("Redeem.output mismatch");if(t.redeem.input&&!t.redeem.input.equals(e.input))throw new TypeError("Redeem.input mismatch")}checkRedeem(t.redeem)}if(t.witness&&t.redeem&&t.redeem.witness&&!function stacksEqual(t,e){return t.length===e.length&&t.every(((t,r)=>t.equals(e[r])))}(t.redeem.witness,t.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(p,t)}},499904:(t,e,r)=>{"use strict";var i=r(901048).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(604033),s=r(5491),o=r(962119),a=r(298332),u=r(420973),h=o.OPS,c=r(345586),p=r(786360),l=i.alloc(0);e.p2wpkh=function p2wpkh(t,e){if(!(t.address||t.hash||t.output||t.pubkey||t.witness))throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),u({address:u.maybe(u.String),hash:u.maybe(u.BufferN(20)),input:u.maybe(u.BufferN(0)),network:u.maybe(u.Object),output:u.maybe(u.BufferN(22)),pubkey:u.maybe(c.isPoint),signature:u.maybe(o.isCanonicalScriptSignature),witness:u.maybe(u.arrayOf(u.Buffer))},t);const r=a.value((()=>{const e=p.decode(t.address),r=e.words.shift(),n=p.fromWords(e.words);return{version:r,prefix:e.prefix,data:i.from(n)}})),f=t.network||s.bitcoin,d={name:"p2wpkh",network:f};if(a.prop(d,"address",(()=>{if(!d.hash)return;const t=p.toWords(d.hash);return t.unshift(0),p.encode(f.bech32,t)})),a.prop(d,"hash",(()=>t.output?t.output.slice(2,22):t.address?r().data:t.pubkey||d.pubkey?n.hash160(t.pubkey||d.pubkey):void 0)),a.prop(d,"output",(()=>{if(d.hash)return o.compile([h.OP_0,d.hash])})),a.prop(d,"pubkey",(()=>t.pubkey?t.pubkey:t.witness?t.witness[1]:void 0)),a.prop(d,"signature",(()=>{if(t.witness)return t.witness[0]})),a.prop(d,"input",(()=>{if(d.witness)return l})),a.prop(d,"witness",(()=>{if(t.pubkey&&t.signature)return[t.signature,t.pubkey]})),e.validate){let e=i.from([]);if(t.address){if(f&&f.bech32!==r().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(0!==r().version)throw new TypeError("Invalid address version");if(20!==r().data.length)throw new TypeError("Invalid address data");e=r().data}if(t.hash){if(e.length>0&&!e.equals(t.hash))throw new TypeError("Hash mismatch");e=t.hash}if(t.output){if(22!==t.output.length||t.output[0]!==h.OP_0||20!==t.output[1])throw new TypeError("Output is invalid");if(e.length>0&&!e.equals(t.output.slice(2)))throw new TypeError("Hash mismatch");e=t.output.slice(2)}if(t.pubkey){const r=n.hash160(t.pubkey);if(e.length>0&&!e.equals(r))throw new TypeError("Hash mismatch");if(e=r,!c.isPoint(t.pubkey)||33!==t.pubkey.length)throw new TypeError("Invalid pubkey for p2wpkh")}if(t.witness){if(2!==t.witness.length)throw new TypeError("Witness is invalid");if(!o.isCanonicalScriptSignature(t.witness[0]))throw new TypeError("Witness has invalid signature");if(!c.isPoint(t.witness[1])||33!==t.witness[1].length)throw new TypeError("Witness has invalid pubkey");if(t.signature&&!t.signature.equals(t.witness[0]))throw new TypeError("Signature mismatch");if(t.pubkey&&!t.pubkey.equals(t.witness[1]))throw new TypeError("Pubkey mismatch");const r=n.hash160(t.witness[1]);if(e.length>0&&!e.equals(r))throw new TypeError("Hash mismatch")}}return Object.assign(d,t)}},813728:(t,e,r)=>{"use strict";var i=r(901048).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(604033),s=r(5491),o=r(962119),a=r(298332),u=r(420973),h=o.OPS,c=r(345586),p=r(786360),l=i.alloc(0);function chunkHasUncompressedPubkey(t){return!(!i.isBuffer(t)||65!==t.length||4!==t[0]||!c.isPoint(t))}e.p2wsh=function p2wsh(t,e){if(!(t.address||t.hash||t.output||t.redeem||t.witness))throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),u({network:u.maybe(u.Object),address:u.maybe(u.String),hash:u.maybe(u.BufferN(32)),output:u.maybe(u.BufferN(34)),redeem:u.maybe({input:u.maybe(u.Buffer),network:u.maybe(u.Object),output:u.maybe(u.Buffer),witness:u.maybe(u.arrayOf(u.Buffer))}),input:u.maybe(u.BufferN(0)),witness:u.maybe(u.arrayOf(u.Buffer))},t);const r=a.value((()=>{const e=p.decode(t.address),r=e.words.shift(),n=p.fromWords(e.words);return{version:r,prefix:e.prefix,data:i.from(n)}})),c=a.value((()=>o.decompile(t.redeem.input)));let f=t.network;f||(f=t.redeem&&t.redeem.network||s.bitcoin);const d={network:f};if(a.prop(d,"address",(()=>{if(!d.hash)return;const t=p.toWords(d.hash);return t.unshift(0),p.encode(f.bech32,t)})),a.prop(d,"hash",(()=>t.output?t.output.slice(2):t.address?r().data:d.redeem&&d.redeem.output?n.sha256(d.redeem.output):void 0)),a.prop(d,"output",(()=>{if(d.hash)return o.compile([h.OP_0,d.hash])})),a.prop(d,"redeem",(()=>{if(t.witness)return{output:t.witness[t.witness.length-1],input:l,witness:t.witness.slice(0,-1)}})),a.prop(d,"input",(()=>{if(d.witness)return l})),a.prop(d,"witness",(()=>{if(t.redeem&&t.redeem.input&&t.redeem.input.length>0&&t.redeem.output&&t.redeem.output.length>0){const e=o.toStack(c());return d.redeem=Object.assign({witness:e},t.redeem),d.redeem.input=l,[].concat(e,t.redeem.output)}if(t.redeem&&t.redeem.output&&t.redeem.witness)return[].concat(t.redeem.witness,t.redeem.output)})),a.prop(d,"name",(()=>{const t=["p2wsh"];return void 0!==d.redeem&&t.push(d.redeem.name),t.join("-")})),e.validate){let e=i.from([]);if(t.address){if(r().prefix!==f.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(0!==r().version)throw new TypeError("Invalid address version");if(32!==r().data.length)throw new TypeError("Invalid address data");e=r().data}if(t.hash){if(e.length>0&&!e.equals(t.hash))throw new TypeError("Hash mismatch");e=t.hash}if(t.output){if(34!==t.output.length||t.output[0]!==h.OP_0||32!==t.output[1])throw new TypeError("Output is invalid");const r=t.output.slice(2);if(e.length>0&&!e.equals(r))throw new TypeError("Hash mismatch");e=r}if(t.redeem){if(t.redeem.network&&t.redeem.network!==f)throw new TypeError("Network mismatch");if(t.redeem.input&&t.redeem.input.length>0&&t.redeem.witness&&t.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(t.redeem.output){if(0===o.decompile(t.redeem.output).length)throw new TypeError("Redeem.output is invalid");const r=n.sha256(t.redeem.output);if(e.length>0&&!e.equals(r))throw new TypeError("Hash mismatch");e=r}if(t.redeem.input&&!o.isPushOnly(c()))throw new TypeError("Non push-only scriptSig");if(t.witness&&t.redeem.witness&&!function stacksEqual(t,e){return t.length===e.length&&t.every(((t,r)=>t.equals(e[r])))}(t.witness,t.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(t.redeem.input&&c().some(chunkHasUncompressedPubkey)||t.redeem.output&&(o.decompile(t.redeem.output)||[]).some(chunkHasUncompressedPubkey))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(t.witness&&t.witness.length>0){const e=t.witness[t.witness.length-1];if(t.redeem&&t.redeem.output&&!t.redeem.output.equals(e))throw new TypeError("Witness and redeem.output mismatch");if(t.witness.some(chunkHasUncompressedPubkey)||(o.decompile(e)||[]).some(chunkHasUncompressedPubkey))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(d,t)}},675355:(t,e,r)=>{"use strict";var i=r(901048).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(937003),s=r(592715),o=r(674812),a=r(910150),u=r(165649),h=r(604033),c=r(628596),p=r(5491),l=r(385320),f=r(962119),d=r(432082),m=d.Transaction.SIGHASH_ALL|d.Transaction.SIGHASH_BITCOINCASHBIP143,g=d.Transaction.SIGHASH_ALL|d.Transaction.SIGHASH_BITCOINCASHBIP143|d.Transaction.FORKID_BTG<<8,y=[d.Transaction.SIGHASH_ALL,m,g],w={network:p.bitcoin,maximumFeeRate:5e3,forkCoin:"none"};class Psbt{constructor(t={},e=new n.Psbt(new PsbtTransaction)){this.data=e,this.opts=Object.assign({},w,t),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},0===this.data.inputs.length&&this.setVersion(2);const dpew=(t,e,r,i)=>Object.defineProperty(t,e,{enumerable:r,writable:i});dpew(this,"__CACHE",!1,!0),dpew(this,"opts",!1,!0)}static fromBase64(t,e={}){const r=i.from(t,"base64");return this.fromBuffer(r,e)}static fromHex(t,e={}){const r=i.from(t,"hex");return this.fromBuffer(r,e)}static fromBuffer(t,e={}){const r=n.Psbt.fromBuffer(t,transactionFromBuffer),i=new Psbt(e,r);return function checkTxForDupeIns(t,e){t.ins.forEach((t=>{checkTxInputCache(e,t)}))}(i.__CACHE.__TX,i.__CACHE),i}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version(t){this.setVersion(t)}get locktime(){return this.__CACHE.__TX.locktime}set locktime(t){this.setLocktime(t)}get txInputs(){return this.__CACHE.__TX.ins.map((t=>({hash:u.cloneBuffer(t.hash),index:t.index,sequence:t.sequence})))}get txOutputs(){return this.__CACHE.__TX.outs.map((t=>{let e;try{e=a.fromOutputScript(t.script,this.opts.network)}catch(t){}return{script:u.cloneBuffer(t.script),value:t.value,address:e}}))}combine(...t){return this.data.combine(...t.map((t=>t.data))),this}clone(){const t=Psbt.fromBuffer(this.data.toBuffer());return t.opts=JSON.parse(JSON.stringify(this.opts)),t}setMaximumFeeRate(t){check32Bit(t),this.opts.maximumFeeRate=t}setVersion(t){check32Bit(t),checkInputsForPartialSig(this.data.inputs,"setVersion");const e=this.__CACHE;return e.__TX.version=t,e.__EXTRACTED_TX=void 0,this}setLocktime(t){check32Bit(t),checkInputsForPartialSig(this.data.inputs,"setLocktime");const e=this.__CACHE;return e.__TX.locktime=t,e.__EXTRACTED_TX=void 0,this}setInputSequence(t,e){check32Bit(e),checkInputsForPartialSig(this.data.inputs,"setInputSequence");const r=this.__CACHE;if(r.__TX.ins.length<=t)throw new Error("Input index too high");return r.__TX.ins[t].sequence=e,r.__EXTRACTED_TX=void 0,this}addInputs(t){return t.forEach((t=>this.addInput(t))),this}addInput(t){if(arguments.length>1||!t||void 0===t.hash||void 0===t.index)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");checkInputsForPartialSig(this.data.inputs,"addInput"),t.witnessScript&&checkInvalidP2WSH(t.witnessScript);const e=this.__CACHE;this.data.addInput(t);checkTxInputCache(e,e.__TX.ins[e.__TX.ins.length-1]);const r=this.data.inputs.length-1,i=this.data.inputs[r];return i.nonWitnessUtxo&&addNonWitnessTxCache(this.__CACHE,i,r),e.__FEE=void 0,e.__FEE_RATE=void 0,e.__EXTRACTED_TX=void 0,this}addOutputs(t){return t.forEach((t=>this.addOutput(t))),this}addOutput(t){if(arguments.length>1||!t||void 0===t.value||void 0===t.address&&void 0===t.script)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");checkInputsForPartialSig(this.data.inputs,"addOutput");const{address:e}=t;if("string"==typeof e){const{network:r}=this.opts,i=a.toOutputScript(e,r);t=Object.assign(t,{script:i})}const r=this.__CACHE;return this.data.addOutput(t),r.__FEE=void 0,r.__FEE_RATE=void 0,r.__EXTRACTED_TX=void 0,this}extractTransaction(t){if(!this.data.inputs.every(isFinalized))throw new Error("Not finalized");const e=this.__CACHE;if(t||function checkFees(t,e,r){const i=e.__FEE_RATE||t.getFeeRate(),n=e.__EXTRACTED_TX.virtualSize(),s=i*n;if(i>=r.maximumFeeRate)throw new Error(`Warning: You are paying around ${(s/1e8).toFixed(8)} in fees, which is ${i} satoshi per byte for a transaction with a VSize of ${n} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}(this,e,this.opts),e.__EXTRACTED_TX)return e.__EXTRACTED_TX;const r=e.__TX.clone();return inputFinalizeGetAmts(this.data.inputs,r,e,!0),r}getFeeRate(){return getTxCacheValue("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return getTxCacheValue("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return o.checkForInput(this.data.inputs,0),range(this.data.inputs.length).forEach((t=>this.finalizeInput(t))),this}finalizeInput(t,e=getFinalScripts){const r=o.checkForInput(this.data.inputs,t),{script:i,isP2SH:n,isP2WSH:s,isSegwit:a}=function getScriptFromInput(t,e,r){const i=r.__TX,n={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(n.isP2SH=!!e.redeemScript,n.isP2WSH=!!e.witnessScript,e.witnessScript)n.script=e.witnessScript;else if(e.redeemScript)n.script=e.redeemScript;else if(e.nonWitnessUtxo){const s=nonWitnessUtxoTxFromCache(r,e,t),o=i.ins[t].index;n.script=s.outs[o].script}else e.witnessUtxo&&(n.script=e.witnessUtxo.script);(e.witnessScript||_(n.script))&&(n.isSegwit=!0);return n}(t,r,this.__CACHE);if(!i)throw new Error(`No script found for input #${t}`);!function checkPartialSigSighashes(t){if(!t.sighashType||!t.partialSig)return;const{partialSig:e,sighashType:r}=t;e.forEach((t=>{const{hashType:e}=f.signature.decode(t.signature);if((255&r)!==e)throw new Error("Signature sighash does not match input sighash type")}))}(r);const{finalScriptSig:u,finalScriptWitness:h}=e(t,r,i,a,n,s);if(u&&this.data.updateInput(t,{finalScriptSig:u}),h&&this.data.updateInput(t,{finalScriptWitness:h}),!u&&!h)throw new Error(`Unknown error finalizing input #${t}`);return this.data.clearFinalizedInput(t),this}getInputType(t){const e=o.checkForInput(this.data.inputs,t),r=getMeaningfulScript(getScriptFromUtxo(t,e,this.__CACHE),t,"input",e.redeemScript||function redeemFromFinalScriptSig(t){if(!t)return;const e=f.decompile(t);if(!e)return;const r=e[e.length-1];if(!i.isBuffer(r)||isPubkeyLike(r)||function isSigLike(t){return f.isCanonicalScriptSignature(t)}(r))return;if(!f.decompile(r))return;return r}(e.finalScriptSig),e.witnessScript||function redeemFromFinalWitnessScript(t){if(!t)return;const e=scriptWitnessToWitnessStack(t),r=e[e.length-1];if(isPubkeyLike(r))return;if(!f.decompile(r))return;return r}(e.finalScriptWitness));return("raw"===r.type?"":r.type+"-")+classifyScript(r.meaningfulScript)}inputHasPubkey(t,e){return function pubkeyInInput(t,e,r,i){const n=getScriptFromUtxo(r,e,i),{meaningfulScript:s}=getMeaningfulScript(n,r,"input",e.redeemScript,e.witnessScript);return pubkeyInScript(t,s)}(e,o.checkForInput(this.data.inputs,t),t,this.__CACHE)}inputHasHDKey(t,e){const r=o.checkForInput(this.data.inputs,t),i=bip32DerivationIsMine(e);return!!r.bip32Derivation&&r.bip32Derivation.some(i)}outputHasPubkey(t,e){return function pubkeyInOutput(t,e,r,i){const n=i.__TX.outs[r].script,{meaningfulScript:s}=getMeaningfulScript(n,r,"output",e.redeemScript,e.witnessScript);return pubkeyInScript(t,s)}(e,o.checkForOutput(this.data.outputs,t),t,this.__CACHE)}outputHasHDKey(t,e){const r=o.checkForOutput(this.data.outputs,t),i=bip32DerivationIsMine(e);return!!r.bip32Derivation&&r.bip32Derivation.some(i)}validateSignaturesOfAllInputs(){o.checkForInput(this.data.inputs,0);return range(this.data.inputs.length).map((t=>this.validateSignaturesOfInput(t))).reduce(((t,e)=>!0===e&&t),!0)}validateSignaturesOfInput(t,e){const r=this.data.inputs[t],i=(r||{}).partialSig;if(!r||!i||i.length<1)throw new Error("No signatures to validate");const n=e?i.filter((t=>t.pubkey.equals(e))):i;if(n.length<1)throw new Error("No signatures for this pubkey");const s=[];let o,a,u;for(const e of n){const i=f.signature.decode(e.signature),{hash:n,script:h}=u!==i.hashType?getHashForSig(t,Object.assign({},r,{sighashType:i.hashType}),this.__CACHE,!0,this.opts.forkCoin):{hash:o,script:a};u=i.hashType,o=n,a=h,checkScriptForPubkey(e.pubkey,h,"verify");const p=c.fromPublicKey(e.pubkey);s.push(p.verify(n,i.signature))}return s.every((t=>!0===t))}signAllInputsHD(t,e=y){if(!t||!t.publicKey||!t.fingerprint)throw new Error("Need HDSigner to sign input");const r=[];for(const i of range(this.data.inputs.length))try{this.signInputHD(i,t,e),r.push(!0)}catch(t){r.push(!1)}if(r.every((t=>!1===t)))throw new Error("No inputs were signed");return this}signAllInputsHDAsync(t,e=y){return new Promise(((r,i)=>{if(!t||!t.publicKey||!t.fingerprint)return i(new Error("Need HDSigner to sign input"));const n=[],s=[];for(const r of range(this.data.inputs.length))s.push(this.signInputHDAsync(r,t,e).then((()=>{n.push(!0)}),(()=>{n.push(!1)})));return Promise.all(s).then((()=>{if(n.every((t=>!1===t)))return i(new Error("No inputs were signed"));r()}))}))}signInputHD(t,e,r=y){if(!e||!e.publicKey||!e.fingerprint)throw new Error("Need HDSigner to sign input");return getSignersFromHD(t,this.data.inputs,e).forEach((e=>this.signInput(t,e,r))),this}signInputHDAsync(t,e,r=y){return new Promise(((i,n)=>{if(!e||!e.publicKey||!e.fingerprint)return n(new Error("Need HDSigner to sign input"));const s=getSignersFromHD(t,this.data.inputs,e).map((e=>this.signInputAsync(t,e,r)));return Promise.all(s).then((()=>{i()})).catch(n)}))}signAllInputs(t,e=y){if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const r=[];for(const i of range(this.data.inputs.length))try{this.signInput(i,t,e),r.push(!0)}catch(t){r.push(!1)}if(r.every((t=>!1===t)))throw new Error("No inputs were signed");return this}signAllInputsAsync(t,e=y){return new Promise(((r,i)=>{if(!t||!t.publicKey)return i(new Error("Need Signer to sign input"));const n=[],s=[];for(const[r]of this.data.inputs.entries())s.push(this.signInputAsync(r,t,e).then((()=>{n.push(!0)}),(()=>{n.push(!1)})));return Promise.all(s).then((()=>{if(n.every((t=>!1===t)))return i(new Error("No inputs were signed"));r()}))}))}signInput(t,e,r=y){if(!e||!e.publicKey)throw new Error("Need Signer to sign input");const{hash:i,sighashType:n}=getHashAndSighashType(this.data.inputs,t,e.publicKey,this.__CACHE,r,this.opts.forkCoin),s=[{pubkey:e.publicKey,signature:f.signature.encode(e.sign(i),255&n)}];return this.data.updateInput(t,{partialSig:s}),this}signInputAsync(t,e,r=y){return Promise.resolve().then((()=>{if(!e||!e.publicKey)throw new Error("Need Signer to sign input");const{hash:i,sighashType:n}=getHashAndSighashType(this.data.inputs,t,e.publicKey,this.__CACHE,r,this.opts.forkCoin);return Promise.resolve(e.sign(i)).then((r=>{const i=[{pubkey:e.publicKey,signature:f.signature.encode(r,255&n)}];this.data.updateInput(t,{partialSig:i})}))}))}toBuffer(){return checkCache(this.__CACHE),this.data.toBuffer()}toHex(){return checkCache(this.__CACHE),this.data.toHex()}toBase64(){return checkCache(this.__CACHE),this.data.toBase64()}updateGlobal(t){return this.data.updateGlobal(t),this}updateInput(t,e){return e.witnessScript&&checkInvalidP2WSH(e.witnessScript),this.data.updateInput(t,e),e.nonWitnessUtxo&&addNonWitnessTxCache(this.__CACHE,this.data.inputs[t],t),this}updateOutput(t,e){return this.data.updateOutput(t,e),this}addUnknownKeyValToGlobal(t){return this.data.addUnknownKeyValToGlobal(t),this}addUnknownKeyValToInput(t,e){return this.data.addUnknownKeyValToInput(t,e),this}addUnknownKeyValToOutput(t,e){return this.data.addUnknownKeyValToOutput(t,e),this}clearFinalizedInput(t){return this.data.clearFinalizedInput(t),this}}e.Psbt=Psbt;const transactionFromBuffer=t=>new PsbtTransaction(t);class PsbtTransaction{constructor(t=i.from([2,0,0,0,0,0,0,0,0,0])){this.tx=d.Transaction.fromBuffer(t),function checkTxEmpty(t){if(!t.ins.every((t=>t.script&&0===t.script.length&&t.witness&&0===t.witness.length)))throw new Error("Format Error: Transaction ScriptSigs are not empty")}(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(t){if(void 0===t.hash||void 0===t.index||!i.isBuffer(t.hash)&&"string"!=typeof t.hash||"number"!=typeof t.index)throw new Error("Error adding input.");const e="string"==typeof t.hash?u.reverseBuffer(i.from(t.hash,"hex")):t.hash;this.tx.addInput(e,t.index,t.sequence)}addOutput(t){if(void 0===t.script||void 0===t.value||!i.isBuffer(t.script)||"number"!=typeof t.value)throw new Error("Error adding output.");this.tx.addOutput(t.script,t.value)}toBuffer(){return this.tx.toBuffer()}}function checkCache(t){if(!1!==t.__UNSAFE_SIGN_NONSEGWIT)throw new Error("Not BIP174 compliant, can not export")}function hasSigs(t,e,r){if(!e)return!1;let i;if(i=r?r.map((t=>{const r=c.fromPublicKey(t,{compressed:!0}).publicKey;return e.find((t=>t.pubkey.equals(r)))})).filter((t=>!!t)):e,i.length>t)throw new Error("Too many signatures");return i.length===t}function isFinalized(t){return!!t.finalScriptSig||!!t.finalScriptWitness}function isPaymentFactory(t){return e=>{try{return t({output:e}),!0}catch(t){return!1}}}const v=isPaymentFactory(l.p2ms),S=isPaymentFactory(l.p2pk),b=isPaymentFactory(l.p2pkh),_=isPaymentFactory(l.p2wpkh),I=isPaymentFactory(l.p2wsh),P=isPaymentFactory(l.p2sh);function bip32DerivationIsMine(t){return e=>!!e.masterFingerprint.equals(t.fingerprint)&&!!t.derivePath(e.path).publicKey.equals(e.pubkey)}function check32Bit(t){if("number"!=typeof t||t!==Math.floor(t)||t>4294967295||t<0)throw new Error("Invalid 32 bit integer")}function checkInputsForPartialSig(t,e){t.forEach((t=>{let r=!1,n=[];if(0===(t.partialSig||[]).length){if(!t.finalScriptSig&&!t.finalScriptWitness)return;n=function getPsigsFromInputFinalScripts(t){const e=t.finalScriptSig&&f.decompile(t.finalScriptSig)||[],r=t.finalScriptWitness&&f.decompile(t.finalScriptWitness)||[];return e.concat(r).filter((t=>i.isBuffer(t)&&f.isCanonicalScriptSignature(t))).map((t=>({signature:t})))}(t)}else n=t.partialSig;if(n.forEach((t=>{const{hashType:i}=f.signature.decode(t.signature),n=[];i&d.Transaction.SIGHASH_ANYONECANPAY&&n.push("addInput");switch(31&i){case d.Transaction.SIGHASH_ALL:break;case d.Transaction.SIGHASH_SINGLE:case d.Transaction.SIGHASH_NONE:n.push("addOutput"),n.push("setInputSequence")}-1===n.indexOf(e)&&(r=!0)})),r)throw new Error("Can not modify transaction, signatures exist.")}))}function checkScriptForPubkey(t,e,r){if(!pubkeyInScript(t,e))throw new Error(`Can not ${r} for this input with the key ${t.toString("hex")}`)}function checkTxInputCache(t,e){const r=u.reverseBuffer(i.from(e.hash)).toString("hex")+":"+e.index;if(t.__TX_IN_CACHE[r])throw new Error("Duplicate input detected.");t.__TX_IN_CACHE[r]=1}function scriptCheckerFactory(t,e){return(r,i,n,s)=>{const o=t({redeem:{output:n}}).output;if(!i.equals(o))throw new Error(`${e} for ${s} #${r} doesn't match the scriptPubKey in the prevout`)}}const E=scriptCheckerFactory(l.p2sh,"Redeem script"),M=scriptCheckerFactory(l.p2wsh,"Witness script");function getTxCacheValue(t,e,r,i){if(!r.every(isFinalized))throw new Error(`PSBT must be finalized to calculate ${e}`);if("__FEE_RATE"===t&&i.__FEE_RATE)return i.__FEE_RATE;if("__FEE"===t&&i.__FEE)return i.__FEE;let n,s=!0;return i.__EXTRACTED_TX?(n=i.__EXTRACTED_TX,s=!1):n=i.__TX.clone(),inputFinalizeGetAmts(r,n,i,s),"__FEE_RATE"===t?i.__FEE_RATE:"__FEE"===t?i.__FEE:void 0}function getFinalScripts(t,e,r,i,n,s){const o=classifyScript(r);if(!function canFinalize(t,e,r){switch(r){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return hasSigs(1,t.partialSig);case"multisig":const r=l.p2ms({output:e});return hasSigs(r.m,t.partialSig,r.pubkeys);default:return!1}}(e,r,o))throw new Error(`Can not finalize input #${t}`);return function prepareFinalScripts(t,e,r,i,n,s){let o,a;const u=function getPayment(t,e,r){let i;switch(e){case"multisig":const e=function getSortedSigs(t,e){const r=l.p2ms({output:t});return r.pubkeys.map((t=>(e.filter((e=>e.pubkey.equals(t)))[0]||{}).signature)).filter((t=>!!t))}(t,r);i=l.p2ms({output:t,signatures:e});break;case"pubkey":i=l.p2pk({output:t,signature:r[0].signature});break;case"pubkeyhash":i=l.p2pkh({output:t,pubkey:r[0].pubkey,signature:r[0].signature});break;case"witnesspubkeyhash":i=l.p2wpkh({output:t,pubkey:r[0].pubkey,signature:r[0].signature})}return i}(t,e,r),h=s?l.p2wsh({redeem:u}):null,c=n?l.p2sh({redeem:h||u}):null;i?(a=witnessStackToScriptWitness(h?h.witness:u.witness),c&&(o=c.input)):o=c?c.input:u.input;return{finalScriptSig:o,finalScriptWitness:a}}(r,o,e.partialSig,i,n,s)}function getHashAndSighashType(t,e,r,i,n,s){const a=o.checkForInput(t,e),{hash:u,sighashType:h,script:c}=getHashForSig(e,a,i,!1,s,n);return checkScriptForPubkey(r,c,"sign"),{hash:u,sighashType:h}}function getHashForSig(t,e,r,i,n,s){const o=r.__TX,a=e.sighashType||function getDefaultSighash(t){switch(t){case"bch":return m;case"btg":return g;case"none":return d.Transaction.SIGHASH_ALL}}(n);if(s&&s.indexOf(a)<0){const t=function sighashTypeToString(t){let e=t&d.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";t&d.Transaction.SIGHASH_BITCOINCASHBIP143&&(e+="SIGHASH_BITCOINCASHBIP143 | ");t&d.Transaction.FORKID_BTG<<8?e+="FORKID_BTG | ":e+="FORKID_BCH | ";switch(31&t){case d.Transaction.SIGHASH_ALL:e+="SIGHASH_ALL";break;case d.Transaction.SIGHASH_SINGLE:e+="SIGHASH_SINGLE";break;case d.Transaction.SIGHASH_NONE:e+="SIGHASH_NONE"}return e}(a);throw new Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${t}`)}let u,h;const c=(a&d.Transaction.SIGHASH_BITCOINCASHBIP143)>0,p=(a&d.Transaction.FORKID_BTG<<8)>0;if(e.nonWitnessUtxo){const i=nonWitnessUtxoTxFromCache(r,e,t),n=o.ins[t].hash,s=i.getHash();if(!n.equals(s))throw new Error(`Non-witness UTXO hash for input #${t} doesn't match the hash specified in the prevout`);const a=o.ins[t].index;h=i.outs[a]}else{if(!e.witnessUtxo)throw new Error("Need a Utxo input item for signing");h=e.witnessUtxo}const{meaningfulScript:f,type:y}=getMeaningfulScript(h.script,t,"input",e.redeemScript,e.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(y)>=0)u=c&&p?o.hashForGoldSignature(t,f,h.value,a,!0):o.hashForWitnessV0(t,f,h.value,a);else if(_(f)){const e=l.p2pkh({hash:f.slice(2)}).output;u=c&&p?o.hashForGoldSignature(t,e,h.value,a,!0):o.hashForWitnessV0(t,e,h.value,a)}else{if(!c&&void 0===e.nonWitnessUtxo&&!1===r.__UNSAFE_SIGN_NONSEGWIT)throw new Error(`Input #${t} has witnessUtxo but non-segwit script: ${f.toString("hex")}`);i||!1===r.__UNSAFE_SIGN_NONSEGWIT||console.warn("Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as the old TransactionBuilder class when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.\n*********************\nPROCEED WITH CAUTION!\n*********************"),u=c&&p?o.hashForGoldSignature(t,f,h.value,a,!0):c?o.hashForCashSignature(t,f,h.value,a):o.hashForSignature(t,f,a)}return{script:f,sighashType:a,hash:u}}function getSignersFromHD(t,e,r){const i=o.checkForInput(e,t);if(!i.bip32Derivation||0===i.bip32Derivation.length)throw new Error("Need bip32Derivation to sign with HD");const n=i.bip32Derivation.map((t=>t.masterFingerprint.equals(r.fingerprint)?t:void 0)).filter((t=>!!t));if(0===n.length)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return n.map((t=>{const e=r.derivePath(t.path);if(!t.pubkey.equals(e.publicKey))throw new Error("pubkey did not match bip32Derivation");return e}))}function scriptWitnessToWitnessStack(t){let e=0;function readVarInt(){const r=s.decode(t,e);return e+=s.decode.bytes,r}function readVarSlice(){return function readSlice(r){return e+=r,t.slice(e-r,e)}(readVarInt())}return function readVector(){const t=readVarInt(),e=[];for(let r=0;r<t;r++)e.push(readVarSlice());return e}()}function witnessStackToScriptWitness(t){let e=i.allocUnsafe(0);function writeVarInt(t){const r=e.length,n=s.encodingLength(t);e=i.concat([e,i.allocUnsafe(n)]),s.encode(t,e,r)}function writeVarSlice(t){writeVarInt(t.length),function writeSlice(t){e=i.concat([e,i.from(t)])}(t)}return function writeVector(t){writeVarInt(t.length),t.forEach(writeVarSlice)}(t),e}function addNonWitnessTxCache(t,e,r){t.__NON_WITNESS_UTXO_BUF_CACHE[r]=e.nonWitnessUtxo;const i=d.Transaction.fromBuffer(e.nonWitnessUtxo);t.__NON_WITNESS_UTXO_TX_CACHE[r]=i;const n=t,s=r;delete e.nonWitnessUtxo,Object.defineProperty(e,"nonWitnessUtxo",{enumerable:!0,get(){const t=n.__NON_WITNESS_UTXO_BUF_CACHE[s],e=n.__NON_WITNESS_UTXO_TX_CACHE[s];if(void 0!==t)return t;{const t=e.toBuffer();return n.__NON_WITNESS_UTXO_BUF_CACHE[s]=t,t}},set(t){n.__NON_WITNESS_UTXO_BUF_CACHE[s]=t}})}function inputFinalizeGetAmts(t,e,r,i){let n=0;t.forEach(((t,s)=>{if(i&&t.finalScriptSig&&(e.ins[s].script=t.finalScriptSig),i&&t.finalScriptWitness&&(e.ins[s].witness=scriptWitnessToWitnessStack(t.finalScriptWitness)),t.witnessUtxo)n+=t.witnessUtxo.value;else if(t.nonWitnessUtxo){const i=nonWitnessUtxoTxFromCache(r,t,s),o=e.ins[s].index,a=i.outs[o];n+=a.value}}));const s=e.outs.reduce(((t,e)=>t+e.value),0),o=n-s;if(o<0)throw new Error("Outputs are spending more than Inputs");const a=e.virtualSize();r.__FEE=o,r.__EXTRACTED_TX=e,r.__FEE_RATE=Math.floor(o/a)}function nonWitnessUtxoTxFromCache(t,e,r){const i=t.__NON_WITNESS_UTXO_TX_CACHE;return i[r]||addNonWitnessTxCache(t,e,r),i[r]}function getScriptFromUtxo(t,e,r){if(void 0!==e.witnessUtxo)return e.witnessUtxo.script;if(void 0!==e.nonWitnessUtxo){return nonWitnessUtxoTxFromCache(r,e,t).outs[r.__TX.ins[t].index].script}throw new Error("Can't find pubkey in input without Utxo data")}function isPubkeyLike(t){return 33===t.length&&f.isCanonicalPubKey(t)}function getMeaningfulScript(t,e,r,i,n){const s=P(t),o=s&&i&&I(i),a=I(t);if(s&&void 0===i)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((a||o)&&void 0===n)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");let u;return o?(u=n,E(e,t,i,r),M(e,i,n,r),checkInvalidP2WSH(u)):a?(u=n,M(e,t,n,r),checkInvalidP2WSH(u)):s?(u=i,E(e,t,i,r)):u=t,{meaningfulScript:u,type:o?"p2sh-p2wsh":s?"p2sh":a?"p2wsh":"raw"}}function checkInvalidP2WSH(t){if(_(t)||P(t))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function pubkeyInScript(t,e){const r=h.hash160(t),i=f.decompile(e);if(null===i)throw new Error("Unknown script error");return i.some((e=>"number"!=typeof e&&(e.equals(t)||e.equals(r))))}function classifyScript(t){return _(t)?"witnesspubkeyhash":b(t)?"pubkeyhash":v(t)?"multisig":S(t)?"pubkey":"nonstandard"}function range(t){return[...Array(t).keys()]}},962119:(t,e,r)=>{"use strict";var i=r(901048).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(243823),s=r(372734),o=r(701763),a=r(671821),u=r(345586),h=r(216001),c=r(420973);e.OPS=r(253610);const p=r(626355),l=e.OPS.OP_RESERVED;function isPushOnlyChunk(t){return o.Buffer(t)||function isOPInt(t){return o.Number(t)&&(t===e.OPS.OP_0||t>=e.OPS.OP_1&&t<=e.OPS.OP_16||t===e.OPS.OP_1NEGATE)}(t)}function isPushOnly(t){return o.Array(t)&&t.every(isPushOnlyChunk)}function asMinimalOP(t){return 0===t.length?e.OPS.OP_0:1===t.length?t[0]>=1&&t[0]<=16?l+t[0]:129===t[0]?e.OPS.OP_1NEGATE:void 0:void 0}function chunksIsBuffer(t){return i.isBuffer(t)}function singleChunkIsBuffer(t){return i.isBuffer(t)}function compile(t){if(chunksIsBuffer(t))return t;c(o.Array,t);const e=t.reduce(((t,e)=>singleChunkIsBuffer(e)?1===e.length&&void 0!==asMinimalOP(e)?t+1:t+h.encodingLength(e.length)+e.length:t+1),0),r=i.allocUnsafe(e);let n=0;if(t.forEach((t=>{if(singleChunkIsBuffer(t)){const e=asMinimalOP(t);if(void 0!==e)return r.writeUInt8(e,n),void(n+=1);n+=h.encode(r,t.length,n),t.copy(r,n),n+=t.length}else r.writeUInt8(t,n),n+=1})),n!==r.length)throw new Error("Could not decode chunks");return r}function decompile(t){if(function chunksIsArray(t){return o.Array(t)}(t))return t;c(o.Buffer,t);const r=[];let i=0;for(;i<t.length;){const n=t[i];if(n>e.OPS.OP_0&&n<=e.OPS.OP_PUSHDATA4){const e=h.decode(t,i);if(null===e)return null;if(i+=e.size,i+e.number>t.length)return null;const n=t.slice(i,i+e.number);i+=e.number;const s=asMinimalOP(n);void 0!==s?r.push(s):r.push(n)}else r.push(n),i+=1}return r}function isDefinedHashType(t){const e=-193&t;return e>0&&e<4}e.isPushOnly=isPushOnly,e.compile=compile,e.decompile=decompile,e.toASM=function toASM(t){return chunksIsBuffer(t)&&(t=decompile(t)),t.map((t=>{if(singleChunkIsBuffer(t)){const e=asMinimalOP(t);if(void 0===e)return t.toString("hex");t=e}return p[t]})).join(" ")},e.fromASM=function fromASM(t){return c(o.String,t),compile(t.split(" ").map((t=>void 0!==e.OPS[t]?e.OPS[t]:(c(o.Hex,t),i.from(t,"hex")))))},e.toStack=function toStack(t){return t=decompile(t),c(isPushOnly,t),t.map((t=>singleChunkIsBuffer(t)?t:t===e.OPS.OP_0?i.allocUnsafe(0):n.encode(t-l)))},e.isCanonicalPubKey=function isCanonicalPubKey(t){return u.isPoint(t)},e.isDefinedHashType=isDefinedHashType,e.isCanonicalScriptSignature=function isCanonicalScriptSignature(t){return!!i.isBuffer(t)&&(!!isDefinedHashType(t[t.length-1])&&a.check(t.slice(0,-1)))},e.number=n,e.signature=s},243823:(t,e,r)=>{"use strict";var i=r(901048).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.decode=function decode(t,e,r){e=e||4,r=void 0===r||r;const i=t.length;if(0===i)return 0;if(i>e)throw new TypeError("Script number overflow");if(r&&!(127&t[i-1]||!(i<=1)&&128&t[i-2]))throw new Error("Non-minimally encoded script number");if(5===i){const e=t.readUInt32LE(0),r=t.readUInt8(4);return 128&r?-(4294967296*(-129&r)+e):4294967296*r+e}let n=0;for(let e=0;e<i;++e)n|=t[e]<<8*e;return 128&t[i-1]?-(n&~(128<<8*(i-1))):n},e.encode=function encode(t){let e=Math.abs(t);const r=function scriptNumSize(t){return t>2147483647?5:t>8388607?4:t>32767?3:t>127?2:t>0?1:0}(e),n=i.allocUnsafe(r),s=t<0;for(let t=0;t<r;++t)n.writeUInt8(255&e,t),e>>=8;return 128&n[r-1]?n.writeUInt8(s?128:0,r-1):s&&(n[r-1]|=128),n}},372734:(t,e,r)=>{"use strict";var i=r(901048).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(701763),s=r(671821),o=r(420973),a=i.alloc(1,0);function toDER(t){let e=0;for(;0===t[e];)++e;return e===t.length?a:128&(t=t.slice(e))[0]?i.concat([a,t],1+t.length):t}function fromDER(t){0===t[0]&&(t=t.slice(1));const e=i.alloc(32,0),r=Math.max(0,32-t.length);return t.copy(e,r),e}e.decode=function decode(t){const e=t.readUInt8(t.length-1),r=-193&e;if(r<=0||r>=4)throw new Error("Invalid hashType "+e);const n=s.decode(t.slice(0,-1)),o=fromDER(n.r),a=fromDER(n.s);return{signature:i.concat([o,a],64),hashType:e}},e.encode=function encode(t,e){o({signature:n.BufferN(64),hashType:n.UInt8},{signature:t,hashType:e});const r=-193&e;if(r<=0||r>=4)throw new Error("Invalid hashType "+e);const a=i.allocUnsafe(1);a.writeUInt8(e,0);const u=toDER(t.slice(0,32)),h=toDER(t.slice(32,64));return i.concat([s.encode(u,h),a])}},670645:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(649589);e.input=i;const n=r(211804);e.output=n},649589:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(962119),n=r(962119);function partialSignature(t){return t===n.OPS.OP_0||i.isCanonicalScriptSignature(t)}function check(t,e){const r=i.decompile(t);return!(r.length<2)&&(r[0]===n.OPS.OP_0&&(e?r.slice(1).every(partialSignature):r.slice(1).every(i.isCanonicalScriptSignature)))}e.check=check,check.toJSON=()=>"multisig input"},211804:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(962119),n=r(962119),s=r(701763),o=n.OPS.OP_RESERVED;function check(t,e){const r=i.decompile(t);if(r.length<4)return!1;if(r[r.length-1]!==n.OPS.OP_CHECKMULTISIG)return!1;if(!s.Number(r[0]))return!1;if(!s.Number(r[r.length-2]))return!1;const a=r[0]-o,u=r[r.length-2]-o;if(a<=0)return!1;if(u>16)return!1;if(a>u)return!1;if(u!==r.length-3)return!1;if(e)return!0;return r.slice(1,-2).every(i.isCanonicalPubKey)}e.check=check,check.toJSON=()=>"multi-sig output"},188213:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(962119),n=i.OPS;function check(t){const e=i.compile(t);return e.length>1&&e[0]===n.OP_RETURN}e.check=check,check.toJSON=()=>"null data output";const s={check};e.output=s},312213:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(702677);e.input=i;const n=r(469244);e.output=n},702677:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(962119);function check(t){const e=i.decompile(t);return 1===e.length&&i.isCanonicalScriptSignature(e[0])}e.check=check,check.toJSON=()=>"pubKey input"},469244:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(962119),n=r(962119);function check(t){const e=i.decompile(t);return 2===e.length&&i.isCanonicalPubKey(e[0])&&e[1]===n.OPS.OP_CHECKSIG}e.check=check,check.toJSON=()=>"pubKey output"},532569:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(536169);e.input=i;const n=r(442072);e.output=n},536169:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(962119);function check(t){const e=i.decompile(t);return 2===e.length&&i.isCanonicalScriptSignature(e[0])&&i.isCanonicalPubKey(e[1])}e.check=check,check.toJSON=()=>"pubKeyHash input"},442072:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(962119),n=r(962119);function check(t){const e=i.compile(t);return 25===e.length&&e[0]===n.OPS.OP_DUP&&e[1]===n.OPS.OP_HASH160&&20===e[2]&&e[23]===n.OPS.OP_EQUALVERIFY&&e[24]===n.OPS.OP_CHECKSIG}e.check=check,check.toJSON=()=>"pubKeyHash output"},970520:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(504488);e.input=i;const n=r(424363);e.output=n},504488:(t,e,r)=>{"use strict";var i=r(901048).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(962119),s=r(670645),o=r(312213),a=r(532569),u=r(715715),h=r(13988);function check(t,e){const r=n.decompile(t);if(r.length<1)return!1;const c=r[r.length-1];if(!i.isBuffer(c))return!1;const p=n.decompile(n.compile(r.slice(0,-1))),l=n.decompile(c);return!!l&&(!!n.isPushOnly(p)&&(1===r.length?h.check(l)||u.check(l):!(!a.input.check(p)||!a.output.check(l))||(!(!s.input.check(p,e)||!s.output.check(l))||!(!o.input.check(p)||!o.output.check(l)))))}e.check=check,check.toJSON=()=>"scriptHash input"},424363:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(962119),n=r(962119);function check(t){const e=i.compile(t);return 23===e.length&&e[0]===n.OPS.OP_HASH160&&20===e[1]&&e[22]===n.OPS.OP_EQUAL}e.check=check,check.toJSON=()=>"scriptHash output"},741775:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(965210);e.output=i},965210:(t,e,r)=>{"use strict";var i=r(901048).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(962119),s=r(962119),o=r(701763),a=r(420973),u=i.from("aa21a9ed","hex");function check(t){const e=n.compile(t);return e.length>37&&e[0]===s.OPS.OP_RETURN&&36===e[1]&&e.slice(2,6).equals(u)}e.check=check,check.toJSON=()=>"Witness commitment output",e.encode=function encode(t){a(o.Hash256bit,t);const e=i.allocUnsafe(36);return u.copy(e,0),t.copy(e,4),n.compile([s.OPS.OP_RETURN,e])},e.decode=function decode(t){return a(check,t),n.decompile(t)[1].slice(4,36)}},773408:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(161088);e.input=i;const n=r(715715);e.output=n},161088:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(962119);function check(t){const e=i.decompile(t);return 2===e.length&&i.isCanonicalScriptSignature(e[0])&&function isCompressedCanonicalPubKey(t){return i.isCanonicalPubKey(t)&&33===t.length}(e[1])}e.check=check,check.toJSON=()=>"witnessPubKeyHash input"},715715:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(962119),n=r(962119);function check(t){const e=i.compile(t);return 22===e.length&&e[0]===n.OPS.OP_0&&20===e[1]}e.check=check,check.toJSON=()=>"Witness pubKeyHash output"},637165:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(52285);e.input=i;const n=r(13988);e.output=n},52285:(t,e,r)=>{"use strict";var i=r(901048).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(962119),s=r(420973),o=r(670645),a=r(312213),u=r(532569);function check(t,e){if(s(s.Array,t),t.length<1)return!1;const r=t[t.length-1];if(!i.isBuffer(r))return!1;const h=n.decompile(r);if(!h||0===h.length)return!1;const c=n.compile(t.slice(0,-1));return!(!u.input.check(c)||!u.output.check(h))||(!(!o.input.check(c,e)||!o.output.check(h))||!(!a.input.check(c)||!a.output.check(h)))}e.check=check,check.toJSON=()=>"witnessScriptHash input"},13988:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(962119),n=r(962119);function check(t){const e=i.compile(t);return 34===e.length&&e[0]===n.OPS.OP_0&&32===e[1]}e.check=check,check.toJSON=()=>"Witness scriptHash output"},432082:(t,e,r)=>{"use strict";var i=r(901048).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(165649),s=r(604033),o=r(962119),a=r(962119),u=r(701763),h=r(420973),c=r(377820);function varSliceSize(t){const e=t.length;return c.encodingLength(e)+e}const p=i.allocUnsafe(0),l=[],f=i.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),d=i.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),m=i.from("ffffffffffffffff","hex"),g={script:p,valueBuffer:m};class Transaction{constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}static fromBuffer(t,e){const r=new n.BufferReader(t),i=new Transaction;i.version=r.readInt32();const s=r.readUInt8(),o=r.readUInt8();let a=!1;s===Transaction.ADVANCED_TRANSACTION_MARKER&&o===Transaction.ADVANCED_TRANSACTION_FLAG?a=!0:r.offset-=2;const u=r.readVarInt();for(let t=0;t<u;++t)i.ins.push({hash:r.readSlice(32),index:r.readUInt32(),script:r.readVarSlice(),sequence:r.readUInt32(),witness:l});const h=r.readVarInt();for(let t=0;t<h;++t)i.outs.push({value:r.readUInt64(),script:r.readVarSlice()});if(a){for(let t=0;t<u;++t)i.ins[t].witness=r.readVector();if(!i.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(i.locktime=r.readUInt32(),e)return i;if(r.offset!==t.length)throw new Error("Transaction has unexpected data");return i}static fromHex(t){return Transaction.fromBuffer(i.from(t,"hex"),!1)}static isCoinbaseHash(t){h(u.Hash256bit,t);for(let e=0;e<32;++e)if(0!==t[e])return!1;return!0}isCoinbase(){return 1===this.ins.length&&Transaction.isCoinbaseHash(this.ins[0].hash)}addInput(t,e,r,i){return h(u.tuple(u.Hash256bit,u.UInt32,u.maybe(u.UInt32),u.maybe(u.Buffer)),arguments),u.Null(r)&&(r=Transaction.DEFAULT_SEQUENCE),this.ins.push({hash:t,index:e,script:i||p,sequence:r,witness:l})-1}addOutput(t,e){return h(u.tuple(u.Buffer,u.Satoshi),arguments),this.outs.push({script:t,value:e})-1}hasWitnesses(){return this.ins.some((t=>0!==t.witness.length))}weight(){return 3*this.byteLength(!1)+this.byteLength(!0)}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(t=!0){const e=t&&this.hasWitnesses();return(e?10:8)+c.encodingLength(this.ins.length)+c.encodingLength(this.outs.length)+this.ins.reduce(((t,e)=>t+40+varSliceSize(e.script)),0)+this.outs.reduce(((t,e)=>t+8+varSliceSize(e.script)),0)+(e?this.ins.reduce(((t,e)=>t+function vectorSize(t){const e=t.length;return c.encodingLength(e)+t.reduce(((t,e)=>t+varSliceSize(e)),0)}(e.witness)),0):0)}clone(){const t=new Transaction;return t.version=this.version,t.locktime=this.locktime,t.ins=this.ins.map((t=>({hash:t.hash,index:t.index,script:t.script,sequence:t.sequence,witness:t.witness}))),t.outs=this.outs.map((t=>({script:t.script,value:t.value}))),t}hashForSignature(t,e,r){if(h(u.tuple(u.UInt32,u.Buffer,u.Number),arguments),t>=this.ins.length)return d;const n=o.compile(o.decompile(e).filter((t=>t!==a.OPS.OP_CODESEPARATOR))),c=this.clone();if((31&r)===Transaction.SIGHASH_NONE)c.outs=[],c.ins.forEach(((e,r)=>{r!==t&&(e.sequence=0)}));else if((31&r)===Transaction.SIGHASH_SINGLE){if(t>=this.outs.length)return d;c.outs.length=t+1;for(let e=0;e<t;e++)c.outs[e]=g;c.ins.forEach(((e,r)=>{r!==t&&(e.sequence=0)}))}r&Transaction.SIGHASH_ANYONECANPAY?(c.ins=[c.ins[t]],c.ins[0].script=n):(c.ins.forEach((t=>{t.script=p})),c.ins[t].script=n);const l=i.allocUnsafe(c.byteLength(!1)+4);return l.writeInt32LE(r,l.length-4),c.__toBuffer(l,0,!1),s.hash256(l)}hashForWitnessV0(t,e,r,o){h(u.tuple(u.UInt32,u.Buffer,u.Satoshi,u.UInt32),arguments);let a,c=i.from([]),p=f,l=f,d=f;if(o&Transaction.SIGHASH_ANYONECANPAY||(c=i.allocUnsafe(36*this.ins.length),a=new n.BufferWriter(c,0),this.ins.forEach((t=>{a.writeSlice(t.hash),a.writeUInt32(t.index)})),l=s.hash256(c)),o&Transaction.SIGHASH_ANYONECANPAY||(31&o)===Transaction.SIGHASH_SINGLE||(31&o)===Transaction.SIGHASH_NONE||(c=i.allocUnsafe(4*this.ins.length),a=new n.BufferWriter(c,0),this.ins.forEach((t=>{a.writeUInt32(t.sequence)})),d=s.hash256(c)),(31&o)!==Transaction.SIGHASH_SINGLE&&(31&o)!==Transaction.SIGHASH_NONE){const t=this.outs.reduce(((t,e)=>t+8+varSliceSize(e.script)),0);c=i.allocUnsafe(t),a=new n.BufferWriter(c,0),this.outs.forEach((t=>{a.writeUInt64(t.value),a.writeVarSlice(t.script)})),p=s.hash256(c)}else if((31&o)===Transaction.SIGHASH_SINGLE&&t<this.outs.length){const e=this.outs[t];c=i.allocUnsafe(8+varSliceSize(e.script)),a=new n.BufferWriter(c,0),a.writeUInt64(e.value),a.writeVarSlice(e.script),p=s.hash256(c)}c=i.allocUnsafe(156+varSliceSize(e)),a=new n.BufferWriter(c,0);const m=this.ins[t];return a.writeUInt32(this.version),a.writeSlice(l),a.writeSlice(d),a.writeSlice(m.hash),a.writeUInt32(m.index),a.writeVarSlice(e),a.writeUInt64(r),a.writeUInt32(m.sequence),a.writeSlice(p),a.writeUInt32(this.locktime),a.writeUInt32(o),s.hash256(c)}hashForCashSignature(t,e,r,i){if(h(u.tuple(u.UInt32,u.Buffer,u.Number,u.maybe(u.UInt53)),arguments),i&Transaction.SIGHASH_BITCOINCASHBIP143){if(u.Null(r))throw new Error("Bitcoin Cash sighash requires value of input to be signed.");return this.hashForWitnessV0(t,e,r,i)}return this.hashForSignature(t,e,i)}hashForGoldSignature(t,e,r,i,n){h(u.tuple(u.UInt32,u.Buffer,u.Number,u.maybe(u.UInt53)),arguments);let s=i;const o=(i&Transaction.SIGHASH_BITCOINCASHBIP143)>0;if(o&&(s|=Transaction.FORKID_BTG<<8),n||o){if(u.Null(r))throw new Error("Bitcoin Cash sighash requires value of input to be signed.");return this.hashForWitnessV0(t,e,r,s)}return this.hashForSignature(t,e,s)}getHash(t){return t&&this.isCoinbase()?i.alloc(32,0):s.hash256(this.__toBuffer(void 0,void 0,t))}getId(){return n.reverseBuffer(this.getHash(!1)).toString("hex")}toBuffer(t,e){return this.__toBuffer(t,e,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(t,e){h(u.tuple(u.Number,u.Buffer),arguments),this.ins[t].script=e}setWitness(t,e){h(u.tuple(u.Number,[u.Buffer]),arguments),this.ins[t].witness=e}__toBuffer(t,e,r=!1){t||(t=i.allocUnsafe(this.byteLength(r)));const s=new n.BufferWriter(t,e||0);s.writeInt32(this.version);const o=r&&this.hasWitnesses();return o&&(s.writeUInt8(Transaction.ADVANCED_TRANSACTION_MARKER),s.writeUInt8(Transaction.ADVANCED_TRANSACTION_FLAG)),s.writeVarInt(this.ins.length),this.ins.forEach((t=>{s.writeSlice(t.hash),s.writeUInt32(t.index),s.writeVarSlice(t.script),s.writeUInt32(t.sequence)})),s.writeVarInt(this.outs.length),this.outs.forEach((t=>{!function isOutput(t){return void 0!==t.value}(t)?s.writeSlice(t.valueBuffer):s.writeUInt64(t.value),s.writeVarSlice(t.script)})),o&&this.ins.forEach((t=>{s.writeVector(t.witness)})),s.writeUInt32(this.locktime),void 0!==e?t.slice(e,s.offset):t}}Transaction.DEFAULT_SEQUENCE=4294967295,Transaction.SIGHASH_ALL=1,Transaction.SIGHASH_NONE=2,Transaction.SIGHASH_SINGLE=3,Transaction.SIGHASH_ANYONECANPAY=128,Transaction.SIGHASH_BITCOINCASHBIP143=64,Transaction.ADVANCED_TRANSACTION_MARKER=0,Transaction.ADVANCED_TRANSACTION_FLAG=1,Transaction.FORKID_BTG=79,Transaction.FORKID_BCH=0,e.Transaction=Transaction},497318:(t,e,r)=>{"use strict";var i=r(901048).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(910150),s=r(165649),o=r(91034),a=r(604033),u=r(628596),h=r(5491),c=r(385320),p=r(962119),l=r(962119),f=r(432082),d=r(701763),m=r(420973),g=o.types,y=new Set(["p2pkh","p2pk","p2wpkh","p2ms","p2sh-p2pkh","p2sh-p2pk","p2sh-p2wpkh","p2sh-p2ms","p2wsh-p2pkh","p2wsh-p2pk","p2wsh-p2ms","p2sh-p2wsh-p2pkh","p2sh-p2wsh-p2pk","p2sh-p2wsh-p2ms"]);function tfMessage(t,e,r){try{m(t,e)}catch(t){throw new Error(r)}}class TransactionBuilder{constructor(t=h.bitcoin,e=2500){this.network=t,this.maximumFeeRate=e,this.__PREV_TX_SET={},this.__INPUTS=[],this.__BITCOINCASH=!1,this.__BITCOINGOLD=!1,this.__TX=new f.Transaction,this.__TX.version=2,this.__USE_LOW_R=!1,console.warn("Deprecation Warning: TransactionBuilder will be removed in the future. (v6.x.x or later) Please use the Psbt class instead. Examples of usage are available in the transactions-psbt.js integration test file on our Github. A high level explanation is available in the psbt.ts and psbt.js files as well.")}static fromTransaction(t,e,r){const i=new TransactionBuilder(e);return"number"==typeof r&&(r===f.Transaction.FORKID_BTG?i.enableBitcoinGold(!0):r===f.Transaction.FORKID_BCH&&i.enableBitcoinCash(!0)),i.setVersion(t.version),i.setLockTime(t.locktime),t.outs.forEach((t=>{i.addOutput(t.script,t.value)})),t.ins.forEach((t=>{i.__addInputUnsafe(t.hash,t.index,{sequence:t.sequence,script:t.script,witness:t.witness,value:t.value})})),i.__INPUTS.forEach(((e,i)=>{!function fixMultisigOrder(t,e,r,i,n){if(t.redeemScriptType!==g.P2MS||!t.redeemScript)return;if(t.pubkeys.length===t.signatures.length)return;const s=t.signatures.concat();t.signatures=t.pubkeys.map((o=>{const a=u.fromPublicKey(o);let h;return s.some(((o,u)=>{if(!o)return!1;const c=p.signature.decode(o);let l;switch(n){case f.Transaction.FORKID_BCH:l=e.hashForCashSignature(r,t.redeemScript,i,c.hashType);break;case f.Transaction.FORKID_BTG:l=e.hashForGoldSignature(r,t.redeemScript,i,c.hashType);break;default:l=t.witness?e.hashForWitnessV0(r,t.redeemScript,i,c.hashType):e.hashForSignature(r,t.redeemScript,c.hashType)}return!!a.verify(l,c.signature)&&(s[u]=void 0,h=o,!0)})),h}))}(e,t,i,e.value,r)})),i}enableBitcoinCash(t){void 0===t&&(t=!0),this.__BITCOINCASH=t}enableBitcoinGold(t){void 0===t&&(t=!0),this.__BITCOINGOLD=t}setLowR(t){return m(m.maybe(m.Boolean),t),void 0===t&&(t=!0),this.__USE_LOW_R=t,t}setLockTime(t){if(m(d.UInt32,t),this.__INPUTS.some((t=>!!t.signatures&&t.signatures.some((t=>void 0!==t)))))throw new Error("No, this would invalidate signatures");this.__TX.locktime=t}setVersion(t){m(d.UInt32,t),this.__TX.version=t}addInput(t,e,r,n){if(!this.__canModifyInputs())throw new Error("No, this would invalidate signatures");let o;if(function txIsString(t){return"string"==typeof t||t instanceof String}(t))t=s.reverseBuffer(i.from(t,"hex"));else if(function txIsTransaction(t){return t instanceof f.Transaction}(t)){const r=t.outs[e];n=r.script,o=r.value,t=t.getHash(!1)}return this.__addInputUnsafe(t,e,{sequence:r,prevOutScript:n,value:o})}addOutput(t,e){if(!this.__canModifyOutputs())throw new Error("No, this would invalidate signatures");return"string"==typeof t&&(t=n.toOutputScript(t,this.network)),this.__TX.addOutput(t,e)}build(){return this.__build(!1)}buildIncomplete(){return this.__build(!0)}sign(t,e,r,i,n,s){!function trySign({input:t,ourPubKey:e,keyPair:r,signatureHash:i,hashType:n,useLowR:s}){let o=!1;for(const[a,u]of t.pubkeys.entries()){if(!e.equals(u))continue;if(t.signatures[a])throw new Error("Signature already exists");if(33!==e.length&&t.hasWitness)throw new Error("BIP143 rejects uncompressed public keys in P2WPKH or P2WSH");const h=r.sign(i,s);t.signatures[a]=p.signature.encode(h,n),o=!0}if(!o)throw new Error("Key pair cannot sign for this input")}(function getSigningData(t,e,r,i,n,s,o,a,u,h,l,w){let v;if("number"==typeof n)console.warn("DEPRECATED: TransactionBuilder sign method arguments will change in v6, please use the TxbSignArg interface"),v=n;else{if("object"!=typeof n)throw new TypeError("TransactionBuilder sign first arg must be TxbSignArg or number");!function checkSignArgs(t,e){if(!y.has(e.prevOutScriptType))throw new TypeError(`Unknown prevOutScriptType "${e.prevOutScriptType}"`);tfMessage(m.Number,e.vin,"sign must include vin parameter as Number (input index)"),tfMessage(d.Signer,e.keyPair,"sign must include keyPair parameter as Signer interface"),tfMessage(m.maybe(m.Number),e.hashType,"sign hashType parameter must be a number");const r=(t[e.vin]||[]).prevOutType,i=e.prevOutScriptType;switch(i){case"p2pkh":if(r&&"pubkeyhash"!==r)throw new TypeError(`input #${e.vin} is not of type p2pkh: ${r}`);tfMessage(m.value(void 0),e.witnessScript,`${i} requires NO witnessScript`),tfMessage(m.value(void 0),e.redeemScript,`${i} requires NO redeemScript`),tfMessage(m.value(void 0),e.witnessValue,`${i} requires NO witnessValue`);break;case"p2pk":if(r&&"pubkey"!==r)throw new TypeError(`input #${e.vin} is not of type p2pk: ${r}`);tfMessage(m.value(void 0),e.witnessScript,`${i} requires NO witnessScript`),tfMessage(m.value(void 0),e.redeemScript,`${i} requires NO redeemScript`),tfMessage(m.value(void 0),e.witnessValue,`${i} requires NO witnessValue`);break;case"p2wpkh":if(r&&"witnesspubkeyhash"!==r)throw new TypeError(`input #${e.vin} is not of type p2wpkh: ${r}`);tfMessage(m.value(void 0),e.witnessScript,`${i} requires NO witnessScript`),tfMessage(m.value(void 0),e.redeemScript,`${i} requires NO redeemScript`),tfMessage(d.Satoshi,e.witnessValue,`${i} requires witnessValue`);break;case"p2ms":if(r&&"multisig"!==r)throw new TypeError(`input #${e.vin} is not of type p2ms: ${r}`);tfMessage(m.value(void 0),e.witnessScript,`${i} requires NO witnessScript`),tfMessage(m.value(void 0),e.redeemScript,`${i} requires NO redeemScript`),tfMessage(m.value(void 0),e.witnessValue,`${i} requires NO witnessValue`);break;case"p2sh-p2wpkh":if(r&&"scripthash"!==r)throw new TypeError(`input #${e.vin} is not of type p2sh-p2wpkh: ${r}`);tfMessage(m.value(void 0),e.witnessScript,`${i} requires NO witnessScript`),tfMessage(m.Buffer,e.redeemScript,`${i} requires redeemScript`),tfMessage(d.Satoshi,e.witnessValue,`${i} requires witnessValue`);break;case"p2sh-p2ms":case"p2sh-p2pk":case"p2sh-p2pkh":if(r&&"scripthash"!==r)throw new TypeError(`input #${e.vin} is not of type ${i}: ${r}`);tfMessage(m.value(void 0),e.witnessScript,`${i} requires NO witnessScript`),tfMessage(m.Buffer,e.redeemScript,`${i} requires redeemScript`),tfMessage(m.value(void 0),e.witnessValue,`${i} requires NO witnessValue`);break;case"p2wsh-p2ms":case"p2wsh-p2pk":case"p2wsh-p2pkh":if(r&&"witnessscripthash"!==r)throw new TypeError(`input #${e.vin} is not of type ${i}: ${r}`);tfMessage(m.Buffer,e.witnessScript,`${i} requires witnessScript`),tfMessage(m.value(void 0),e.redeemScript,`${i} requires NO redeemScript`),tfMessage(d.Satoshi,e.witnessValue,`${i} requires witnessValue`);break;case"p2sh-p2wsh-p2ms":case"p2sh-p2wsh-p2pk":case"p2sh-p2wsh-p2pkh":if(r&&"scripthash"!==r)throw new TypeError(`input #${e.vin} is not of type ${i}: ${r}`);tfMessage(m.Buffer,e.witnessScript,`${i} requires witnessScript`),tfMessage(m.Buffer,e.redeemScript,`${i} requires witnessScript`),tfMessage(d.Satoshi,e.witnessValue,`${i} requires witnessScript`)}}(e,n),({vin:v,keyPair:o,redeemScript:a,hashType:u,witnessValue:h,witnessScript:l}=n)}if(void 0===o)throw new Error("sign requires keypair");if(o.network&&o.network!==t)throw new TypeError("Inconsistent network");if(!e[v])throw new Error("No input at index: "+v);if(u=u||f.Transaction.SIGHASH_ALL,r(u))throw new Error("Transaction needs outputs");const S=e[v];if(void 0!==S.redeemScript&&a&&!S.redeemScript.equals(a))throw new Error("Inconsistent redeemScript");const b=o.publicKey||o.getPublicKey&&o.getPublicKey();if(!canSign(S)){if(void 0!==h){if(void 0!==S.value&&S.value!==h)throw new Error("Input did not match witnessValue");m(d.Satoshi,h),S.value=h}if(!canSign(S)){const t=function prepareInput(t,e,r,i){if(r&&i){const n=c.p2wsh({redeem:{output:i}}),s=c.p2wsh({output:r}),o=c.p2sh({redeem:{output:r}}),a=c.p2sh({redeem:n});if(!n.hash.equals(s.hash))throw new Error("Witness script inconsistent with prevOutScript");if(!o.hash.equals(a.hash))throw new Error("Redeem script inconsistent with prevOutScript");const u=expandOutput(n.redeem.output,e);if(!u.pubkeys)throw new Error(u.type+" not supported as witnessScript ("+p.toASM(i)+")");t.signatures&&t.signatures.some((t=>void 0!==t))&&(u.signatures=t.signatures);const h=i;if(u.type===g.P2WPKH)throw new Error("P2SH(P2WSH(P2WPKH)) is a consensus failure");return{redeemScript:r,redeemScriptType:g.P2WSH,witnessScript:i,witnessScriptType:u.type,prevOutType:g.P2SH,prevOutScript:o.output,hasWitness:!0,signScript:h,signType:u.type,pubkeys:u.pubkeys,signatures:u.signatures,maxSignatures:u.maxSignatures}}if(r){const i=c.p2sh({redeem:{output:r}});if(t.prevOutScript){let e;try{e=c.p2sh({output:t.prevOutScript})}catch(t){throw new Error("PrevOutScript must be P2SH")}if(!i.hash.equals(e.hash))throw new Error("Redeem script inconsistent with prevOutScript")}const n=expandOutput(i.redeem.output,e);if(!n.pubkeys)throw new Error(n.type+" not supported as redeemScript ("+p.toASM(r)+")");t.signatures&&t.signatures.some((t=>void 0!==t))&&(n.signatures=t.signatures);let s=r;return n.type===g.P2WPKH&&(s=c.p2pkh({pubkey:n.pubkeys[0]}).output),{redeemScript:r,redeemScriptType:n.type,prevOutType:g.P2SH,prevOutScript:i.output,hasWitness:n.type===g.P2WPKH,signScript:s,signType:n.type,pubkeys:n.pubkeys,signatures:n.signatures,maxSignatures:n.maxSignatures}}if(i){const r=c.p2wsh({redeem:{output:i}});if(t.prevOutScript){const e=c.p2wsh({output:t.prevOutScript});if(!r.hash.equals(e.hash))throw new Error("Witness script inconsistent with prevOutScript")}const n=expandOutput(r.redeem.output,e);if(!n.pubkeys)throw new Error(n.type+" not supported as witnessScript ("+p.toASM(i)+")");t.signatures&&t.signatures.some((t=>void 0!==t))&&(n.signatures=t.signatures);const s=i;if(n.type===g.P2WPKH)throw new Error("P2WSH(P2WPKH) is a consensus failure");return{witnessScript:i,witnessScriptType:n.type,prevOutType:g.P2WSH,prevOutScript:r.output,hasWitness:!0,signScript:s,signType:n.type,pubkeys:n.pubkeys,signatures:n.signatures,maxSignatures:n.maxSignatures}}if(t.prevOutType&&t.prevOutScript){if(t.prevOutType===g.P2SH)throw new Error("PrevOutScript is "+t.prevOutType+", requires redeemScript");if(t.prevOutType===g.P2WSH)throw new Error("PrevOutScript is "+t.prevOutType+", requires witnessScript");if(!t.prevOutScript)throw new Error("PrevOutScript is missing");const r=expandOutput(t.prevOutScript,e);if(!r.pubkeys)throw new Error(r.type+" not supported ("+p.toASM(t.prevOutScript)+")");t.signatures&&t.signatures.some((t=>void 0!==t))&&(r.signatures=t.signatures);let i=t.prevOutScript;return r.type===g.P2WPKH&&(i=c.p2pkh({pubkey:r.pubkeys[0]}).output),{prevOutType:r.type,prevOutScript:t.prevOutScript,hasWitness:r.type===g.P2WPKH,signScript:i,signType:r.type,pubkeys:r.pubkeys,signatures:r.signatures,maxSignatures:r.maxSignatures}}const n=c.p2pkh({pubkey:e}).output;return{prevOutType:g.P2PKH,prevOutScript:n,hasWitness:!1,signScript:n,signType:g.P2PKH,pubkeys:[e],signatures:[void 0]}}(S,b,a,l);Object.assign(S,t)}if(!canSign(S))throw Error(S.prevOutType+" not supported")}let _;_=s.btg?i.hashForGoldSignature(v,S.signScript,S.value,u,!!S.witness):s.bch?i.hashForCashSignature(v,S.signScript,S.value,u):S.hasWitness?i.hashForWitnessV0(v,S.signScript,S.value,u):i.hashForSignature(v,S.signScript,u);return{input:S,ourPubKey:b,keyPair:o,signatureHash:_,hashType:u,useLowR:!!w}}(this.network,this.__INPUTS,this.__needsOutputs.bind(this),this.__TX,t,{btg:this.__BITCOINGOLD,bch:this.__BITCOINCASH},e,r,i,n,s,this.__USE_LOW_R))}__addInputUnsafe(t,e,r){if(f.Transaction.isCoinbaseHash(t))throw new Error("coinbase inputs not supported");const i=t.toString("hex")+":"+e;if(void 0!==this.__PREV_TX_SET[i])throw new Error("Duplicate TxOut: "+i);let n={};if(void 0!==r.script&&(n=expandInput(r.script,r.witness||[])),void 0!==r.value&&(n.value=r.value),!n.prevOutScript&&r.prevOutScript){let t;if(!n.pubkeys&&!n.signatures){const e=expandOutput(r.prevOutScript);e.pubkeys&&(n.pubkeys=e.pubkeys,n.signatures=e.signatures),t=e.type}n.prevOutScript=r.prevOutScript,n.prevOutType=t||o.output(r.prevOutScript)}const s=this.__TX.addInput(t,e,r.sequence,r.scriptSig);return this.__INPUTS[s]=n,this.__PREV_TX_SET[i]=!0,s}__build(t){if(!t){if(!this.__TX.ins.length)throw new Error("Transaction has no inputs");if(!this.__TX.outs.length)throw new Error("Transaction has no outputs")}const e=this.__TX.clone();if(this.__INPUTS.forEach(((r,i)=>{if(!r.prevOutType&&!t)throw new Error("Transaction is not complete");const n=build(r.prevOutType,r,t);if(n)e.setInputScript(i,n.input),e.setWitness(i,n.witness);else{if(!t&&r.prevOutType===g.NONSTANDARD)throw new Error("Unknown input type");if(!t)throw new Error("Not enough information")}})),!t&&this.__overMaximumFees(e.virtualSize()))throw new Error("Transaction has absurd fees");return e}__canModifyInputs(){return this.__INPUTS.every((t=>!t.signatures||t.signatures.every((t=>{if(!t)return!0;return!!(signatureHashType(t)&f.Transaction.SIGHASH_ANYONECANPAY)}))))}__needsOutputs(t){return t===f.Transaction.SIGHASH_ALL?0===this.__TX.outs.length:0===this.__TX.outs.length&&this.__INPUTS.some((t=>!!t.signatures&&t.signatures.some((t=>{if(!t)return!1;return!(signatureHashType(t)&f.Transaction.SIGHASH_NONE)}))))}__canModifyOutputs(){const t=this.__TX.ins.length,e=this.__TX.outs.length;return this.__INPUTS.every((r=>void 0===r.signatures||r.signatures.every((r=>{if(!r)return!0;const i=31&signatureHashType(r);return i===f.Transaction.SIGHASH_NONE||i===f.Transaction.SIGHASH_SINGLE&&t<=e}))))}__overMaximumFees(t){return(this.__INPUTS.reduce(((t,e)=>t+(e.value>>>0)),0)-this.__TX.outs.reduce(((t,e)=>t+e.value),0))/t>this.maximumFeeRate}}function expandInput(t,e,r,i){if(0===t.length&&0===e.length)return{};if(!r){let i=o.input(t,!0),n=o.witness(e,!0);i===g.NONSTANDARD&&(i=void 0),n===g.NONSTANDARD&&(n=void 0),r=i||n}switch(r){case g.P2WPKH:{const{output:t,pubkey:r,signature:i}=c.p2wpkh({witness:e});return{prevOutScript:t,prevOutType:g.P2WPKH,pubkeys:[r],signatures:[i]}}case g.P2PKH:{const{output:e,pubkey:r,signature:i}=c.p2pkh({input:t});return{prevOutScript:e,prevOutType:g.P2PKH,pubkeys:[r],signatures:[i]}}case g.P2PK:{const{signature:e}=c.p2pk({input:t});return{prevOutType:g.P2PK,pubkeys:[void 0],signatures:[e]}}case g.P2MS:{const{m:e,pubkeys:r,signatures:n}=c.p2ms({input:t,output:i},{allowIncomplete:!0});return{prevOutType:g.P2MS,pubkeys:r,signatures:n,maxSignatures:e}}}if(r===g.P2SH){const{output:r,redeem:i}=c.p2sh({input:t,witness:e}),n=o.output(i.output),s=expandInput(i.input,i.witness,n,i.output);return s.prevOutType?{prevOutScript:r,prevOutType:g.P2SH,redeemScript:i.output,redeemScriptType:s.prevOutType,witnessScript:s.witnessScript,witnessScriptType:s.witnessScriptType,pubkeys:s.pubkeys,signatures:s.signatures}:{}}if(r===g.P2WSH){const{output:r,redeem:i}=c.p2wsh({input:t,witness:e}),n=o.output(i.output);let s;return s=n===g.P2WPKH?expandInput(i.input,i.witness,n):expandInput(p.compile(i.witness),[],n,i.output),s.prevOutType?{prevOutScript:r,prevOutType:g.P2WSH,witnessScript:i.output,witnessScriptType:s.prevOutType,pubkeys:s.pubkeys,signatures:s.signatures}:{}}return{prevOutType:g.NONSTANDARD,prevOutScript:t}}function expandOutput(t,e){m(d.Buffer,t);const r=o.output(t);switch(r){case g.P2PKH:{if(!e)return{type:r};const i=c.p2pkh({output:t}).hash,n=a.hash160(e);return i.equals(n)?{type:r,pubkeys:[e],signatures:[void 0]}:{type:r}}case g.P2WPKH:{if(!e)return{type:r};const i=c.p2wpkh({output:t}).hash,n=a.hash160(e);return i.equals(n)?{type:r,pubkeys:[e],signatures:[void 0]}:{type:r}}case g.P2PK:return{type:r,pubkeys:[c.p2pk({output:t}).pubkey],signatures:[void 0]};case g.P2MS:{const e=c.p2ms({output:t});return{type:r,pubkeys:e.pubkeys,signatures:e.pubkeys.map((()=>{})),maxSignatures:e.m}}}return{type:r}}function build(t,e,r){const i=e.pubkeys||[];let n=e.signatures||[];switch(t){case g.P2PKH:if(0===i.length)break;if(0===n.length)break;return c.p2pkh({pubkey:i[0],signature:n[0]});case g.P2WPKH:if(0===i.length)break;if(0===n.length)break;return c.p2wpkh({pubkey:i[0],signature:n[0]});case g.P2PK:if(0===i.length)break;if(0===n.length)break;return c.p2pk({signature:n[0]});case g.P2MS:{const t=e.maxSignatures;n=r?n.map((t=>t||l.OPS.OP_0)):n.filter((t=>t));const s=!r||t===n.length;return c.p2ms({m:t,pubkeys:i,signatures:n},{allowIncomplete:r,validate:s})}case g.P2SH:{const t=build(e.redeemScriptType,e,r);if(!t)return;return c.p2sh({redeem:{output:t.output||e.redeemScript,input:t.input,witness:t.witness}})}case g.P2WSH:{const t=build(e.witnessScriptType,e,r);if(!t)return;return c.p2wsh({redeem:{output:e.witnessScript,input:t.input,witness:t.witness}})}}}function canSign(t){return void 0!==t.signScript&&void 0!==t.signType&&void 0!==t.pubkeys&&void 0!==t.signatures&&t.signatures.length===t.pubkeys.length&&t.pubkeys.length>0&&(!1===t.hasWitness||void 0!==t.value)}function signatureHashType(t){return t.readUInt8(t.length-1)}e.TransactionBuilder=TransactionBuilder},701763:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(420973),n=Math.pow(2,31)-1;function BIP32Path(t){return i.String(t)&&!!t.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}e.UInt31=function UInt31(t){return i.UInt32(t)&&t<=n},e.BIP32Path=BIP32Path,BIP32Path.toJSON=()=>"BIP32 derivation path",e.Signer=function Signer(t){return(i.Buffer(t.publicKey)||"function"==typeof t.getPublicKey)&&"function"==typeof t.sign};e.Satoshi=function Satoshi(t){return i.UInt53(t)&&t<=21e14},e.ECPoint=i.quacksLike("Point"),e.Network=i.compile({messagePrefix:i.oneOf(i.Buffer,i.String),bip32:{public:i.UInt32,private:i.UInt32},pubKeyHash:i.UInt8,scriptHash:i.UInt8,wif:i.UInt8}),e.Buffer256bit=i.BufferN(32),e.Hash160bit=i.BufferN(20),e.Hash256bit=i.BufferN(32),e.Number=i.Number,e.Array=i.Array,e.Boolean=i.Boolean,e.String=i.String,e.Buffer=i.Buffer,e.Hex=i.Hex,e.maybe=i.maybe,e.tuple=i.tuple,e.UInt8=i.UInt8,e.UInt32=i.UInt32,e.UInt53=i.UInt53,e.Function=i.Function,e.BufferN=i.BufferN,e.Null=i.Null,e.oneOf=i.oneOf},664864:(t,e,r)=>{var i;t=r.nmd(t);var n=function(t){"use strict";var e=1e7,r=7,i=9007199254740992,s=smallToArray(i),o=Math.log(i);function Integer(t,e){return void 0===t?Integer[0]:void 0!==e?10==+e?parseValue(t):parseBase(t,e):parseValue(t)}function BigInteger(t,e){this.value=t,this.sign=e,this.isSmall=!1}function SmallInteger(t){this.value=t,this.sign=t<0,this.isSmall=!0}function isPrecise(t){return-i<t&&t<i}function smallToArray(t){return t<1e7?[t]:t<1e14?[t%1e7,Math.floor(t/1e7)]:[t%1e7,Math.floor(t/1e7)%1e7,Math.floor(t/1e14)]}function arrayToSmall(t){trim(t);var r=t.length;if(r<4&&compareAbs(t,s)<0)switch(r){case 0:return 0;case 1:return t[0];case 2:return t[0]+t[1]*e;default:return t[0]+(t[1]+t[2]*e)*e}return t}function trim(t){for(var e=t.length;0===t[--e];);t.length=e+1}function createArray(t){for(var e=new Array(t),r=-1;++r<t;)e[r]=0;return e}function truncate(t){return t>0?Math.floor(t):Math.ceil(t)}function add(t,r){var i,n,s=t.length,o=r.length,a=new Array(s),u=0,h=e;for(n=0;n<o;n++)u=(i=t[n]+r[n]+u)>=h?1:0,a[n]=i-u*h;for(;n<s;)u=(i=t[n]+u)===h?1:0,a[n++]=i-u*h;return u>0&&a.push(u),a}function addAny(t,e){return t.length>=e.length?add(t,e):add(e,t)}function addSmall(t,r){var i,n,s=t.length,o=new Array(s),a=e;for(n=0;n<s;n++)i=t[n]-a+r,r=Math.floor(i/a),o[n]=i-r*a,r+=1;for(;r>0;)o[n++]=r%a,r=Math.floor(r/a);return o}function subtract(t,r){var i,n,s=t.length,o=r.length,a=new Array(s),u=0,h=e;for(i=0;i<o;i++)(n=t[i]-u-r[i])<0?(n+=h,u=1):u=0,a[i]=n;for(i=o;i<s;i++){if(!((n=t[i]-u)<0)){a[i++]=n;break}n+=h,a[i]=n}for(;i<s;i++)a[i]=t[i];return trim(a),a}function subtractSmall(t,r,i){var n,s,o=t.length,a=new Array(o),u=-r,h=e;for(n=0;n<o;n++)s=t[n]+u,u=Math.floor(s/h),s%=h,a[n]=s<0?s+h:s;return"number"==typeof(a=arrayToSmall(a))?(i&&(a=-a),new SmallInteger(a)):new BigInteger(a,i)}function multiplyLong(t,r){var i,n,s,o,a=t.length,u=r.length,h=createArray(a+u),c=e;for(s=0;s<a;++s){o=t[s];for(var p=0;p<u;++p)i=o*r[p]+h[s+p],n=Math.floor(i/c),h[s+p]=i-n*c,h[s+p+1]+=n}return trim(h),h}function multiplySmall(t,r){var i,n,s=t.length,o=new Array(s),a=e,u=0;for(n=0;n<s;n++)i=t[n]*r+u,u=Math.floor(i/a),o[n]=i-u*a;for(;u>0;)o[n++]=u%a,u=Math.floor(u/a);return o}function shiftLeft(t,e){for(var r=[];e-- >0;)r.push(0);return r.concat(t)}function multiplyKaratsuba(t,e){var r=Math.max(t.length,e.length);if(r<=30)return multiplyLong(t,e);r=Math.ceil(r/2);var i=t.slice(r),n=t.slice(0,r),s=e.slice(r),o=e.slice(0,r),a=multiplyKaratsuba(n,o),u=multiplyKaratsuba(i,s),h=multiplyKaratsuba(addAny(n,i),addAny(o,s)),c=addAny(addAny(a,shiftLeft(subtract(subtract(h,a),u),r)),shiftLeft(u,2*r));return trim(c),c}function multiplySmallAndArray(t,r,i){return new BigInteger(t<e?multiplySmall(r,t):multiplyLong(r,smallToArray(t)),i)}function square(t){var r,i,n,s,o=t.length,a=createArray(o+o),u=e;for(n=0;n<o;n++){i=0-(s=t[n])*s;for(var h=n;h<o;h++)r=s*t[h]*2+a[n+h]+i,i=Math.floor(r/u),a[n+h]=r-i*u;a[n+o]=i}return trim(a),a}function divModSmall(t,r){var i,n,s,o,a=t.length,u=createArray(a),h=e;for(s=0,i=a-1;i>=0;--i)s=(o=s*h+t[i])-(n=truncate(o/r))*r,u[i]=0|n;return[u,0|s]}function divModAny(t,r){var i,n,s=parseValue(r),o=t.value,a=s.value;if(0===a)throw new Error("Cannot divide by zero");if(t.isSmall)return s.isSmall?[new SmallInteger(truncate(o/a)),new SmallInteger(o%a)]:[Integer[0],t];if(s.isSmall){if(1===a)return[t,Integer[0]];if(-1==a)return[t.negate(),Integer[0]];var u=Math.abs(a);if(u<e){n=arrayToSmall((i=divModSmall(o,u))[0]);var h=i[1];return t.sign&&(h=-h),"number"==typeof n?(t.sign!==s.sign&&(n=-n),[new SmallInteger(n),new SmallInteger(h)]):[new BigInteger(n,t.sign!==s.sign),new SmallInteger(h)]}a=smallToArray(u)}var c=compareAbs(o,a);if(-1===c)return[Integer[0],t];if(0===c)return[Integer[t.sign===s.sign?1:-1],Integer[0]];i=o.length+a.length<=200?function divMod1(t,r){var i,n,s,o,a,u,h,c=t.length,p=r.length,l=e,f=createArray(r.length),d=r[p-1],m=Math.ceil(l/(2*d)),g=multiplySmall(t,m),y=multiplySmall(r,m);for(g.length<=c&&g.push(0),y.push(0),d=y[p-1],n=c-p;n>=0;n--){for(i=l-1,g[n+p]!==d&&(i=Math.floor((g[n+p]*l+g[n+p-1])/d)),s=0,o=0,u=y.length,a=0;a<u;a++)s+=i*y[a],h=Math.floor(s/l),o+=g[n+a]-(s-h*l),s=h,o<0?(g[n+a]=o+l,o=-1):(g[n+a]=o,o=0);for(;0!==o;){for(i-=1,s=0,a=0;a<u;a++)(s+=g[n+a]-l+y[a])<0?(g[n+a]=s+l,s=0):(g[n+a]=s,s=1);o+=s}f[n]=i}return g=divModSmall(g,m)[0],[arrayToSmall(f),arrayToSmall(g)]}(o,a):function divMod2(t,r){for(var i,n,s,o,a,u=t.length,h=r.length,c=[],p=[],l=e;u;)if(p.unshift(t[--u]),trim(p),compareAbs(p,r)<0)c.push(0);else{s=p[(n=p.length)-1]*l+p[n-2],o=r[h-1]*l+r[h-2],n>h&&(s=(s+1)*l),i=Math.ceil(s/o);do{if(compareAbs(a=multiplySmall(r,i),p)<=0)break;i--}while(i);c.push(i),p=subtract(p,a)}return c.reverse(),[arrayToSmall(c),arrayToSmall(p)]}(o,a),n=i[0];var p=t.sign!==s.sign,l=i[1],f=t.sign;return"number"==typeof n?(p&&(n=-n),n=new SmallInteger(n)):n=new BigInteger(n,p),"number"==typeof l?(f&&(l=-l),l=new SmallInteger(l)):l=new BigInteger(l,f),[n,l]}function compareAbs(t,e){if(t.length!==e.length)return t.length>e.length?1:-1;for(var r=t.length-1;r>=0;r--)if(t[r]!==e[r])return t[r]>e[r]?1:-1;return 0}function isBasicPrime(t){var e=t.abs();return!e.isUnit()&&(!!(e.equals(2)||e.equals(3)||e.equals(5))||!(e.isEven()||e.isDivisibleBy(3)||e.isDivisibleBy(5))&&(!!e.lesser(49)||void 0))}function millerRabinTest(t,e){for(var r,i,s,o=t.prev(),a=o,u=0;a.isEven();)a=a.divide(2),u++;t:for(i=0;i<e.length;i++)if(!t.lesser(e[i])&&!(s=n(e[i]).modPow(a,t)).equals(Integer[1])&&!s.equals(o)){for(r=u-1;0!=r;r--){if((s=s.square().mod(t)).isUnit())return!1;if(s.equals(o))continue t}return!1}return!0}BigInteger.prototype=Object.create(Integer.prototype),SmallInteger.prototype=Object.create(Integer.prototype),BigInteger.prototype.add=function(t){var e=parseValue(t);if(this.sign!==e.sign)return this.subtract(e.negate());var r=this.value,i=e.value;return e.isSmall?new BigInteger(addSmall(r,Math.abs(i)),this.sign):new BigInteger(addAny(r,i),this.sign)},BigInteger.prototype.plus=BigInteger.prototype.add,SmallInteger.prototype.add=function(t){var e=parseValue(t),r=this.value;if(r<0!==e.sign)return this.subtract(e.negate());var i=e.value;if(e.isSmall){if(isPrecise(r+i))return new SmallInteger(r+i);i=smallToArray(Math.abs(i))}return new BigInteger(addSmall(i,Math.abs(r)),r<0)},SmallInteger.prototype.plus=SmallInteger.prototype.add,BigInteger.prototype.subtract=function(t){var e=parseValue(t);if(this.sign!==e.sign)return this.add(e.negate());var r=this.value,i=e.value;return e.isSmall?subtractSmall(r,Math.abs(i),this.sign):function subtractAny(t,e,r){var i;return compareAbs(t,e)>=0?i=subtract(t,e):(i=subtract(e,t),r=!r),"number"==typeof(i=arrayToSmall(i))?(r&&(i=-i),new SmallInteger(i)):new BigInteger(i,r)}(r,i,this.sign)},BigInteger.prototype.minus=BigInteger.prototype.subtract,SmallInteger.prototype.subtract=function(t){var e=parseValue(t),r=this.value;if(r<0!==e.sign)return this.add(e.negate());var i=e.value;return e.isSmall?new SmallInteger(r-i):subtractSmall(i,Math.abs(r),r>=0)},SmallInteger.prototype.minus=SmallInteger.prototype.subtract,BigInteger.prototype.negate=function(){return new BigInteger(this.value,!this.sign)},SmallInteger.prototype.negate=function(){var t=this.sign,e=new SmallInteger(-this.value);return e.sign=!t,e},BigInteger.prototype.abs=function(){return new BigInteger(this.value,!1)},SmallInteger.prototype.abs=function(){return new SmallInteger(Math.abs(this.value))},BigInteger.prototype.multiply=function(t){var r,i=parseValue(t),n=this.value,s=i.value,o=this.sign!==i.sign;if(i.isSmall){if(0===s)return Integer[0];if(1===s)return this;if(-1===s)return this.negate();if((r=Math.abs(s))<e)return new BigInteger(multiplySmall(n,r),o);s=smallToArray(r)}return function useKaratsuba(t,e){return-.012*t-.012*e+15e-6*t*e>0}(n.length,s.length)?new BigInteger(multiplyKaratsuba(n,s),o):new BigInteger(multiplyLong(n,s),o)},BigInteger.prototype.times=BigInteger.prototype.multiply,SmallInteger.prototype._multiplyBySmall=function(t){return isPrecise(t.value*this.value)?new SmallInteger(t.value*this.value):multiplySmallAndArray(Math.abs(t.value),smallToArray(Math.abs(this.value)),this.sign!==t.sign)},BigInteger.prototype._multiplyBySmall=function(t){return 0===t.value?Integer[0]:1===t.value?this:-1===t.value?this.negate():multiplySmallAndArray(Math.abs(t.value),this.value,this.sign!==t.sign)},SmallInteger.prototype.multiply=function(t){return parseValue(t)._multiplyBySmall(this)},SmallInteger.prototype.times=SmallInteger.prototype.multiply,BigInteger.prototype.square=function(){return new BigInteger(square(this.value),!1)},SmallInteger.prototype.square=function(){var t=this.value*this.value;return isPrecise(t)?new SmallInteger(t):new BigInteger(square(smallToArray(Math.abs(this.value))),!1)},BigInteger.prototype.divmod=function(t){var e=divModAny(this,t);return{quotient:e[0],remainder:e[1]}},SmallInteger.prototype.divmod=BigInteger.prototype.divmod,BigInteger.prototype.divide=function(t){return divModAny(this,t)[0]},SmallInteger.prototype.over=SmallInteger.prototype.divide=BigInteger.prototype.over=BigInteger.prototype.divide,BigInteger.prototype.mod=function(t){return divModAny(this,t)[1]},SmallInteger.prototype.remainder=SmallInteger.prototype.mod=BigInteger.prototype.remainder=BigInteger.prototype.mod,BigInteger.prototype.pow=function(t){var e,r,i,n=parseValue(t),s=this.value,o=n.value;if(0===o)return Integer[1];if(0===s)return Integer[0];if(1===s)return Integer[1];if(-1===s)return n.isEven()?Integer[1]:Integer[-1];if(n.sign)return Integer[0];if(!n.isSmall)throw new Error("The exponent "+n.toString()+" is too large.");if(this.isSmall&&isPrecise(e=Math.pow(s,o)))return new SmallInteger(truncate(e));for(r=this,i=Integer[1];!0&o&&(i=i.times(r),--o),0!==o;)o/=2,r=r.square();return i},SmallInteger.prototype.pow=BigInteger.prototype.pow,BigInteger.prototype.modPow=function(t,e){if(t=parseValue(t),(e=parseValue(e)).isZero())throw new Error("Cannot take modPow with modulus 0");for(var r=Integer[1],i=this.mod(e);t.isPositive();){if(i.isZero())return Integer[0];t.isOdd()&&(r=r.multiply(i).mod(e)),t=t.divide(2),i=i.square().mod(e)}return r},SmallInteger.prototype.modPow=BigInteger.prototype.modPow,BigInteger.prototype.compareAbs=function(t){var e=parseValue(t),r=this.value,i=e.value;return e.isSmall?1:compareAbs(r,i)},SmallInteger.prototype.compareAbs=function(t){var e=parseValue(t),r=Math.abs(this.value),i=e.value;return e.isSmall?r===(i=Math.abs(i))?0:r>i?1:-1:-1},BigInteger.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=parseValue(t),r=this.value,i=e.value;return this.sign!==e.sign?e.sign?1:-1:e.isSmall?this.sign?-1:1:compareAbs(r,i)*(this.sign?-1:1)},BigInteger.prototype.compareTo=BigInteger.prototype.compare,SmallInteger.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=parseValue(t),r=this.value,i=e.value;return e.isSmall?r==i?0:r>i?1:-1:r<0!==e.sign?r<0?-1:1:r<0?1:-1},SmallInteger.prototype.compareTo=SmallInteger.prototype.compare,BigInteger.prototype.equals=function(t){return 0===this.compare(t)},SmallInteger.prototype.eq=SmallInteger.prototype.equals=BigInteger.prototype.eq=BigInteger.prototype.equals,BigInteger.prototype.notEquals=function(t){return 0!==this.compare(t)},SmallInteger.prototype.neq=SmallInteger.prototype.notEquals=BigInteger.prototype.neq=BigInteger.prototype.notEquals,BigInteger.prototype.greater=function(t){return this.compare(t)>0},SmallInteger.prototype.gt=SmallInteger.prototype.greater=BigInteger.prototype.gt=BigInteger.prototype.greater,BigInteger.prototype.lesser=function(t){return this.compare(t)<0},SmallInteger.prototype.lt=SmallInteger.prototype.lesser=BigInteger.prototype.lt=BigInteger.prototype.lesser,BigInteger.prototype.greaterOrEquals=function(t){return this.compare(t)>=0},SmallInteger.prototype.geq=SmallInteger.prototype.greaterOrEquals=BigInteger.prototype.geq=BigInteger.prototype.greaterOrEquals,BigInteger.prototype.lesserOrEquals=function(t){return this.compare(t)<=0},SmallInteger.prototype.leq=SmallInteger.prototype.lesserOrEquals=BigInteger.prototype.leq=BigInteger.prototype.lesserOrEquals,BigInteger.prototype.isEven=function(){return!(1&this.value[0])},SmallInteger.prototype.isEven=function(){return!(1&this.value)},BigInteger.prototype.isOdd=function(){return!(1&~this.value[0])},SmallInteger.prototype.isOdd=function(){return!(1&~this.value)},BigInteger.prototype.isPositive=function(){return!this.sign},SmallInteger.prototype.isPositive=function(){return this.value>0},BigInteger.prototype.isNegative=function(){return this.sign},SmallInteger.prototype.isNegative=function(){return this.value<0},BigInteger.prototype.isUnit=function(){return!1},SmallInteger.prototype.isUnit=function(){return 1===Math.abs(this.value)},BigInteger.prototype.isZero=function(){return!1},SmallInteger.prototype.isZero=function(){return 0===this.value},BigInteger.prototype.isDivisibleBy=function(t){var e=parseValue(t),r=e.value;return 0!==r&&(1===r||(2===r?this.isEven():this.mod(e).equals(Integer[0])))},SmallInteger.prototype.isDivisibleBy=BigInteger.prototype.isDivisibleBy,BigInteger.prototype.isPrime=function(e){var r=isBasicPrime(this);if(r!==t)return r;var i=this.abs(),s=i.bitLength();if(s<=64)return millerRabinTest(i,[2,325,9375,28178,450775,9780504,1795265022]);for(var o=Math.log(2)*s,a=Math.ceil(!0===e?2*Math.pow(o,2):o),u=[],h=0;h<a;h++)u.push(n(h+2));return millerRabinTest(i,u)},SmallInteger.prototype.isPrime=BigInteger.prototype.isPrime,BigInteger.prototype.isProbablePrime=function(e){var r=isBasicPrime(this);if(r!==t)return r;for(var i=this.abs(),s=e===t?5:e,o=[],a=0;a<s;a++)o.push(n.randBetween(2,i.minus(2)));return millerRabinTest(i,o)},SmallInteger.prototype.isProbablePrime=BigInteger.prototype.isProbablePrime,BigInteger.prototype.modInv=function(t){for(var e,r,i,s=n.zero,o=n.one,a=parseValue(t),u=this.abs();!u.equals(n.zero);)e=a.divide(u),r=s,i=a,s=o,a=u,o=r.subtract(e.multiply(o)),u=i.subtract(e.multiply(u));if(!a.equals(1))throw new Error(this.toString()+" and "+t.toString()+" are not co-prime");return-1===s.compare(0)&&(s=s.add(t)),this.isNegative()?s.negate():s},SmallInteger.prototype.modInv=BigInteger.prototype.modInv,BigInteger.prototype.next=function(){var t=this.value;return this.sign?subtractSmall(t,1,this.sign):new BigInteger(addSmall(t,1),this.sign)},SmallInteger.prototype.next=function(){var t=this.value;return t+1<i?new SmallInteger(t+1):new BigInteger(s,!1)},BigInteger.prototype.prev=function(){var t=this.value;return this.sign?new BigInteger(addSmall(t,1),!0):subtractSmall(t,1,this.sign)},SmallInteger.prototype.prev=function(){var t=this.value;return t-1>-i?new SmallInteger(t-1):new BigInteger(s,!0)};for(var a=[1];2*a[a.length-1]<=e;)a.push(2*a[a.length-1]);var u=a.length,h=a[u-1];function shift_isSmall(t){return("number"==typeof t||"string"==typeof t)&&+Math.abs(t)<=e||t instanceof BigInteger&&t.value.length<=1}function bitwise(t,e,r){e=parseValue(e);for(var i=t.isNegative(),s=e.isNegative(),o=i?t.not():t,a=s?e.not():e,u=0,c=0,p=null,l=null,f=[];!o.isZero()||!a.isZero();)u=(p=divModAny(o,h))[1].toJSNumber(),i&&(u=h-1-u),c=(l=divModAny(a,h))[1].toJSNumber(),s&&(c=h-1-c),o=p[0],a=l[0],f.push(r(u,c));for(var d=0!==r(i?1:0,s?1:0)?n(-1):n(0),m=f.length-1;m>=0;m-=1)d=d.multiply(h).add(n(f[m]));return d}BigInteger.prototype.shiftLeft=function(t){if(!shift_isSmall(t))throw new Error(String(t)+" is too large for shifting.");if((t=+t)<0)return this.shiftRight(-t);var e=this;if(e.isZero())return e;for(;t>=u;)e=e.multiply(h),t-=u-1;return e.multiply(a[t])},SmallInteger.prototype.shiftLeft=BigInteger.prototype.shiftLeft,BigInteger.prototype.shiftRight=function(t){var e;if(!shift_isSmall(t))throw new Error(String(t)+" is too large for shifting.");if((t=+t)<0)return this.shiftLeft(-t);for(var r=this;t>=u;){if(r.isZero()||r.isNegative()&&r.isUnit())return r;r=(e=divModAny(r,h))[1].isNegative()?e[0].prev():e[0],t-=u-1}return(e=divModAny(r,a[t]))[1].isNegative()?e[0].prev():e[0]},SmallInteger.prototype.shiftRight=BigInteger.prototype.shiftRight,BigInteger.prototype.not=function(){return this.negate().prev()},SmallInteger.prototype.not=BigInteger.prototype.not,BigInteger.prototype.and=function(t){return bitwise(this,t,(function(t,e){return t&e}))},SmallInteger.prototype.and=BigInteger.prototype.and,BigInteger.prototype.or=function(t){return bitwise(this,t,(function(t,e){return t|e}))},SmallInteger.prototype.or=BigInteger.prototype.or,BigInteger.prototype.xor=function(t){return bitwise(this,t,(function(t,e){return t^e}))},SmallInteger.prototype.xor=BigInteger.prototype.xor;var c=1<<30,p=(e&-e)*(e&-e)|c;function roughLOB(t){var r=t.value,i="number"==typeof r?r|c:r[0]+r[1]*e|p;return i&-i}function integerLogarithm(t,e){if(e.compareTo(t)<=0){var r=integerLogarithm(t,e.square(e)),i=r.p,s=r.e,o=i.multiply(e);return o.compareTo(t)<=0?{p:o,e:2*s+1}:{p:i,e:2*s}}return{p:n(1),e:0}}function max(t,e){return t=parseValue(t),e=parseValue(e),t.greater(e)?t:e}function min(t,e){return t=parseValue(t),e=parseValue(e),t.lesser(e)?t:e}function gcd(t,e){if(t=parseValue(t).abs(),e=parseValue(e).abs(),t.equals(e))return t;if(t.isZero())return e;if(e.isZero())return t;for(var r,i,n=Integer[1];t.isEven()&&e.isEven();)r=Math.min(roughLOB(t),roughLOB(e)),t=t.divide(r),e=e.divide(r),n=n.multiply(r);for(;t.isEven();)t=t.divide(roughLOB(t));do{for(;e.isEven();)e=e.divide(roughLOB(e));t.greater(e)&&(i=e,e=t,t=i),e=e.subtract(t)}while(!e.isZero());return n.isUnit()?t:t.multiply(n)}BigInteger.prototype.bitLength=function(){var t=this;return t.compareTo(n(0))<0&&(t=t.negate().subtract(n(1))),0===t.compareTo(n(0))?n(0):n(integerLogarithm(t,n(2)).e).add(n(1))},SmallInteger.prototype.bitLength=BigInteger.prototype.bitLength;var parseBase=function(t,e){for(var r=t.length,i=Math.abs(e),n=0;n<r;n++){if("-"!==(h=t[n].toLowerCase())&&/[a-z0-9]/.test(h)){if(/[0-9]/.test(h)&&+h>=i){if("1"===h&&1===i)continue;throw new Error(h+" is not a valid digit in base "+e+".")}if(h.charCodeAt(0)-87>=i)throw new Error(h+" is not a valid digit in base "+e+".")}}if(2<=e&&e<=36&&r<=o/Math.log(e)){var s=parseInt(t,e);if(isNaN(s))throw new Error(h+" is not a valid digit in base "+e+".");return new SmallInteger(parseInt(t,e))}e=parseValue(e);var a=[],u="-"===t[0];for(n=u?1:0;n<t.length;n++){var h,c=(h=t[n].toLowerCase()).charCodeAt(0);if(48<=c&&c<=57)a.push(parseValue(h));else if(97<=c&&c<=122)a.push(parseValue(h.charCodeAt(0)-87));else{if("<"!==h)throw new Error(h+" is not a valid character");var p=n;do{n++}while(">"!==t[n]);a.push(parseValue(t.slice(p+1,n)))}}return parseBaseFromArray(a,e,u)};function parseBaseFromArray(t,e,r){var i,n=Integer[0],s=Integer[1];for(i=t.length-1;i>=0;i--)n=n.add(t[i].times(s)),s=s.times(e);return r?n.negate():n}function stringify(t){return t<=35?"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t):"<"+t+">"}function toBase(t,e){if((e=n(e)).isZero()){if(t.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(e.equals(-1)){if(t.isZero())return{value:[0],isNegative:!1};if(t.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-t)).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var r=Array.apply(null,Array(+t-1)).map(Array.prototype.valueOf,[0,1]);return r.unshift([1]),{value:[].concat.apply([],r),isNegative:!1}}var i=!1;if(t.isNegative()&&e.isPositive()&&(i=!0,t=t.abs()),e.equals(1))return t.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(+t)).map(Number.prototype.valueOf,1),isNegative:i};for(var s,o=[],a=t;a.isNegative()||a.compareAbs(e)>=0;){s=a.divmod(e),a=s.quotient;var u=s.remainder;u.isNegative()&&(u=e.minus(u).abs(),a=a.next()),o.push(u.toJSNumber())}return o.push(a.toJSNumber()),{value:o.reverse(),isNegative:i}}function toBaseString(t,e){var r=toBase(t,e);return(r.isNegative?"-":"")+r.value.map(stringify).join("")}function parseStringValue(t){if(isPrecise(+t)){var e=+t;if(e===truncate(e))return new SmallInteger(e);throw new Error("Invalid integer: "+t)}var i="-"===t[0];i&&(t=t.slice(1));var n=t.split(/e/i);if(n.length>2)throw new Error("Invalid integer: "+n.join("e"));if(2===n.length){var s=n[1];if("+"===s[0]&&(s=s.slice(1)),(s=+s)!==truncate(s)||!isPrecise(s))throw new Error("Invalid integer: "+s+" is not a valid exponent.");var o=n[0],a=o.indexOf(".");if(a>=0&&(s-=o.length-a-1,o=o.slice(0,a)+o.slice(a+1)),s<0)throw new Error("Cannot include negative exponent part for integers");t=o+=new Array(s+1).join("0")}if(!/^([0-9][0-9]*)$/.test(t))throw new Error("Invalid integer: "+t);for(var u=[],h=t.length,c=r,p=h-c;h>0;)u.push(+t.slice(p,h)),(p-=c)<0&&(p=0),h-=c;return trim(u),new BigInteger(u,i)}function parseValue(t){return"number"==typeof t?function parseNumberValue(t){if(isPrecise(t)){if(t!==truncate(t))throw new Error(t+" is not an integer.");return new SmallInteger(t)}return parseStringValue(t.toString())}(t):"string"==typeof t?parseStringValue(t):t}BigInteger.prototype.toArray=function(t){return toBase(this,t)},SmallInteger.prototype.toArray=function(t){return toBase(this,t)},BigInteger.prototype.toString=function(e){if(e===t&&(e=10),10!==e)return toBaseString(this,e);for(var r,i=this.value,n=i.length,s=String(i[--n]);--n>=0;)r=String(i[n]),s+="0000000".slice(r.length)+r;return(this.sign?"-":"")+s},SmallInteger.prototype.toString=function(e){return e===t&&(e=10),10!=e?toBaseString(this,e):String(this.value)},BigInteger.prototype.toJSON=SmallInteger.prototype.toJSON=function(){return this.toString()},BigInteger.prototype.valueOf=function(){return parseInt(this.toString(),10)},BigInteger.prototype.toJSNumber=BigInteger.prototype.valueOf,SmallInteger.prototype.valueOf=function(){return this.value},SmallInteger.prototype.toJSNumber=SmallInteger.prototype.valueOf;for(var l=0;l<1e3;l++)Integer[l]=new SmallInteger(l),l>0&&(Integer[-l]=new SmallInteger(-l));return Integer.one=Integer[1],Integer.zero=Integer[0],Integer.minusOne=Integer[-1],Integer.max=max,Integer.min=min,Integer.gcd=gcd,Integer.lcm=function lcm(t,e){return t=parseValue(t).abs(),e=parseValue(e).abs(),t.divide(gcd(t,e)).multiply(e)},Integer.isInstance=function(t){return t instanceof BigInteger||t instanceof SmallInteger},Integer.randBetween=function randBetween(t,r){var i=min(t=parseValue(t),r=parseValue(r)),n=max(t,r).subtract(i).add(1);if(n.isSmall)return i.add(Math.floor(Math.random()*n));for(var s=[],o=!0,a=n.value.length-1;a>=0;a--){var u=o?n.value[a]:e,h=truncate(Math.random()*u);s.unshift(h),h<u&&(o=!1)}return s=arrayToSmall(s),i.add("number"==typeof s?new SmallInteger(s):new BigInteger(s,!1))},Integer.fromArray=function(t,e,r){return parseBaseFromArray(t.map(parseValue),parseValue(e||10),r)},Integer}();t.hasOwnProperty("exports")&&(t.exports=n),void 0===(i=function(){return n}.apply(e,[]))||(t.exports=i)},296734:(t,e,r)=>{"use strict";var i=r(282825).validate,n={q:0,p:1,z:2,r:3,y:4,9:5,x:6,8:7,g:8,f:9,2:10,t:11,v:12,d:13,w:14,0:15,s:16,3:17,j:18,n:19,5:20,4:21,k:22,h:23,c:24,e:25,6:26,m:27,u:28,a:29,7:30,l:31};t.exports={encode:function encode(t){i(t instanceof Uint8Array,"Invalid data: "+t+".");for(var e="",r=0;r<t.length;++r){var n=t[r];i(0<=n&&n<32,"Invalid value: "+n+"."),e+="qpzry9x8gf2tvdw0s3jn54khce6mua7l"[n]}return e},decode:function decode(t){i("string"==typeof t,"Invalid base32-encoded string: "+t+".");for(var e=new Uint8Array(t.length),r=0;r<t.length;++r){var s=t[r];i(s in n,"Invalid value: "+s+"."),e[r]=n[s]}return e}}},850630:(t,e,r)=>{"use strict";var i=r(296734),n=r(664864),s=r(695179),o=r(282825),a=o.validate;var u=o.ValidationError,h=["bitcoincash","bchtest","bchreg"];function prefixToUint5Array(t){for(var e=new Uint8Array(t.length),r=0;r<t.length;++r)e[r]=31&t[r].charCodeAt(0);return e}function concat(t,e){var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function polymod(t){for(var e=[656907472481,522768456162,0xf33e5fb3c4,748107326120,130178868336],r=n(1),i=0;i<t.length;++i){var s=t[i],o=r.shiftRight(35);r=r.and(34359738367).shiftLeft(5).xor(s);for(var a=0;a<e.length;++a)o.shiftRight(a).and(1).equals(1)&&(r=r.xor(e[a]))}return r.xor(1)}function hasSingleCase(t){return t===t.toLowerCase()||t===t.toUpperCase()}t.exports={encode:function encode(t,e,r){a("string"==typeof t&&function isValidPrefix(t){return hasSingleCase(t)&&-1!==h.indexOf(t.toLowerCase())}(t),"Invalid prefix: "+t+"."),a("string"==typeof e,"Invalid type: "+e+"."),a(r instanceof Uint8Array,"Invalid hash: "+r+".");var n=concat(prefixToUint5Array(t),new Uint8Array(1)),o=function getTypeBits(t){switch(t){case"P2PKH":return 0;case"P2SH":return 8;default:throw new u("Invalid type: "+t+".")}}(e)+function getHashSizeBits(t){switch(8*t.length){case 160:return 0;case 192:return 1;case 224:return 2;case 256:return 3;case 320:return 4;case 384:return 5;case 448:return 6;case 512:return 7;default:throw new u("Invalid hash size: "+t.length+".")}}(r),c=function toUint5Array(t){return s(t,8,5)}(concat(new Uint8Array([o]),r)),p=concat(concat(n,c),new Uint8Array(8)),l=concat(c,function checksumToUint5Array(t){for(var e=new Uint8Array(8),r=0;r<8;++r)e[7-r]=t.and(31).toJSNumber(),t=t.shiftRight(5);return e}(polymod(p)));return t+":"+i.encode(l)},decode:function decode(t){a("string"==typeof t&&hasSingleCase(t),"Invalid address: "+t+".");var e=t.toLowerCase().split(":");a(2===e.length,"Missing prefix: "+t+".");var r=e[0],n=i.decode(e[1]);a(function validChecksum(t,e){var r=concat(prefixToUint5Array(t),new Uint8Array(1)),i=concat(r,e);return polymod(i).equals(0)}(r,n),"Invalid checksum: "+t+".");var o=function fromUint5Array(t){return s(t,5,8,!0)}(n.subarray(0,-8)),h=o[0],c=o.subarray(1);a(function getHashSize(t){switch(7&t){case 0:return 160;case 1:return 192;case 2:return 224;case 3:return 256;case 4:return 320;case 5:return 384;case 6:return 448;case 7:return 512}}(h)===8*c.length,"Invalid hash size: "+t+".");var p=function getType(t){switch(120&t){case 0:return"P2PKH";case 8:return"P2SH";default:throw new u("Invalid address type in version byte: "+t+".")}}(h);return{prefix:r,type:p,hash:c}},ValidationError:u}},695179:(t,e,r)=>{"use strict";var i=r(282825).validate;t.exports=function(t,e,r,n){for(var s=n?Math.floor(t.length*e/r):Math.ceil(t.length*e/r),o=(1<<r)-1,a=new Uint8Array(s),u=0,h=0,c=0,p=0;p<t.length;++p){var l=t[p];for(i(0<=l&&!(l>>e),"Invalid value: "+l+"."),h=h<<e|l,c+=e;c>=r;)c-=r,a[u]=h>>c&o,++u}return n?i(c<e&&!(h<<r-c&o),"Input cannot be converted to "+r+" bits without padding, but strict mode was used."):c>0&&(a[u]=h<<r-c&o,++u),a}},282825:t=>{"use strict";function ValidationError(t){var e=new Error;this.name=e.name="ValidationError",this.message=e.message=t,this.stack=e.stack}ValidationError.prototype=Object.create(Error.prototype),t.exports={ValidationError,validate:function validate(t,e){if(!t)throw new ValidationError(e)}}},28158:(t,e,r)=>{var i=r(901048).Buffer;t.exports=function fastRoot(t,e){if(!Array.isArray(t))throw TypeError("Expected values Array");if("function"!=typeof e)throw TypeError("Expected digest Function");for(var r=t.length,n=t.concat();r>1;){for(var s=0,o=0;o<r;o+=2,++s){var a=n[o],u=o+1===r?a:n[o+1],h=i.concat([a,u]);n[s]=e(h)}r=s}return n[0]}},216001:(t,e,r)=>{var i=r(253610);function encodingLength(t){return t<i.OP_PUSHDATA1?1:t<=255?2:t<=65535?3:5}t.exports={encodingLength,encode:function encode(t,e,r){var n=encodingLength(e);return 1===n?t.writeUInt8(e,r):2===n?(t.writeUInt8(i.OP_PUSHDATA1,r),t.writeUInt8(e,r+1)):3===n?(t.writeUInt8(i.OP_PUSHDATA2,r),t.writeUInt16LE(e,r+1)):(t.writeUInt8(i.OP_PUSHDATA4,r),t.writeUInt32LE(e,r+1)),n},decode:function decode(t,e){var r,n,s=t.readUInt8(e);if(s<i.OP_PUSHDATA1)r=s,n=1;else if(s===i.OP_PUSHDATA1){if(e+2>t.length)return null;r=t.readUInt8(e+1),n=2}else if(s===i.OP_PUSHDATA2){if(e+3>t.length)return null;r=t.readUInt16LE(e+1),n=3}else{if(e+5>t.length)return null;if(s!==i.OP_PUSHDATA4)throw new Error("Unexpected opcode");r=t.readUInt32LE(e+1),n=5}return{opcode:s,number:r,size:n}}}},345586:(t,e,r)=>{var i=r(901048).Buffer;const n=r(527272),s=new(0,r(913360).ec)("secp256k1"),o=r(843261),a=i.alloc(32,0),u=i.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),h=i.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex"),c=s.curve.n,p=c.shrn(1),l=s.curve.g,f="Expected Private",d="Expected Point",m="Expected Tweak",g="Expected Hash",y="Expected Extra Data (32 bytes)";function isScalar(t){return i.isBuffer(t)&&32===t.length}function isOrderScalar(t){return!!isScalar(t)&&t.compare(u)<0}function isPoint(t){if(!i.isBuffer(t))return!1;if(t.length<33)return!1;const e=t[0],r=t.slice(1,33);if(0===r.compare(a))return!1;if(r.compare(h)>=0)return!1;if((2===e||3===e)&&33===t.length){try{decodeFrom(t)}catch(t){return!1}return!0}const n=t.slice(33);return 0!==n.compare(a)&&(!(n.compare(h)>=0)&&(4===e&&65===t.length))}function __isPointCompressed(t){return 4!==t[0]}function isPrivate(t){return!!isScalar(t)&&(t.compare(a)>0&&t.compare(u)<0)}function assumeCompression(t,e){return void 0===t&&void 0!==e?__isPointCompressed(e):void 0===t||t}function fromBuffer(t){return new n(t)}function toBuffer(t){return t.toArrayLike(i,"be",32)}function decodeFrom(t){return s.curve.decodePoint(t)}function getEncoded(t,e){return i.from(t._encode(e))}function __sign(t,e,r){if(!isScalar(t))throw new TypeError(g);if(!isPrivate(e))throw new TypeError(f);if(void 0!==r&&!isScalar(r))throw new TypeError(y);const n=fromBuffer(e),s=fromBuffer(t);let a,u;o(t,e,(function(t){const e=fromBuffer(t),r=l.mul(e);return!r.isInfinity()&&(a=r.x.umod(c),0!==a.isZero()&&(u=e.invm(c).mul(s.add(n.mul(a))).umod(c),0!==u.isZero()))}),isPrivate,r),u.cmp(p)>0&&(u=c.sub(u));const h=i.allocUnsafe(64);return toBuffer(a).copy(h,0),toBuffer(u).copy(h,32),h}t.exports={isPoint,isPointCompressed:function isPointCompressed(t){return!!isPoint(t)&&__isPointCompressed(t)},isPrivate,pointAdd:function pointAdd(t,e,r){if(!isPoint(t))throw new TypeError(d);if(!isPoint(e))throw new TypeError(d);const i=decodeFrom(t),n=decodeFrom(e),s=i.add(n);return s.isInfinity()?null:getEncoded(s,assumeCompression(r,t))},pointAddScalar:function pointAddScalar(t,e,r){if(!isPoint(t))throw new TypeError(d);if(!isOrderScalar(e))throw new TypeError(m);const i=assumeCompression(r,t),n=decodeFrom(t);if(0===e.compare(a))return getEncoded(n,i);const s=fromBuffer(e),o=l.mul(s),u=n.add(o);return u.isInfinity()?null:getEncoded(u,i)},pointCompress:function pointCompress(t,e){if(!isPoint(t))throw new TypeError(d);const r=decodeFrom(t);if(r.isInfinity())throw new TypeError(d);return getEncoded(r,assumeCompression(e,t))},pointFromScalar:function pointFromScalar(t,e){if(!isPrivate(t))throw new TypeError(f);const r=fromBuffer(t),i=l.mul(r);return i.isInfinity()?null:getEncoded(i,assumeCompression(e))},pointMultiply:function pointMultiply(t,e,r){if(!isPoint(t))throw new TypeError(d);if(!isOrderScalar(e))throw new TypeError(m);const i=assumeCompression(r,t),n=decodeFrom(t),s=fromBuffer(e),o=n.mul(s);return o.isInfinity()?null:getEncoded(o,i)},privateAdd:function privateAdd(t,e){if(!isPrivate(t))throw new TypeError(f);if(!isOrderScalar(e))throw new TypeError(m);const r=fromBuffer(t),i=fromBuffer(e),n=toBuffer(r.add(i).umod(c));return isPrivate(n)?n:null},privateSub:function privateSub(t,e){if(!isPrivate(t))throw new TypeError(f);if(!isOrderScalar(e))throw new TypeError(m);const r=fromBuffer(t),i=fromBuffer(e),n=toBuffer(r.sub(i).umod(c));return isPrivate(n)?n:null},sign:function sign(t,e){return __sign(t,e)},signWithEntropy:function signWithEntropy(t,e,r){return __sign(t,e,r)},verify:function verify(t,e,r,n){if(!isScalar(t))throw new TypeError(g);if(!isPoint(e))throw new TypeError(d);if(!function isSignature(t){const e=t.slice(0,32),r=t.slice(32,64);return i.isBuffer(t)&&64===t.length&&e.compare(u)<0&&r.compare(u)<0}(r))throw new TypeError("Expected Signature");const s=decodeFrom(e),o=fromBuffer(r.slice(0,32)),a=fromBuffer(r.slice(32,64));if(n&&a.cmp(p)>0)return!1;if(o.gtn(0)<=0)return!1;if(a.gtn(0)<=0)return!1;const h=fromBuffer(t),f=a.invm(c),m=h.mul(f).umod(c),y=o.mul(f).umod(c),w=l.mulAdd(m,s,y);return!w.isInfinity()&&w.x.umod(c).eq(o)}}},527272:function(t,e,r){!function(t,e){"use strict";function assert(t,e){if(!t)throw new Error(e||"Assertion failed")}function inherits(t,e){t.super_=e;var TempCtor=function(){};TempCtor.prototype=e.prototype,t.prototype=new TempCtor,t.prototype.constructor=t}function BN(t,e,r){if(BN.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var i;"object"==typeof t?t.exports=BN:e.BN=BN,BN.BN=BN,BN.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(747022).Buffer}catch(t){}function parseHex4Bits(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function parseHexByte(t,e,r){var i=parseHex4Bits(t,r);return r-1>=e&&(i|=parseHex4Bits(t,r-1)<<4),i}function parseBase(t,e,r,i){for(var n=0,s=Math.min(t.length,r),o=e;o<s;o++){var a=t.charCodeAt(o)-48;n*=i,n+=a>=49?a-49+10:a>=17?a-17+10:a}return n}BN.isBN=function isBN(t){return t instanceof BN||null!==t&&"object"==typeof t&&t.constructor.wordSize===BN.wordSize&&Array.isArray(t.words)},BN.max=function max(t,e){return t.cmp(e)>0?t:e},BN.min=function min(t,e){return t.cmp(e)<0?t:e},BN.prototype._init=function init(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),assert(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},BN.prototype._initNumber=function _initNumber(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(assert(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},BN.prototype._initArray=function _initArray(t,e,r){if(assert("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var n,s,o=0;if("be"===r)for(i=t.length-1,n=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[n]|=s<<o&67108863,this.words[n+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);else if("le"===r)for(i=0,n=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[n]|=s<<o&67108863,this.words[n+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);return this.strip()},BN.prototype._parseHex=function _parseHex(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var n,s=0,o=0;if("be"===r)for(i=t.length-1;i>=e;i-=2)n=parseHexByte(t,e,i)<<s,this.words[o]|=67108863&n,s>=18?(s-=18,o+=1,this.words[o]|=n>>>26):s+=8;else for(i=(t.length-e)%2==0?e+1:e;i<t.length;i+=2)n=parseHexByte(t,e,i)<<s,this.words[o]|=67108863&n,s>=18?(s-=18,o+=1,this.words[o]|=n>>>26):s+=8;this.strip()},BN.prototype._parseBase=function _parseBase(t,e,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=e)i++;i--,n=n/e|0;for(var s=t.length-r,o=s%i,a=Math.min(s,s-o)+r,u=0,h=r;h<a;h+=i)u=parseBase(t,h,h+i,e),this.imuln(n),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==o){var c=1;for(u=parseBase(t,h,t.length,e),h=0;h<o;h++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},BN.prototype.copy=function copy(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},BN.prototype.clone=function clone(){var t=new BN(null);return this.copy(t),t},BN.prototype._expand=function _expand(t){for(;this.length<t;)this.words[this.length++]=0;return this},BN.prototype.strip=function strip(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},BN.prototype._normSign=function _normSign(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},BN.prototype.inspect=function inspect(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var n=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],s=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],o=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function smallMulTo(t,e,r){r.negative=e.negative^t.negative;var i=t.length+e.length|0;r.length=i,i=i-1|0;var n=0|t.words[0],s=0|e.words[0],o=n*s,a=67108863&o,u=o/67108864|0;r.words[0]=a;for(var h=1;h<i;h++){for(var c=u>>>26,p=67108863&u,l=Math.min(h,e.length-1),f=Math.max(0,h-t.length+1);f<=l;f++){var d=h-f|0;c+=(o=(n=0|t.words[d])*(s=0|e.words[f])+p)/67108864|0,p=67108863&o}r.words[h]=0|p,u=0|c}return 0!==u?r.words[h]=0|u:r.length--,r.strip()}BN.prototype.toString=function toString(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,a=0,u=0;u<this.length;u++){var h=this.words[u],c=(16777215&(h<<i|a)).toString(16);r=0!==(a=h>>>24-i&16777215)||u!==this.length-1?n[6-c.length]+c+r:c+r,(i+=2)>=26&&(i-=26,u--)}for(0!==a&&(r=a.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var p=s[t],l=o[t];r="";var f=this.clone();for(f.negative=0;!f.isZero();){var d=f.modn(l).toString(t);r=(f=f.idivn(l)).isZero()?d+r:n[p-d.length]+d+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}assert(!1,"Base should be between 2 and 36")},BN.prototype.toNumber=function toNumber(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&assert(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},BN.prototype.toJSON=function toJSON(){return this.toString(16)},BN.prototype.toBuffer=function toBuffer(t,e){return assert(void 0!==i),this.toArrayLike(i,t,e)},BN.prototype.toArray=function toArray(t,e){return this.toArrayLike(Array,t,e)},BN.prototype.toArrayLike=function toArrayLike(t,e,r){var i=this.byteLength(),n=r||Math.max(1,i);assert(i<=n,"byte array longer than desired length"),assert(n>0,"Requested array length <= 0"),this.strip();var s,o,a="le"===e,u=new t(n),h=this.clone();if(a){for(o=0;!h.isZero();o++)s=h.andln(255),h.iushrn(8),u[o]=s;for(;o<n;o++)u[o]=0}else{for(o=0;o<n-i;o++)u[o]=0;for(o=0;!h.isZero();o++)s=h.andln(255),h.iushrn(8),u[n-o-1]=s}return u},Math.clz32?BN.prototype._countBits=function _countBits(t){return 32-Math.clz32(t)}:BN.prototype._countBits=function _countBits(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},BN.prototype._zeroBits=function _zeroBits(t){if(0===t)return 26;var e=t,r=0;return 8191&e||(r+=13,e>>>=13),127&e||(r+=7,e>>>=7),15&e||(r+=4,e>>>=4),3&e||(r+=2,e>>>=2),1&e||r++,r},BN.prototype.bitLength=function bitLength(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8)},BN.prototype.toTwos=function toTwos(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},BN.prototype.fromTwos=function fromTwos(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},BN.prototype.isNeg=function isNeg(){return 0!==this.negative},BN.prototype.neg=function neg(){return this.clone().ineg()},BN.prototype.ineg=function ineg(){return this.isZero()||(this.negative^=1),this},BN.prototype.iuor=function iuor(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},BN.prototype.ior=function ior(t){return assert(!(this.negative|t.negative)),this.iuor(t)},BN.prototype.or=function or(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},BN.prototype.uor=function uor(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},BN.prototype.iuand=function iuand(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},BN.prototype.iand=function iand(t){return assert(!(this.negative|t.negative)),this.iuand(t)},BN.prototype.and=function and(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},BN.prototype.uand=function uand(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},BN.prototype.iuxor=function iuxor(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var i=0;i<r.length;i++)this.words[i]=e.words[i]^r.words[i];if(this!==e)for(;i<e.length;i++)this.words[i]=e.words[i];return this.length=e.length,this.strip()},BN.prototype.ixor=function ixor(t){return assert(!(this.negative|t.negative)),this.iuxor(t)},BN.prototype.xor=function xor(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},BN.prototype.uxor=function uxor(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},BN.prototype.inotn=function inotn(t){assert("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},BN.prototype.notn=function notn(t){return this.clone().inotn(t)},BN.prototype.setn=function setn(t,e){assert("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},BN.prototype.iadd=function iadd(t){var e,r,i;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,i=t):(r=t,i=this);for(var n=0,s=0;s<i.length;s++)e=(0|r.words[s])+(0|i.words[s])+n,this.words[s]=67108863&e,n=e>>>26;for(;0!==n&&s<r.length;s++)e=(0|r.words[s])+n,this.words[s]=67108863&e,n=e>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},BN.prototype.add=function add(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},BN.prototype.isub=function isub(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,i,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=t):(r=t,i=this);for(var s=0,o=0;o<i.length;o++)s=(e=(0|r.words[o])-(0|i.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<r.length;o++)s=(e=(0|r.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},BN.prototype.sub=function sub(t){return this.clone().isub(t)};var a=function comb10MulTo(t,e,r){var i,n,s,o=t.words,a=e.words,u=r.words,h=0,c=0|o[0],p=8191&c,l=c>>>13,f=0|o[1],d=8191&f,m=f>>>13,g=0|o[2],y=8191&g,w=g>>>13,v=0|o[3],S=8191&v,b=v>>>13,_=0|o[4],I=8191&_,P=_>>>13,E=0|o[5],M=8191&E,T=E>>>13,B=0|o[6],k=8191&B,O=B>>>13,A=0|o[7],N=8191&A,H=A>>>13,C=0|o[8],U=8191&C,x=C>>>13,R=0|o[9],F=8191&R,L=R>>>13,K=0|a[0],q=8191&K,W=K>>>13,D=0|a[1],V=8191&D,j=D>>>13,G=0|a[2],X=8191&G,z=G>>>13,$=0|a[3],Z=8191&$,J=$>>>13,Y=0|a[4],Q=8191&Y,tt=Y>>>13,et=0|a[5],rt=8191&et,it=et>>>13,nt=0|a[6],st=8191&nt,ot=nt>>>13,at=0|a[7],ut=8191&at,ht=at>>>13,ct=0|a[8],pt=8191&ct,ft=ct>>>13,dt=0|a[9],mt=8191&dt,yt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var wt=(h+(i=Math.imul(p,q))|0)+((8191&(n=(n=Math.imul(p,W))+Math.imul(l,q)|0))<<13)|0;h=((s=Math.imul(l,W))+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,i=Math.imul(d,q),n=(n=Math.imul(d,W))+Math.imul(m,q)|0,s=Math.imul(m,W);var vt=(h+(i=i+Math.imul(p,V)|0)|0)+((8191&(n=(n=n+Math.imul(p,j)|0)+Math.imul(l,V)|0))<<13)|0;h=((s=s+Math.imul(l,j)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,i=Math.imul(y,q),n=(n=Math.imul(y,W))+Math.imul(w,q)|0,s=Math.imul(w,W),i=i+Math.imul(d,V)|0,n=(n=n+Math.imul(d,j)|0)+Math.imul(m,V)|0,s=s+Math.imul(m,j)|0;var St=(h+(i=i+Math.imul(p,X)|0)|0)+((8191&(n=(n=n+Math.imul(p,z)|0)+Math.imul(l,X)|0))<<13)|0;h=((s=s+Math.imul(l,z)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,i=Math.imul(S,q),n=(n=Math.imul(S,W))+Math.imul(b,q)|0,s=Math.imul(b,W),i=i+Math.imul(y,V)|0,n=(n=n+Math.imul(y,j)|0)+Math.imul(w,V)|0,s=s+Math.imul(w,j)|0,i=i+Math.imul(d,X)|0,n=(n=n+Math.imul(d,z)|0)+Math.imul(m,X)|0,s=s+Math.imul(m,z)|0;var bt=(h+(i=i+Math.imul(p,Z)|0)|0)+((8191&(n=(n=n+Math.imul(p,J)|0)+Math.imul(l,Z)|0))<<13)|0;h=((s=s+Math.imul(l,J)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,i=Math.imul(I,q),n=(n=Math.imul(I,W))+Math.imul(P,q)|0,s=Math.imul(P,W),i=i+Math.imul(S,V)|0,n=(n=n+Math.imul(S,j)|0)+Math.imul(b,V)|0,s=s+Math.imul(b,j)|0,i=i+Math.imul(y,X)|0,n=(n=n+Math.imul(y,z)|0)+Math.imul(w,X)|0,s=s+Math.imul(w,z)|0,i=i+Math.imul(d,Z)|0,n=(n=n+Math.imul(d,J)|0)+Math.imul(m,Z)|0,s=s+Math.imul(m,J)|0;var _t=(h+(i=i+Math.imul(p,Q)|0)|0)+((8191&(n=(n=n+Math.imul(p,tt)|0)+Math.imul(l,Q)|0))<<13)|0;h=((s=s+Math.imul(l,tt)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,i=Math.imul(M,q),n=(n=Math.imul(M,W))+Math.imul(T,q)|0,s=Math.imul(T,W),i=i+Math.imul(I,V)|0,n=(n=n+Math.imul(I,j)|0)+Math.imul(P,V)|0,s=s+Math.imul(P,j)|0,i=i+Math.imul(S,X)|0,n=(n=n+Math.imul(S,z)|0)+Math.imul(b,X)|0,s=s+Math.imul(b,z)|0,i=i+Math.imul(y,Z)|0,n=(n=n+Math.imul(y,J)|0)+Math.imul(w,Z)|0,s=s+Math.imul(w,J)|0,i=i+Math.imul(d,Q)|0,n=(n=n+Math.imul(d,tt)|0)+Math.imul(m,Q)|0,s=s+Math.imul(m,tt)|0;var It=(h+(i=i+Math.imul(p,rt)|0)|0)+((8191&(n=(n=n+Math.imul(p,it)|0)+Math.imul(l,rt)|0))<<13)|0;h=((s=s+Math.imul(l,it)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,i=Math.imul(k,q),n=(n=Math.imul(k,W))+Math.imul(O,q)|0,s=Math.imul(O,W),i=i+Math.imul(M,V)|0,n=(n=n+Math.imul(M,j)|0)+Math.imul(T,V)|0,s=s+Math.imul(T,j)|0,i=i+Math.imul(I,X)|0,n=(n=n+Math.imul(I,z)|0)+Math.imul(P,X)|0,s=s+Math.imul(P,z)|0,i=i+Math.imul(S,Z)|0,n=(n=n+Math.imul(S,J)|0)+Math.imul(b,Z)|0,s=s+Math.imul(b,J)|0,i=i+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(w,Q)|0,s=s+Math.imul(w,tt)|0,i=i+Math.imul(d,rt)|0,n=(n=n+Math.imul(d,it)|0)+Math.imul(m,rt)|0,s=s+Math.imul(m,it)|0;var Pt=(h+(i=i+Math.imul(p,st)|0)|0)+((8191&(n=(n=n+Math.imul(p,ot)|0)+Math.imul(l,st)|0))<<13)|0;h=((s=s+Math.imul(l,ot)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,i=Math.imul(N,q),n=(n=Math.imul(N,W))+Math.imul(H,q)|0,s=Math.imul(H,W),i=i+Math.imul(k,V)|0,n=(n=n+Math.imul(k,j)|0)+Math.imul(O,V)|0,s=s+Math.imul(O,j)|0,i=i+Math.imul(M,X)|0,n=(n=n+Math.imul(M,z)|0)+Math.imul(T,X)|0,s=s+Math.imul(T,z)|0,i=i+Math.imul(I,Z)|0,n=(n=n+Math.imul(I,J)|0)+Math.imul(P,Z)|0,s=s+Math.imul(P,J)|0,i=i+Math.imul(S,Q)|0,n=(n=n+Math.imul(S,tt)|0)+Math.imul(b,Q)|0,s=s+Math.imul(b,tt)|0,i=i+Math.imul(y,rt)|0,n=(n=n+Math.imul(y,it)|0)+Math.imul(w,rt)|0,s=s+Math.imul(w,it)|0,i=i+Math.imul(d,st)|0,n=(n=n+Math.imul(d,ot)|0)+Math.imul(m,st)|0,s=s+Math.imul(m,ot)|0;var Et=(h+(i=i+Math.imul(p,ut)|0)|0)+((8191&(n=(n=n+Math.imul(p,ht)|0)+Math.imul(l,ut)|0))<<13)|0;h=((s=s+Math.imul(l,ht)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,i=Math.imul(U,q),n=(n=Math.imul(U,W))+Math.imul(x,q)|0,s=Math.imul(x,W),i=i+Math.imul(N,V)|0,n=(n=n+Math.imul(N,j)|0)+Math.imul(H,V)|0,s=s+Math.imul(H,j)|0,i=i+Math.imul(k,X)|0,n=(n=n+Math.imul(k,z)|0)+Math.imul(O,X)|0,s=s+Math.imul(O,z)|0,i=i+Math.imul(M,Z)|0,n=(n=n+Math.imul(M,J)|0)+Math.imul(T,Z)|0,s=s+Math.imul(T,J)|0,i=i+Math.imul(I,Q)|0,n=(n=n+Math.imul(I,tt)|0)+Math.imul(P,Q)|0,s=s+Math.imul(P,tt)|0,i=i+Math.imul(S,rt)|0,n=(n=n+Math.imul(S,it)|0)+Math.imul(b,rt)|0,s=s+Math.imul(b,it)|0,i=i+Math.imul(y,st)|0,n=(n=n+Math.imul(y,ot)|0)+Math.imul(w,st)|0,s=s+Math.imul(w,ot)|0,i=i+Math.imul(d,ut)|0,n=(n=n+Math.imul(d,ht)|0)+Math.imul(m,ut)|0,s=s+Math.imul(m,ht)|0;var Mt=(h+(i=i+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,ft)|0)+Math.imul(l,pt)|0))<<13)|0;h=((s=s+Math.imul(l,ft)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,i=Math.imul(F,q),n=(n=Math.imul(F,W))+Math.imul(L,q)|0,s=Math.imul(L,W),i=i+Math.imul(U,V)|0,n=(n=n+Math.imul(U,j)|0)+Math.imul(x,V)|0,s=s+Math.imul(x,j)|0,i=i+Math.imul(N,X)|0,n=(n=n+Math.imul(N,z)|0)+Math.imul(H,X)|0,s=s+Math.imul(H,z)|0,i=i+Math.imul(k,Z)|0,n=(n=n+Math.imul(k,J)|0)+Math.imul(O,Z)|0,s=s+Math.imul(O,J)|0,i=i+Math.imul(M,Q)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(T,Q)|0,s=s+Math.imul(T,tt)|0,i=i+Math.imul(I,rt)|0,n=(n=n+Math.imul(I,it)|0)+Math.imul(P,rt)|0,s=s+Math.imul(P,it)|0,i=i+Math.imul(S,st)|0,n=(n=n+Math.imul(S,ot)|0)+Math.imul(b,st)|0,s=s+Math.imul(b,ot)|0,i=i+Math.imul(y,ut)|0,n=(n=n+Math.imul(y,ht)|0)+Math.imul(w,ut)|0,s=s+Math.imul(w,ht)|0,i=i+Math.imul(d,pt)|0,n=(n=n+Math.imul(d,ft)|0)+Math.imul(m,pt)|0,s=s+Math.imul(m,ft)|0;var Tt=(h+(i=i+Math.imul(p,mt)|0)|0)+((8191&(n=(n=n+Math.imul(p,yt)|0)+Math.imul(l,mt)|0))<<13)|0;h=((s=s+Math.imul(l,yt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,i=Math.imul(F,V),n=(n=Math.imul(F,j))+Math.imul(L,V)|0,s=Math.imul(L,j),i=i+Math.imul(U,X)|0,n=(n=n+Math.imul(U,z)|0)+Math.imul(x,X)|0,s=s+Math.imul(x,z)|0,i=i+Math.imul(N,Z)|0,n=(n=n+Math.imul(N,J)|0)+Math.imul(H,Z)|0,s=s+Math.imul(H,J)|0,i=i+Math.imul(k,Q)|0,n=(n=n+Math.imul(k,tt)|0)+Math.imul(O,Q)|0,s=s+Math.imul(O,tt)|0,i=i+Math.imul(M,rt)|0,n=(n=n+Math.imul(M,it)|0)+Math.imul(T,rt)|0,s=s+Math.imul(T,it)|0,i=i+Math.imul(I,st)|0,n=(n=n+Math.imul(I,ot)|0)+Math.imul(P,st)|0,s=s+Math.imul(P,ot)|0,i=i+Math.imul(S,ut)|0,n=(n=n+Math.imul(S,ht)|0)+Math.imul(b,ut)|0,s=s+Math.imul(b,ht)|0,i=i+Math.imul(y,pt)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(w,pt)|0,s=s+Math.imul(w,ft)|0;var Bt=(h+(i=i+Math.imul(d,mt)|0)|0)+((8191&(n=(n=n+Math.imul(d,yt)|0)+Math.imul(m,mt)|0))<<13)|0;h=((s=s+Math.imul(m,yt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,i=Math.imul(F,X),n=(n=Math.imul(F,z))+Math.imul(L,X)|0,s=Math.imul(L,z),i=i+Math.imul(U,Z)|0,n=(n=n+Math.imul(U,J)|0)+Math.imul(x,Z)|0,s=s+Math.imul(x,J)|0,i=i+Math.imul(N,Q)|0,n=(n=n+Math.imul(N,tt)|0)+Math.imul(H,Q)|0,s=s+Math.imul(H,tt)|0,i=i+Math.imul(k,rt)|0,n=(n=n+Math.imul(k,it)|0)+Math.imul(O,rt)|0,s=s+Math.imul(O,it)|0,i=i+Math.imul(M,st)|0,n=(n=n+Math.imul(M,ot)|0)+Math.imul(T,st)|0,s=s+Math.imul(T,ot)|0,i=i+Math.imul(I,ut)|0,n=(n=n+Math.imul(I,ht)|0)+Math.imul(P,ut)|0,s=s+Math.imul(P,ht)|0,i=i+Math.imul(S,pt)|0,n=(n=n+Math.imul(S,ft)|0)+Math.imul(b,pt)|0,s=s+Math.imul(b,ft)|0;var kt=(h+(i=i+Math.imul(y,mt)|0)|0)+((8191&(n=(n=n+Math.imul(y,yt)|0)+Math.imul(w,mt)|0))<<13)|0;h=((s=s+Math.imul(w,yt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,i=Math.imul(F,Z),n=(n=Math.imul(F,J))+Math.imul(L,Z)|0,s=Math.imul(L,J),i=i+Math.imul(U,Q)|0,n=(n=n+Math.imul(U,tt)|0)+Math.imul(x,Q)|0,s=s+Math.imul(x,tt)|0,i=i+Math.imul(N,rt)|0,n=(n=n+Math.imul(N,it)|0)+Math.imul(H,rt)|0,s=s+Math.imul(H,it)|0,i=i+Math.imul(k,st)|0,n=(n=n+Math.imul(k,ot)|0)+Math.imul(O,st)|0,s=s+Math.imul(O,ot)|0,i=i+Math.imul(M,ut)|0,n=(n=n+Math.imul(M,ht)|0)+Math.imul(T,ut)|0,s=s+Math.imul(T,ht)|0,i=i+Math.imul(I,pt)|0,n=(n=n+Math.imul(I,ft)|0)+Math.imul(P,pt)|0,s=s+Math.imul(P,ft)|0;var Ot=(h+(i=i+Math.imul(S,mt)|0)|0)+((8191&(n=(n=n+Math.imul(S,yt)|0)+Math.imul(b,mt)|0))<<13)|0;h=((s=s+Math.imul(b,yt)|0)+(n>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,i=Math.imul(F,Q),n=(n=Math.imul(F,tt))+Math.imul(L,Q)|0,s=Math.imul(L,tt),i=i+Math.imul(U,rt)|0,n=(n=n+Math.imul(U,it)|0)+Math.imul(x,rt)|0,s=s+Math.imul(x,it)|0,i=i+Math.imul(N,st)|0,n=(n=n+Math.imul(N,ot)|0)+Math.imul(H,st)|0,s=s+Math.imul(H,ot)|0,i=i+Math.imul(k,ut)|0,n=(n=n+Math.imul(k,ht)|0)+Math.imul(O,ut)|0,s=s+Math.imul(O,ht)|0,i=i+Math.imul(M,pt)|0,n=(n=n+Math.imul(M,ft)|0)+Math.imul(T,pt)|0,s=s+Math.imul(T,ft)|0;var At=(h+(i=i+Math.imul(I,mt)|0)|0)+((8191&(n=(n=n+Math.imul(I,yt)|0)+Math.imul(P,mt)|0))<<13)|0;h=((s=s+Math.imul(P,yt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,i=Math.imul(F,rt),n=(n=Math.imul(F,it))+Math.imul(L,rt)|0,s=Math.imul(L,it),i=i+Math.imul(U,st)|0,n=(n=n+Math.imul(U,ot)|0)+Math.imul(x,st)|0,s=s+Math.imul(x,ot)|0,i=i+Math.imul(N,ut)|0,n=(n=n+Math.imul(N,ht)|0)+Math.imul(H,ut)|0,s=s+Math.imul(H,ht)|0,i=i+Math.imul(k,pt)|0,n=(n=n+Math.imul(k,ft)|0)+Math.imul(O,pt)|0,s=s+Math.imul(O,ft)|0;var Nt=(h+(i=i+Math.imul(M,mt)|0)|0)+((8191&(n=(n=n+Math.imul(M,yt)|0)+Math.imul(T,mt)|0))<<13)|0;h=((s=s+Math.imul(T,yt)|0)+(n>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,i=Math.imul(F,st),n=(n=Math.imul(F,ot))+Math.imul(L,st)|0,s=Math.imul(L,ot),i=i+Math.imul(U,ut)|0,n=(n=n+Math.imul(U,ht)|0)+Math.imul(x,ut)|0,s=s+Math.imul(x,ht)|0,i=i+Math.imul(N,pt)|0,n=(n=n+Math.imul(N,ft)|0)+Math.imul(H,pt)|0,s=s+Math.imul(H,ft)|0;var Ht=(h+(i=i+Math.imul(k,mt)|0)|0)+((8191&(n=(n=n+Math.imul(k,yt)|0)+Math.imul(O,mt)|0))<<13)|0;h=((s=s+Math.imul(O,yt)|0)+(n>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,i=Math.imul(F,ut),n=(n=Math.imul(F,ht))+Math.imul(L,ut)|0,s=Math.imul(L,ht),i=i+Math.imul(U,pt)|0,n=(n=n+Math.imul(U,ft)|0)+Math.imul(x,pt)|0,s=s+Math.imul(x,ft)|0;var Ct=(h+(i=i+Math.imul(N,mt)|0)|0)+((8191&(n=(n=n+Math.imul(N,yt)|0)+Math.imul(H,mt)|0))<<13)|0;h=((s=s+Math.imul(H,yt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,i=Math.imul(F,pt),n=(n=Math.imul(F,ft))+Math.imul(L,pt)|0,s=Math.imul(L,ft);var Ut=(h+(i=i+Math.imul(U,mt)|0)|0)+((8191&(n=(n=n+Math.imul(U,yt)|0)+Math.imul(x,mt)|0))<<13)|0;h=((s=s+Math.imul(x,yt)|0)+(n>>>13)|0)+(Ut>>>26)|0,Ut&=67108863;var xt=(h+(i=Math.imul(F,mt))|0)+((8191&(n=(n=Math.imul(F,yt))+Math.imul(L,mt)|0))<<13)|0;return h=((s=Math.imul(L,yt))+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,u[0]=wt,u[1]=vt,u[2]=St,u[3]=bt,u[4]=_t,u[5]=It,u[6]=Pt,u[7]=Et,u[8]=Mt,u[9]=Tt,u[10]=Bt,u[11]=kt,u[12]=Ot,u[13]=At,u[14]=Nt,u[15]=Ht,u[16]=Ct,u[17]=Ut,u[18]=xt,0!==h&&(u[19]=h,r.length++),r};function jumboMulTo(t,e,r){return(new FFTM).mulp(t,e,r)}function FFTM(t,e){this.x=t,this.y=e}Math.imul||(a=smallMulTo),BN.prototype.mulTo=function mulTo(t,e){var r,i=this.length+t.length;return r=10===this.length&&10===t.length?a(this,t,e):i<63?smallMulTo(this,t,e):i<1024?function bigMulTo(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var i=0,n=0,s=0;s<r.length-1;s++){var o=n;n=0;for(var a=67108863&i,u=Math.min(s,e.length-1),h=Math.max(0,s-t.length+1);h<=u;h++){var c=s-h,p=(0|t.words[c])*(0|e.words[h]),l=67108863&p;a=67108863&(l=l+a|0),n+=(o=(o=o+(p/67108864|0)|0)+(l>>>26)|0)>>>26,o&=67108863}r.words[s]=a,i=o,o=n}return 0!==i?r.words[s]=i:r.length--,r.strip()}(this,t,e):jumboMulTo(this,t,e),r},FFTM.prototype.makeRBT=function makeRBT(t){for(var e=new Array(t),r=BN.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,r,t);return e},FFTM.prototype.revBin=function revBin(t,e,r){if(0===t||t===r-1)return t;for(var i=0,n=0;n<e;n++)i|=(1&t)<<e-n-1,t>>=1;return i},FFTM.prototype.permute=function permute(t,e,r,i,n,s){for(var o=0;o<s;o++)i[o]=e[t[o]],n[o]=r[t[o]]},FFTM.prototype.transform=function transform(t,e,r,i,n,s){this.permute(s,t,e,r,i,n);for(var o=1;o<n;o<<=1)for(var a=o<<1,u=Math.cos(2*Math.PI/a),h=Math.sin(2*Math.PI/a),c=0;c<n;c+=a)for(var p=u,l=h,f=0;f<o;f++){var d=r[c+f],m=i[c+f],g=r[c+f+o],y=i[c+f+o],w=p*g-l*y;y=p*y+l*g,g=w,r[c+f]=d+g,i[c+f]=m+y,r[c+f+o]=d-g,i[c+f+o]=m-y,f!==a&&(w=u*p-h*l,l=u*l+h*p,p=w)}},FFTM.prototype.guessLen13b=function guessLen13b(t,e){var r=1|Math.max(e,t),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},FFTM.prototype.conjugate=function conjugate(t,e,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=t[i];t[i]=t[r-i-1],t[r-i-1]=n,n=e[i],e[i]=-e[r-i-1],e[r-i-1]=-n}},FFTM.prototype.normalize13b=function normalize13b(t,e){for(var r=0,i=0;i<e/2;i++){var n=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+r;t[i]=67108863&n,r=n<67108864?0:n/67108864|0}return t},FFTM.prototype.convert13b=function convert13b(t,e,r,i){for(var n=0,s=0;s<e;s++)n+=0|t[s],r[2*s]=8191&n,n>>>=13,r[2*s+1]=8191&n,n>>>=13;for(s=2*e;s<i;++s)r[s]=0;assert(0===n),assert(!(-8192&n))},FFTM.prototype.stub=function stub(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},FFTM.prototype.mulp=function mulp(t,e,r){var i=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(i),s=this.stub(i),o=new Array(i),a=new Array(i),u=new Array(i),h=new Array(i),c=new Array(i),p=new Array(i),l=r.words;l.length=i,this.convert13b(t.words,t.length,o,i),this.convert13b(e.words,e.length,h,i),this.transform(o,s,a,u,i,n),this.transform(h,s,c,p,i,n);for(var f=0;f<i;f++){var d=a[f]*c[f]-u[f]*p[f];u[f]=a[f]*p[f]+u[f]*c[f],a[f]=d}return this.conjugate(a,u,i),this.transform(a,u,l,s,i,n),this.conjugate(l,s,i),this.normalize13b(l,i),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},BN.prototype.mul=function mul(t){var e=new BN(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},BN.prototype.mulf=function mulf(t){var e=new BN(null);return e.words=new Array(this.length+t.length),jumboMulTo(this,t,e)},BN.prototype.imul=function imul(t){return this.clone().mulTo(t,this)},BN.prototype.imuln=function imuln(t){assert("number"==typeof t),assert(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,n=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=n>>>26,this.words[r]=67108863&n}return 0!==e&&(this.words[r]=e,this.length++),this},BN.prototype.muln=function muln(t){return this.clone().imuln(t)},BN.prototype.sqr=function sqr(){return this.mul(this)},BN.prototype.isqr=function isqr(){return this.imul(this.clone())},BN.prototype.pow=function pow(t){var e=function toBitArray(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var i=r/26|0,n=r%26;e[r]=(t.words[i]&1<<n)>>>n}return e}(t);if(0===e.length)return new BN(1);for(var r=this,i=0;i<e.length&&0===e[i];i++,r=r.sqr());if(++i<e.length)for(var n=r.sqr();i<e.length;i++,n=n.sqr())0!==e[i]&&(r=r.mul(n));return r},BN.prototype.iushln=function iushln(t){assert("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,n=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var o=this.words[e]&n,a=(0|this.words[e])-o<<r;this.words[e]=a|s,s=o>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},BN.prototype.ishln=function ishln(t){return assert(0===this.negative),this.iushln(t)},BN.prototype.iushrn=function iushrn(t,e,r){var i;assert("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var n=t%26,s=Math.min((t-n)/26,this.length),o=67108863^67108863>>>n<<n,a=r;if(i-=s,i=Math.max(0,i),a){for(var u=0;u<s;u++)a.words[u]=this.words[u];a.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var h=0;for(u=this.length-1;u>=0&&(0!==h||u>=i);u--){var c=0|this.words[u];this.words[u]=h<<26-n|c>>>n,h=c&o}return a&&0!==h&&(a.words[a.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},BN.prototype.ishrn=function ishrn(t,e,r){return assert(0===this.negative),this.iushrn(t,e,r)},BN.prototype.shln=function shln(t){return this.clone().ishln(t)},BN.prototype.ushln=function ushln(t){return this.clone().iushln(t)},BN.prototype.shrn=function shrn(t){return this.clone().ishrn(t)},BN.prototype.ushrn=function ushrn(t){return this.clone().iushrn(t)},BN.prototype.testn=function testn(t){assert("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},BN.prototype.imaskn=function imaskn(t){assert("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(assert(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},BN.prototype.maskn=function maskn(t){return this.clone().imaskn(t)},BN.prototype.iaddn=function iaddn(t){return assert("number"==typeof t),assert(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},BN.prototype._iaddn=function _iaddn(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},BN.prototype.isubn=function isubn(t){if(assert("number"==typeof t),assert(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},BN.prototype.addn=function addn(t){return this.clone().iaddn(t)},BN.prototype.subn=function subn(t){return this.clone().isubn(t)},BN.prototype.iabs=function iabs(){return this.negative=0,this},BN.prototype.abs=function abs(){return this.clone().iabs()},BN.prototype._ishlnsubmul=function _ishlnsubmul(t,e,r){var i,n,s=t.length+r;this._expand(s);var o=0;for(i=0;i<t.length;i++){n=(0|this.words[i+r])+o;var a=(0|t.words[i])*e;o=((n-=67108863&a)>>26)-(a/67108864|0),this.words[i+r]=67108863&n}for(;i<this.length-r;i++)o=(n=(0|this.words[i+r])+o)>>26,this.words[i+r]=67108863&n;if(0===o)return this.strip();for(assert(-1===o),o=0,i=0;i<this.length;i++)o=(n=-(0|this.words[i])+o)>>26,this.words[i]=67108863&n;return this.negative=1,this.strip()},BN.prototype._wordDiv=function _wordDiv(t,e){var r=(this.length,t.length),i=this.clone(),n=t,s=0|n.words[n.length-1];0!==(r=26-this._countBits(s))&&(n=n.ushln(r),i.iushln(r),s=0|n.words[n.length-1]);var o,a=i.length-n.length;if("mod"!==e){(o=new BN(null)).length=a+1,o.words=new Array(o.length);for(var u=0;u<o.length;u++)o.words[u]=0}var h=i.clone()._ishlnsubmul(n,1,a);0===h.negative&&(i=h,o&&(o.words[a]=1));for(var c=a-1;c>=0;c--){var p=67108864*(0|i.words[n.length+c])+(0|i.words[n.length+c-1]);for(p=Math.min(p/s|0,67108863),i._ishlnsubmul(n,p,c);0!==i.negative;)p--,i.negative=0,i._ishlnsubmul(n,1,c),i.isZero()||(i.negative^=1);o&&(o.words[c]=p)}return o&&o.strip(),i.strip(),"div"!==e&&0!==r&&i.iushrn(r),{div:o||null,mod:i}},BN.prototype.divmod=function divmod(t,e,r){return assert(!t.isZero()),this.isZero()?{div:new BN(0),mod:new BN(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(n=s.mod.neg(),r&&0!==n.negative&&n.iadd(t)),{div:i,mod:n}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):this.negative&t.negative?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(n=s.mod.neg(),r&&0!==n.negative&&n.isub(t)),{div:s.div,mod:n}):t.length>this.length||this.cmp(t)<0?{div:new BN(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new BN(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new BN(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,n,s},BN.prototype.div=function div(t){return this.divmod(t,"div",!1).div},BN.prototype.mod=function mod(t){return this.divmod(t,"mod",!1).mod},BN.prototype.umod=function umod(t){return this.divmod(t,"mod",!0).mod},BN.prototype.divRound=function divRound(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,i=t.ushrn(1),n=t.andln(1),s=r.cmp(i);return s<0||1===n&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},BN.prototype.modn=function modn(t){assert(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},BN.prototype.idivn=function idivn(t){assert(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},BN.prototype.divn=function divn(t){return this.clone().idivn(t)},BN.prototype.egcd=function egcd(t){assert(0===t.negative),assert(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new BN(1),n=new BN(0),s=new BN(0),o=new BN(1),a=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++a;for(var u=r.clone(),h=e.clone();!e.isZero();){for(var c=0,p=1;!(e.words[0]&p)&&c<26;++c,p<<=1);if(c>0)for(e.iushrn(c);c-- >0;)(i.isOdd()||n.isOdd())&&(i.iadd(u),n.isub(h)),i.iushrn(1),n.iushrn(1);for(var l=0,f=1;!(r.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(r.iushrn(l);l-- >0;)(s.isOdd()||o.isOdd())&&(s.iadd(u),o.isub(h)),s.iushrn(1),o.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(s),n.isub(o)):(r.isub(e),s.isub(i),o.isub(n))}return{a:s,b:o,gcd:r.iushln(a)}},BN.prototype._invmp=function _invmp(t){assert(0===t.negative),assert(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,n=new BN(1),s=new BN(0),o=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var a=0,u=1;!(e.words[0]&u)&&a<26;++a,u<<=1);if(a>0)for(e.iushrn(a);a-- >0;)n.isOdd()&&n.iadd(o),n.iushrn(1);for(var h=0,c=1;!(r.words[0]&c)&&h<26;++h,c<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(o),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),n.isub(s)):(r.isub(e),s.isub(n))}return(i=0===e.cmpn(1)?n:s).cmpn(0)<0&&i.iadd(t),i},BN.prototype.gcd=function gcd(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var i=0;e.isEven()&&r.isEven();i++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=e.cmp(r);if(n<0){var s=e;e=r,r=s}else if(0===n||0===r.cmpn(1))break;e.isub(r)}return r.iushln(i)},BN.prototype.invm=function invm(t){return this.egcd(t).a.umod(t)},BN.prototype.isEven=function isEven(){return!(1&this.words[0])},BN.prototype.isOdd=function isOdd(){return!(1&~this.words[0])},BN.prototype.andln=function andln(t){return this.words[0]&t},BN.prototype.bincn=function bincn(t){assert("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var n=i,s=r;0!==n&&s<this.length;s++){var o=0|this.words[s];n=(o+=n)>>>26,o&=67108863,this.words[s]=o}return 0!==n&&(this.words[s]=n,this.length++),this},BN.prototype.isZero=function isZero(){return 1===this.length&&0===this.words[0]},BN.prototype.cmpn=function cmpn(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),assert(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},BN.prototype.cmp=function cmp(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},BN.prototype.ucmp=function ucmp(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|t.words[r];if(i!==n){i<n?e=-1:i>n&&(e=1);break}}return e},BN.prototype.gtn=function gtn(t){return 1===this.cmpn(t)},BN.prototype.gt=function gt(t){return 1===this.cmp(t)},BN.prototype.gten=function gten(t){return this.cmpn(t)>=0},BN.prototype.gte=function gte(t){return this.cmp(t)>=0},BN.prototype.ltn=function ltn(t){return-1===this.cmpn(t)},BN.prototype.lt=function lt(t){return-1===this.cmp(t)},BN.prototype.lten=function lten(t){return this.cmpn(t)<=0},BN.prototype.lte=function lte(t){return this.cmp(t)<=0},BN.prototype.eqn=function eqn(t){return 0===this.cmpn(t)},BN.prototype.eq=function eq(t){return 0===this.cmp(t)},BN.red=function red(t){return new Red(t)},BN.prototype.toRed=function toRed(t){return assert(!this.red,"Already a number in reduction context"),assert(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},BN.prototype.fromRed=function fromRed(){return assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},BN.prototype._forceRed=function _forceRed(t){return this.red=t,this},BN.prototype.forceRed=function forceRed(t){return assert(!this.red,"Already a number in reduction context"),this._forceRed(t)},BN.prototype.redAdd=function redAdd(t){return assert(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},BN.prototype.redIAdd=function redIAdd(t){return assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},BN.prototype.redSub=function redSub(t){return assert(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},BN.prototype.redISub=function redISub(t){return assert(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},BN.prototype.redShl=function redShl(t){return assert(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},BN.prototype.redMul=function redMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},BN.prototype.redIMul=function redIMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},BN.prototype.redSqr=function redSqr(){return assert(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},BN.prototype.redISqr=function redISqr(){return assert(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},BN.prototype.redSqrt=function redSqrt(){return assert(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},BN.prototype.redInvm=function redInvm(){return assert(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},BN.prototype.redNeg=function redNeg(){return assert(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},BN.prototype.redPow=function redPow(t){return assert(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var u={k256:null,p224:null,p192:null,p25519:null};function MPrime(t,e){this.name=t,this.p=new BN(e,16),this.n=this.p.bitLength(),this.k=new BN(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Red(t){if("string"==typeof t){var e=BN._prime(t);this.m=e.p,this.prime=e}else assert(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function Mont(t){Red.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new BN(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}MPrime.prototype._tmp=function _tmp(){var t=new BN(null);return t.words=new Array(Math.ceil(this.n/13)),t},MPrime.prototype.ireduce=function ireduce(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var i=e<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},MPrime.prototype.split=function split(t,e){t.iushrn(this.n,0,e)},MPrime.prototype.imulK=function imulK(t){return t.imul(this.k)},inherits(K256,MPrime),K256.prototype.split=function split(t,e){for(var r=4194303,i=Math.min(t.length,9),n=0;n<i;n++)e.words[n]=t.words[n];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=s&r,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(o&r)<<4|s>>>22,s=o}s>>>=22,t.words[n-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},K256.prototype.imulK=function imulK(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var i=0|t.words[r];e+=977*i,t.words[r]=67108863&e,e=64*i+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},inherits(P224,MPrime),inherits(P192,MPrime),inherits(P25519,MPrime),P25519.prototype.imulK=function imulK(t){for(var e=0,r=0;r<t.length;r++){var i=19*(0|t.words[r])+e,n=67108863&i;i>>>=26,t.words[r]=n,e=i}return 0!==e&&(t.words[t.length++]=e),t},BN._prime=function prime(t){if(u[t])return u[t];var prime;if("k256"===t)prime=new K256;else if("p224"===t)prime=new P224;else if("p192"===t)prime=new P192;else{if("p25519"!==t)throw new Error("Unknown prime "+t);prime=new P25519}return u[t]=prime,prime},Red.prototype._verify1=function _verify1(t){assert(0===t.negative,"red works only with positives"),assert(t.red,"red works only with red numbers")},Red.prototype._verify2=function _verify2(t,e){assert(!(t.negative|e.negative),"red works only with positives"),assert(t.red&&t.red===e.red,"red works only with red numbers")},Red.prototype.imod=function imod(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},Red.prototype.neg=function neg(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},Red.prototype.add=function add(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},Red.prototype.iadd=function iadd(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},Red.prototype.sub=function sub(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},Red.prototype.isub=function isub(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},Red.prototype.shl=function shl(t,e){return this._verify1(t),this.imod(t.ushln(e))},Red.prototype.imul=function imul(t,e){return this._verify2(t,e),this.imod(t.imul(e))},Red.prototype.mul=function mul(t,e){return this._verify2(t,e),this.imod(t.mul(e))},Red.prototype.isqr=function isqr(t){return this.imul(t,t.clone())},Red.prototype.sqr=function sqr(t){return this.mul(t,t)},Red.prototype.sqrt=function sqrt(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(assert(e%2==1),3===e){var r=this.m.add(new BN(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),n=0;!i.isZero()&&0===i.andln(1);)n++,i.iushrn(1);assert(!i.isZero());var s=new BN(1).toRed(this),o=s.redNeg(),a=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new BN(2*u*u).toRed(this);0!==this.pow(u,a).cmp(o);)u.redIAdd(o);for(var h=this.pow(u,i),c=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),l=n;0!==p.cmp(s);){for(var f=p,d=0;0!==f.cmp(s);d++)f=f.redSqr();assert(d<l);var m=this.pow(h,new BN(1).iushln(l-d-1));c=c.redMul(m),h=m.redSqr(),p=p.redMul(h),l=d}return c},Red.prototype.invm=function invm(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},Red.prototype.pow=function pow(t,e){if(e.isZero())return new BN(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new BN(1).toRed(this),r[1]=t;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],t);var n=r[0],s=0,o=0,a=e.bitLength()%26;for(0===a&&(a=26),i=e.length-1;i>=0;i--){for(var u=e.words[i],h=a-1;h>=0;h--){var c=u>>h&1;n!==r[0]&&(n=this.sqr(n)),0!==c||0!==s?(s<<=1,s|=c,(4===++o||0===i&&0===h)&&(n=this.mul(n,r[s]),o=0,s=0)):o=0}a=26}return n},Red.prototype.convertTo=function convertTo(t){var e=t.umod(this.m);return e===t?e.clone():e},Red.prototype.convertFrom=function convertFrom(t){var e=t.clone();return e.red=null,e},BN.mont=function mont(t){return new Mont(t)},inherits(Mont,Red),Mont.prototype.convertTo=function convertTo(t){return this.imod(t.ushln(this.shift))},Mont.prototype.convertFrom=function convertFrom(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},Mont.prototype.imul=function imul(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},Mont.prototype.mul=function mul(t,e){if(t.isZero()||e.isZero())return new BN(0)._forceRed(this);var r=t.mul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},Mont.prototype.invm=function invm(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=r.nmd(t),this)},843261:(t,e,r)=>{var i=r(901048).Buffer;const n=r(745262),s=i.alloc(1,1),o=i.alloc(1,0);t.exports=function deterministicGenerateK(t,e,r,a,u){let h=i.alloc(32,0),c=i.alloc(32,1);h=n("sha256",h).update(c).update(o).update(e).update(t).update(u||"").digest(),c=n("sha256",h).update(c).digest(),h=n("sha256",h).update(c).update(s).update(e).update(t).update(u||"").digest(),c=n("sha256",h).update(c).digest(),c=n("sha256",h).update(c).digest();let p=c;for(;!a(p)||!r(p);)h=n("sha256",h).update(c).update(o).digest(),c=n("sha256",h).update(c).digest(),c=n("sha256",h).update(c).digest(),p=c;return p}},253610:t=>{"use strict";t.exports=JSON.parse('{"OP_FALSE":0,"OP_0":0,"OP_PUSHDATA1":76,"OP_PUSHDATA2":77,"OP_PUSHDATA4":78,"OP_1NEGATE":79,"OP_RESERVED":80,"OP_TRUE":81,"OP_1":81,"OP_2":82,"OP_3":83,"OP_4":84,"OP_5":85,"OP_6":86,"OP_7":87,"OP_8":88,"OP_9":89,"OP_10":90,"OP_11":91,"OP_12":92,"OP_13":93,"OP_14":94,"OP_15":95,"OP_16":96,"OP_NOP":97,"OP_VER":98,"OP_IF":99,"OP_NOTIF":100,"OP_VERIF":101,"OP_VERNOTIF":102,"OP_ELSE":103,"OP_ENDIF":104,"OP_VERIFY":105,"OP_RETURN":106,"OP_TOALTSTACK":107,"OP_FROMALTSTACK":108,"OP_2DROP":109,"OP_2DUP":110,"OP_3DUP":111,"OP_2OVER":112,"OP_2ROT":113,"OP_2SWAP":114,"OP_IFDUP":115,"OP_DEPTH":116,"OP_DROP":117,"OP_DUP":118,"OP_NIP":119,"OP_OVER":120,"OP_PICK":121,"OP_ROLL":122,"OP_ROT":123,"OP_SWAP":124,"OP_TUCK":125,"OP_CAT":126,"OP_SUBSTR":127,"OP_LEFT":128,"OP_RIGHT":129,"OP_SIZE":130,"OP_INVERT":131,"OP_AND":132,"OP_OR":133,"OP_XOR":134,"OP_EQUAL":135,"OP_EQUALVERIFY":136,"OP_RESERVED1":137,"OP_RESERVED2":138,"OP_1ADD":139,"OP_1SUB":140,"OP_2MUL":141,"OP_2DIV":142,"OP_NEGATE":143,"OP_ABS":144,"OP_NOT":145,"OP_0NOTEQUAL":146,"OP_ADD":147,"OP_SUB":148,"OP_MUL":149,"OP_DIV":150,"OP_MOD":151,"OP_LSHIFT":152,"OP_RSHIFT":153,"OP_BOOLAND":154,"OP_BOOLOR":155,"OP_NUMEQUAL":156,"OP_NUMEQUALVERIFY":157,"OP_NUMNOTEQUAL":158,"OP_LESSTHAN":159,"OP_GREATERTHAN":160,"OP_LESSTHANOREQUAL":161,"OP_GREATERTHANOREQUAL":162,"OP_MIN":163,"OP_MAX":164,"OP_WITHIN":165,"OP_RIPEMD160":166,"OP_SHA1":167,"OP_SHA256":168,"OP_HASH160":169,"OP_HASH256":170,"OP_CODESEPARATOR":171,"OP_CHECKSIG":172,"OP_CHECKSIGVERIFY":173,"OP_CHECKMULTISIG":174,"OP_CHECKMULTISIGVERIFY":175,"OP_NOP1":176,"OP_NOP2":177,"OP_CHECKLOCKTIMEVERIFY":177,"OP_NOP3":178,"OP_CHECKSEQUENCEVERIFY":178,"OP_NOP4":179,"OP_NOP5":180,"OP_NOP6":181,"OP_NOP7":182,"OP_NOP8":183,"OP_NOP9":184,"OP_NOP10":185,"OP_PUBKEYHASH":253,"OP_PUBKEY":254,"OP_INVALIDOPCODE":255}')}}]);