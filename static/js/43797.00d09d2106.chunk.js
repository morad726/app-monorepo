"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[43797],{170087:(e,t,n)=>{n.d(t,{j:()=>PureChainSelector});var r=n(908867),s=n(490343),o=n(254491),a=n(514041),i=n(723110),l=n(791088),u=n(880590),c=n(831085),ListEmptyComponent=function(){var e=(0,r.A)();return(0,c.jsx)(s.Empty,{icon:"SearchOutline",title:e.formatMessage({id:o.ETranslations.global_no_results})})},ChainSelectorListView=function({networks:e,onPressItem:t,networkId:n}){var{bottom:r}=(0,s.useSafeAreaInsets)();return(0,c.jsx)(s.ListView,{ListEmptyComponent,ListFooterComponent:(0,c.jsx)(s.Stack,{h:r||"$2"}),estimatedItemSize:48,data:e,keyExtractor:function(e){return e.id},renderItem:function({item:e}){return(0,c.jsx)(l.c,{h:48,renderAvatar:(0,c.jsx)(u.vD,{logoURI:e.logoURI,size:"$8"}),title:e.name,titleMatch:e.titleMatch,onPress:function(){return t?.(e)},testID:`select-item-${e.id}`,children:n===e.id?(0,c.jsx)(l.c.CheckMark,{},"checkmark"):null})}})},PureChainSelectorContent=function({networks:e,networkId:t,onPressItem:n}){var[l,u]=(0,a.useState)(""),d=(0,r.A)(),m=(0,a.useCallback)((function(e){u(e.trim())}),[]),f=(0,i.j)(e),h=(0,a.useMemo)((function(){return l?f(l):e}),[f,l,e]);return(0,c.jsxs)(s.Stack,{flex:1,children:[(0,c.jsx)(s.Stack,{px:"$5",pb:"$4",children:(0,c.jsx)(s.SearchBar,{placeholder:d.formatMessage({id:o.ETranslations.global_search}),value:l,onChangeText:m})}),(0,c.jsx)(ChainSelectorListView,{networkId:t,networks:h,onPressItem:n})]})},PureChainSelector=function({networks:e,title:t,networkId:n,onPressItem:a}){var i=(0,r.A)();return(0,c.jsxs)(s.Page,{safeAreaEnabled:!1,children:[(0,c.jsx)(s.Page.Header,{title:t||i.formatMessage({id:o.ETranslations.global_networks})}),(0,c.jsx)(s.Page.Body,{children:(0,c.jsx)(PureChainSelectorContent,{networkId:n,networks:e,onPressItem:a})})]})}},723110:(e,t,n)=>{n.d(t,{j:()=>useFuseSearch});var r=n(324586),s=n(514041),o=n(22937);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var a=["evm","dot","cosmos"],useFuseSearch=function(e){var t=(0,s.useMemo)((function(){return{fuse:(0,o.pl)(e,{keys:["name","impl","symbol","shortname"]}),symbolSet:new Set(e.map((function(e){return e.symbol.toLowerCase()}))),shortnameSet:new Set(e.map((function(e){return e.shortname.toLowerCase()})))}}),[e]);return(0,s.useCallback)((function(e){var n=e.toLowerCase(),{fuse:r,symbolSet:s,shortnameSet:o}=t,i={$or:[{name:`^${e}`},{name:`'${e}`}]};return a.includes(n)&&i.$or?.push({impl:`=${n}`}),s.has(n)&&i.$or?.push({symbol:`=${n}`}),o.has(n)&&i.$or?.push({shortname:`=${n}`}),r.search(i).map((function(e){return _objectSpread(_objectSpread({},e.item),{},{titleMatch:e.matches?.find((function(e){return"name"===e.key}))})}))}),[t])}},343797:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ChainSelectorPage});var r=n(586330),s=n(60153),o=n(325809),a=n(498356),i=n(911998),l=n(162616),u=n(514041),c=n(908867),d=n(490343),m=n(254491),f=n(394764),h=n(723110),I=(0,u.createContext)({frequentlyUsedItems:[],frequentlyUsedItemsIds:new Set}),g=n(791088),k=n(880590),b=n(831085),EditableListItem=function({item:e,drag:t,isDisabled:n,isDraggable:r,isEditable:s=!0}){var o=(0,c.A)(),{isEditMode:a,networkId:i,frequentlyUsedItems:l,frequentlyUsedItemsIds:d,setFrequentlyUsedItems:f,onPressItem:h}=(0,u.useContext)(I),w=n?.7:1,x=(0,u.useMemo)((function(){if(!a&&!n)return function(){return h?.(e)}}),[a,n,e,h]),v=(0,u.useCallback)((function(){d.has(e.id)?f?.([...l.filter((function(t){return t.id!==e.id}))]):f?.([...l,e])}),[d,l,e,f]);return(0,b.jsxs)(g.c,{title:e.isAllNetworks?o.formatMessage({id:m.ETranslations.global_all_networks}):e.name,titleMatch:e.titleMatch,h:48,renderAvatar:(0,b.jsx)(k.vD,{logoURI:e.logoURI,size:"$8"}),opacity:w,onPress:x,children:[s&&a&&!n&&!r?(0,b.jsx)(g.c.IconButton,{onPress:v,title:d.has(e.id)?o.formatMessage({id:m.ETranslations.global_unpin_from_top}):o.formatMessage({id:m.ETranslations.global_pin_to_top}),icon:d.has(e.id)?"ThumbtackSolid":"ThumbtackOutline",iconProps:{color:d.has(e.id)?"$iconActive":"$iconSubdued"}},"moveToTop"):null,i!==e.id||a?null:(0,b.jsx)(g.c.CheckMark,{},"checkmark"),a&&r?(0,b.jsx)(g.c.IconButton,{cursor:"move",icon:"DragOutline",onPressIn:t},"darg"):null]})},ListEmptyComponent=function(){var e=(0,c.A)();return(0,b.jsx)(d.Empty,{icon:"SearchOutline",title:e.formatMessage({id:m.ETranslations.global_no_results})})},ListHeaderComponent=function(){var{allNetworkItem:e,searchText:t}=(0,u.useContext)(I);return(0,b.jsx)(d.Stack,{mt:"$2",children:!e||t?.trim()?null:(0,b.jsx)(EditableListItem,{item:e,isEditable:!1})})},EditableChainSelectorContent=function({mainnetItems:e,testnetItems:t,frequentlyUsedItems:n,unavailableItems:r,onPressItem:s,networkId:o,isEditMode:a,allNetworkItem:i,onFrequentlyUsedItemsChange:l}){var g=(0,c.A)(),{bottom:k}=(0,d.useSafeAreaInsets)(),[w,x]=(0,u.useState)(""),[v,p]=(0,u.useState)(null!=n?n:[]),j=(0,u.useRef)(null),y=(0,f.Z)(a),S=w.trim(),P=(0,u.useMemo)((function(){var e;return null==(e=i&&!w?.trim?.())||e}),[i,w]);(0,u.useEffect)((function(){!a&&y&&l?.(v)}),[a,y,v,l]),(0,u.useEffect)((function(){p(n)}),[n]);var E=(0,u.useMemo)((function(){var n=[...e,...t];return i&&n.unshift(i),n}),[e,t,i]),C=(0,h.j)(E),A=(0,u.useMemo)((function(){if(S){var n=C(S);return 0===n.length?[]:[{data:n}]}var s=e.reduce((function(e,t){var n=t.name[0].toUpperCase();return e[n]||(e[n]=[]),e[n].push(t),e}),{}),o=Object.entries(s).map((function([e,t]){return{title:e,data:t}})).sort((function(e,t){return e.title.charCodeAt(0)-t.title.charCodeAt(0)})),a=[{data:v,draggable:!0},...o];return t&&t.length>0&&a.push({title:g.formatMessage({id:m.ETranslations.global_testnet}),data:t}),r.length>0&&a.push({title:g.formatMessage({id:m.ETranslations.network_selector_unavailable_networks}),data:r,unavailable:!0}),a}),[e,t,v,r,S,g,C]),M=(0,u.useMemo)((function(){var e=8+(P?48:0),t=[];return A.forEach((function(n,r){0!==r&&(t.push({offset:e,length:20,index:t.length}),e+=20);var s=n.title?36:0;t.push({offset:e,length:s,index:t.length}),e+=s,n.data.forEach((function(){t.push({offset:e,length:48,index:t.length}),e+=48}));t.push({offset:e,length:0,index:t.length}),e+=0})),t.push({offset:e,length:8,index:t.length}),t}),[A,P]),_=(0,u.useMemo)((function(){var e,t;if(!w.trim())return A.forEach((function(e,n){e.data.forEach((function(r,s){var a;if(r.id===o&&void 0===t&&((t={sectionIndex:n,itemIndex:s-((null!=(a=e?.title?.length)?a:0)>0?1:0)})&&void 0!==t.itemIndex)){var i,l=null!=(i=t?.itemIndex)?i:0;-1===l&&(t.itemIndex=void 0),l===e.data.length&&n!==A.length-1&&(t.sectionIndex+=1,t.itemIndex=void 0)}}))})),void 0!==t?.sectionIndex&&A.slice(0,t.sectionIndex).reduce((function(e,t){return e+t.data.length}),0)+(null!=(e=t?.itemIndex)?e:0)<=7?{sectionIndex:0,itemIndex:void 0}:t}),[A,o,w]),U=(0,u.useMemo)((function(){return{frequentlyUsedItems:v,setFrequentlyUsedItems:p,frequentlyUsedItemsIds:new Set(v.map((function(e){return e.id}))),networkId:o,onPressItem:s,isEditMode:a,searchText:S,allNetworkItem:i}}),[v,p,o,s,a,S,i]),O=(0,u.useCallback)((function({item:e,section:t,drag:n}){return(0,b.jsx)(EditableListItem,{item:e,isDraggable:t.draggable,isDisabled:t.unavailable,isEditable:t.editable,drag:n})}),[]),T=(0,u.useCallback)((function(e){return e.section.title?(0,b.jsx)(d.SectionList.SectionHeader,{title:e.section.title}):(0,b.jsx)(d.Stack,{})}),[]);return(0,b.jsx)(I.Provider,{value:U,children:(0,b.jsxs)(d.Stack,{flex:1,children:[(0,b.jsx)(d.Stack,{px:"$5",children:(0,b.jsx)(d.SearchBar,{placeholder:g.formatMessage({id:m.ETranslations.global_search}),value:w,onChangeText:function(e){j?.current?._listRef?._scrollRef?.scrollTo?.({y:0,animated:!1}),x(e.trim())}})}),(0,b.jsx)(d.Stack,{flex:1,children:A.length>0?(0,b.jsx)(d.SortableSectionList,{ref:j,enabled:a,stickySectionHeadersEnabled:!0,sections:A,renderItem:O,keyExtractor:function(e){return e.id},onDragEnd:function(e){var t=e?.sections?.[0]?.data;p(t)},initialScrollIndex:_,getItemLayout:function(e,t){return-1===t?{index:t,offset:0,length:0}:M[t]},ListHeaderComponent,renderSectionHeader:T,ListFooterComponent:(0,b.jsx)(d.Stack,{h:k||"$2"})}):(0,b.jsx)(ListEmptyComponent,{})})]})})};var EditableChainSelector=function({mainnetItems:e,testnetItems:t,unavailableItems:n,frequentlyUsedItems:r,networkId:s,onPressItem:o,onFrequentlyUsedItemsChange:a,allNetworkItem:i}){var l=(0,c.A)(),[f,h]=(0,u.useState)(!1),I=(0,u.useMemo)((function(){if(!(n.length>0))return function(){return function getHeaderRightComponent(e,t){return(0,b.jsx)(d.Button,{variant:"tertiary",onPress:t,children:e})}(f?l.formatMessage({id:m.ETranslations.global_done}):l.formatMessage({id:m.ETranslations.global_edit}),(function(){return h(!f)}))}}),[l,f,n]);return(0,b.jsxs)(d.Page,{safeAreaEnabled:!1,children:[(0,b.jsx)(d.Page.Header,{title:l.formatMessage({id:m.ETranslations.global_networks}),headerRight:I}),(0,b.jsx)(d.Page.Body,{children:(0,b.jsx)(EditableChainSelectorContent,{isEditMode:f,frequentlyUsedItems:r,unavailableItems:n,networkId:s,mainnetItems:e,testnetItems:t,onPressItem:o,allNetworkItem:i,onFrequentlyUsedItemsChange:a})})]})},w=n(170087),x={mainnetItems:[],testnetItems:[],unavailableItems:[],frequentlyUsedItems:[]},EditableAccountChainSelector=function({num:e,networkIds:t,onPressItem:n}){var o,{activeAccount:{network:a,dbAccount:u}}=(0,l.LH)({num:e}),{result:c,run:d}=(0,i.yk)((0,r.A)((function*(){return s.A.serviceNetwork.getChainSelectorNetworksCompatibleWithAccountId({accountId:u?.id,networkIds:t})})),[u?.id,t],{initResult:x});return(0,b.jsx)(EditableChainSelector,{networkId:a?.id,mainnetItems:c.mainnetItems,testnetItems:c.testnetItems,unavailableItems:c.unavailableItems,frequentlyUsedItems:c.frequentlyUsedItems,allNetworkItem:c.allNetworkItem,onPressItem:n,onFrequentlyUsedItemsChange:(o=(0,r.A)((function*(e){yield s.A.serviceNetwork.setNetworkSelectorPinnedNetworks({networks:e}),yield d()})),function(e){return o.apply(this,arguments)})})},NotEditableAccountChainSelector=function({num:e,networkIds:t,onPressItem:n}){var{activeAccount:{network:o}}=(0,l.LH)({num:e}),{result:a}=(0,i.yk)((0,r.A)((function*(){var e=[];t&&t.length>0?e=(yield s.A.serviceNetwork.getNetworksByIds({networkIds:t})).networks:e=(yield s.A.serviceNetwork.getAllNetworks()).networks;return e})),[t]);return(0,b.jsx)(w.j,{networkId:o?.id,networks:null!=a?a:[],onPressItem:n})};function AccountChainSelector({num:e,networkIds:t,editable:n}){var r=(0,a.A)(),s=(0,l.z$)(),handleListItemPress=function(t){s.current.updateSelectedAccountNetwork({num:e,networkId:t.id}),r.popStack()};return n?(0,b.jsx)(EditableAccountChainSelector,{onPressItem:handleListItemPress,num:e,networkIds:t}):(0,b.jsx)(NotEditableAccountChainSelector,{onPressItem:handleListItemPress,num:e,networkIds:t})}function ChainSelectorPage({route:e}){var{num:t,sceneName:n,sceneUrl:r,networkIds:s,editable:a}=e.params;return(0,b.jsx)(o.b8,{enabledNum:[t],config:{sceneName:n,sceneUrl:r},children:(0,b.jsx)(AccountChainSelector,{num:t,networkIds:s,editable:a})})}}}]);