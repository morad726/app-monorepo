"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[97726],{497726:(e,t,n)=>{n.r(t),n.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var i=n(324586),s=n(586330),r=n(490343),o=n(60153),c=n(604343),l=n(652417),a=n(654004),d=n(831085);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function JotaiDemo1(){var[e,t]=(0,c.useDemoPriceAtom)(),[n]=(0,c.useDemoReadOnlyAtom)(),[,i]=(0,c.useDemoWriteOnlyAtom)(),[o,a]=(0,c.useDemoReadWriteAtom)();return(0,d.jsxs)(r.Stack,{space:"$2",children:[(0,d.jsx)(r.Button,{onPress:function(){t(l.s)},children:"reset"}),(0,d.jsxs)(r.Button,{onPress:function(){i({discount:.5})},children:["WriteOnly set discount 0.5: ",e," - ",n," - ",o]}),(0,d.jsx)(r.Button,{onPress:function(){a(10)},children:"ReadWriteAtom set 10"}),(0,d.jsxs)(r.Button,{onPress:(0,s.A)((function*(){yield c.demoPriceAtom.get()})),children:["get state: ",e]}),(0,d.jsxs)(r.Button,{onPress:function(){c.demoPriceAtom.set(10)},children:["demoPriceAtom set 10: ",e]}),(0,d.jsxs)(r.Button,{onPress:(0,s.A)((function*(){yield c.demoWriteOnlyAtom.set({discount:.3})})),children:["WriteOnly set discount 0.3: ",e]})]})}function JotaiDemo2(){var[e,t]=(0,c.useSettingsPersistAtom)();return(0,d.jsxs)(r.Stack,{space:"$2",children:[(0,d.jsx)(r.SizableText,{size:"$headingMd",children:"高频数据分离"}),(0,d.jsx)(r.SizableText,{size:"$headingMd",children:"低频数据整体打包，避免定义数据太零碎"}),(0,d.jsxs)(r.SizableText,{children:["theme=",e.theme]}),(0,d.jsxs)(r.SizableText,{children:["locale=",e.locale]}),(0,d.jsx)(r.SizableText,{children:e.instanceId}),(0,d.jsx)(r.SizableText,{size:"$headingMd",children:"UI 层修改数据"}),(0,d.jsx)(r.SizableText,{children:"UI 层通常不直接写数据，而是通过 background 的 service 方法进行写数据，除非特别简单的场景可以在 UI 直接调用"}),(0,d.jsx)(r.Button,{onPress:function(){return t((function(e){return _objectSpread(_objectSpread({},e),{},{theme:"dark"!==e.theme?"dark":"light"})}))},children:"修改 theme"}),(0,d.jsx)(r.Button,{onPress:function(){return t((function(e){return _objectSpread(_objectSpread({},e),{},{locale:"zh-CN"!==e.locale?"zh-CN":"en-US"})}))},children:"修改 locale"}),(0,d.jsx)(r.SizableText,{size:"$headingMd",children:"响应式的计算数据（只读，globalAtomComputed）"}),(0,d.jsx)(r.SizableText,{children:"计算数据的写入函数 globalAtomComputedW 和 globalAtomComputedRW 不考虑使用，而是通过 background 的 service 方法进行写数据"}),(0,d.jsx)(r.SizableText,{size:"$headingMd",children:"background 获取数据"}),(0,d.jsx)(r.Button,{onPress:(0,s.A)((function*(){yield o.A.serviceDemo.demoJotaiGetSettings()})),children:"show settings"}),(0,d.jsx)(r.SizableText,{size:"$headingMd",children:"background 更新数据"}),(0,d.jsx)(r.Button,{onPress:(0,s.A)((function*(){yield o.A.serviceDemo.demoJotaiUpdateSettings()})),children:"update settings"})]})}(0,s.A)((function*(){yield c.demoPriceAtom.get()}))(),(0,s.A)((function*(){yield c.demoReadOnlyAtom.get()}))();const __WEBPACK_DEFAULT_EXPORT__=function(){return(0,d.jsx)(a.P,{description:"jotai",suggestions:["jotai"],boundaryConditions:["jotai"],elements:[{title:"DemoAtom",element:(0,d.jsx)(r.Stack,{space:"$1",children:(0,d.jsx)(JotaiDemo1,{})})},{title:"settingsPersistAtom",element:(0,d.jsx)(r.Stack,{space:"$1",children:(0,d.jsx)(JotaiDemo2,{})})}]})}},654004:(e,t,n)=>{n.d(t,{P:()=>Layout});var i=n(586330),s=n(724249),r=n(490343),o=n(989375),c=n(60153),l=n(498356),a=n(757559),d=n(831085),FormattedText=function({text:e}){return"string"==typeof e?(0,d.jsx)(r.Stack,{children:(0,d.jsxs)(r.SizableText,{children:[e,"。 "]})}):Array.isArray(e)&&0===e.length?null:(0,d.jsx)(r.Stack,{children:(0,d.jsx)(r.Stack,{space:"$1",children:e.map((function(t,n){return(0,d.jsx)(r.Stack,{children:(0,d.jsxs)(r.SizableText,{children:[n+1,". ",t,n===e.length-1?"。":"；"]})},n.toString())}))})})};function Layout({description:e="",suggestions:t=[],boundaryConditions:n=[],elements:h=[],scrollEnabled:u=!0,contentInsetAdjustmentBehavior:x="never",skipLoading:j=!1,children:m}){var p=(0,o.U6)(),S=(0,l.A)();return(0,d.jsx)(r.Page,{skipLoading:j,children:(0,d.jsx)(r.ScrollView,{maxWidth:"100%",scrollEnabled:u,flex:1,marginBottom:p,paddingHorizontal:"$5",contentContainerStyle:{paddingTop:20,paddingBottom:280},keyboardDismissMode:"on-drag",contentInsetAdjustmentBehavior:x,children:(0,d.jsxs)(r.Stack,{marginHorizontal:"auto",maxWidth:"100%",width:576,space:"$6",children:[(0,d.jsxs)(r.XStack,{children:[(0,d.jsx)(r.IconButton,{icon:"HomeLineOutline",onPress:function(){S.dispatch(s.y9.replace(a.WP.Main,{screen:a.V4.Developer,params:{screen:a.f$.TabDeveloper}}))}}),(0,d.jsx)(r.Button,{ml:"$4",onPress:(0,i.A)((function*(){yield c.A.serviceSetting.setTheme("light")})),children:"Light Theme"}),(0,d.jsx)(r.Button,{ml:"$4",variant:"primary",onPress:(0,i.A)((function*(){yield c.A.serviceSetting.setTheme("dark")})),children:"Dark Theme"})]}),e?(0,d.jsxs)(r.Stack,{space:"$2",children:[(0,d.jsx)(r.Stack,{children:(0,d.jsx)(r.SizableText,{size:"$headingXl",children:"使用说明"})}),(0,d.jsx)(r.Stack,{children:(0,d.jsx)(FormattedText,{text:e})})]}):null,t?(0,d.jsxs)(r.Stack,{space:"$2",children:[(0,d.jsx)(r.Stack,{children:(0,d.jsx)(r.SizableText,{size:"$headingXl",children:"使用建议"})}),(0,d.jsx)(FormattedText,{text:t})]}):null,n?.length>0?(0,d.jsxs)(r.Stack,{space:"$2",children:[(0,d.jsx)(r.Stack,{children:(0,d.jsx)(r.SizableText,{size:"$headingXl",children:"注意事项"})}),(0,d.jsx)(FormattedText,{text:n})]}):null,(0,d.jsxs)(r.Stack,{space:"$2",children:[(0,d.jsx)(r.Stack,{children:(0,d.jsx)(r.SizableText,{size:"$headingXl",children:"组件案例"})}),(0,d.jsx)(r.Stack,{children:h?.map((function(e,t){return(0,d.jsxs)(r.Stack,{space:"$2",pb:"$8",mb:"$8",borderBottomWidth:"$px",borderBottomColor:"$borderSubdued",children:[(0,d.jsxs)(r.Stack,{flexDirection:"column",children:[(0,d.jsx)(r.SizableText,{size:"$headingLg",children:e.title}),e.description?(0,d.jsx)(r.Stack,{paddingTop:1,children:(0,d.jsxs)(r.SizableText,{children:[e.description,"。"]})}):null]}),(0,d.jsx)(r.Stack,{children:"function"==typeof e.element?(0,d.jsx)(e.element,{}):e.element})]},`elements-${t}`)}))}),(0,d.jsx)(r.Stack,{children:m?(0,d.jsx)(r.Stack,{space:"$3",children:m}):null})]})]})})})}}}]);