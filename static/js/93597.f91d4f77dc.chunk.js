"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[93597],{802172:(e,t,r)=>{r.d(t,{m:()=>u});var n=r(324586),s=r(514041),a=r(2577),o=r(597102),i=r(310944),c=r(907481),l=r(831085);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=(0,s.memo)((function(e){var{children:t,storeName:r}=e,n=(0,c.z)(r),s=a.A.getOrCreateStore(n);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.H,_objectSpread({},n)),(0,l.jsx)(i.Hn,{store:s,children:t})]})}));u.displayName="MarketWatchListProviderMirror"},172120:(e,t,r)=>{r.d(t,{J:()=>m});var n=r(324586),s=r(839850),a=r(514041),o=r(908867),i=r(490343),c=r(153763),l=r(318822),u=r(254491),d=r(450255),p=r(831085),h=["coingeckoId","size","tabIndex"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var m=(0,a.memo)((function BasicMarketStar(e){var{coingeckoId:t,size:r,tabIndex:m}=e,j=(0,s.A)(e,h),f=(0,o.A)(),b=(0,d.B)(),[k,x]=(0,a.useState)((function(){return b.isInWatchList(t)})),y=(0,c.E)(),{gtMd:S}=(0,i.useMedia)(),g=(0,a.useCallback)((function({tabIndex:e}){e===m&&x(b.isInWatchList(t))}),[b,t,m]);(0,a.useEffect)((function(){if(S&&m)return l.iL.on(l.Tu.SwitchMarketHomeTab,g),function(){l.iL.off(l.Tu.SwitchMarketHomeTab,g)}}),[S,g,m]),(0,a.useEffect)((function(){y&&x(b.isInWatchList(t))}),[b,t,y]);var v=(0,a.useCallback)((function(){k?b.removeFormWatchList(t):b.addIntoWatchList(t),x(!k)}),[b,t,k]);return(0,p.jsx)(i.IconButton,function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({title:f.formatMessage({id:k?u.ETranslations.market_remove_from_watchlist:u.ETranslations.market_add_to_watchlist}),icon:k?"StarSolid":"StarOutline",variant:"tertiary",size:r,iconSize:r?void 0:"$5",iconProps:{color:k?"$iconActive":"$iconDisabled"},onPress:v},j))}))},202338:(e,t,r)=>{r.d(t,{t:()=>o});var n=r(514041),s=r(490343),a=r(831085);var o=(0,n.memo)((function BasicMarketTokenIcon({uri:e,size:t}){return e?(0,a.jsxs)(s.Image,{size:t,circular:!0,children:[(0,a.jsx)(s.Image.Source,{source:{uri:decodeURIComponent(e)}}),(0,a.jsx)(s.Image.Fallback,{children:(0,a.jsx)(s.Stack,{bg:"$bgStrong",ai:"center",jc:"center",width:"100%",height:"100%",children:(0,a.jsx)(s.Icon,{name:"CoinOutline",size:"$6",color:"$iconSubdued"})})}),(0,a.jsx)(s.Image.Loading,{children:(0,a.jsx)(s.Skeleton,{width:"100%",height:"100%",radius:"round"})})]}):(0,a.jsx)(s.Skeleton,{width:t,height:t})}))},450255:(e,t,r)=>{r.d(t,{B:()=>useWatchListAction});var n=r(514041),s=r(908867),a=r(490343),o=r(254491),i=r(310944),useWatchListAction=function(){var e=(0,s.A)(),t=(0,i.qr)(),r=(0,n.useCallback)((function(e){var r={coingeckoId:e};t.current.removeFormWatchList(r)}),[t]),c=(0,n.useCallback)((function(r){var n=Array.isArray(r)?r:[r];t.current.addIntoWatchList(n.map((function(e){return{coingeckoId:e}}))),a.Toast.success({title:e.formatMessage({id:o.ETranslations.market_added_to_watchlist})})}),[t,e]),l=(0,n.useCallback)((function(e){var r={coingeckoId:e};t.current.moveToTop(r)}),[t]),u=(0,n.useCallback)((function(e){return t.current.isInWatchList(e)}),[t]);return(0,n.useMemo)((function(){return{removeFormWatchList:r,addIntoWatchList:c,MoveToTop:l,isInWatchList:u}}),[l,c,u,r])}},493597:(e,t,r)=>{r.r(t),r.d(t,{UniversalSearch:()=>UniversalSearch,default:()=>pages_UniversalSearch});var n=r(586330),s=r(514041),a=r(908867),o=r(578104),i=r(490343),c=r(958227),l=r(604343),u=r(254491),d=r(757559),p=r(491180),h=r(714191),m=r(506851),j=r(60153),f=r(325809),b=r(791088),k=r(880590),x=r(498356),y=r(162616),S=r(826339),g=r(172120),v=r(202338),O=r(802172),w=r(831085);function SearchTextItem({item:e,onPress:t}){var r=(0,s.useCallback)((function(){t(e)}),[e,t]);return(0,w.jsx)(i.Stack,{ai:"center",jc:"center",borderRadius:"$2",space:"$3",bg:"$bgStrong",mt:"$3",cursor:"pointer",onPress:r,children:(0,w.jsx)(i.SizableText,{px:"$2.5",py:"$1",size:"$bodyMdMedium",children:e.text})})}function RecentSearched({searchType:e}){var t,r=(0,a.A)(),[{recentSearch:o}]=(0,c.O6)(),l=(0,c.GW)(),p=(0,x.A)(),h=(0,s.useCallback)((t=(0,n.A)((function*(e){e.type===m.j.MarketToken&&(p.pop(),setTimeout((function(){p.push(d.FE.MarketDetail,{token:e.id})}),80))})),function(e){return t.apply(this,arguments)}),[p]),j=(0,s.useCallback)((function(){l.current.clearAllRecentSearch()}),[l]);return o.length&&e===m.j.MarketToken?(0,w.jsxs)(i.YStack,{px:"$5",pb:"$5",children:[(0,w.jsxs)(i.XStack,{jc:"space-between",children:[(0,w.jsx)(i.SizableText,{size:"$headingSm",color:"$textSubdued",children:r.formatMessage({id:u.ETranslations.global_recent_searched})}),(0,w.jsx)(i.IconButton,{variant:"tertiary",icon:"DeleteOutline",color:"$textSubdued",iconSize:"$5",onPress:j})]}),(0,w.jsx)(i.XStack,{flexWrap:"wrap",space:"$3",children:o.map((function(e){return(0,w.jsx)(SearchTextItem,{onPress:h,item:e},e.text)}))})]}):null}var T=r(324586),$=r(2577),I=r(597102),P=r(526039);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,T.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A=(0,s.memo)((function(e){var{children:t,storeName:r}=e,n=(0,P.f)(r),s=$.A.getOrCreateStore(n);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(I.H,_objectSpread({},n)),(0,w.jsx)(c.TG,{store:s,children:t})]})}));A.displayName="UniversalSearchProviderMirror";var M=function(e){return e.init="init",e.loading="loading",e.done="done",e}(M||{}),SkeletonItem=function(){return(0,w.jsxs)(i.XStack,{py:"$2",alignItems:"center",children:[(0,w.jsx)(i.Skeleton,{w:"$10",h:"$10",radius:"round"}),(0,w.jsxs)(i.YStack,{ml:"$3",children:[(0,w.jsx)(i.Stack,{py:"$1.5",children:(0,w.jsx)(i.Skeleton,{h:"$3",w:"$32"})}),(0,w.jsx)(i.Stack,{py:"$1.5",children:(0,w.jsx)(i.Skeleton,{h:"$3",w:"$24"})})]})]})};function ListEmptyComponent({searchType:e}){var t=(0,a.A)();return e===m.j.MarketToken?(0,w.jsxs)(i.YStack,{px:"$5",children:[(0,w.jsx)(i.SizableText,{numberOfLines:1,size:"$headingSm",color:"$textSubdued",children:t.formatMessage({id:u.ETranslations.market_trending})}),(0,w.jsx)(SkeletonItem,{}),(0,w.jsx)(SkeletonItem,{}),(0,w.jsx)(SkeletonItem,{})]}):null}function UniversalSearch({searchType:e}){var t=(0,a.A)(),r=(0,x.A)(),[h]=(0,l.useSettingsPersistAtom)(),f=h.currencyInfo.symbol,{activeAccount:O}=(0,y.LH)({num:0}),T=(0,c.GW)(),[$,I]=(0,s.useState)([]),[P,A]=(0,s.useState)(M.init),[C,E]=(0,s.useState)([]),L=(0,s.useMemo)((function(){return t.formatMessage({id:e===m.j.MarketToken?u.ETranslations.global_search_tokens:u.ETranslations.global_search})}),[t,e]),_=(0,s.useCallback)((0,n.A)((function*(){var r=[],n=yield j.A.serviceUniversalSearch.universalSearchRecommend({searchTypes:e?[e]:[]});n?.[m.j.MarketToken]?.items&&r.push({title:t.formatMessage({id:u.ETranslations.market_trending}),data:n?.[m.j.MarketToken]?.items}),E(r)})),[t,e]);(0,s.useEffect)((function(){_()}),[_]);var z,D=(0,o.YQ)((z=(0,n.A)((function*(t){var r=t?.trim?.()||"";if(r){var n=yield j.A.serviceUniversalSearch.universalSearch({input:r,networkId:O?.network?.id,searchTypes:[e||m.j.Address]}),s=[];n?.[m.j.Address]?.items?.length&&s.push({title:"Wallet",data:n?.[m.j.Address]?.items}),n?.[m.j.MarketToken]?.items?.length&&s.push({title:"Market Token",data:n?.[m.j.MarketToken]?.items}),I(s),A(M.done)}else A(M.init)})),function(e){return z.apply(this,arguments)}),1200),W=(0,s.useCallback)((function(){A(M.loading)}),[]),N=(0,s.useCallback)((function({section:t}){return e===m.j.MarketToken?(0,w.jsx)(i.SizableText,{px:"$5",pb:0,size:"$headingSm",color:"$textSubdued",children:t.title}):(0,w.jsx)(i.SizableText,{px:"$5",pb:0,size:"$headingSm",children:t.title})}),[e]),U=(0,s.useCallback)((function({item:e}){switch(e.type){case m.j.Address:var t=e;return(0,w.jsx)(b.c,{onPress:function(){r.pop(),setTimeout((0,n.A)((function*(){var{network:e,addressInfo:n}=t.payload;yield S.Jh.pushUrlAccountPage(r,{address:n.displayAddress,networkId:e.id,contextNetworkId:O?.network?.id})})),80)},renderAvatar:(0,w.jsx)(k.um,{networkId:t.payload.network.id,size:"$10"}),title:t.payload.network.shortname,subtitle:p.A.shortenAddress({address:t.payload.addressInfo.displayAddress})});case m.j.MarketToken:var{image:s,coingeckoId:a,price:o,symbol:c,name:l}=e.payload;return(0,w.jsx)(b.c,{jc:"space-between",onPress:(0,n.A)((function*(){r.pop(),setTimeout((0,n.A)((function*(){r.push(d.FE.MarketDetail,{token:a}),setTimeout((function(){T.current.addIntoRecentSearchList({id:a,text:c.toUpperCase(),type:e.type,timestamp:Date.now()})}),10)})),80)})),renderAvatar:(0,w.jsx)(v.t,{uri:s,size:"$10"}),title:c.toUpperCase(),subtitle:l,subtitleProps:{numberOfLines:1},children:(0,w.jsxs)(i.XStack,{children:[(0,w.jsx)(i.NumberSizeableText,{size:"$bodyLgMedium",formatter:"price",formatterOptions:{currency:f},children:o}),(0,w.jsx)(g.J,{coingeckoId:a,ml:"$3"})]})});default:return null}}),[r,O?.network?.id,f,T]),F=(0,s.useCallback)((function(){switch(P){case M.init:return(0,w.jsx)(i.SectionList,{renderSectionHeader:N,sections:C,renderItem:U,ListHeaderComponent:(0,w.jsx)(RecentSearched,{searchType:e}),ListEmptyComponent:(0,w.jsx)(ListEmptyComponent,{searchType:e}),estimatedItemSize:"$16"});case M.loading:return(0,w.jsxs)(i.YStack,{px:"$5",children:[(0,w.jsx)(SkeletonItem,{}),(0,w.jsx)(SkeletonItem,{}),(0,w.jsx)(SkeletonItem,{})]});case M.done:return(0,w.jsx)(i.SectionList,{sections:$,ListEmptyComponent:(0,w.jsx)(i.Empty,{icon:"SearchOutline",title:t.formatMessage({id:u.ETranslations.global_no_results}),description:t.formatMessage({id:u.ETranslations.global_search_no_results_desc})}),renderItem:U,estimatedItemSize:"$16"})}}),[t,C,U,N,P,e,$]);return(0,w.jsxs)(i.Page,{children:[(0,w.jsx)(i.Page.Header,{title:t.formatMessage({id:u.ETranslations.global_search})}),(0,w.jsxs)(i.Page.Body,{children:[(0,w.jsx)(i.View,{p:"$5",pt:0,children:(0,w.jsx)(i.SearchBar,{autoFocus:!0,placeholder:L,onSearchTextChange:D,onChangeText:W})}),F()]})]})}const pages_UniversalSearch=function({route:e}){return(0,w.jsx)(f.b8,{config:{sceneName:h.Zs.home,sceneUrl:""},enabledNum:[0],children:(0,w.jsx)(O.m,{storeName:l.EJotaiContextStoreNames.marketWatchList,children:(0,w.jsx)(A,{storeName:l.EJotaiContextStoreNames.universalSearch,children:(0,w.jsx)(UniversalSearch,{searchType:e?.params?.filterType||m.j.Address})})})})}}}]);