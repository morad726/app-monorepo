"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[39316],{326745:(e,t,n)=>{n.d(t,{u:()=>useAppRoute});var o=n(724249);function useAppRoute(){return(0,o.lq)()}},188392:(e,t,n)=>{n.d(t,{d:()=>LidoWithdraw});var o=n(586330),a=n(514041),i=n(241440),r=n(908867),s=n(490343),c=n(88803),l=n(791088),d=n(391944),u=n(604343),m=n(254491),f=n(827843),p=n(939799),b=n(831085),k={color:"$textSubdued",size:"$bodyLg"},LidoWithdraw=function({balance:e,price:t,tokenImageUri:n,tokenSymbol:y,receivingTokenSymbol:g,minAmount:x="0",rate:S="1",onConfirm:h}){var[j,v]=(0,a.useState)(!1),[I,A]=(0,a.useState)(""),[{currencyInfo:{symbol:w}}]=(0,u.useSettingsPersistAtom)(),T=(0,a.useCallback)((0,o.A)((function*(){try{v(!0),yield h?.(I)}finally{v(!1)}})),[I,h]),M=(0,a.useCallback)((function(e){new i.A(e).isNaN()?""===e&&A(""):A(e)}),[]),C=(0,a.useMemo)((function(){var e=new i.A(I);if(!e.isNaN())return e.multipliedBy(t).toFixed()}),[I,t]),P=(0,a.useMemo)((function(){return new i.A(I).gt(e)}),[I,e]),_=(0,a.useMemo)((function(){var e=new i.A(x),t=new i.A(I);return!(!e.isGreaterThan(0)||!t.isGreaterThan(0))&&t.isLessThan(e)}),[x,I]),O=(0,a.useCallback)((function(){M(e)}),[M,e]),L=(0,a.useMemo)((function(){return(0,i.A)(I).isNaN()||P||_}),[I,P,_]),$=(0,a.useMemo)((function(){var e=(0,i.A)(I);if(e.isNaN())return null;var n=e.dividedBy(S).toFixed(),o=e.multipliedBy(t).dividedBy(S).toFixed();return(0,b.jsx)(p.A,{amount:n,fiatSymbol:w,fiatValue:o,tokenSymbol:g})}),[I,t,w,g,S]),E=(0,r.A)();return(0,b.jsxs)(s.Page,{children:[(0,b.jsx)(s.Page.Header,{title:E.formatMessage({id:m.ETranslations.earn_redeem})}),(0,b.jsx)(s.Page.Body,{children:(0,b.jsxs)(s.YStack,{children:[(0,b.jsxs)(s.Stack,{mx:"$2",px:"$3",space:"$5",children:[(0,b.jsx)(c.J,{hasError:P||_,value:I,onChange:M,tokenSelectorTriggerProps:{selectedTokenImageUri:n,selectedTokenSymbol:y},inputProps:{placeholder:"0"},balanceProps:{value:e,onPress:O},valueProps:{value:C,currency:C?w:void 0},enableMaxAmount:!0}),(0,b.jsxs)(s.YStack,{space:"$1",children:[_?(0,b.jsx)(s.Alert,{icon:"InfoCircleOutline",type:"critical",title:E.formatMessage({id:m.ETranslations.earn_minimum_amount},{number:`${x} ${y}`})}):null,P?(0,b.jsx)(s.Alert,{icon:"InfoCircleOutline",type:"critical",title:E.formatMessage({id:m.ETranslations.earn_insufficient_staked_balance})}):null]})]}),(0,b.jsxs)(s.YStack,{children:[$?(0,b.jsx)(l.c,{title:E.formatMessage({id:m.ETranslations.earn_receive}),titleProps:k,children:$}):null,I?(0,b.jsx)(l.c,{title:E.formatMessage({id:m.ETranslations.earn_pay_with}),titleProps:k,children:(0,b.jsx)(s.SizableText,{children:(0,b.jsx)(s.NumberSizeableText,{formatter:"balance",size:"$bodyLgMedium",formatterOptions:{tokenSymbol:y},children:I})})}):null,(0,b.jsx)(l.c,{title:E.formatMessage({id:m.ETranslations.global_protocol}),titleProps:k,children:(0,b.jsxs)(s.XStack,{space:"$2",alignItems:"center",children:[(0,b.jsx)(d.o,{size:"xs",tokenImageUri:f.a3}),(0,b.jsx)(s.SizableText,{size:"$bodyLgMedium",children:"Lido"})]})}),(0,b.jsx)(l.c,{title:E.formatMessage({id:m.ETranslations.earn_stake_release_period}),titleProps:k,children:(0,b.jsx)(l.c.Text,{primary:E.formatMessage({id:m.ETranslations.earn_less_than_number_days},{number:4})})})]})]})}),(0,b.jsx)(s.Page.Footer,{onConfirmText:E.formatMessage({id:m.ETranslations.earn_redeem}),confirmButtonProps:{onPress:T,loading:j,disabled:L}})]})}},939799:(e,t,n)=>{n.d(t,{A:()=>ValuePriceListItem});var o=n(490343),a=n(831085),ValuePriceListItem=function({amount:e,tokenSymbol:t,fiatSymbol:n,fiatValue:i}){return(0,a.jsxs)(o.XStack,{space:"$1",maxWidth:"$56",justifyContent:"flex-end",flexWrap:"wrap",children:[(0,a.jsx)(o.XStack,{children:(0,a.jsx)(o.NumberSizeableText,{size:"$bodyLgMedium",formatter:"balance",formatterOptions:{tokenSymbol:t},children:e})}),(0,a.jsx)(o.XStack,{maxWidth:"$56",children:(0,a.jsxs)(o.SizableText,{children:["(",(0,a.jsx)(o.NumberSizeableText,{size:"$bodyLgMedium",formatter:"value",formatterOptions:{currency:n},children:i}),")"]})})]})}},918778:(e,t,n)=>{n.d(t,{Kb:()=>useLidoMaticStake,Yv:()=>useLidoMaticClaim,ws:()=>useLidoMaticWithdraw});var o=n(324586),a=n(586330),i=n(514041),r=n(60153),s=n(927799);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function useLidoMaticStake({accountId:e,networkId:t}){var n,{navigationToSendConfirm:o}=(0,s.E)({accountId:e,networkId:t});return(0,i.useCallback)((n=(0,a.A)((function*({amount:n,stakingInfo:a,onSuccess:i,onFail:s}){var c=yield r.A.serviceAccount.getAccount({accountId:e,networkId:t}),l=yield r.A.serviceStaking.buildLidoMaticStakingTransaction({amount:n,networkId:t});yield o({encodedTx:_objectSpread(_objectSpread({},l),{},{from:c.address}),stakingInfo:a,onSuccess:i,onFail:s})})),function(e){return n.apply(this,arguments)}),[o,e,t])}function useLidoMaticWithdraw({accountId:e,networkId:t}){var n,{navigationToSendConfirm:o}=(0,s.E)({accountId:e,networkId:t});return(0,i.useCallback)((n=(0,a.A)((function*({amount:n,stakingInfo:a,onSuccess:i,onFail:s}){var c=yield r.A.serviceAccount.getAccount({accountId:e,networkId:t}),l=yield r.A.serviceStaking.buildLidoMaticWithdrawalTransaction({amount:n,networkId:t});yield o({encodedTx:_objectSpread(_objectSpread({},l),{},{from:c.address}),stakingInfo:a,onSuccess:i,onFail:s})})),function(e){return n.apply(this,arguments)}),[e,t,o])}function useLidoMaticClaim({accountId:e,networkId:t}){var n,{navigationToSendConfirm:o}=(0,s.E)({accountId:e,networkId:t});return(0,i.useCallback)((n=(0,a.A)((function*({tokenId:n,stakingInfo:a,onSuccess:i,onFail:s}){var c=yield r.A.serviceAccount.getAccount({accountId:e,networkId:t}),l=yield r.A.serviceStaking.buildLidoMaticClaimTransaction({tokenId:n,networkId:t});yield o({encodedTx:_objectSpread(_objectSpread({},l),{},{from:c.address}),stakingInfo:a,onSuccess:i,onFail:s})})),function(e){return n.apply(this,arguments)}),[o,e,t])}},539316:(e,t,n)=>{n.r(t),n.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var o=n(586330),a=n(514041),i=n(241440),r=n(498356),s=n(326745),c=n(213644),l=n(550082),d=n(188392),u=n(918778),m=n(827843),f=n(831085);const __WEBPACK_DEFAULT_EXPORT__=function(){var e,t=(0,s.u)(),{accountId:n,networkId:p,balance:b,token:k,price:y,receivingToken:g,rate:x}=t.params,S=(0,r.A)(),h=(0,u.ws)({accountId:n,networkId:p}),j=(0,a.useCallback)((e=(0,o.A)((function*(e){var t=(0,i.A)(e).shiftedBy(k.decimals).toFixed(0);yield h({amount:t,stakingInfo:{label:l.Z.Redeem,protocol:"lido",send:{amount:e,token:k},tags:["lido-matic"]},onSuccess:function(t){S.pop(),c.U.staking.page.unstaking({token:k,amount:e,stakingProtocol:"lido",tokenValue:(0,i.A)(e).multipliedBy(y).toFixed(),txnHash:t[0].signedTx.txid})}})})),function(t){return e.apply(this,arguments)}),[k,h,S,y]);return(0,f.jsx)(d.d,{receivingTokenSymbol:g.symbol,price:y,balance:b,tokenSymbol:k.symbol,minAmount:(0,i.A)(1).shiftedBy(-k.decimals).toFixed(),tokenImageUri:m.LN,onConfirm:j,rate:x})}},827843:(e,t,n)=>{n.d(t,{$e:()=>r,Cp:()=>a,LN:()=>i,a3:()=>o});var o="https://uni.onekey-asset.com/static/logo/Lido.png",a="https://uni.onekey-asset.com/static/chain/eth.png",i="https://uni.onekey-asset.com/static/chain/polygon.png",r="https://lido.fi/"},550082:(e,t,n)=>{n.d(t,{Z:()=>o});var o=function(e){return e.Stake="Stake",e.Claim="Claim",e.Redeem="Redeem",e}({})}}]);