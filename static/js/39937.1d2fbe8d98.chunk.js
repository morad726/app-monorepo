"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[39937],{20322:(e,r,t)=>{t.d(r,{j:()=>useSwapFromAccountNetworkSync,z:()=>useSwapAddressInfo});var n=t(324586),o=t(586330),c=t(712784),a=t.n(c),s=t(514041),u=t(490343),d=t(153763),i=t(604343),p=t(757559),f=t(619390),l=t(317522),b=t(162616),w=t(325529);function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,n.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function useSwapFromAccountNetworkSync(){var{updateSelectedAccountNetwork:e}=(0,b.z$)().current,[r]=(0,w.NE)(),{activeAccount:t}=(0,b.LH)({num:1}),[n,c]=(0,w.rv)(),[f]=(0,w.dF)(),[,j]=(0,i.useSettingsAtom)(),[O]=(0,w.Q8)(),y=(0,s.useRef)(),m=(0,s.useRef)(),S=(0,s.useRef)(),g=(0,s.useRef)(n),v=(0,s.useRef)(t);v.current!==t&&(v.current=t),y.current!==r&&(y.current=r),m.current!==O&&(m.current=O),g.current!==n&&(g.current=n),S.current!==f&&(S.current=f);var h,k=(0,s.useCallback)(a()((0,o.A)((function*(){y.current&&(yield e({num:0,networkId:y.current?.networkId})),m.current&&(yield e({num:1,networkId:m.current?.networkId})),y.current&&m.current&&(g.current?.networkId&&m.current?.networkId!==g.current?.networkId||!g.current?.networkId&&!v.current?.account&&v.current?.wallet||!1===S.current)&&(j((function(e){return _objectSpread(_objectSpread({},e),{},{swapToAnotherAccountSwitchOn:!1})})),c((function(e){return _objectSpread(_objectSpread({},e),{},{address:void 0})})),setTimeout((function(){m.current&&e({num:1,networkId:m.current?.networkId})}),500))})),100),[j,e]),A=(0,u.usePageType)();(0,l.A)(p.V4.Swap,(h=(0,o.A)((function*(e,r){if(A!==u.EPageType.modal){if(r)return;e&&(yield k())}})),function(e,r){return h.apply(this,arguments)})),(0,s.useEffect)((function(){A!==u.EPageType.modal&&(0,o.A)((function*(){yield k()}))()}),[k,r,O,f,A]);var P=(0,d.E)();(0,s.useEffect)((function(){A===u.EPageType.modal&&P&&(0,o.A)((function*(){yield k()}))()}),[k,P,A,r,O,f])}function useSwapAddressInfo(e){var{activeAccount:r}=(0,b.LH)({num:e===f.En.FROM?0:1}),[{swapToAnotherAccountSwitchOn:t}]=(0,i.useSettingsAtom)(),[n]=(0,w.rv)();return(0,s.useMemo)((function(){var o={networkId:void 0,address:void 0,accountInfo:void 0};return e===f.En.TO&&t&&n.address&&n.networkId&&r&&r.network?.id===n.networkId?_objectSpread(_objectSpread({},o),{},{address:n.address,networkId:n.networkId,accountInfo:n.accountInfo}):r?_objectSpread(_objectSpread({},o),{},{address:r.account?.address,networkId:r.network?.id,accountInfo:_objectSpread({},r)}):o}),[e,t,n,r])}},309008:(e,r,t)=>{t.d(r,{o:()=>i});var n=t(324586),o=t(514041),c=t(325529),a=t(2577),s=t(597102),u=t(829561),d=t(831085);function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,n.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var i=(0,o.memo)((function(e){var{children:r,storeName:t}=e,n=(0,u.x6)(t),o=a.A.getOrCreateStore(n);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.H,_objectSpread({},n)),(0,d.jsx)(c.BY,{store:o,children:r})]})}));i.displayName="SwapProviderMirror"},639937:(e,r,t)=>{t.r(r),t.d(r,{default:()=>SwapToAnotherAddressPageModal});var n=t(324586),o=t(514041),c=t(724249),a=t(908867),s=t(490343),u=t(325809),d=t(370968),i=t(498356),p=t(325529),f=t(604343),l=t(254491),b=t(714191),w=t(619390),j=t(20322),O=t(309008),y=t(831085);function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,n.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var SwapToAnotherAddressPage=function(){var e=(0,i.A)(),r=(0,c.lq)(),t=r.params?.address,{accountInfo:n,networkId:u,address:b}=(0,j.z)(w.En.TO),[,O]=(0,f.useSettingsAtom)(),[,m]=(0,p.rv)(),S=(0,a.A)(),g=(0,s.useForm)({defaultValues:{address:{raw:""}},mode:"onChange",reValidateMode:"onBlur"});(0,o.useEffect)((function(){b&&b!==t&&n?.account?.address===b&&g.setValue("address",{raw:b})}),[n?.account?.address,b,g,t]);var v=(0,o.useCallback)((function(){O((function(e){return _objectSpread(_objectSpread({},e),{},{swapToAnotherAccountSwitchOn:!0})}))}),[O]),h=(0,o.useCallback)((function(r){var t=r.address.resolved;t&&(O((function(e){return _objectSpread(_objectSpread({},e),{},{swapToAnotherAccountSwitchOn:!0})})),m((function(e){return _objectSpread(_objectSpread({},e),{},{address:t,networkId:u,accountInfo:n})})),e.pop())}),[n,e,u,O,m]),k=(0,o.useCallback)((function(){O((function(e){return _objectSpread(_objectSpread({},e),{},{swapToAnotherAccountSwitchOn:!1})})),m((function(e){return _objectSpread(_objectSpread({},e),{},{address:void 0})}))}),[m,O]);return n&&n?.network?.id?(0,y.jsxs)(s.Page,{children:[(0,y.jsx)(s.Page.Body,{px:"$5",space:"$4",children:(0,y.jsx)(s.Form,{form:g,children:(0,y.jsx)(s.Form.Field,{label:S.formatMessage({id:l.ETranslations.global_recipient}),name:"address",rules:{required:!0,validate:function(e){var r;if(!e.pending&&!e.resolved)return null!=(r=e.validateError?.message)?r:S.formatMessage({id:l.ETranslations.send_address_invalid})}},children:(0,y.jsx)(d.N,{networkId:n?.network?.id,enableAddressBook:!0,enableWalletName:!0,contacts:!0,accountSelector:{num:1,onBeforeAccountSelectorOpen:v}})})})}),(0,y.jsx)(s.Page.Footer,{onConfirm:function(){return g.handleSubmit(h)()},onConfirmText:S.formatMessage({id:l.ETranslations.global_confirm}),onCancelText:S.formatMessage({id:l.ETranslations.swap_account_to_address_edit_button}),onCancel:k})]}):null},SwapToAnotherAddressPageWithProvider=function(){var e=(0,c.lq)(),{storeName:r}=e.params;return(0,y.jsx)(O.o,{storeName:r,children:(0,y.jsx)(SwapToAnotherAddressPage,{})})};function SwapToAnotherAddressPageModal(){return(0,y.jsx)(u.b8,{config:{sceneName:b.Zs.swap},enabledNum:[0,1],children:(0,y.jsx)(SwapToAnotherAddressPageWithProvider,{})})}}}]);