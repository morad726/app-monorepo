"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[5235],{326745:(e,t,n)=>{n.d(t,{u:()=>useAppRoute});var a=n(724249);function useAppRoute(){return(0,a.lq)()}},664353:(e,t,n)=>{n.d(t,{o:()=>MaticLidoFAQs,p:()=>EthLidoFAQs});var a=n(514041),s=n(908867),i=n(490343),r=n(254491),o=n(831085),LidoFAQ=function({question:e,answer:t}){var[n,s]=(0,a.useState)(!1),r=(0,a.useCallback)((function(){return s((function(e){return!e}))}),[]);return(0,o.jsx)(i.YStack,{children:(0,o.jsxs)(i.YStack,{children:[(0,o.jsxs)(i.XStack,{mb:"$2",borderRadius:12,onPress:r,hoverStyle:{backgroundColor:"$bgHover"},pressStyle:{backgroundColor:"$bgHover"},py:"$2",px:"$3",children:[(0,o.jsx)(i.XStack,{flex:1,children:(0,o.jsx)(i.SizableText,{size:"$headingMd",children:e})}),(0,o.jsx)(i.XStack,{children:(0,o.jsx)(i.Icon,{name:n?"ChevronTopSmallOutline":"ChevronDownSmallOutline"})})]}),(0,o.jsx)(i.XStack,{px:"$3",children:n?(0,o.jsx)(i.SizableText,{size:"$bodyMd",pb:"$5",children:t}):null})]})})},EthLidoFAQs=function(){var e=(0,s.A)();return(0,o.jsxs)(i.YStack,{mt:"$12",children:[(0,o.jsx)(i.XStack,{mb:"$5",px:"$5",children:(0,o.jsx)(i.SizableText,{size:"$headingLg",children:e.formatMessage({id:r.ETranslations.global_faqs})})}),(0,o.jsxs)(i.YStack,{px:"$2",children:[(0,o.jsx)(LidoFAQ,{question:e.formatMessage({id:r.ETranslations.earn_how_does_the_lido_protocol_work}),answer:e.formatMessage({id:r.ETranslations.earn_how_does_the_lido_protocol_work_desc})}),(0,o.jsx)(LidoFAQ,{question:e.formatMessage({id:r.ETranslations.earn_why_do_you_receive_steth}),answer:e.formatMessage({id:r.ETranslations.earn_why_do_you_receive_steth_desc})}),(0,o.jsx)(LidoFAQ,{question:e.formatMessage({id:r.ETranslations.earn_what_is_the_possible_risk_of_lido}),answer:e.formatMessage({id:r.ETranslations.earn_what_is_the_possible_risk_of_lido_desc})})]})]})},MaticLidoFAQs=function(){var e=(0,s.A)();return(0,o.jsxs)(i.YStack,{mt:"$12",children:[(0,o.jsx)(i.XStack,{mb:"$5",px:"$5",children:(0,o.jsx)(i.SizableText,{size:"$headingLg",children:e.formatMessage({id:r.ETranslations.global_faqs})})}),(0,o.jsxs)(i.YStack,{px:"$2",children:[(0,o.jsx)(LidoFAQ,{question:e.formatMessage({id:r.ETranslations.earn_how_does_the_lido_protocol_work}),answer:e.formatMessage({id:r.ETranslations.earn_how_does_the_lido_protocol_work_desc})}),(0,o.jsx)(LidoFAQ,{question:e.formatMessage({id:r.ETranslations.earn_why_do_you_receive_stmatic}),answer:e.formatMessage({id:r.ETranslations.earn_why_do_you_receive_stmatic_desc})}),(0,o.jsx)(LidoFAQ,{question:e.formatMessage({id:r.ETranslations.earn_what_is_the_possible_risk_of_lido}),answer:e.formatMessage({id:r.ETranslations.earn_what_is_the_possible_risk_of_lido_desc})})]})]})}},168489:(e,t,n)=>{n.d(t,{BB:()=>EthStakeShouldUnderstand,U6:()=>MaticWithdrawShouldUnderstand,XU:()=>EthWithdrawShouldUnderstand,wF:()=>MaticStakeShouldUnderstand});var a=n(908867),s=n(490343),i=n(254491),r=n(827843),o=n(831085),ShouldUnderstandListItemListItem=function({title:e,description:t,index:n}){return(0,o.jsxs)(s.YStack,{children:[(0,o.jsxs)(s.XStack,{children:[(0,o.jsx)(s.Stack,{w:"$5",children:(0,o.jsxs)(s.SizableText,{children:[n,"."]})}),(0,o.jsx)(s.SizableText,{children:e})]}),(0,o.jsx)(s.XStack,{pl:"$5",children:(0,o.jsx)(s.SizableText,{children:t})})]})},ShouldUnderstand=function({title:e,subtitle:t,items:n}){return(0,o.jsx)(s.YStack,{flex:1,children:(0,o.jsx)(s.ScrollView,{maxHeight:560,children:(0,o.jsx)(s.YStack,{py:"$5",children:(0,o.jsxs)(s.Stack,{children:[(0,o.jsx)(s.Image,{w:"$14",h:"$14",src:r.a3}),(0,o.jsxs)(s.YStack,{mt:"$5",children:[(0,o.jsx)(s.SizableText,{size:"$headingXl",children:e}),t?(0,o.jsx)(s.XStack,{mt:"$5",children:(0,o.jsx)(s.SizableText,{size:"$bodyLg",children:t})}):null]}),(0,o.jsx)(s.YStack,{mt:"$5",space:"$5",children:n.map((function(e,t){return(0,o.jsx)(ShouldUnderstandListItemListItem,{index:t+1,title:e.title,description:e.description},t)}))})]})})})})},EthStakeShouldUnderstand=function({apr:e}){var t=(0,a.A)();return(0,o.jsx)(ShouldUnderstand,{title:t.formatMessage({id:i.ETranslations.earn_lido_token_staking},{token:"ETH"}),items:[{title:(0,o.jsx)(s.SizableText,{children:t.formatMessage({id:i.ETranslations.earn_earn_up_to_number_per_year},{number:(0,o.jsxs)(s.SizableText,{color:"$textInteractive",children:[e,"%"]})})}),description:t.formatMessage({id:i.ETranslations.earn_earn_up_to_number_per_year_desc})},{title:(0,o.jsx)(s.SizableText,{children:t.formatMessage({id:i.ETranslations.earn_receive_token},{token:(0,o.jsx)(s.SizableText,{color:"$textInteractive",children:"stETH"})})}),description:t.formatMessage({id:i.ETranslations.earn_receive_steth_desc})},{title:(0,o.jsx)(s.SizableText,{children:t.formatMessage({id:i.ETranslations.earn_rewards_updated_daily},{daily:(0,o.jsx)(s.SizableText,{color:"$textInteractive",children:t.formatMessage({id:i.ETranslations.earn_daily})})})}),description:t.formatMessage({id:i.ETranslations.earn_rewards_updated_daily_steth_desc})}]})},EthWithdrawShouldUnderstand=function(){var e=(0,a.A)();return(0,o.jsx)(ShouldUnderstand,{title:e.formatMessage({id:i.ETranslations.earn_lido_token_redemption},{token:"ETH"}),subtitle:e.formatMessage({id:i.ETranslations.earn_withdrawal_process_desc}),items:[{title:e.formatMessage({id:i.ETranslations.earn_request_withdrawal}),description:e.formatMessage({id:i.ETranslations.earn_request_withdrawal_steth_desc})},{title:e.formatMessage({id:i.ETranslations.earn_receive_lido_nft}),description:e.formatMessage({id:i.ETranslations.earn_receive_lido_nft_desc},{token:"ETH"})},{title:e.formatMessage({id:i.ETranslations.earn_claim}),description:e.formatMessage({id:i.ETranslations.earn_claim_token_desc},{token:"ETH"})}]})},MaticStakeShouldUnderstand=function({apr:e}){var t=(0,a.A)();return(0,o.jsx)(ShouldUnderstand,{title:t.formatMessage({id:i.ETranslations.earn_lido_token_staking},{token:"MATIC"}),items:[{title:(0,o.jsx)(s.SizableText,{children:(0,o.jsx)(s.SizableText,{children:t.formatMessage({id:i.ETranslations.earn_earn_up_to_number_per_year},{number:(0,o.jsxs)(s.SizableText,{color:"$textInteractive",children:[e,"%"]})})})}),description:t.formatMessage({id:i.ETranslations.earn_earn_up_to_number_per_year_desc})},{title:(0,o.jsx)(s.SizableText,{children:t.formatMessage({id:i.ETranslations.earn_receive_token},{token:(0,o.jsx)(s.SizableText,{color:"$textInteractive",children:"stMATIC"})})}),description:t.formatMessage({id:i.ETranslations.earn_receive_stmatic_desc})},{title:(0,o.jsx)(s.SizableText,{children:t.formatMessage({id:i.ETranslations.earn_rewards_updated_daily},{daily:(0,o.jsx)(s.SizableText,{color:"$textInteractive",children:t.formatMessage({id:i.ETranslations.earn_daily})})})}),description:t.formatMessage({id:i.ETranslations.earn_rewards_updated_daily_stmatic_desc})}]})},MaticWithdrawShouldUnderstand=function(){var e=(0,a.A)();return(0,o.jsx)(ShouldUnderstand,{title:e.formatMessage({id:i.ETranslations.earn_lido_token_redemption},{token:"MATIC"}),subtitle:e.formatMessage({id:i.ETranslations.earn_withdrawal_process_desc}),items:[{title:e.formatMessage({id:i.ETranslations.earn_request_withdrawal}),description:e.formatMessage({id:i.ETranslations.earn_request_withdrawal_stmatic_desc})},{title:e.formatMessage({id:i.ETranslations.earn_receive_lido_nft}),description:e.formatMessage({id:i.ETranslations.earn_receive_lido_nft_desc},{token:"MATIC"})},{title:e.formatMessage({id:i.ETranslations.earn_claim}),description:e.formatMessage({id:i.ETranslations.earn_claim_token_desc},{token:"MATIC"})}]})}},574687:(e,t,n)=>{n.d(t,{m:()=>NftListItemStatus});var a=n(586330),s=n(514041),i=n(908867),r=n(490343),o=n(391944),l=n(254491),c=n(831085),NftListItemStatus=function({amount:e,symbol:t,tokenImageUri:n,onClaim:d,status:u}){var x=(0,i.A)(),h=(0,s.useMemo)((function(){return{claimable:l.ETranslations.earn_token_is_claimable,pending:l.ETranslations.earn_token_is_pending,staked:l.ETranslations.earn_token_is_staked}[u]}),[u]),[m,f]=(0,s.useState)(!1),_=(0,s.useCallback)((0,a.A)((function*(){try{f(!0),yield d?.()}finally{f(!1)}})),[d]);return(0,c.jsxs)(r.XStack,{justifyContent:"space-between",children:[(0,c.jsxs)(r.XStack,{alignItems:"center",children:[(0,c.jsx)(o.o,{size:"xs",tokenImageUri:n}),(0,c.jsxs)(r.XStack,{ml:"$2",space:"$1",alignItems:"center",children:[(0,c.jsx)(r.SizableText,{size:"$bodyLg",children:x.formatMessage({id:h},{token:(0,c.jsxs)(r.SizableText,{children:[(0,c.jsx)(r.NumberSizeableText,{size:"$bodyLgMedium",formatter:"balance",children:e}),(0,c.jsxs)(r.SizableText,{size:"$bodyLgMedium",children:[" ",t]})]})})}),"pending"===u?(0,c.jsx)(r.Popover,{title:x.formatMessage({id:l.ETranslations.earn_stake_release_period}),placement:"bottom-start",renderTrigger:(0,c.jsx)(r.IconButton,{variant:"tertiary",size:"small",icon:"QuestionmarkOutline"}),renderContent:(0,c.jsx)(r.SizableText,{p:"$5",$gtMd:{size:"$bodyMd"},children:x.formatMessage({id:l.ETranslations.earn_stake_release_period_desc})})}):null]})]}),d?(0,c.jsx)(r.Button,{size:"small",variant:"primary",loading:m,onPress:_,children:x.formatMessage({id:l.ETranslations.earn_claim})}):null]})}},138584:(e,t,n)=>{n.d(t,{b:()=>PageFrame});var a=n(908867),s=n(490343),i=n(254491),r=n(831085),PageErrOccurred=function({onPress:e}){var t=(0,a.A)();return(0,r.jsx)(s.Empty,{icon:"ErrorOutline",title:t.formatMessage({id:i.ETranslations.global_an_error_occurred}),description:t.formatMessage({id:i.ETranslations.global_an_error_occurred_desc}),buttonProps:{onPress:e,children:t.formatMessage({id:i.ETranslations.global_refresh})}})},PageFrame=function({children:e,loading:t,LoadingSkeleton:n,error:a,onRefresh:s}){return t?n?(0,r.jsx)(n,{}):null:a?(0,r.jsx)(PageErrOccurred,{onPress:s}):(0,r.jsx)(r.Fragment,{children:e})}},342094:(e,t,n)=>{n.d(t,{p:()=>ProtocolIntro});var a=n(514041),s=n(908867),i=n(490343),r=n(391944),o=n(254491),l=n(117746),c=n(831085),ProtocolIntro=function({protocolLogoUrl:e,protocolText:t,externalUrl:n}){var d=(0,a.useCallback)((function(){(0,l.Dr)(n)}),[n]),u=(0,s.A)();return(0,c.jsxs)(i.YStack,{mt:"$12",children:[(0,c.jsx)(i.SizableText,{size:"$headingLg",children:u.formatMessage({id:o.ETranslations.global_info})}),(0,c.jsxs)(i.XStack,{mt:"$5",children:[(0,c.jsxs)(i.YStack,{flex:1,children:[(0,c.jsx)(i.SizableText,{color:"$textSubdued",size:"$bodyMd",mb:"$1",children:u.formatMessage({id:o.ETranslations.global_protocol})}),(0,c.jsxs)(i.XStack,{alignItems:"center",children:[(0,c.jsx)(r.o,{size:"xs",tokenImageUri:e}),(0,c.jsx)(i.SizableText,{px:"$1",size:"$bodyLgMedium"}),(0,c.jsx)(i.Button,{iconAfter:"OpenOutline",variant:"tertiary",size:"medium",color:"$text",onPress:d,children:t})]})]}),(0,c.jsxs)(i.YStack,{flex:1,children:[(0,c.jsx)(i.SizableText,{color:"$textSubdued",size:"$bodyMd",mb:"$1",children:u.formatMessage({id:o.ETranslations.global_network})}),(0,c.jsx)(i.SizableText,{size:"$bodyLgMedium",children:"Ethereum"})]})]})]})}},917523:(e,t,n)=>{n.d(t,{T:()=>StakingTransactionIndicator});var a=n(586330),s=n(514041),i=n(908867),r=n(490343),o=n(60153),l=n(498356),c=n(394764),d=n(911998),u=n(153763),x=n(254491),h=n(831085),PendingIndicator=function({num:e,onPress:t}){var n=(0,i.A)();return(0,h.jsxs)(r.Badge,{badgeType:"info",badgeSize:"lg",onPress:t,children:[(0,h.jsx)(r.Stack,{borderRadius:"$full",p:3,bg:"$borderInfo",children:(0,h.jsx)(r.Stack,{w:"$1.5",h:"$1.5",borderRadius:"$full",bg:"$iconInfo"})}),(0,h.jsx)(r.Badge.Text,{pl:"$2",children:e>1?`${e} ${n.formatMessage({id:x.ETranslations.global_pending})} `:n.formatMessage({id:x.ETranslations.global_pending})})]})},StakingActivityIndicator=function({num:e,onPress:t}){var n=(0,l.A)(),a=(0,s.useCallback)((function(){return e>0?(0,h.jsx)(PendingIndicator,{num:e,onPress:t}):(0,h.jsx)(r.IconButton,{variant:"tertiary",size:"medium",icon:"ClockTimeHistoryOutline",onPress:t})}),[e,t]);return(0,s.useEffect)((function(){n.setOptions({headerRight:a})}),[n,a,e]),null},StakingTransactionIndicator=function({accountId:e,networkId:t,stakeTag:n,onRefresh:i,onPress:r}){var{result:l,run:x}=(0,d.yk)((0,a.A)((function*(){return o.A.serviceStaking.fetchLocalStakingHistory({accountId:e,networkId:t,stakeTag:n})})),[e,t,n],{initResult:[]}),m=l.length>0,f=(0,c.Z)(m),_=(0,u.E)();return(0,s.useEffect)((function(){_&&x()}),[_,x]),(0,s.useEffect)((function(){if(m){var n=setInterval((0,a.A)((function*(){yield o.A.serviceHistory.fetchAccountHistory({accountId:e,networkId:t}),yield x()})),15e3);return function(){return clearInterval(n)}}}),[m,e,t,x]),(0,s.useEffect)((function(){!m&&f&&i?.()}),[f,m,i]),(0,h.jsx)(StakingActivityIndicator,{num:l.length,onPress:r})}},14641:(e,t,n)=>{n.d(t,{A:()=>StakingProfit});var a=n(908867),s=n(490343),i=n(391944),r=n(254491),o=n(831085),ProfitContentItem=function({title:e,value:t}){return(0,o.jsxs)(s.YStack,{$md:{width:"50%"},$gtMd:{width:"25%"},mb:"$2",children:[(0,o.jsx)(s.SizableText,{size:"$bodyMd",color:"$textSubdued",children:e}),(0,o.jsxs)(s.SizableText,{size:"$bodyLgMedium",color:"$textInteractive",children:[Number(t).toFixed(2),"%"]})]})},StakingProfit=function({apr:e,tokenImageUrl:t,tokenSymbol:n}){var l=(0,a.A)();return(0,o.jsxs)(s.YStack,{mt:"$12",children:[(0,o.jsx)(s.SizableText,{size:"$headingLg",children:l.formatMessage({id:r.ETranslations.global_profit})}),(0,o.jsxs)(s.XStack,{mt:"$5",space:"$1",children:[(0,o.jsx)(i.o,{size:"sm",tokenImageUri:t}),(0,o.jsx)(s.SizableText,{size:"$bodyLgMedium",children:n.toUpperCase()}),(0,o.jsx)(s.Badge,{badgeType:"default",badgeSize:"sm",children:l.formatMessage({id:r.ETranslations.earn_updated_daily})})]}),(0,o.jsxs)(s.Stack,{mt:"$5",flexDirection:"row",flexWrap:"wrap",children:[(0,o.jsx)(ProfitContentItem,{value:e/365,title:l.formatMessage({id:r.ETranslations.earn_daily})}),(0,o.jsx)(ProfitContentItem,{value:e/52,title:l.formatMessage({id:r.ETranslations.earn_weekly})}),(0,o.jsx)(ProfitContentItem,{value:e/12,title:l.formatMessage({id:r.ETranslations.earn_monthly})}),(0,o.jsx)(ProfitContentItem,{value:e,title:l.formatMessage({id:r.ETranslations.earn_annually})})]})]})}},592286:(e,t,n)=>{n.d(t,{b:()=>OverviewSkeleton,u:()=>HistorySkeleton});var a=n(490343),s=n(831085),HistorySkeletonItem=function(){return(0,s.jsxs)(a.XStack,{justifyContent:"space-between",children:[(0,s.jsxs)(a.XStack,{children:[(0,s.jsx)(a.Skeleton,{width:40,height:40}),(0,s.jsxs)(a.YStack,{pl:"$2",justifyContent:"space-around",children:[(0,s.jsx)(a.Skeleton,{height:12,width:60}),(0,s.jsx)(a.Skeleton,{height:12,width:50})]})]}),(0,s.jsxs)(a.YStack,{pl:"$2",justifyContent:"space-around",alignItems:"flex-end",children:[(0,s.jsx)(a.Skeleton,{height:12,width:60}),(0,s.jsx)(a.Skeleton,{height:12,width:50})]})]})},HistorySkeleton=function(){return(0,s.jsxs)(a.YStack,{width:"100%",px:"$5",space:"$5",children:[(0,s.jsx)(HistorySkeletonItem,{}),(0,s.jsx)(HistorySkeletonItem,{}),(0,s.jsx)(HistorySkeletonItem,{})]})},OverviewSkeletonItem=function(){return(0,s.jsxs)(a.YStack,{$md:{width:"50%"},$gtMd:{width:"25%"},mb:"$2",children:[(0,s.jsx)(a.Skeleton,{width:48,height:12}),(0,s.jsx)(a.Stack,{h:"$1"}),(0,s.jsx)(a.Skeleton,{width:100,height:12})]})},OverviewSkeleton=function(){return(0,s.jsxs)(a.Stack,{px:"$5",children:[(0,s.jsxs)(a.YStack,{children:[(0,s.jsx)(a.Skeleton,{width:100,height:16}),(0,s.jsx)(a.Stack,{h:"$4"}),(0,s.jsx)(a.Skeleton,{width:160,height:28}),(0,s.jsx)(a.Stack,{h:"$7"}),(0,s.jsx)(a.Skeleton,{width:120,height:12})]}),(0,s.jsxs)(a.YStack,{mt:"$16",children:[(0,s.jsx)(a.Skeleton,{width:60,height:12}),(0,s.jsxs)(a.XStack,{mt:"$5",children:[(0,s.jsxs)(a.YStack,{flex:1,children:[(0,s.jsx)(a.Skeleton,{width:48,height:12}),(0,s.jsx)(a.Stack,{h:"$1"}),(0,s.jsx)(a.Skeleton,{width:100,height:12})]}),(0,s.jsxs)(a.YStack,{flex:1,children:[(0,s.jsx)(a.Skeleton,{width:48,height:12}),(0,s.jsx)(a.Stack,{h:"$1"}),(0,s.jsx)(a.Skeleton,{width:100,height:12})]})]})]}),(0,s.jsxs)(a.Stack,{mt:"$16",flexDirection:"row",flexWrap:"wrap",children:[(0,s.jsx)(OverviewSkeletonItem,{}),(0,s.jsx)(OverviewSkeletonItem,{}),(0,s.jsx)(OverviewSkeletonItem,{}),(0,s.jsx)(OverviewSkeletonItem,{})]}),(0,s.jsxs)(a.Stack,{mt:"$16",children:[(0,s.jsx)(a.Skeleton,{width:60,height:12}),(0,s.jsxs)(a.YStack,{space:"$5",mt:"$5",children:[(0,s.jsx)(a.Skeleton,{width:280,height:12}),(0,s.jsx)(a.Skeleton,{width:280,height:12}),(0,s.jsx)(a.Skeleton,{width:280,height:12})]})]})]})}},918778:(e,t,n)=>{n.d(t,{Kb:()=>useLidoMaticStake,Yv:()=>useLidoMaticClaim,ws:()=>useLidoMaticWithdraw});var a=n(324586),s=n(586330),i=n(514041),r=n(60153),o=n(927799);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function useLidoMaticStake({accountId:e,networkId:t}){var n,{navigationToSendConfirm:a}=(0,o.E)({accountId:e,networkId:t});return(0,i.useCallback)((n=(0,s.A)((function*({amount:n,stakingInfo:s,onSuccess:i,onFail:o}){var l=yield r.A.serviceAccount.getAccount({accountId:e,networkId:t}),c=yield r.A.serviceStaking.buildLidoMaticStakingTransaction({amount:n,networkId:t});yield a({encodedTx:_objectSpread(_objectSpread({},c),{},{from:l.address}),stakingInfo:s,onSuccess:i,onFail:o})})),function(e){return n.apply(this,arguments)}),[a,e,t])}function useLidoMaticWithdraw({accountId:e,networkId:t}){var n,{navigationToSendConfirm:a}=(0,o.E)({accountId:e,networkId:t});return(0,i.useCallback)((n=(0,s.A)((function*({amount:n,stakingInfo:s,onSuccess:i,onFail:o}){var l=yield r.A.serviceAccount.getAccount({accountId:e,networkId:t}),c=yield r.A.serviceStaking.buildLidoMaticWithdrawalTransaction({amount:n,networkId:t});yield a({encodedTx:_objectSpread(_objectSpread({},c),{},{from:l.address}),stakingInfo:s,onSuccess:i,onFail:o})})),function(e){return n.apply(this,arguments)}),[e,t,a])}function useLidoMaticClaim({accountId:e,networkId:t}){var n,{navigationToSendConfirm:a}=(0,o.E)({accountId:e,networkId:t});return(0,i.useCallback)((n=(0,s.A)((function*({tokenId:n,stakingInfo:s,onSuccess:i,onFail:o}){var l=yield r.A.serviceAccount.getAccount({accountId:e,networkId:t}),c=yield r.A.serviceStaking.buildLidoMaticClaimTransaction({tokenId:n,networkId:t});yield a({encodedTx:_objectSpread(_objectSpread({},c),{},{from:l.address}),stakingInfo:s,onSuccess:i,onFail:o})})),function(e){return n.apply(this,arguments)}),[a,e,t])}},505235:(e,t,n)=>{n.r(t),n.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var a=n(586330),s=n(514041),i=n(241440),r=n(908867),o=n(490343),l=n(60153),c=n(498356),d=n(326745),u=n(911998),x=n(604343),h=n(254491),m=n(757559),f=n(550082),_=n(664353),g=n(168489),k=n(574687),j=n(138584),b=n(342094),p=n(917523),S=n(14641),T=n(592286),w=n(918778),M=n(827843),v=n(831085),ListItemStaked=function({amount:e,matic2StMatic:t}){var n=(0,i.A)(e).div(t).toFixed();return(0,v.jsx)(k.m,{amount:n,symbol:"MATIC",status:"staked",tokenImageUri:M.LN})},ListItemPending=function({requests:e,matic2StMatic:t}){var n=(0,s.useMemo)((function(){return e.reduce((function(e,t){return e+Number(t.amount)}),0)}),[e]);if(0===e.length)return null;var a=(0,i.A)(n).div(t).toFixed();return(0,v.jsx)(k.m,{amount:a,symbol:"MATIC",status:"pending",tokenImageUri:M.LN})},ListItemClaim=function({requests:e,accountId:t,networkId:n,token:r,matic2StMatic:o}){var l=(0,c.A)(),d=(0,w.Yv)({accountId:t,networkId:n}),u=(0,s.useMemo)((function(){return e.reduce((function(e,t){return e+Number(t.amount)}),0)}),[e]),x=(0,i.A)(u).div(o).toFixed(),h=(0,s.useCallback)((0,a.A)((function*(){1===e.length?yield d({tokenId:Number(e[0].id),stakingInfo:{label:f.Z.Claim,protocol:"lido",tags:["lido-matic"],receive:{token:r.info,amount:String(u)}}}):l.push(m.Ax.MaticLidoClaim,{accountId:t,networkId:n,requests:e,token:r.info})})),[d,e,l,t,n,r,u]);return 0===e.length?null:(0,v.jsx)(k.m,{onClaim:h,amount:String(x),symbol:"MATIC",status:"claimable",tokenImageUri:M.LN})},MaticLidoOverviewContent=function({networkId:e,accountId:t,overview:n,apr:d=4,onRefresh:u}){var{matic:f,stMatic:k,requests:j,matic2StMatic:T}=n,w=(0,c.A)(),y=(0,r.A)(),[$,I]=(0,s.useState)(!1),E=(0,s.useCallback)((0,a.A)((function*(){var n;o.Dialog.show({renderContent:(0,v.jsx)(g.wF,{apr:d}),showCancelButton:!1,onConfirmText:y.formatMessage({id:h.ETranslations.global_got_it}),onConfirm:(n=(0,a.A)((function*({close:n}){I(!0);try{yield n();var{allowanceParsed:a}=yield l.A.serviceStaking.fetchTokenAllowance({accountId:t,networkId:e,spenderAddress:k.info.address,tokenAddress:f.info.address});w.push(m.Ax.MaticLidoStake,{accountId:t,networkId:e,balance:f.balanceParsed,price:f.price,token:f.info,stToken:k.info,currentAllowance:a,rate:T,apr:d})}finally{I(!1)}})),function onConfirm(e){return n.apply(this,arguments)})})})),[w,t,e,f,d,k,T,y]),z=(0,s.useCallback)((0,a.A)((function*(){o.Dialog.show({renderContent:(0,v.jsx)(g.U6,{}),showCancelButton:!1,onConfirmText:y.formatMessage({id:h.ETranslations.global_got_it}),onConfirm:function(){w.push(m.Ax.MaticLidoWithdraw,{accountId:t,networkId:e,balance:k.balanceParsed,price:k.price,token:k.info,receivingToken:f.info,rate:T})}})})),[t,e,w,k,f,T,y]),A=(0,s.useMemo)((function(){return new i.A(k.balanceParsed).gt(0)}),[k.balanceParsed]),C=(0,s.useMemo)((function(){return(0,i.A)(k.balanceParsed).multipliedBy(k.price).toFixed()}),[k]),[{currencyInfo:{symbol:P}}]=(0,x.useSettingsPersistAtom)(),L=(0,s.useMemo)((function(){return{pending:j.filter((function(e){return!e.claimable})),finished:j.filter((function(e){return e.claimable}))}}),[j]);return(0,v.jsxs)(o.Stack,{children:[(0,v.jsxs)(o.YStack,{px:"$5",pt:"$5",children:[(0,v.jsxs)(o.Stack,{children:[(0,v.jsx)(o.SizableText,{size:"$headingLg",children:y.formatMessage({id:h.ETranslations.earn_staked_value})}),(0,v.jsx)(o.NumberSizeableText,{size:"$heading3xl",formatter:"value",formatterOptions:{currency:P},children:C})]}),(0,v.jsx)(o.XStack,{mt:"$2",space:"$1",children:(0,v.jsx)(o.SizableText,{size:"$bodyMd",color:"$textSubdued",children:y.formatMessage({id:h.ETranslations.earn_token_available_to_stake},{token:(0,v.jsxs)(o.SizableText,{children:[(0,v.jsx)(o.NumberSizeableText,{size:"$bodyMd",formatter:"balance",children:f.balanceParsed}),(0,v.jsxs)(o.SizableText,{size:"$bodyMd",color:"$textSubdued",children:[" ",f.info.symbol]})]})})})}),(0,v.jsxs)(o.YStack,{space:"$2",mt:"$5",children:[(0,v.jsx)(ListItemStaked,{amount:k.balanceParsed,matic2StMatic:T}),(0,v.jsx)(ListItemPending,{requests:L.pending,matic2StMatic:T}),(0,v.jsx)(ListItemClaim,{requests:L.finished,accountId:t,networkId:e,token:f,matic2StMatic:T})]}),(0,v.jsx)(b.p,{protocolText:"Lido",protocolLogoUrl:M.a3,externalUrl:M.$e}),(0,v.jsx)(S.A,{apr:d,tokenImageUrl:f.info.logoURI,tokenSymbol:f.info.symbol})]}),(0,v.jsx)(o.Stack,{children:(0,v.jsx)(_.o,{})}),(0,v.jsx)(o.Page.Footer,{onConfirmText:y.formatMessage({id:h.ETranslations.earn_stake}),confirmButtonProps:{loading:$,variant:"primary",onPress:E},onCancelText:y.formatMessage({id:h.ETranslations.earn_redeem}),cancelButtonProps:A?{onPress:z}:void 0}),(0,v.jsx)(p.T,{accountId:t,networkId:e,stakeTag:"lido-matic",onRefresh:u,onPress:function(){return w.push(m.Ax.MaticLidoHistory,{accountId:t,networkId:e})}})]})};const __WEBPACK_DEFAULT_EXPORT__=function(){var e=(0,d.u)(),{accountId:t,networkId:n}=e.params,{result:s,isLoading:i,run:c}=(0,u.yk)((0,a.A)((function*(){var e=l.A.serviceStaking.fetchLidoMaticOverview({accountId:t,networkId:n}),a=l.A.serviceStaking.getApr("matic"),[s,i]=yield Promise.all([e,a]);return{overview:s,apr:i}})),[t,n],{watchLoading:!0}),x=(0,r.A)();return(0,v.jsxs)(o.Page,{scrollEnabled:!0,children:[(0,v.jsx)(o.Page.Header,{title:x.formatMessage({id:h.ETranslations.earn_stake_token},{token:"MATIC"})}),(0,v.jsx)(o.Page.Body,{children:(0,v.jsx)(j.b,{LoadingSkeleton:T.b,loading:Boolean(void 0===s&&!0===i),error:Boolean(void 0===s&&!1===i),onRefresh:c,children:s?(0,v.jsx)(MaticLidoOverviewContent,{accountId:t,networkId:n,overview:s.overview,apr:s.apr[0]?.apr,onRefresh:c}):null})})]})}},827843:(e,t,n)=>{n.d(t,{$e:()=>r,Cp:()=>s,LN:()=>i,a3:()=>a});var a="https://uni.onekey-asset.com/static/logo/Lido.png",s="https://uni.onekey-asset.com/static/chain/eth.png",i="https://uni.onekey-asset.com/static/chain/polygon.png",r="https://lido.fi/"},550082:(e,t,n)=>{n.d(t,{Z:()=>a});var a=function(e){return e.Stake="Stake",e.Claim="Claim",e.Redeem="Redeem",e}({})}}]);