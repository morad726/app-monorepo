"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[13728],{13728:(e,t,o)=>{o.r(t),o.d(t,{default:()=>ExportPrivateKeys});var r=o(324586),n=o(586330),a=o(514041),i=o(908867),s=o(578104),c=o(490343),l=o(60153),d=o(325809),u=o(575995),p=o(498356),y=o(911998),f=o(162616),b=o(848312),w=o(319357),m=o(16853),k=o(254491),x=o(491180),g=o(482407),h=o(714191),v=o(831085);function CopyPrivateKeysDialog({defaultValue:e,rawKeyContent:t,showCheckBox:o}){var r=(0,i.A)(),[s,l]=(0,a.useState)(e),d=(0,a.useCallback)((function(e){l(!!e)}),[]),u=(0,c.useClipboard)();return(0,v.jsxs)(v.Fragment,{children:[o?(0,v.jsx)(c.Checkbox,{value:s,onChange:d,label:r.formatMessage({id:k.ETranslations.global_private_key_copy_check})}):null,(0,v.jsx)(c.Dialog.Footer,{onConfirmText:r.formatMessage({id:k.ETranslations.global_copy}),confirmButtonProps:{disabled:o&&!s},onConfirm:(0,n.A)((function*(){u.copyText(t)}))})]})}function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach((function(t){(0,r.A)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function ExportPrivateKeysPage({indexedAccount:e,account:t,accountName:o,title:r,exportType:h}){var C,j,{activeAccount:A}=(0,f.LH)({num:0}),T=(0,p.A)(),_=(0,i.A)(),E=(0,c.useMedia)(),[P,K]=(0,a.useState)(!0),O=(0,c.useClipboard)(),M=(0,a.useMemo)((function(){return Boolean(t&&!e&&x.A.isImportedAccount({accountId:t?.id}))}),[t,e]),S=(0,a.useMemo)((function(){return Boolean(t&&!e&&x.A.isWatchingAccount({accountId:t?.id}))}),[t,e]),I=!!e,{result:N=[]}=(0,y.yk)((0,n.A)((function*(){return M&&t?.createAtNetwork||S&&t?.createAtNetwork?[t?.createAtNetwork]:(yield l.A.serviceNetwork.getSupportExportAccountKeyNetworks({exportType:h})).map((function(e){return e.network.id}))})),[t?.createAtNetwork,h,M,S]),$=(0,a.useMemo)((function(){return M||S?t?.createAtNetwork||(0,b.V$)().btc:A?.network?.id||(0,b.V$)().btc}),[t?.createAtNetwork,A?.network?.id,M,S]),D=(0,c.useForm)({values:{networkId:$,deriveType:null!=(C=A?.deriveType)?C:void 0,rawKeyContent:""},mode:"onChange",reValidateMode:"onBlur"}),B=D.watch("networkId"),V=D.watch("deriveType"),F=D.watch("rawKeyContent"),z=(0,a.useCallback)((function(){D.setValue("rawKeyContent",""),D.clearErrors("rawKeyContent"),K(!0)}),[D]),q=(0,a.useCallback)((j=(0,n.A)((function*({accountId:e,indexedAccountId:t,networkId:r,deriveType:n}){if(z(),(t||e)&&r&&(!I||n))try{var a=yield l.A.serviceAccount.exportAccountKeysByType({indexedAccountId:t,accountId:e,networkId:r,deriveType:n||void 0,exportType:h,accountName:o});a&&D.setValue("rawKeyContent",a)}catch(e){var i;throw[w.d.PasswordPromptDialogCancel].includes(e?.className)||D.setError("rawKeyContent",null!=(i=m.Ay.toPlainErrorObject(e))?i:{message:"error"}),e}})),function(e){return j.apply(this,arguments)}),[o,h,D,I,z]),H=(0,s.YQ)(q,600),W=(0,a.useCallback)((0,n.A)((function*({noDebouncedCall:o}={}){z();var r=o?q:H;yield r({accountId:t?.id,indexedAccountId:e?.id,networkId:B||"",deriveType:V})})),[t?.id,V,q,H,e?.id,B,z]),Y=(0,a.useMemo)((function(){return[{iconName:P?"EyeOutline":"EyeOffOutline",onPress:(t=(0,n.A)((function*(){F||(yield W({noDebouncedCall:!0})),K(!P)})),function onPress(){return t.apply(this,arguments)})},{iconName:"Copy3Outline",onPress:(e=(0,n.A)((function*(){F||(yield W({noDebouncedCall:!0})),"privateKey"===h?function showCopyPrivateKeysDialog({title:e,description:t,defaultChecked:o,rawKeyContent:r,showCheckBox:n}){return c.Dialog.show({icon:"ErrorOutline",tone:"destructive",title:e,description:t,renderContent:(0,v.jsx)(CopyPrivateKeysDialog,{rawKeyContent:r,defaultValue:o,showCheckBox:n})})}({title:_.formatMessage({id:k.ETranslations.global_private_key_copy}),description:_.formatMessage({id:k.ETranslations.global_private_key_copy_information}),showCheckBox:!0,defaultChecked:!1,rawKeyContent:D.getValues("rawKeyContent")||""}):O.copyText(D.getValues("rawKeyContent"))})),function onPress(){return e.apply(this,arguments)})}];var e,t}),[O,h,D,_,F,W,P]);(0,a.useEffect)((function(){B&&D.setValue("deriveType","")}),[D,B]),(0,a.useEffect)((function(){(0,g.Gb)(B,V),z()}),[V,B,z]);var G=(0,a.useMemo)((function(){var e="key";return"publicKey"===h&&(e=_.formatMessage({id:k.ETranslations.global_public_key})),"privateKey"===h&&(e=_.formatMessage({id:k.ETranslations.global_private_key})),e}),[h,_]);return(0,v.jsxs)(c.Page,{scrollEnabled:!0,safeAreaEnabled:!0,children:[(0,v.jsx)(c.Page.Header,{title:r}),(0,v.jsxs)(c.Page.Body,{p:"$4",children:[(0,v.jsxs)(c.Form,{form:D,children:[(0,v.jsx)(c.Form.Field,{label:_.formatMessage({id:k.ETranslations.global_network}),name:"networkId",disabled:M,children:(0,v.jsx)(d.YS,{disabled:M,editable:!M,networkIds:N})}),M||S?null:(0,v.jsx)(u.FB,{fieldName:"deriveType",networkId:B}),(0,v.jsx)(c.Form.Field,{label:G,name:"rawKeyContent",children:(0,v.jsx)(c.Input,{size:E.gtMd?"medium":"large",editable:!1,placeholder:"••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••",secureTextEntry:P,addOns:Y,displayAsMaskWhenEmptyValue:!0})})]}),"privateKey"===h?(0,v.jsxs)(c.Stack,{py:"$4",children:[(0,v.jsx)(c.Stack,{h:"$4"}),(0,v.jsx)(c.SizableText,{color:"$textSubdued",size:"$headingSm",children:_.formatMessage({id:k.ETranslations.faq_private_key})}),(0,v.jsx)(c.SizableText,{color:"$textSubdued",size:"$bodyMd",children:_.formatMessage({id:k.ETranslations.faq_private_key_desc})}),(0,v.jsx)(c.Stack,{h:"$4"}),(0,v.jsx)(c.SizableText,{color:"$textSubdued",size:"$headingSm",children:_.formatMessage({id:k.ETranslations.faq_private_key_keep})}),(0,v.jsx)(c.SizableText,{color:"$textSubdued",size:"$bodyMd",children:_.formatMessage({id:k.ETranslations.faq_private_key_keep_desc})})]}):null,null]}),(0,v.jsx)(c.Page.Footer,{onConfirmText:_.formatMessage({id:k.ETranslations.global_done}),confirmButtonProps:{disabled:!1},onConfirm:(0,n.A)((function*(){T.popStack()}))})]})}function ExportPrivateKeys({route:e}){return(0,v.jsx)(d.b8,{enabledNum:[0],config:{sceneName:h.Zs.home,sceneUrl:""},children:(0,v.jsx)(ExportPrivateKeysPage,_objectSpread({},e.params))})}}}]);