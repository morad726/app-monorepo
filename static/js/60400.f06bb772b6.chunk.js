(self.webpackChunkweb=self.webpackChunkweb||[]).push([[60400],{186069:(e,t,n)=>{"use strict";n.d(t,{Y:()=>useCopyAccountAddress});var r=n(586330),o=n(514041),c=n(490343),a=n(757559),d=n(491180),i=n(60153),s=n(498356),useCopyAccountAddress=function(){var e,t=(0,s.A)(),{copyText:n}=(0,c.useClipboard)();return(0,o.useCallback)((e=(0,r.A)((function*({accountId:e,networkId:r,deriveType:o}){if(d.A.isHwAccount({accountId:e})||d.A.isQrAccount({accountId:e})){var c=yield i.A.serviceNetwork.getDeriveInfoOfNetwork({networkId:r,deriveType:o}),s=d.A.getWalletIdFromAccountId({accountId:e});t.pushModal(a.ry.ReceiveModal,{screen:a.MD.ReceiveToken,params:{networkId:r,accountId:e,walletId:s,deriveInfo:c,deriveType:o}})}else{var u=yield i.A.serviceAccount.getAccount({accountId:e,networkId:r});n(u.address)}})),function(t){return e.apply(this,arguments)}),[t,n])}},960400:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>DeriveTypesAddressPage});var r=n(586330),o=n(781936),c=n.n(o),a=n(514041),d=n(908867),i=n(490343),s=n(60153),u=n(791088),l=n(880590),v=n(186069),I=n(911998),p=n(604343),f=n(254491),y=n(491180),x=n(359395),A=n(831085),k=(0,a.createContext)({indexedAccountId:"",actionType:x.rI.Copy,tokenMap:{}}),DeriveTypesAddressItem=function({item:e}){var t,n,o,I,m=(0,d.A)(),b=(0,v.Y)(),[w,T]=(0,a.useState)(!1),{network:g,refreshLocalData:h,indexedAccountId:j,actionType:S,onSelected:M,token:C,tokenMap:P}=(0,a.useContext)(k),[D]=(0,p.useSettingsPersistAtom)();P&&(I=c()(P,(function(t,n){var r;return!(!e.account?.xpub||!n.includes(null!=(r=e.account?.xpub)?r:""))||!(!e.account?.address||!n.includes(e.account?.address))})));var O=e.account?y.A.shortenAddress({address:e.account.address}):m.formatMessage({id:f.ETranslations.wallet_no_address}),L=(0,a.useCallback)((0,r.A)((function*(){if(!g)throw new Error("network is empty");if(e.account)S===x.rI.Copy?yield b({accountId:e.account.id,networkId:g.id,deriveType:e.deriveType}):S===x.rI.Select&&M?.({account:e.account,deriveInfo:e.deriveInfo,deriveType:e.deriveType});else try{T(!0);var t=y.A.getWalletIdFromAccountId({accountId:j});yield s.A.serviceAccount.addHDOrHWAccounts({walletId:t,indexedAccountId:j,deriveType:e.deriveType,networkId:g.id}),i.Toast.success({title:m.formatMessage({id:f.ETranslations.global_success})}),h?.()}finally{T(!1)}})),[e.account,e.deriveType,e.deriveInfo,g,S,b,M,j,m,h]);return(0,A.jsxs)(u.c,{title:e.deriveInfo.label,subtitle:O,renderAvatar:(0,A.jsx)(l.vD,{logoURI:null!=(t=g?.logoURI)?t:"",size:"$10"}),onPress:L,disabled:w,children:[w?(0,A.jsx)(i.Stack,{p:"$0.5",children:(0,A.jsx)(i.Spinner,{})}):null,w||S!==x.rI.Copy?null:(0,A.jsx)(i.Icon,{name:e.account?"Copy3Outline":"PlusLargeOutline",color:"$iconSubdued"}),!w&&S===x.rI.Select&&e.account?(0,A.jsxs)(i.YStack,{children:[(0,A.jsx)(i.NumberSizeableText,{formatter:"balance",formatterOptions:{tokenSymbol:C?.symbol},numberOfLines:1,textAlign:"right",size:"$bodyLgMedium",children:null!=(n=I?.balanceParsed)?n:0}),(0,A.jsx)(i.NumberSizeableText,{formatter:"value",formatterOptions:{currency:D.currencyInfo.symbol},size:"$bodyMd",color:"$textSubdued",textAlign:"right",children:null!=(o=I?.fiatValue)?o:0})]}):null]})},DeriveTypesAddress=function({items:e}){var t=(0,a.useCallback)((function({item:e}){return(0,A.jsx)(DeriveTypesAddressItem,{item:e})}),[]);return(0,A.jsx)(i.Stack,{flex:1,children:(0,A.jsx)(i.ListView,{data:e,renderItem:t})})};function DeriveTypesAddressPage({route:e}){var t,n=(0,d.A)(),{indexedAccountId:r,networkId:o,actionType:c,onUnmounted:u,onSelected:l,token:v,tokenMap:p}=e.params,{result:y,run:x}=(0,I.yk)((function(){return s.A.serviceAccount.getNetworkAccountsInSameIndexedAccountIdWithDeriveTypes({networkId:o,indexedAccountId:r})}),[o,r]),m=(0,a.useMemo)((function(){return{network:y?.network,refreshLocalData:x,indexedAccountId:r,actionType:c,onSelected:l,tokenMap:p,token:v}}),[y?.network,x,r,c,l,p,v]);return(0,A.jsx)(k.Provider,{value:m,children:(0,A.jsxs)(i.Page,{onUnmounted:u,children:[(0,A.jsx)(i.Page.Header,{title:n.formatMessage({id:f.ETranslations.address_type})}),(0,A.jsx)(i.Page.Body,{children:(0,A.jsx)(DeriveTypesAddress,{items:null!=(t=y?.networkAccounts)?t:[]})})]})})}},277317:(e,t,n)=>{var r=n(103334),o=n(736529),c=n(781211);e.exports=function createFind(e){return function(t,n,a){var d=Object(t);if(!o(t)){var i=r(n,3);t=c(t),n=function(e){return i(d[e],e,d)}}var s=e(t,n,a);return s>-1?d[i?t[s]:s]:void 0}}},781936:(e,t,n)=>{var r=n(277317)(n(392154));e.exports=r},392154:(e,t,n)=>{var r=n(837250),o=n(103334),c=n(667642),a=Math.max;e.exports=function findIndex(e,t,n){var d=null==e?0:e.length;if(!d)return-1;var i=null==n?0:c(n);return i<0&&(i=a(d+i,0)),r(e,o(t,3),i)}}}]);