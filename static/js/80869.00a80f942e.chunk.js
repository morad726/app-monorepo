(self.webpackChunkweb=self.webpackChunkweb||[]).push([[80869],{632954:(t,e,n)=>{"use strict";n.d(e,{CONFIRMATION_COUNT:()=>S,DUST_AMOUNT:()=>v,EKaspaSignType:()=>k,MAX_BLOCK_SIZE:()=>A,MAX_ORPHAN_TX_MASS:()=>T,SignatureType:()=>K,SigningMethodType:()=>P,addressFromPublicKey:()=>addressFromPublicKey,isValidAddress:()=>isValidAddress,privateKeyFromBuffer:()=>privateKeyFromBuffer,privateKeyFromOriginPrivateKey:()=>privateKeyFromOriginPrivateKey,privateKeyFromWIF:()=>privateKeyFromWIF,publicKeyFromOriginPubkey:()=>publicKeyFromOriginPubkey,publicKeyFromX:()=>publicKeyFromX,selectUTXOs:()=>selectUTXOs,signTransaction:()=>signTransaction,toTransaction:()=>toTransaction});var r=n(499828),i=function(t){return t.PayToPublicKey="pubkey",t.PayToScriptHash="scripthash",t}({});function addressFromPublicKey(t,e){return r.Address.fromPublicKey(t,e).toString()}function isValidAddress(t,e,n=i.PayToPublicKey){return r.Address.isValid(t,e,n)}var a=n(646123),s=n.n(a),o=n(586330),u=n(230414),c=n(875669),p=n(507140),f=n(254491),l=n(830036),d=n(332084),y=n(241440),h=n(424754),g=n(209188),S=10,v=2e7,A=1e6,T=1e5,m=0,b=(n(187826),n(929296)),I=n(195309),_=n(972715);function _createSuper(t){var e=_isNativeReflectConstruct();return function _createSuperInternal(){var n,r=(0,_.A)(t);if(e){var i=(0,_.A)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,I.A)(this,n)}}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_isNativeReflectConstruct=function(){return!!t})()}var x=function(t){(0,b.A)(UnspentOutput,t);var e=_createSuper(UnspentOutput);function UnspentOutput(t){var n;return(n=e.call(this,t)).blockDaaScore=t.blockDaaScore,n.scriptPublicKeyVersion=t.scriptPublicKeyVersion,n.id=`${n.txId}${n.outputIndex}`,n.signatureOPCount=n.script.getSignatureOperationsCount(),n.mass=n.signatureOPCount*r.Transaction.MassPerSigOp,n.mass+=151*r.Transaction.MassPerTxByte,n.scriptPubKey=t.scriptPubKey,n}return UnspentOutput.prototype.toJSON=function toJSON(){return{txid:this.txId,address:this.address.toString(),vout:this.outputIndex,scriptPubKey:this.scriptPubKey,satoshis:this.satoshis,blockDaaScore:this.blockDaaScore,scriptPublicKeyVersion:this.scriptPublicKeyVersion}},UnspentOutput.fromJSON=function fromJSON(t){return new UnspentOutput(t)},(0,u.A)(UnspentOutput)}(r.Transaction.UnspentOutput),K=function(t){return t[t.SIGHASH_ALL=1]="SIGHASH_ALL",t[t.SIGHASH_NONE=2]="SIGHASH_NONE",t[t.SIGHASH_SINGLE=3]="SIGHASH_SINGLE",t[t.SIGHASH_FORKID=64]="SIGHASH_FORKID",t[t.SIGHASH_ANYONECANPAY=128]="SIGHASH_ANYONECANPAY",t}({}),P=function(t){return t.ECDSA="ecdsa",t.Schnorr="schnorr",t}({});function toTransaction(t){var{inputs:e,outputs:n,mass:i}=t,{address:a}=e[0]||{},{address:s,value:o}=n[0],u=new y.A(o);if(t.hasMaxSend&&(u=u.minus(i)),u.isLessThan(0))throw new p.He({message:"Insufficient Balance.",key:f.ETranslations.swap_page_button_insufficient_balance});var c=(new r.Transaction).from(e.map((function(t){return new x(t)}))).to(s,u.toNumber()).setVersion(0).fee(i).change(a?.toString());return c.inputs.forEach((function(t){t.sequenceNumber=m})),c}function _sign2(){return(_sign2=(0,o.A)((function*(t,e,n,i,a,s,o,u){var c=r.Transaction.Sighash.sighash(t,n,i,a,s,o);if("schnorr"===u){var p=(yield e.getPrivateKey()).toBuffer(),f=g.A.signSchnorr(c,p),y=(0,l.My)(f),S=r.crypto.Signature.fromString(h.A.stripHexPrefix(y)),v=S.toBuffer("schnorr").toString("hex");if(v.length<128)throw new Error(`Invalid Signature\nsecp256k1 sig:${h.A.hexlify(y)}\nSignature.fromString:${v}`);return S.compressed=!0,S.nhashtype=n,S}if("ecdsa"===u){var A=yield d._S(c,(yield e.getPrivateKey()).toBuffer()),T=h.A.hexlify(A),m=r.crypto.Signature.fromString(h.A.stripHexPrefix(T));return m.compressed=!0,m.nhashtype=n,m}}))).apply(this,arguments)}function getSignaturesWithInput(t,e,n,r){return _getSignaturesWithInput.apply(this,arguments)}function _getSignaturesWithInput(){return _getSignaturesWithInput=(0,o.A)((function*(t,e,n,i,a=K.SIGHASH_ALL|K.SIGHASH_FORKID,s=P.Schnorr){if(e instanceof r.Transaction.Input.PublicKey){var o=i.getPublicKey();if(o.toString()===h.A.hexlify(e?.output?.script?.getPublicKey(),{noPrefix:!0})){var u=yield function sign(t,e,n,r,i,a,s,o){return _sign2.apply(this,arguments)}(t,i,a,n,e.output?.script,e.output?.satoshis,void 0,s);return[new r.Transaction.Signature({publicKey:o,prevTxId:e.prevTxId,outputIndex:e.outputIndex,inputIndex:n,signature:u,sigtype:a})]}return[]}})),_getSignaturesWithInput.apply(this,arguments)}function _getSignatures(){return(_getSignatures=(0,o.A)((function*(t,e,n,r=K.SIGHASH_ALL|K.SIGHASH_FORKID,i=P.Schnorr){var a,s=[];for(var{input:o,index:u}of e)a=(yield getSignaturesWithInput(n,o,u,t,r,i))||[],s.push(...a);return s}))).apply(this,arguments)}function _sign3(){return _sign3=(0,o.A)((function*(t,e,n,r,i=P.ECDSA){var a=(yield function getSignatures(t,e,n){return _getSignatures.apply(this,arguments)}(t,e,n,r,i))||[];for(var s of a)n.inputs[s.inputIndex].addSignature(n,s,i);return n.toBuffer().toString("hex")})),_sign3.apply(this,arguments)}function signTransaction(t,e){for(var n=[],r=0;r<t.inputs.length;r+=1){var i=t.inputs[r];n.push({input:i,index:r})}return function _sign(t,e,n,r){return _sign3.apply(this,arguments)}(e,n,t,K.SIGHASH_ALL,P.Schnorr)}!function(){function RestAPIClient(t){this.axios=c.A.create({baseURL:t,timeout:3e4})}var t,e,n,i,a,l,d,y,h=RestAPIClient.prototype;h.getBlockdag=(t=(0,o.A)((function*(){try{return(yield this.axios.get("/info/blockdag",{headers:{"Content-Type":"application/json"}})).data}catch(t){return{networkName:"",blockCount:"0",headerCount:"0",virtualDaaScore:"0"}}})),function getBlockdag(){return t.apply(this,arguments)}),h.getNetworkInfo=(e=(0,o.A)((function*(){try{return(yield this.axios.get("/info/network",{headers:{"Content-Type":"application/json"}})).data}catch(t){return{networkName:"",blockCount:"0",headerCount:"0",virtualDaaScore:"0"}}})),function getNetworkInfo(){return e.apply(this,arguments)}),h.queryBalance=(n=(0,o.A)((function*(t){try{return(yield this.axios.get(`/addresses/${t}/balance`,{headers:{"Content-Type":"application/json"}})).data.balance}catch(t){return 0n}})),function queryBalance(t){return n.apply(this,arguments)}),h.queryUtxos=(i=(0,o.A)((function*(t){try{return(yield this.axios.get(`/addresses/${t}/utxos`,{headers:{"Content-Type":"application/json"}})).data}catch(t){return[]}})),function queryUtxos(t){return i.apply(this,arguments)}),h.sendRawTransaction=(a=(0,o.A)((function*(t){var e=function submitTransactionFromString(t){var e=new r.Transaction(t),{nLockTime:n,version:i}=e;return{transaction:{version:i,inputs:e.inputs.map((function(t){return{previousOutpoint:{transactionId:t.prevTxId.toString("hex"),index:t.outputIndex},signatureScript:t.script.toBuffer().toString("hex"),sequence:m,sigOpCount:1}})),outputs:e.outputs.map((function(t){return{amount:t.satoshis,scriptPublicKey:{scriptPublicKey:t.script.toBuffer().toString("hex"),version:0}}})),lockTime:n,fee:e.fee,subnetworkId:"0000000000000000000000000000000000000000"}}}(t);return this.axios.post("/transactions",e,{headers:{"Content-Type":"application/json"}}).then((function(t){return t.data.transactionId})).catch((function(t){var e=s()(t,"response.data.error","");if(e.match(/payment of \d+ is dust/))throw new p.He({message:e,key:f.ETranslations.send_amount_too_small});if(-1!==e.toLowerCase().indexOf("insufficient balance"))throw new p.He({message:e,key:f.ETranslations.earn_insufficient_balance});throw new p.He(e)}))})),function sendRawTransaction(t){return a.apply(this,arguments)}),h.getTransaction=(l=(0,o.A)((function*(t){return(yield this.axios.get(`/transactions/${t}?inputs=true&outputs=true&resolve_previous_outpoints=light`,{headers:{"Content-Type":"application/json"}})).data})),function getTransaction(t){return l.apply(this,arguments)}),h.getTransactions=(d=(0,o.A)((function*(t){return(yield this.axios.post("/transactions/search?resolve_previous_outpoints=light",{transactionIds:[...t]},{headers:{"Content-Type":"application/json"}})).data})),function getTransactions(t){return d.apply(this,arguments)}),h.getTransactionsByAddress=(y=(0,o.A)((function*(t){return(yield this.axios.get(`/addresses/${t}/full-transactions?limit=50&offset=0&resolve_previous_outpoints=light`,{headers:{"Content-Type":"application/json"}})).data})),function getTransactionsByAddress(t){return y.apply(this,arguments)}),(0,u.A)(RestAPIClient)}();var O=n(894191);function privateKeyFromWIF(t){return r.PrivateKey.fromWIF(t)}function privateKeyFromBuffer(t,e){return r.PrivateKey.fromBuffer(t,e)}function privateKeyFromOriginPrivateKey(t,e,n){var i=new Uint8Array(t),a=e;if(3===a[0]&&(i=g.A.privateNegate(i)),!i)throw new Error("Private key is required for tweaking signer!");var s=g.A.privateAdd(i,(0,O.q)(a.slice(1),void 0));return new r.PrivateKey((0,l.My)(s),n)}var w=n(901048).Buffer,k=function(t){return t.Schnorr="schnorr",t.ECDSA="ecdsa",t}({});function publicKeyFromX(t,e){var n=t?`02${e}`:`03${e}`;return r.PublicKey.fromString(n)}function publicKeyFromOriginPubkey(t){var e=(0,O.z)(w.from(t.slice(1)));if(!e)throw new Error("Public key tweak failed");var{parity:n,x:r}=e;return publicKeyFromX(0===n,(0,l.My)(r))}function selectUTXOs(t,e,n){var r=function sortUXTO(t){return t.sort((function(t,e){return t.blockDaaScore-e.blockDaaScore||e.satoshis-t.satoshis||t.txid.localeCompare(e.txid)||t.vout-e.vout}))}(t),i=[],a=[],s=0,o=0;for(var u of r){var c=new x(u);if(a.push(c.id),i.push(u),o+=c.mass,(s+=c.satoshis)>=e)break}if(s<e)throw new p.Cm;return{utxoIds:a,utxos:i,mass:o}}},187826:()=>{},29301:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>f});var r=n(241440),i=n(632954),a=n(404727),s=n(928557),o=n(254491),u=n(746661),c={default:{namePrefix:"KASPA",labelKey:o.ETranslations.bip44__standard,template:`m/44'/${s.TN}'/0'/0/${s.h2}`,coinType:s.TN}},p={impl:s._9,coinTypeDefault:s.TN,accountType:u.rX.SIMPLE,importedAccountEnabled:!0,hardwareAccountEnabled:!0,externalAccountEnabled:!1,watchingAccountEnabled:!0,supportExportedSecretKeys:[a.ECoreApiExportedSecretKeyType.privateKey],defaultFeePresetIndex:0,isUtxo:!1,isSingleToken:!0,NFTEnabled:!1,nonceRequired:!1,feeUTXORequired:!1,editFeeEnabled:!1,replaceTxEnabled:!1,estimatedFeePollingInterval:300,accountDeriveInfo:c,networkInfo:{default:{curve:"secp256k1",addressPrefix:""}},minTransferAmount:new r.A(i.DUST_AMOUNT).shiftedBy(-8).toString()};const f=Object.freeze(p)},440745:()=>{}}]);