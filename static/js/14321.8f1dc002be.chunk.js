"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[14321],{414321:(e,t,n)=>{n.r(t),n.d(t,{AccountSelectorStack:()=>AccountSelectorStack,default:()=>AccountSelectorStackPage});var o=n(490343),r=n(325809),a=n(324586),l=n(586330),i=n(514041),c=n(908867),s=n(60153),d=n(287121),u=n(525603),f=n(791088),p=n(498356),m=n(911998),b=n(162616),g=n(254491),h=n(663522),A=n(491180),v=n(757559),x=n(831085);function AccountExportPrivateKeyButton({accountName:e,indexedAccount:t,account:n,onClose:r,icon:a,label:i,exportType:d}){(0,c.A)();var{serviceAccount:u}=s.A,f=(0,p.A)();return(0,x.jsx)(o.ActionList.Item,{icon:a,label:i,onClose:r,onPress:(0,l.A)((function*(){f.pushModal(v.ry.AccountManagerStacks,{screen:v.v3.ExportPrivateKeysPage,params:{indexedAccount:t,account:n,accountName:e,title:i,exportType:d}})}))})}function AccountMoveToTopButton({indexedAccount:e,firstIndexedAccount:t,account:n,firstAccount:r,onClose:a}){var i=(0,c.A)();return t?.id===e?.id&&r?.id===n?.id?null:(0,x.jsx)(o.ActionList.Item,{icon:"AlignTopOutline",label:i.formatMessage({id:g.ETranslations.market_move_to_top}),onClose:a,onPress:(0,l.A)((function*(){e?yield s.A.serviceAccount.insertIndexedAccountOrder({targetIndexedAccountId:e?.id,startIndexedAccountId:void 0,endIndexedAccountId:t?.id,emitEvent:!0}):n&&(yield s.A.serviceAccount.insertAccountOrder({targetAccountId:n?.id,startAccountId:void 0,endAccountId:r?.id,emitEvent:!0}))}))})}function AccountRemoveDialog({indexedAccount:e,account:t}){(0,c.A)();var n,r=(0,b.z$)(),[a,s]=(0,i.useState)(!1);return(0,x.jsx)(o.Dialog.Footer,{confirmButtonProps:{variant:"destructive",loading:a},onConfirm:(n=(0,l.A)((function*({close:n}){try{s(!0),yield r.current.removeAccount({indexedAccount:e,account:t})}finally{s(!1),yield n()}})),function(e){return n.apply(this,arguments)})})}function AccountRemoveButton({name:e,indexedAccount:t,account:n,onClose:a}){var s=(0,c.A)(),{config:d}=(0,b.H9)(),u=(0,i.useMemo)((function(){if(t)return'You can restore this account later in this wallet by using "Add Account" or "Bulk Add Accounts".';if(n){var e=A.A.getWalletIdFromAccountId({accountId:n.id});if(e&&A.A.isImportedWallet({walletId:e}))return s.formatMessage({id:g.ETranslations.remove_private_key_account_desc})}return s.formatMessage({id:g.ETranslations.remove_account_desc})}),[n,t,s]);return(0,x.jsx)(o.ActionList.Item,{icon:"DeleteOutline",label:s.formatMessage({id:g.ETranslations.global_remove}),destructive:!0,onClose:a,onPress:(0,l.A)((function*(){!function showAccountRemoveDialog({title:e,description:t,config:n,indexedAccount:a,account:l}){return o.Dialog.show({icon:"ErrorOutline",tone:"destructive",title:e,description:t,renderContent:n?(0,x.jsx)(r.b8,{enabledNum:[0],config:n,children:(0,x.jsx)(AccountRemoveDialog,{account:l,indexedAccount:a})}):null})}({config:d,title:s.formatMessage({id:g.ETranslations.global_remove_account_name},{account:e}),description:u,account:n,indexedAccount:t})}))})}var w=n(839850),y=n(892145),j=n(658591),S=n(849726),O=n(880590),I=["onSubmit","maxLength","indexedAccount","disabledMaxLengthLabel"];function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function V4AccountNameSelector({onChange:e,indexedAccount:t}){var n=(0,c.A)(),[r]=(0,i.useState)(""),{result:a=[]}=(0,m.yk)((0,l.A)((function*(){return(yield s.A.serviceAccount.getAccountsInSameIndexedAccountId({indexedAccountId:t.id})).map((function(e){var t=j.S[e.coinType];return{label:e.name,value:e.name,leading:(0,x.jsx)(O.um,{networkId:t}),networkId:t}})).sort((function(e,t){return(0,y.A)({insensitive:!0})(e.networkId||"",t.networkId||"")}))})),[t.id]);return(0,x.jsx)(o.Stack,{pt:"$2",children:(0,x.jsx)(o.Select,{sheetProps:{snapPoints:[80],snapPointsMode:"percent"},floatingPanelProps:{maxHeight:272},renderTrigger:function({value:e,label:t,placeholder:r}){return(0,x.jsx)(o.Button,{size:"small",alignSelf:"flex-start",variant:"tertiary",iconAfter:"ChevronDownSmallOutline",children:n.formatMessage({id:g.ETranslations.v4_select_account_name_label})})},items:a,value:r,onChange:e,title:n.formatMessage({id:g.ETranslations.v4_select_account_name_label})})})}function RenameInputWithNameSelector({value:e,onChange:t,maxLength:n=80,indexedAccount:r,disabledMaxLengthLabel:a=!1}){var{result:i}=(0,m.yk)((0,l.A)((function*(){return!!r&&s.A.serviceV4Migration.canRenameFromV4AccountName({indexedAccount:r})})),[r]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(o.Stack,{children:[(0,x.jsx)(o.Input,{size:"large",$gtMd:{size:"medium"},maxLength:n,autoFocus:!0,value:e,onChangeText:t}),i&&r?(0,x.jsx)(V4AccountNameSelector,{indexedAccount:r,onChange:t}):null]}),a?null:(0,x.jsx)(o.Form.FieldDescription,{textAlign:"right",children:`${e?.length||0}/${n}`})]})}var showRenameDialog=function(e,t){var n,{onSubmit:r,maxLength:i=80,indexedAccount:c,disabledMaxLengthLabel:s=!1}=t,d=(0,w.A)(t,I);return o.Dialog.show(function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({title:S.a.intl.formatMessage({id:g.ETranslations.global_rename}),renderContent:(0,x.jsx)(o.Dialog.Form,{formProps:{values:{name:e}},children:(0,x.jsx)(o.Dialog.FormField,{name:"name",rules:{required:{value:!0,message:S.a.intl.formatMessage({id:g.ETranslations.form_rename_error_empty})}},children:(0,x.jsx)(RenameInputWithNameSelector,{maxLength:i,indexedAccount:c,disabledMaxLengthLabel:s})})}),onConfirm:(n=(0,l.A)((function*({getForm:e,close:t}){var n=e();yield r(n?.getValues().name),yield t(),o.Toast.success({title:S.a.intl.formatMessage({id:g.ETranslations.feedback_change_saved})})})),function onConfirm(e){return n.apply(this,arguments)})},d))};function AccountRenameButton({name:e,indexedAccount:t,account:n,onClose:r}){var a=(0,c.A)(),{serviceAccount:i}=s.A;return(0,x.jsx)(o.ActionList.Item,{icon:"PencilOutline",label:a.formatMessage({id:g.ETranslations.global_rename}),onClose:r,onPress:(0,l.A)((function*(){var o;showRenameDialog(e,{indexedAccount:t,onSubmit:(o=(0,l.A)((function*(e){t?.id&&e?yield i.setAccountName({indexedAccountId:t?.id,name:e,shouldCheckDuplicate:!0}):n?.id&&e&&(yield i.setAccountName({accountId:n.id,name:e,shouldCheckDuplicate:!0}))})),function onSubmit(e){return o.apply(this,arguments)})})}))})}function AccountEditButton({indexedAccount:e,firstIndexedAccount:t,account:n,firstAccount:a,wallet:d}){var u=(0,c.A)(),{config:p}=(0,b.H9)(),h=e?.name||n?.name||"--",v=!e||!1,w=(0,i.useMemo)((function(){return Boolean(n&&!e&&n?.id&&A.A.isImportedAccount({accountId:n?.id}))}),[n,e]),y=(0,i.useMemo)((function(){return Boolean(n&&!e&&n?.id&&A.A.isWatchingAccount({accountId:n?.id}))}),[n,e]),j=(0,i.useMemo)((function(){return e&&!n&&d?.id&&A.A.isHdWallet({walletId:d?.id})}),[n,e,d?.id]),{result:S}=(0,m.yk)((0,l.A)((function*(){if(w&&n?.createAtNetwork||y&&n?.createAtNetwork&&(n?.pub||n?.xpub)){var e=yield s.A.serviceAccount.getNetworkSupportedExportKeyTypes({networkId:n?.createAtNetwork,exportType:"privateKey"}),t=yield s.A.serviceAccount.getNetworkSupportedExportKeyTypes({networkId:n?.createAtNetwork,exportType:"publicKey"});return{showExportPrivateKey:!y&&Boolean(e?.length),showExportPublicKey:Boolean(t?.length)}}return j?{showExportPrivateKey:!0,showExportPublicKey:!0}:{showExportPrivateKey:!1,showExportPublicKey:!1}})),[n,j,w,y]);return p?(0,x.jsx)(o.ActionList,{title:h,renderTrigger:(0,x.jsx)(f.c.IconButton,{icon:"DotHorOutline"}),renderItems:function({handleActionListClose:l}){return(0,x.jsxs)(r.b8,{enabledNum:[0],config:p,children:[(0,x.jsx)(AccountRenameButton,{name:h,indexedAccount:e,account:n,onClose:l}),S?.showExportPrivateKey?(0,x.jsx)(AccountExportPrivateKeyButton,{icon:"KeyOutline",accountName:h,indexedAccount:e,account:n,onClose:l,label:u.formatMessage({id:g.ETranslations.global_export_private_key}),exportType:"privateKey"}):null,S?.showExportPublicKey?(0,x.jsx)(AccountExportPrivateKeyButton,{icon:"PasswordOutline",accountName:h,indexedAccount:e,account:n,onClose:l,label:u.formatMessage({id:g.ETranslations.global_public_key_export}),exportType:"publicKey"}):null,(0,x.jsx)(AccountMoveToTopButton,{indexedAccount:e,firstIndexedAccount:t,account:n,firstAccount:a,onClose:l}),v?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(o.Divider,{mx:"$2",my:"$1"}),(0,x.jsx)(AccountRemoveButton,{name:h,indexedAccount:e,account:n,onClose:l})]}):null]})}}):null}var W=n(131397),_=Object.freeze([]),P=(Object.freeze({}),n(181447)),k=n(318822),E=n(184251),T=n(724249);function useAccountSelectorRoute(){return(0,T.lq)()}var C=n(17617),D=n(213644);function WalletRemoveDialog({defaultValue:e,wallet:t,showCheckBox:n}){var r=(0,c.A)(),[a,s]=(0,i.useState)(e),d=(0,i.useCallback)((function(e){s(!!e)}),[]),u=(0,b.z$)();return(0,x.jsxs)(x.Fragment,{children:[n?(0,x.jsx)(o.Checkbox,{value:a,onChange:d,label:r.formatMessage({id:g.ETranslations.remove_wallet_double_confirm_message})}):null,(0,x.jsx)(o.Dialog.Footer,{onConfirmText:r.formatMessage({id:g.ETranslations.global_remove}),confirmButtonProps:{disabled:n&&!a,variant:"destructive"},onConfirm:(0,l.A)((function*(){yield u.current.removeWallet({walletId:t?.id||""}),D.U.account.wallet.deleteWallet(),o.Toast.success({title:r.formatMessage({id:g.ETranslations.feedback_change_saved})})}))})]})}function WalletRemoveButton({wallet:e}){var{config:t}=(0,b.H9)(),n=(0,c.A)(),a=A.A.isHwWallet({walletId:e?.id})||A.A.isQrWallet({walletId:e?.id});var{title:l,description:i}=function getTitleAndDescription(){return a?A.A.isHwHiddenWallet({wallet:e})?{title:n.formatMessage({id:g.ETranslations.remove_device}),description:n.formatMessage({id:g.ETranslations.remove_hidden_wallet_desc})}:{title:n.formatMessage({id:g.ETranslations.remove_device}),description:n.formatMessage({id:g.ETranslations.remove_device_desc})}:{title:n.formatMessage({id:g.ETranslations.remove_wallet}),description:n.formatMessage({id:g.ETranslations.remove_wallet_desc})}}();return(0,x.jsx)(o.IconButton,{title:n.formatMessage({id:g.ETranslations.global_remove}),icon:"DeleteOutline",variant:"tertiary",onPress:function(){!function showWalletRemoveDialog({title:e,description:t,defaultChecked:n,wallet:a,config:l,showCheckBox:i}){return o.Dialog.show({icon:"ErrorOutline",tone:"destructive",title:e,description:t,renderContent:l?(0,x.jsx)(r.b8,{enabledNum:[0],config:l,children:(0,x.jsx)(WalletRemoveDialog,{wallet:a,defaultValue:n,showCheckBox:i})}):null})}({config:t,title:l,description:i,showCheckBox:!a,defaultChecked:!1,wallet:e})}})}var $=n(284908);function DescriptionList({label:e,description:t}){return(0,x.jsxs)(o.XStack,{justifyContent:"space-between",alignItems:"center",minHeight:"$9",children:[(0,x.jsx)(o.SizableText,{textAlign:"right",color:"$textSubdued",size:"$bodyMd",children:e}),(0,x.jsx)(o.SizableText,{size:"$bodyMdMedium",children:t})]})}function AboutDevice({device:e}){var t=(0,c.A)(),{result:n=[]}=(0,m.yk)((0,l.A)((function*(){var n=e?.featuresInfo;if(!n)return[];var{bleVersion:o,firmwareVersion:r}=yield $.A.getDeviceVersion({device:e,features:e.featuresInfo});return[{label:t.formatMessage({id:g.ETranslations.global_serial_number}),description:e.uuid||"--"},{label:t.formatMessage({id:g.ETranslations.global_bluetooth}),description:n.ble_name||"--"},{label:t.formatMessage({id:g.ETranslations.global_firmware}),description:r||"--"},{label:t.formatMessage({id:g.ETranslations.global_bluetooth_firmware}),description:o||"--"}]})),[e,t]);return(0,x.jsx)(o.IconButton,{title:t.formatMessage({id:g.ETranslations.global_about}),icon:"InfoCircleOutline",variant:"tertiary",onPress:function(){return o.Dialog.show({title:t.formatMessage({id:g.ETranslations.global_about}),showFooter:!1,renderContent:(0,x.jsx)(x.Fragment,{children:n.map((function(e){return(0,x.jsx)(DescriptionList,{label:e.label,description:e.description},e.label)}))})})}})}var M=["wallet","device","editable","editMode","onEditButtonPress"];function WalletDetailsHeader_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function WalletDetailsHeader_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WalletDetailsHeader_ownKeys(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WalletDetailsHeader_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function WalletDetailsHeader(e){var{wallet:t,device:n,editable:r,editMode:a,onEditButtonPress:l}=e,i=(0,w.A)(e,M),s=(0,c.A)(),d=A.A.isHwWallet({walletId:t?.id})&&!A.A.isHwHiddenWallet({wallet:t}),u=!!t?.id&&!A.A.isOthersWallet({walletId:t?.id});return(0,x.jsxs)(f.c,WalletDetailsHeader_objectSpread(WalletDetailsHeader_objectSpread({testID:"account-selector-header",mt:"$1.5",justifyContent:"flex-end"},i),{},{children:[a&&r?(0,x.jsxs)(o.XStack,{pr:"$5",mr:"$2",space:"$5",borderRightWidth:C.A.hairlineWidth,borderRightColor:"$borderSubdued",children:[d?(0,x.jsx)(AboutDevice,{device:n}):null,u?(0,x.jsx)(WalletRemoveButton,{wallet:t}):null]}):null,r?(0,x.jsx)(o.Button,{testID:"AccountSelectorModal-EditButton",variant:"tertiary",onPress:l,children:a?s.formatMessage({id:g.ETranslations.global_done}):s.formatMessage({id:g.ETranslations.global_edit})}):null]}))}var L=["label","description","icon","iconColor","isLoading","children","drillIn","testID"];function WalletOptionItem_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function WalletOptionItem_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WalletOptionItem_ownKeys(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WalletOptionItem_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function WalletOptionItem(e){var{label:t,description:n,icon:r,iconColor:a="$iconSubdued",isLoading:l,children:i,drillIn:c,testID:s}=e,d=(0,w.A)(e,L);return(0,x.jsxs)(f.c,WalletOptionItem_objectSpread(WalletOptionItem_objectSpread({userSelect:"none",testID:s},d),{},{children:[r?(0,x.jsx)(o.Stack,{px:"$2",children:(0,x.jsx)(o.Icon,{name:r,color:a})}):null,(0,x.jsx)(f.c.Text,{primary:t,secondary:n,flex:1}),i,l?(0,x.jsx)(o.Spinner,{}):null]}))}function HiddenWalletAddButton({wallet:e}){var t=(0,c.A)(),n=(0,b.z$)(),[r,a]=(0,i.useState)(!1);return e&&A.A.isHwWallet({walletId:e.id})&&!A.A.isHwHiddenWallet({wallet:e})?(0,x.jsx)(WalletOptionItem,{icon:"LockOutline",label:t.formatMessage({id:g.ETranslations.global_add_hidden_wallet}),isLoading:r,onPress:(0,l.A)((function*(){try{a(!0),yield n.current.createHWHiddenWallet({walletId:e?.id},{addDefaultNetworkAccounts:!0,showAddAccountsLoading:!0}),o.Toast.success({title:t.formatMessage({id:g.ETranslations.global_success})})}finally{a(!1)}}))}):null}function Advance_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Advance_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Advance_ownKeys(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Advance_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function EnterPinOnSoftwareSwitch(e){var t,{defaultValue:n}=e,[r,a]=(0,i.useState)(n);return(0,x.jsx)(o.Switch,{size:o.ESwitchSize.small,value:r,onChange:(t=(0,l.A)((function*(t){try{a(t),yield s.A.serviceHardware.setInputPinOnSoftware({walletId:e?.wallet?.id||"",inputPinOnSoftware:t})}catch(e){a(!t)}})),function(e){return t.apply(this,arguments)})})}function EnablePassphraseSwitch(e){var t,{defaultValue:n}=e,[r,a]=(0,i.useState)(n);return(0,x.jsx)(o.Switch,{size:o.ESwitchSize.small,value:r,onChange:(t=(0,l.A)((function*(t){try{yield s.A.serviceHardware.setPassphraseEnabled({walletId:e?.wallet?.id||"",passphraseEnabled:t}),a(t)}catch(e){}})),function(e){return t.apply(this,arguments)})})}function AdvanceDialogContent(e){var t=(0,c.A)(),{onFail:n}=e,{result:r}=(0,m.yk)((0,l.A)((function*(){try{return yield s.A.serviceHardware.getDeviceAdvanceSettings({walletId:e?.wallet?.id||""})}catch(e){throw n?.(e),e}})),[n,e?.wallet?.id]);return r?(0,x.jsxs)(o.Stack,{mx:"$-5",children:[r.inputPinOnSoftwareSupport?(0,x.jsx)(f.c,{title:t.formatMessage({id:g.ETranslations.enter_pin_on_app}),pt:"$0",children:(0,x.jsx)(EnterPinOnSoftwareSwitch,Advance_objectSpread(Advance_objectSpread({},e),{},{defaultValue:r.inputPinOnSoftware}))}):null,(0,x.jsx)(f.c,{title:t.formatMessage({id:g.ETranslations.global_passphrase}),children:(0,x.jsx)(EnablePassphraseSwitch,Advance_objectSpread(Advance_objectSpread({},e),{},{defaultValue:r.passphraseEnabled}))}),(0,x.jsx)(o.SizableText,{px:"$5",size:"$bodyMd",children:t.formatMessage({id:g.ETranslations.global_passphrase_desc})})]}):(0,x.jsx)(o.Stack,{borderRadius:"$3",p:"$5",bg:"$bgSubdued",borderCurve:"continuous",children:(0,x.jsx)(o.Spinner,{size:"large"})})}function Advance(e){var t=(0,c.A)();return(0,x.jsx)(WalletOptionItem,{icon:"SwitchOutline",label:t.formatMessage({id:g.ETranslations.global_advance}),onPress:function(){var n=o.Dialog.show({title:t.formatMessage({id:g.ETranslations.global_advance}),renderContent:(0,x.jsx)(AdvanceDialogContent,Advance_objectSpread(Advance_objectSpread({},e),{},{onFail:function(){n.close()}})),showFooter:!1})}})}var B=n(714191);function BatchCreateAccountButtonView({wallet:e}){var t=(0,c.A)(),n=(0,p.A)(),{activeAccount:o}=(0,b.LH)({num:0});return(0,x.jsx)(WalletOptionItem,{testID:"AccountSelector-WalletOption-Backup",icon:"Back10Outline",label:t.formatMessage({id:g.ETranslations.global_bulk_add_accounts}),onPress:function(){n.pushModal(v.ry.AccountManagerStacks,{screen:v.v3.BatchCreateAccountForm,params:{walletId:e?.id||"",networkId:o?.network?.id}})}})}function BatchCreateAccountButton({wallet:e}){return(0,x.jsx)(r.b8,{config:{sceneName:B.Zs.home},enabledNum:[0],children:(0,x.jsx)(BatchCreateAccountButtonView,{wallet:e})})}var H=n(554902),R=n(483295),K=n(15159);function HdWalletBackupButton({wallet:e}){var t=(0,p.A)(),n=(0,c.A)(),r=(0,R.A)(),a=(0,i.useCallback)((0,l.A)((function*(){if(e?.id){var{mnemonic:n}=yield s.A.serviceAccount.getHDAccountMnemonic({walletId:e?.id,reason:K.a.Security});n&&(0,H.KE)(n),t.pushModal(v.ry.OnboardingModal,{screen:v.xl.BeforeShowRecoveryPhrase,params:{mnemonic:n,isBackup:!0}}),D.U.account.wallet.backupWallet("manualBackup")}})),[t,e?.id]),d=((0,i.useCallback)((function(){r.backupWallet(e?.id),D.U.account.wallet.backupWallet("liteCard")}),[r,e?.id]),(0,i.useCallback)((0,l.A)((function*(){if(e){var{mnemonic:n}=yield s.A.serviceAccount.getHDAccountMnemonic({walletId:e.id,reason:K.a.Security});n&&(0,H.KE)(n),t.pushModal(v.ry.KeyTagModal,{screen:v.ex.BackupDotMap,params:{encodedText:n,title:e.name}}),D.U.account.wallet.backupWallet("keyTag")}})),[t,e]));return(0,x.jsx)(o.ActionList,{offset:{mainAxis:0,crossAxis:18},placement:"bottom-start",title:n.formatMessage({id:g.ETranslations.global_backup}),items:[{label:n.formatMessage({id:g.ETranslations.manual_backup}),icon:"PenOutline",onPress:function(){a()}},!1,{label:n.formatMessage({id:g.ETranslations.global_onekey_keytag}),icon:"OnekeyKeytagOutline",onPress:function(){d()}}].filter(Boolean),renderTrigger:(0,x.jsx)(WalletOptionItem,{testID:"AccountSelector-WalletOption-Backup",icon:"Shield2CheckOutline",label:n.formatMessage({id:g.ETranslations.global_backup})})})}function HiddenWalletRememberSwitch({wallet:e}){var[t,n]=(0,i.useState)(!e?.isTemp),r=(0,c.A)();return(0,x.jsx)(WalletOptionItem,{label:r.formatMessage({id:g.ETranslations.form_keep_hidden_wallet_label}),description:r.formatMessage({id:g.ETranslations.form_keep_hidden_wallet_label_desc}),drillIn:!1,children:(0,x.jsx)(o.Switch,{size:o.ESwitchSize.small,value:t,onChange:(0,l.A)((function*(){if(e?.id){var o=!t;try{yield s.A.serviceAccount.setWalletTempStatus({walletId:e?.id,isTemp:!o}),n(o)}catch(e){throw n(t),e}}}))})},e?.id)}var N=n(282029);function Verification({device:e}){var t=(0,c.A)(),{iconColor:n,iconName:o}=e?.verifiedAtVersion?{iconName:"BadgeVerifiedSolid",iconColor:"$iconSuccess"}:""===e?.verifiedAtVersion?{iconName:"ErrorSolid",iconColor:"$iconCritical"}:{iconName:"DocumentSearch2Outline",iconColor:"$iconSubdued"},{showFirmwareVerifyDialog:r}=(0,N.It)();return(0,x.jsx)(WalletOptionItem,{icon:o,iconColor:n,label:t.formatMessage({id:g.ETranslations.device_auth_request_title}),onPress:(0,l.A)((function*(){var t;e&&(yield r({device:e,onContinue:(t=(0,l.A)((function*({checked:e}){})),function onContinue(e){return t.apply(this,arguments)})}))}))})}var z=n(593827),F=n(258988);function WalletAvatarEditDialog({wallet:e}){var t=(0,c.A)(),{serviceAccount:n}=s.A,[r,a]=(0,i.useState)(e?.avatarInfo?.img);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(o.XStack,{flexWrap:"wrap",children:F.mx.map((function(e,t){return(0,x.jsxs)(o.Stack,{justifyContent:"center",alignItems:"center",flexBasis:"25%",py:"$2",animation:"quick",hoverStyle:{scale:1.1},pressStyle:{scale:.9},onPress:function(){a(e)},children:[(0,x.jsx)(z.L,{size:"$12",img:e,wallet:void 0}),(0,x.jsx)(o.AnimatePresence,{children:r===e?(0,x.jsx)(o.Stack,{position:"absolute",zIndex:"$1",right:"$4",bottom:"$1",p:"$px",bg:"$bg",borderRadius:"$full",enterStyle:h.Ay.isNativeAndroid?void 0:{opacity:0,scale:0},exitStyle:h.Ay.isNativeAndroid?void 0:{opacity:0,scale:0},children:(0,x.jsx)(o.Icon,{size:"$5",color:"$iconActive",name:"CheckRadioSolid"})}):null})]},t)}))}),(0,x.jsx)(o.Dialog.Footer,{onConfirm:(0,l.A)((function*(){e?.id&&r&&(yield n.setWalletNameAndAvatar({walletId:e?.id,avatar:{img:r}}),o.Toast.success({title:t.formatMessage({id:g.ETranslations.feedback_change_saved})}))}))})]})}function WalletRenameButton({wallet:e}){var{serviceAccount:t}=s.A;return(0,x.jsxs)(o.XStack,{flex:1,py:"$1",px:"$1.5",alignItems:"center",userSelect:"none",borderRadius:"$2",hoverStyle:{bg:"$bgHover"},pressStyle:{bg:"$bgActive"},focusable:!0,focusStyle:{outlineOffset:2,outlineWidth:2,outlineColor:"$focusRing",outlineStyle:"solid"},onPress:(0,l.A)((function*(){var n;showRenameDialog(e.name,{onSubmit:(n=(0,l.A)((function*(n){e?.id&&n&&(yield t.setWalletNameAndAvatar({walletId:e?.id,name:n,shouldCheckDuplicate:!0}))})),function onSubmit(e){return n.apply(this,arguments)})})})),children:[(0,x.jsx)(o.SizableText,{size:"$bodyLgMedium",pr:"$1.5",numberOfLines:1,children:e?.name}),(0,x.jsx)(o.Icon,{flexShrink:0,name:"PencilSolid",size:"$4",color:"$iconSubdued"})]})}function WalletProfile_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function WalletProfile_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WalletProfile_ownKeys(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WalletProfile_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function WalletProfile({wallet:e}){return(0,x.jsx)(f.c,{space:"$1.5",renderAvatar:(0,x.jsx)(o.Stack,WalletProfile_objectSpread(WalletProfile_objectSpread({role:"button",borderRadius:"$2"},A.A.isHdWallet({walletId:e.id})&&{onPress:function(){return function showWalletAvatarEditDialog({wallet:e}){o.Dialog.show({title:S.a.intl.formatMessage({id:g.ETranslations.global_edit_avatar}),estimatedContentHeight:276,renderContent:(0,x.jsx)(WalletAvatarEditDialog,{wallet:e})})}({wallet:e})},hoverStyle:{bg:"$bgHover"},pressStyle:{bg:"$bgActive"},focusable:!0,focusStyle:{outlineOffset:2,outlineWidth:2,outlineColor:"$focusRing",outlineStyle:"solid"}}),{},{children:(0,x.jsxs)(o.Stack,{children:[(0,x.jsx)(z.L,{size:"$10",wallet:e}),A.A.isHdWallet({walletId:e.id})?(0,x.jsx)(f.c.Avatar.CornerIcon,{name:"MenuCircleHorSolid",color:"$iconSubdued"}):null]})})),children:(0,x.jsx)(WalletRenameButton,{wallet:e})})}function WalletOptions({wallet:e,device:t}){var[n]=(0,b.UZ)(),r=(0,i.useMemo)((function(){return A.A.isHwWallet({walletId:e?.id})?A.A.isHwHiddenWallet({wallet:e})?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(BatchCreateAccountButton,{wallet:e}),(0,x.jsx)(HiddenWalletRememberSwitch,{wallet:e},e?.id)]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(Verification,{device:t}),(0,x.jsx)(Advance,{wallet:e}),(0,x.jsx)(BatchCreateAccountButton,{wallet:e}),(0,x.jsx)(HiddenWalletAddButton,{wallet:e})]}):A.A.isHdWallet({walletId:e?.id})?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(BatchCreateAccountButton,{wallet:e}),(0,x.jsx)(HdWalletBackupButton,{wallet:e})]}):null}),[t,e]);return(0,x.jsx)(o.HeightTransition,{children:(0,x.jsx)(o.AnimatePresence,{children:n?(0,x.jsxs)(o.Stack,{testID:"wallet-edit-options",animation:"quick",exitStyle:{opacity:0},enterStyle:{opacity:0},children:[e?(0,x.jsx)(WalletProfile,{wallet:e}):null,r,(0,x.jsx)(o.Stack,{py:"$2.5",children:(0,x.jsx)(o.Divider,{mt:"auto"})})]}):null})})}function WalletDetails_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function WalletDetails_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WalletDetails_ownKeys(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WalletDetails_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function PlusButton({onPress:e,loading:t}){return(0,x.jsx)(o.IconButton,{borderWidth:0,borderRadius:"$2",variant:"tertiary",size:"medium",loading:t,onPress:e,icon:"PlusSmallOutline"})}function WalletDetails({num:e}){var t=(0,c.A)(),[n,r]=(0,b.UZ)(),{serviceAccount:a,serviceAccountSelector:h}=s.A,{selectedAccount:w}=(0,b.wz)({num:e}),{activeAccount:y}=(0,b.LH)({num:e}),j=(0,b.z$)(),S=(0,i.useRef)(null),O=useAccountSelectorRoute(),I=O.params?.linkNetwork,T=O.params?.editable,C=I?w?.networkId:void 0,D=(0,p.A)(),$="$$others"===w?.focusedWallet,M=Boolean(w?.focusedWallet&&A.A.isOthersWallet({walletId:w?.focusedWallet})),L=$||M,B=(0,i.useCallback)((function(){D.pushModal(v.ry.OnboardingModal,{screen:v.xl.ImportAddress})}),[D]),H=(0,i.useCallback)((function(){D.pushModal(v.ry.OnboardingModal,{screen:v.xl.ImportPrivateKey})}),[D]),R=(0,i.useCallback)((function(){D.pushModal(v.ry.OnboardingModal,{screen:v.xl.ConnectWalletSelectNetworks})}),[D]),{result:K,run:N}=(0,m.yk)((0,l.A)((function*(){if(w?.focusedWallet){A.A.isHdWallet({walletId:w?.focusedWallet});var e=A.A.isHwWallet({walletId:w?.focusedWallet});try{var t,n=yield a.getWallet({walletId:w?.focusedWallet});return e&&(t=yield a.getWalletDeviceSafe({walletId:w?.focusedWallet})),{wallet:n,device:t}}catch(e){return}}})),[w?.focusedWallet,a],{checkIsFocused:!1});(0,i.useEffect)((function(){var e,t=(e=(0,l.A)((function*(){yield N(),S?.current?._listRef?._hasDoneInitialScroll&&(S.current._listRef._hasDoneInitialScroll=!1)})),function fn(){return e.apply(this,arguments)});return k.iL.on(k.Tu.WalletUpdate,t),function(){k.iL.off(k.Tu.WalletUpdate,t)}}),[N]);var{result:z,run:F,setResult:V}=(0,m.yk)((0,l.A)((function*(){return w?.focusedWallet?h.getAccountSelectorAccountsListSectionData({focusedWallet:w?.focusedWallet,linkedNetworkId:C,deriveType:w.deriveType,othersNetworkId:w?.networkId}):Promise.resolve(void 0)})),[C,w.deriveType,w?.focusedWallet,w?.networkId,h],{checkIsFocused:!1});(0,i.useEffect)((function(){var e,t=(e=(0,l.A)((function*(){yield F()})),function fn(){return e.apply(this,arguments)});return k.iL.on(k.Tu.AccountUpdate,t),k.iL.on(k.Tu.WalletUpdate,t),function(){k.iL.off(k.Tu.AccountUpdate,t),k.iL.off(k.Tu.WalletUpdate,t)}}),[F]);var U,{scrollToLocation:q,onLayout:X}=(0,o.useSafelyScrollToLocation)(S),[Q,Z]=(0,i.useState)(0),J=(0,i.useMemo)((function(){var e=0,t=[];return e+=Q,z?.forEach?.((function(n,o){0!==o&&(t.push({offset:e,length:0,index:t.length}),e+=0),t.push({offset:e,length:0,index:t.length}),e+=0,n.data.forEach((function(){t.push({offset:e,length:56,index:t.length}),e+=56}));t.push({offset:e,length:56,index:t.length}),e+=56})),t}),[z,Q]),[Y,G]=(0,i.useState)({}),ee=(0,i.useCallback)((function(e){G(e.nativeEvent.layout)}),[]),te=(0,i.useMemo)((function(){if(z?.[0]?.data){var e=z[0].data?.findIndex((function({id:e}){return L?w.othersWalletAccountId===e:w.indexedAccountId===e}));if(Y.height>0&&60*e<=Y.height)return;return{sectionIndex:0,itemIndex:Math.max(e,0)}}}),[L,Y.height,z,w.indexedAccountId,w.othersWalletAccountId]),ne=(0,i.useCallback)((U=(0,l.A)((function*(e){var t=e?.from?.sectionIndex;if(z&&void 0!==t&&t===e?.to?.sectionIndex){var n=e?.from?.itemIndex,o=e?.to?.itemIndex;if(void 0!==n&&void 0!==o){o>n&&(o+=1);var r=z[t].data;t===z.length-1&&o===r.length-1||(V(e.sections),L?yield a.insertAccountOrder({targetAccountId:r?.[n]?.id,startAccountId:r?.[o-1]?.id,endAccountId:r?.[o]?.id,emitEvent:!0}):yield a.insertIndexedAccountOrder({targetIndexedAccountId:r?.[n]?.id,startIndexedAccountId:r?.[o-1]?.id,endIndexedAccountId:r?.[o]?.id,emitEvent:!0}))}}})),function(e){return U.apply(this,arguments)}),[L,a,z,V]),[oe,re]=(0,i.useState)(!1),{bottom:ae}=(0,o.useSafeAreaInsets)(),le=(0,i.useCallback)((function(e){var n,o=!1;if(L){var r=e;n=r?.address}else{var a=e,l=a?.associateAccount;n=l?.address,l?.addressDetail?.isValid&&l?.addressDetail?.normalizedAddress&&(o=!0)}return n||L||!I||o?{address:n?A.A.shortenAddress({address:n}):"",isEmptyAddress:!1}:{address:t.formatMessage({id:g.ETranslations.global_no_network_address},{network:y?.network?.shortname||""}),isEmptyAddress:!0}}),[y?.network?.shortname,t,L,I]),ie=(0,i.useMemo)((function(){return!!T&&!(!z||0===z.length)}),[z,T]),ce=(0,i.useMemo)((function(){return $?"Others":K?.wallet?.name||""}),[K,$]),se=(0,W.t1)();return(0,x.jsxs)(o.Stack,{flex:1,pb:ae,testID:"account-selector-accountList",children:[(0,x.jsx)(WalletDetailsHeader,WalletDetails_objectSpread({wallet:K?.wallet,device:K?.device,titleProps:{opacity:n&&ie?0:1},editMode:n,editable:ie,onEditButtonPress:function(){r((function(e){return!e}))}},!n&&{title:ce})),(0,x.jsx)(o.Stack,{flex:1,onLayout:ee,children:Y.height?(0,x.jsx)(o.SortableSectionList,{ref:S,onLayout:X,enabled:n,onDragEnd:ne,initialScrollIndex:te,getItemLayout:function(e,t){return-1===t?{index:t,offset:0,length:0}:J[t]},keyExtractor:function(e){return`${ie?"1":"0"}_${e.id}`},ListEmptyComponent:(0,x.jsx)(o.Empty,{mt:"$24",icon:"WalletOutline",title:t.formatMessage({id:g.ETranslations.global_no_wallet}),description:t.formatMessage({id:g.ETranslations.global_no_wallet_desc}),buttonProps:{children:t.formatMessage({id:g.ETranslations.global_create_wallet}),onPress:function(){se({params:{showCloseButton:!0}})}}}),contentContainerStyle:{pb:"$3"},extraData:[w.indexedAccountId,n,oe],ListHeaderComponent:L?null:(0,x.jsx)(o.Stack,{onLayout:function({nativeEvent:{layout:{height:e}}}){Z(e)},children:(0,x.jsx)(WalletOptions,{wallet:K?.wallet,device:K?.device})}),sections:null!=z?z:_,renderSectionHeader:function({section:e}){return(0,x.jsxs)(x.Fragment,{children:[e.title?(0,x.jsx)(o.SortableSectionList.SectionHeader,{title:e.title,children:e.isHiddenWalletData&&n?(0,x.jsx)(o.ActionList,{title:e.title,renderTrigger:(0,x.jsx)(o.IconButton,{icon:"DotHorOutline",variant:"tertiary",ml:"$2"}),sections:[{items:[WalletDetails_objectSpread(WalletDetails_objectSpread({icon:oe?"CheckboxSolid":"SuqarePlaceholderOutline"},oe&&{iconProps:{color:"$iconActive"}}),{},{label:"Remember",onPress:function(){return re(!oe)}})]},{items:[{icon:"PencilOutline",label:t.formatMessage({id:g.ETranslations.global_rename}),onPress:function(){return alert("edit 1112")}},{destructive:!0,icon:"DeleteOutline",label:t.formatMessage({id:g.ETranslations.global_remove}),onPress:function(){return alert("edit 3332")}}]}]}):null}):null,0===e.data.length&&e.emptyText?(0,x.jsx)(f.c,{title:e.emptyText,titleProps:{size:"$bodyLg"}}):null]})},renderItem:function({item:t,drag:o,section:r}){var a,i,c=L?t:void 0,s=L?void 0:t,p=le(t),m=I&&p.isEmptyAddress,b=n?(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(AccountEditButton,{indexedAccount:s,firstIndexedAccount:L?void 0:r?.data?.[0],account:c,firstAccount:L?r?.data?.[0]:void 0,wallet:K?.wallet})}):m?(0,x.jsx)(u.J,{num:e,selectAfterCreate:!0,account:{walletId:K?.wallet?.id,networkId:C,indexedAccountId:s?.id,deriveType:w.deriveType},buttonRender:PlusButton}):null;return L&&c&&(a=A.A.getAccountCompatibleNetwork({account:c,networkId:I?w?.networkId:c.createAtNetwork})),!a&&s&&I&&(a=w?.networkId),(0,x.jsx)(f.c,WalletDetails_objectSpread(WalletDetails_objectSpread({renderAvatar:(0,x.jsx)(d.h,{loading:(0,x.jsx)(d.h.Loading,{w:"$10",h:"$10"}),indexedAccount:s,account:c,networkId:a}),title:t.name,titleProps:{numberOfLines:1},subtitle:p.address,subtitleProps:{color:p.isEmptyAddress?"$textCaution":"$textSubdued"}},!n&&{onPress:(i=(0,l.A)((function*(){if(!m){if(L){var t=a;w?.networkId&&E.A.isAllNetwork({networkId:w?.networkId})&&(t=w?.networkId),yield j.current.confirmAccountSelect({num:e,indexedAccount:void 0,othersWalletAccount:c,autoChangeToAccountMatchedNetworkId:t})}else K&&(yield j.current.confirmAccountSelect({num:e,indexedAccount:s,othersWalletAccount:void 0,autoChangeToAccountMatchedNetworkId:void 0}));D.popStack()}})),function onPress(){return i.apply(this,arguments)}),checkMark:function(){if(!m)return L?w.othersWalletAccountId===t.id:w.indexedAccountId===t.id}()}),{},{children:b}),t.id)},renderSectionFooter:function({section:n}){return T?(0,x.jsxs)(f.c,{onPress:(0,l.A)((function*(){if(L)return n.walletId===P.Hk&&B(),n.walletId===P.C5&&H(),void(n.walletId===P.lS&&R());if(K){var t=yield a.addHDNextIndexedAccount({walletId:n.walletId});j.current.updateSelectedAccountForHdOrHwAccount({num:e,walletId:K?.wallet?.id,indexedAccountId:t.indexedAccountId})}})),children:[(0,x.jsx)(o.Stack,{bg:"$bgStrong",borderRadius:"$2",p:"$2",borderCurve:"continuous",children:(0,x.jsx)(o.Icon,{name:"PlusSmallOutline"})}),(0,x.jsx)(f.c.Text,{userSelect:"none",primary:t.formatMessage({id:g.ETranslations.global_add_account}),primaryTextProps:{color:"$textSubdued"}})]}):null}}):null})]})}var V=n(896666),U=n(676353);function AccountSelectorCreateWalletButton(){var e=(0,o.useMedia)(),t=(0,c.A)(),n=((0,p.A)(),useAccountSelectorRoute()),r=(0,W.t1)(),a=n.params?.editable;if(!a)return null;var l=(0,x.jsx)(o.IconButton,{onPress:function(){r({params:{showCloseButton:!0}})},icon:"PlusSmallOutline",testID:"add-wallet"});return(0,x.jsx)(o.Stack,{p:"$1",alignItems:"center",children:e.gtMd?(0,x.jsxs)(x.Fragment,{children:[l,(0,x.jsx)(o.SizableText,{size:"$bodySm",color:"$textSubdued",mt:"$1",children:t.formatMessage({id:g.ETranslations.global_add_wallet})})]}):(0,x.jsx)(o.Tooltip,{renderContent:t.formatMessage({id:g.ETranslations.global_add_wallet}),renderTrigger:l,placement:"right"})})}var q=n(550684),X=["wallet","focusedWallet","onWalletPress","onWalletLongPress","isOthers","badge"];function WalletListItem_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function WalletListItem_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WalletListItem_ownKeys(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WalletListItem_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function WalletListItem_WalletListItem(e){var{wallet:t,focusedWallet:n,onWalletPress:r,onWalletLongPress:a,isOthers:l,badge:i}=e,s=(0,w.A)(e,X),d=((0,c.A)(),(0,o.useMedia)()),u={wallet:t,status:"default",badge:i},f=t?.name,p=n===t?.id,m=!0,onPress=function(){return t?.id&&r(t?.id)},onLongPress=function(){return t?.id&&a?.(t?.id)};l&&(f="Others",p="$$others"===n,u={img:"cardDividers",wallet:void 0},onPress=function(){return r("$$others")},onLongPress=function(){});var b=t?.hiddenWallets,g=f,h=(0,x.jsx)(q.A,WalletListItem_objectSpread(WalletListItem_objectSpread({delayLongPress:200,pointerEvents:"box-none"},void 0),{},{children:(0,x.jsxs)(o.Stack,WalletListItem_objectSpread(WalletListItem_objectSpread(WalletListItem_objectSpread(WalletListItem_objectSpread({role:"button",alignItems:"center",p:"$1",borderRadius:"$3",borderCurve:"continuous",userSelect:"none"},p?{bg:"$bgActive"}:{hoverStyle:{bg:"$bgHover"},pressStyle:{bg:"$bgActive"}}),{},{focusable:!0,focusStyle:{outlineWidth:2,outlineColor:"$focusRing",outlineStyle:"solid"}},{onPress:function(){m&&onPress()},onMouseMove:function(e){1===e?.nativeEvent?.which&&(m=!1)},onPressIn:function(){m=!0,onLongPress()}}),s),{},{children:[u?(0,x.jsx)(z.L,WalletListItem_objectSpread({},u)):null,d.gtMd?(0,x.jsx)(o.SizableText,{flex:1,numberOfLines:1,mt:"$1",size:"$bodySm",color:p?"$text":"$textSubdued",children:g}):null]}))})),A=d.md?(0,x.jsx)(o.Tooltip,{placement:"right",renderContent:g,renderTrigger:h}):h;return b&&b.length>0?(0,x.jsxs)(o.Stack,{borderRadius:"$3",borderWidth:1,borderColor:"$borderSubdued",space:"$3",borderCurve:"continuous",children:[A,b.map((function(e,t){return(0,x.jsx)(WalletListItem_WalletListItem,WalletListItem_objectSpread({wallet:e,focusedWallet:n,onWalletPress:r,onWalletLongPress:a},d.md&&{badge:Number(t)+1}),t)}))]}):A}function AccountSelectorWalletListSideBar_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function AccountSelectorWalletListSideBar({num:e}){var t,{serviceAccount:n}=s.A,{bottom:r}=(0,o.useSafeAreaInsets)(),c=(0,b.z$)(),d=useAccountSelectorRoute(),u=d.params?.editable,{selectedAccount:f}=(0,b.wz)({num:e}),{result:p,setResult:g,run:v}=(0,m.yk)((function(){return n.getWallets({nestedHiddenWallets:!0,ignoreEmptySingletonWalletAccounts:!0})}),[n],{checkIsFocused:!1}),w=null!=(t=p?.wallets)?t:_;(0,i.useEffect)((function(){var e=w.length;if(e>0){var t=w.filter((function(e){return"hw"===e.type})).length,n=e-t;U.z.updateUserProfile({walletCount:e,hwWalletCount:t,appWalletCount:n})}}),[w]),(0,i.useEffect)((function(){var e,t=(e=(0,l.A)((function*(){yield v()})),function fn(){return e.apply(this,arguments)});return k.iL.on(k.Tu.WalletUpdate,t),k.iL.on(k.Tu.AccountUpdate,t),function(){k.iL.off(k.Tu.WalletUpdate,t),k.iL.off(k.Tu.AccountUpdate,t)}}),[v]);var y,j=(0,i.useCallback)((function(t){c.current.updateSelectedAccountFocusedWallet({num:e,focusedWallet:t})}),[c,e]),S=(0,o.useMedia)().gtMd?68:48,O=(0,i.useMemo)((function(){var e=0,t=[];return w?.forEach?.((function(n,o){var r;0!==o&&(e+=12);var a=null!=(r=n?.hiddenWallets?.length)?r:0,l=(1+a)*S+12*a;t.push({offset:e,length:l,index:t.length}),e+=l,a>0&&(e+=2)})),t}),[w,S]);return(0,x.jsxs)(o.Stack,{testID:"account-selector-wallet-list",w:"$16",$gtMd:{w:"$32"},bg:"$bgSubdued",borderRightWidth:C.A.hairlineWidth,borderRightColor:"$neutral3",children:[h.Ay.isNativeAndroid?(0,x.jsx)(o.XStack,{py:"$4",justifyContent:"center",children:(0,x.jsx)(o.Page.Close,{children:(0,x.jsx)(V.v$,{icon:"CrossedLargeOutline"})})}):null,(0,x.jsx)(o.SortableListView,{px:"$2",contentContainerStyle:{py:"$2"},showsVerticalScrollIndicator:!1,getItemLayout:function(e,t){return O[t]},renderPlaceholder:function({item:e}){var t,n;return(0,x.jsx)(o.Stack,{h:(1+(null!=(t=e?.hiddenWallets?.length)?t:0))*S+12*(null!=(n=e?.hiddenWallets?.length)?n:0),mx:"$2",bg:"$bgActive",p:"$1",borderRadius:"$3",borderCurve:"continuous"})},keyExtractor:function(e){return`${e.id}`},data:w,onDragEnd:(y=(0,l.A)((function*(e){if(p){p.wallets=e.data,g(function AccountSelectorWalletListSideBar_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AccountSelectorWalletListSideBar_ownKeys(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AccountSelectorWalletListSideBar_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},p));var t=e.to+(e.to>e.from?1:0);yield n.insertWalletOrder({targetWalletId:w[e.from].id,startWalletId:w[t-1]?.id,endWalletId:w[t]?.id,emitEvent:!0})}})),function(e){return y.apply(this,arguments)}),extraData:f.focusedWallet,renderItem:function({item:e,drag:t}){var n;return A.A.isQrWallet({walletId:e.id})&&(n="QR"),(0,x.jsx)(o.Stack,{mb:"$3",children:(0,x.jsx)(WalletListItem_WalletListItem,{wallet:e,focusedWallet:f.focusedWallet,onWalletPress:j,onWalletLongPress:t,testID:`wallet-${e.id}`,badge:n},e.id)})}}),u?(0,x.jsx)(o.Stack,{p:"$2",borderTopWidth:C.A.hairlineWidth,borderTopColor:"$borderSubdued",mb:r,children:(0,x.jsx)(AccountSelectorCreateWalletButton,{})}):null]})}function AccountSelectorStack({num:e}){return(0,x.jsxs)(o.Page,{safeAreaEnabled:!1,children:[(0,x.jsx)(o.Page.Header,{headerShown:!1}),(0,x.jsxs)(o.Page.Body,{flexDirection:"row",children:[(0,x.jsx)(AccountSelectorWalletListSideBar,{num:e}),(0,x.jsx)(WalletDetails,{num:e})]})]})}function AccountSelectorStackPage({route:e}){var{num:t,sceneName:n,sceneUrl:o}=e.params;return(0,x.jsx)(r.b8,{enabledNum:[t],config:{sceneName:n,sceneUrl:o},children:(0,x.jsx)(AccountSelectorStack,{num:t})})}}}]);