"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[763],{323104:(e,t,r)=>{r.d(t,{A:()=>useHomePageWidth});var n=r(514041),o=r(812715),a=r(490343),i=r(40651),c=r(989375);function useHomePageWidth(){var e=(0,a.useMedia)(),t=(0,o.A)().width,r=(0,n.useMemo)((function(){return(0,c.RQ)().size.sideBarWidth.val}),[]),{leftSidebarCollapsed:s}=(0,i.A)();return{screenWidth:t,pageWidth:e.md||s?t:t-r}}},700763:(e,t,r)=>{r.r(t),r.d(t,{default:()=>MarketHomeWithProvider});var n=r(324586),o=r(514041),a=r(546591),i=r(462723),c=r(490343),s=r(604343),l=r(318822),u=r(663522),d=r(60153),f=r(323104),m=r(908867),h=r(254491),b=r(217715),p=r(831085);function MarketHomeHeader(){var e=(0,m.A)(),t=(0,o.useCallback)((function(){return null}),[]),r=(0,o.useCallback)((function(){return(0,p.jsx)(c.Stack,{width:280,children:(0,p.jsx)(b.I,{})})}),[]);return(0,p.jsx)(c.Page.Header,{title:e.formatMessage({id:h.ETranslations.global_market}),headerLeft:t,headerRight:r})}function MarketHomeHeader_md_MarketHomeHeader(){var e=(0,m.A)(),t=(0,o.useCallback)((function(){return(0,p.jsx)(c.SizableText,{size:"$headingLg",ml:u.Ay.isNativeIOS?"$1":void 0,children:e.formatMessage({id:h.ETranslations.global_market})})}),[e]),r=(0,o.useCallback)((function(){return null}),[]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.Page.Header,{title:"",headerLeft:t,headerRight:r}),(0,p.jsx)(c.Stack,{px:"$5",pb:"$3",children:(0,p.jsx)(b.I,{})})]})}var g=r(586330),k=r(701732),x=r(32943),j=r(757559),S=r(18910),y=r(498356),w=r(825903),v=r(839850),M=r(450255),O=["coingeckoId"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $=(0,o.memo)((function BasicMarketMore(e){var{coingeckoId:t}=e,r=(0,v.A)(e,O),n=(0,m.A)(),a=(0,M.B)(),i=((0,o.useCallback)((function(){a.removeFormWatchList(t)}),[a,t]),(0,o.useCallback)((function(){a.MoveToTop(t)}),[a,t])),s=(0,o.useMemo)((function(){return[{items:[{icon:"ArrowTopOutline",label:n.formatMessage({id:h.ETranslations.market_move_to_top}),onPress:i}]}]}),[i,n]);return(0,p.jsx)(c.ActionList,{title:"",renderTrigger:(0,p.jsx)(c.IconButton,_objectSpread({title:n.formatMessage({id:h.ETranslations.global_more}),icon:"DotVerSolid",variant:"tertiary",iconSize:"$5"},r)),sections:s})})),P=r(172120),_=r(202338),T=r(781889),I=(0,o.forwardRef)((function({height:e,width:t},r){return(0,p.jsx)(c.View,{width:t,height:e,children:(0,p.jsx)("canvas",{style:{width:`${t}px`,height:`${e}px`},ref:r})})}));I.displayName="Canvas";const C=(0,o.memo)((function({data:e,lineColor:t,linearGradientColor:r,height:n=40,width:a=50,lineWidth:i=1,smooth:c=!0,scale:s=.1}){var l,u=(0,o.useMemo)((function(){return window.devicePixelRatio||1}),[]),d=(0,w.YE)(),f=(0,o.useCallback)((l=(0,g.A)((function*(o){if(o){o.width=a*u,o.height=n*u;var l=n-5,f=e||[],m=Math.max(...f),h=Math.min(...f),b=l/(m-h),p=o.getContext("2d");if(p){p.scale(u,u),p.beginPath(),p.lineWidth=i,p.strokeStyle=t;var g=a/(f.length-1),k=0,x=0;f.forEach((function(e,t){var r=l-(e-h)*b;if(c&&t>=2&&t<f.length-1){var n=g*(t-1),o=l-(f[t-1]-h)*b,a=g*(t-2),i=l-(f[t-2]-h)*b,u=g*(t+1),d=l-(f[t+1]-h)*b,m=n+(k-a)*s,j=o+(r-i)*s,S=k-(u-n)*s,y=r-(d-o)*s;j<0&&(j=0),y<0&&(y=0),p.bezierCurveTo(m,j,S,y,k,r)}else p.lineTo(k,r);t===f.length-1&&(x=r),k+=g})),p.lineTo(k+g,x),p.lineTo(k+g,n),p.lineTo(0,n),p.stroke(),p.closePath();var j=p.createLinearGradient(0,0,0,l);j.addColorStop(0,r),j.addColorStop(1,"dark"===d?"rgba(0,0,0,0)":"rgba(255,255,255,0)"),p.fillStyle=j,p.fill(),p.clearRect(0,n-i,a,i)}}})),function(e){return l.apply(this,arguments)}),[a,u,n,e,i,t,r,d,c,s]);return(0,p.jsx)(I,{width:a,height:n,ref:f})}));var E=r(610101);function MarketHomeList_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function MarketHomeList_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?MarketHomeList_ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MarketHomeList_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var L={light:["rgba(0, 113, 63)","rgba(196, 0, 6)"],dark:["rgba(70, 254, 165)","rgba(255, 149, 146)"]},A={light:["rgba(0, 113, 63, 0.2)","rgba(196, 0, 6, 0.2)"],dark:["rgba(70, 254, 165, 0.2)","rgba(255, 149, 146, 0.2)"]};function TableMdSkeletonRow(){return(0,p.jsxs)(c.XStack,{h:60,jc:"space-between",flex:1,children:[(0,p.jsxs)(c.XStack,{space:"$3",ai:"center",children:[(0,p.jsx)(c.Skeleton,{w:"$10",h:"$10",radius:"round"}),(0,p.jsxs)(c.YStack,{space:"$2",children:[(0,p.jsx)(c.Skeleton,{w:"$16",h:"$2.5"}),(0,p.jsx)(c.Skeleton,{w:"$24",h:"$2.5"})]})]}),(0,p.jsxs)(c.XStack,{space:"$5",ai:"center",children:[(0,p.jsx)(c.Skeleton,{w:"$16",h:"$2.5"}),(0,p.jsx)(c.Skeleton,{w:"$16",h:"$2.5"})]})]})}function MdPlaceholder(){return(0,p.jsx)(c.Stack,{borderRadius:"$2",width:"$20",height:"$8",bg:"$bgDisabled",jc:"center",ai:"center",children:(0,p.jsx)(c.SizableText,{size:"$bodyMdMedium",children:"-"})})}var z=x.Dc,H={space:"$3",px:"$3",mx:"$2"};var D=(0,o.memo)((function BasicMarketHomeList({category:e,tabIndex:t=0,showMoreAction:r=!1,ordered:n}){var a=(0,m.A)(),i=(0,y.A)(),f=(0,o.useRef)(0),[b,x]=(0,o.useState)([]),v=(0,o.useCallback)((0,g.A)((function*(){if(Date.now()-f.current>45e3){var t=yield d.A.serviceMarket.fetchCategory(e.categoryId,e.coingeckoIds,!0);k.A.runAfterInteractions((function(){x(t)}))}})),[e.categoryId,e.coingeckoIds]);(0,o.useEffect)((function(){v()}),[v]);var O,I=(0,o.useCallback)((function(e){i.push(j.FE.MarketDetail,{token:e.coingeckoId})}),[i]),{gtMd:D,md:W}=(0,c.useMedia)(),N=(0,o.useMemo)((function(){var t=e.coingeckoIds?.length?b?.filter((function(t){return e.coingeckoIds.includes(t.coingeckoId)})):b;return n?e.coingeckoIds.reduce((function(e,r){var n=t?.find((function(e){return e?.coingeckoId===r}));return n&&e.push(n),e}),[]):t}),[e.coingeckoIds,b,n]),{sortedListData:B,handleSortTypeChange:R,sortByType:K,setSortByType:X}=(0,E.K)(N),[F,U]=(0,o.useState)(["price","priceChangePercentage24H"]),Y=(0,M.B)(),G=(0,o.useCallback)((O=(0,g.A)((function*({coingeckoId:e,symbol:t}){var n=Y.isInWatchList(e),o=t.toUpperCase();c.ActionList.show(n?{title:o,sections:[{items:[{destructive:!0,icon:"DeleteOutline",label:a.formatMessage({id:h.ETranslations.market_remove_from_watchlist}),onPress:function(){Y.removeFormWatchList(e)}},r&&{icon:"ArrowTopOutline",label:a.formatMessage({id:h.ETranslations.market_move_to_top}),onPress:function(){Y.MoveToTop(e)}}].filter(Boolean)}]}:{title:o,sections:[{items:[{icon:"StarOutline",label:a.formatMessage({id:h.ETranslations.market_add_to_watchlist}),onPress:function(){Y.addIntoWatchList(e)}}]}]})})),function(e){return O.apply(this,arguments)}),[Y,a,r]),[V]=(0,s.useSettingsPersistAtom)(),J=V.currencyInfo.symbol,q=(0,o.useCallback)((function(e){var t={onPress:function(){return I(e)},onLongPress:function(){return G(e)}};return(0,p.jsx)(z,MarketHomeList_objectSpread(MarketHomeList_objectSpread({containerStyle:{flex:1},style:{flex:1}},t),{},{children:(0,p.jsxs)(c.XStack,MarketHomeList_objectSpread(MarketHomeList_objectSpread(MarketHomeList_objectSpread({height:60,flex:1,justifyContent:"space-between",userSelect:"none",space:"$2",px:"$5"},S.Y),void 0),{},{children:[(0,p.jsxs)(c.XStack,{space:"$3",ai:"center",flexShrink:1,children:[(0,p.jsx)(_.t,{uri:e.image,size:"$10"}),(0,p.jsxs)(c.YStack,{flexShrink:1,children:[(0,p.jsx)(c.SizableText,{size:"$bodyLgMedium",selectable:!1,numberOfLines:1,flexShrink:1,children:e.symbol.toUpperCase()}),(0,p.jsxs)(c.SizableText,{size:"$bodySm",color:"$textSubdued",selectable:!1,children:["VOL ",(0,p.jsx)(c.NumberSizeableText,{selectable:!1,size:"$bodySm",formatter:"marketCap",color:"$textSubdued",formatterOptions:{currency:J},children:e.totalVolume})]})]})]}),(0,p.jsxs)(c.XStack,{ai:"center",space:"$5",children:[(0,p.jsx)(c.NumberSizeableText,{selectable:!1,flexShrink:1,numberOfLines:1,size:"$bodyLgMedium",formatter:"price"===F[0]?"price":"marketCap",formatterOptions:{currency:J},children:e[F[0]]}),e[F[1]]?(0,p.jsx)(c.XStack,{width:"$20",height:"$8",jc:"center",ai:"center",backgroundColor:Number(e.priceChangePercentage24H)>0?"$bgSuccessStrong":"$bgCriticalStrong",borderRadius:"$2",children:(0,p.jsx)(c.NumberSizeableText,{selectable:!1,size:"$bodyMdMedium",color:"white",formatter:"priceChange",formatterOptions:{showPlusMinusSigns:!0},children:e[F[1]]})}):(0,p.jsx)(MdPlaceholder,{})]})]}))}))}),[J,G,F,I]),Q=(0,o.useCallback)((function({label:e}){return(0,p.jsxs)(c.XStack,{ai:"center",space:"$1",children:[(0,p.jsx)(c.SizableText,{size:"$bodyMd",color:"$textSubdued",children:e}),(0,p.jsx)(c.Icon,{name:"ChevronDownSmallSolid",size:"$4"})]})}),[]),[Z,ee]=(0,o.useState)("Default"),te=(0,o.useMemo)((function(){return[{label:a.formatMessage({id:h.ETranslations.global_default}),value:"Default"},{label:a.formatMessage({id:h.ETranslations.market_last_price}),value:"Last price",options:{columnName:"price",order:"desc"}},{label:a.formatMessage({id:h.ETranslations.market_most_24h_volume}),value:"Most 24h volume",options:{columnName:"totalVolume",order:"desc"}},{label:a.formatMessage({id:h.ETranslations.market_most_market_cap}),value:"Most market cap",options:{columnName:"marketCap",order:"desc"}},{label:a.formatMessage({id:h.ETranslations.market_price_change_up}),value:"Price change up",options:{columnName:F[1],order:"desc"}},{label:a.formatMessage({id:h.ETranslations.market_price_change_down}),value:"Price change down",options:{columnName:F[1],order:"asc"}}]}),[a,F]),re=(0,o.useCallback)((function(e){ee(e);var t=te.find((function(t){return t.value===e}));X(t?.options)}),[te,X]),ne=(0,o.useRef)(null),oe=(0,o.useCallback)((function({tabIndex:e}){setTimeout((function(){ne&&(ne.current.style.contentVisibility=e===t?"visible":"hidden"),e!==t?W&&re("Default"):v()}),0)}),[v,re,W,t]);(0,o.useEffect)((function(){return l.iL.on(l.Tu.SwitchMarketHomeTab,oe),function(){l.iL.off(l.Tu.SwitchMarketHomeTab,oe)}}),[W,oe,t]);var ae=(0,w.YE)(),ie=L[ae],ce=A[ae],{gtLg:se,gtXl:le}=(0,c.useMedia)(),ue=(0,o.useMemo)((function(){return D?[{title:"#",dataIndex:"serialNumber",columnWidth:40,render:function(e){return(0,p.jsx)(c.SizableText,{size:"$bodyMd",color:"$textSubdued",selectable:!1,children:null!=e?e:"-"})},renderSkeleton:function(){return(0,p.jsx)(c.Skeleton,{w:"$4",h:"$3"})}},{title:a.formatMessage({id:h.ETranslations.global_name}),dataIndex:"symbol",columnWidth:140,render:function(e,t){return(0,p.jsxs)(c.XStack,{space:"$3",ai:"center",children:[(0,p.jsx)(_.t,{uri:t.image,size:"$8"}),(0,p.jsxs)(c.YStack,{width:"$24",children:[(0,p.jsx)(c.SizableText,{size:"$bodyLgMedium",numberOfLines:1,selectable:!1,children:e.toUpperCase()}),(0,p.jsx)(c.SizableText,{size:"$bodySm",color:"$textSubdued",numberOfLines:1,selectable:!1,children:t.name})]})]})},renderSkeleton:function(){return(0,p.jsxs)(c.XStack,{space:"$3",children:[(0,p.jsx)(c.Skeleton,{w:"$8",h:"$8",radius:"round"}),(0,p.jsxs)(c.YStack,{space:"$2",children:[(0,p.jsx)(c.Skeleton,{w:"$16",h:"$3"}),(0,p.jsx)(c.Skeleton,{w:"$24",h:"$3"})]})]})}},{title:a.formatMessage({id:h.ETranslations.global_price}),dataIndex:"price",align:"right",columnProps:{flexGrow:1,flexBasis:0},render:function(e){return(0,p.jsx)(c.NumberSizeableText,{selectable:!1,size:"$bodyMd",formatter:"price",formatterOptions:{currency:J},children:e})},renderSkeleton:function(){return(0,p.jsx)(c.Skeleton,{w:"$20",h:"$3"})}},se?{title:a.formatMessage({id:h.ETranslations.market_one_hour_percentage}),align:"right",dataIndex:"priceChangePercentage1H",columnProps:{flexGrow:1,flexBasis:0},render:function(e){return(0,p.jsx)(T.E,{children:e})},renderSkeleton:function(){return(0,p.jsx)(c.Skeleton,{w:"$10",h:"$3"})}}:void 0,{title:a.formatMessage({id:h.ETranslations.market_twenty_four_hour_percentage}),columnProps:{flexGrow:1,flexBasis:0},align:"right",dataIndex:"priceChangePercentage24H",render:function(e){return(0,p.jsx)(T.E,{children:e})},renderSkeleton:function(){return(0,p.jsx)(c.Skeleton,{w:"$10",h:"$3"})}},se?{title:a.formatMessage({id:h.ETranslations.market_seven_day_percentage}),align:"right",columnProps:{flexGrow:1,flexBasis:0},dataIndex:"priceChangePercentage7D",render:function(e){return(0,p.jsx)(T.E,{children:e})},renderSkeleton:function(){return(0,p.jsx)(c.Skeleton,{w:"$10",h:"$3"})}}:void 0,{title:a.formatMessage({id:h.ETranslations.market_seven_day_percentage}),dataIndex:"totalVolume",columnProps:{flexGrow:1,flexBasis:0},align:"right",render:function(e){return(0,p.jsx)(c.NumberSizeableText,{selectable:!1,size:"$bodyMd",formatter:"marketCap",formatterOptions:{currency:J},children:e||"-"})},renderSkeleton:function(){return(0,p.jsx)(c.Skeleton,{w:"$20",h:"$3"})}},{title:a.formatMessage({id:h.ETranslations.global_market_cap}),dataIndex:"marketCap",columnProps:{flexGrow:1,flexBasis:0},align:"right",render:function(e){return(0,p.jsx)(c.NumberSizeableText,{selectable:!1,size:"$bodyMd",formatter:"marketCap",formatterOptions:{currency:J},children:e||"-"})},renderSkeleton:function(){return(0,p.jsx)(c.Skeleton,{w:"$20",h:"$3"})}},le?{title:a.formatMessage({id:h.ETranslations.market_last_seven_days}),dataIndex:"sparkline",columnProps:{flexGrow:1,flexBasis:0,minWidth:100},align:"right",renderSkeleton:function(){return(0,p.jsx)(c.Skeleton,{w:"$20",h:"$3"})},render:function(e,t){return(0,p.jsx)(c.View,{children:(0,p.jsx)(C,{data:e,width:100,height:40,lineColor:t.priceChangePercentage7D&&Number(t.priceChangePercentage7D)>=0?ie[0]:ie[1],linearGradientColor:t.priceChangePercentage7D&&Number(t.priceChangePercentage7D)>=0?ce[0]:ce[1]})})}}:void 0,{title:"",dataIndex:"action",columnWidth:r?88:64,align:"center",renderSkeleton:function(){return null},render:function(e,n){return(0,p.jsxs)(c.XStack,{flex:1,children:[(0,p.jsx)(c.Stack,{flex:1,ai:"center",children:(0,p.jsx)(P.J,{coingeckoId:n.coingeckoId,tabIndex:t},n.coingeckoId)}),r?(0,p.jsx)(c.Stack,{flex:1,ai:"center",children:(0,p.jsx)($,{coingeckoId:n.coingeckoId})}):null]})}}].filter(Boolean):[{title:"",dataIndex:"serialNumber",columnProps:{flex:1,width:void 0,px:0},render:function(e,t){return q(t)},renderSkeleton:function(){return(0,p.jsx)(TableMdSkeletonRow,{})}}]}),[ce,J,se,D,le,a,ie,q,r,t]),de=(0,o.useCallback)((function(e){return{onPress:function(){return I(e)}}}),[I]),fe=(0,o.useCallback)((function(e){if(!["sparkline","action"].includes(e.dataIndex))return{onSortTypeChange:function(t){R?.({columnName:e.dataIndex,order:t})}}}),[R]),me=(0,o.useMemo)((function(){return u.Ay.isNativeAndroid?null:(0,p.jsx)(c.Table.Skeleton,{count:6,columns:ue})}),[ue]);return u.Ay.isNativeAndroid&&!B?.length?(0,p.jsx)(c.YStack,{flex:1,ai:"center",jc:"center",children:(0,p.jsx)(c.Spinner,{size:"large"})}):(0,p.jsxs)(p.Fragment,{children:[D?void 0:(0,p.jsx)(c.YStack,{px:"$5",borderBottomWidth:"$px",borderBottomColor:"$borderSubdued",children:(0,p.jsx)(c.XStack,{h:"$11",ai:"center",justifyContent:"space-between",children:(0,p.jsxs)(c.XStack,{ai:"center",space:"$2",children:[(0,p.jsx)(c.Icon,{name:"FilterSortOutline",color:"$iconSubdued",size:"$5"}),(0,p.jsx)(c.Select,{items:te,title:a.formatMessage({id:h.ETranslations.market_sort_by}),value:Z,onChange:re,renderTrigger:Q})]})})}),(0,p.jsx)(c.YStack,{flex:1,ref:ne,$gtMd:{pt:"$3"},children:(0,p.jsx)(c.Table,{showBackToTopButton:!0,stickyHeaderHiddenOnScroll:!0,onRow:de,onHeaderRow:fe,rowProps:D?H:void 0,showHeader:D,columns:ue,dataSource:B,TableFooterComponent:D?(0,p.jsx)(c.Stack,{height:60}):void 0,extraData:D?void 0:F,TableEmptyComponent:me})})]})})),W=r(310944);function MarketWatchList_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function MarketWatchList_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?MarketWatchList_ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MarketWatchList_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function RecommendItem({icon:e,checked:t=!1,onChange:r,tokenName:n,symbol:a,coingeckoId:i}){var{sharedFrameStyles:s}=(0,o.useMemo)((function(){return(0,c.getSharedButtonStyles)({disabled:!1,loading:!1})}),[]);return(0,p.jsxs)(c.XStack,MarketWatchList_objectSpread(MarketWatchList_objectSpread({userSelect:"none",flexGrow:1,flexBasis:0,justifyContent:"space-between",px:u.Ay.isExtensionUiPopup?"$3":"$4",py:u.Ay.isExtensionUiPopup?"$1.5":"$3.5",borderRadius:"$3",onPress:function(){r(!t,i)},ai:"center"},s),{},{children:[(0,p.jsxs)(c.XStack,{space:"$3",ai:"center",flexShrink:1,children:[(0,p.jsx)(_.t,{uri:e,size:"$8"}),(0,p.jsxs)(c.YStack,{flexShrink:1,children:[(0,p.jsx)(c.SizableText,{size:"$bodyLgMedium",numberOfLines:1,children:a.toUpperCase()}),(0,p.jsx)(c.SizableText,{size:"$bodyMd",color:"$textSubdued",flexShrink:1,numberOfLines:1,children:n})]})]}),t?(0,p.jsx)(c.Icon,{name:"CheckRadioSolid",size:"$6",color:"$iconActive"}):(0,p.jsx)(c.Stack,{w:"$6",h:"$6"})]}))}var N=8;function MarketWatchList({category:e}){var t=(0,m.A)(),[{data:r,isMounted:n}]=(0,W.Kv)(),a=(0,M.B)(),i=(0,o.useMemo)((function(){return e?.recommendedTokens?.slice(0,N)?.map((function(e){return e.coingeckoId}))||[]}),[e.recommendedTokens]),[s,l]=(0,o.useState)(i),d=(0,o.useCallback)((function(e,t){l((function(r){return e?[...r,t]:r.filter((function(e){return e!==t}))}))}),[]),f=(0,o.useCallback)((function(){a.addIntoWatchList(s),setTimeout((function(){l(i)}),50)}),[a,s,i]),{gtMd:b}=(0,c.useMedia)(),g=(0,o.useMemo)((function(){return(0,p.jsx)(c.Button,{width:"100%",size:"large",disabled:!s.length,variant:"primary",onPress:f,children:t.formatMessage({id:h.ETranslations.market_add_number_tokens},{number:s.length||0})})}),[s.length,f,t]),k=(0,o.useMemo)((function(){return{categoryId:"all",coingeckoIds:r?.map((function({coingeckoId:e}){return e}))}}),[r]),x=(0,o.useCallback)((function(){return e?.recommendedTokens?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(c.ScrollView,{contentContainerStyle:{ai:"center"},px:"$5",py:u.Ay.isExtensionUiPopup?"$5":"$8",children:[(0,p.jsx)(c.SizableText,{size:u.Ay.isExtensionUiPopup?"$headingXl":"$heading3xl",children:t.formatMessage({id:h.ETranslations.market_empty_watchlist_title})}),(0,p.jsx)(c.SizableText,{size:u.Ay.isExtensionUiPopup?"$bodyMdMedium":"$bodyLgMedium",pt:"$2",children:t.formatMessage({id:h.ETranslations.market_empty_watchlist_desc})}),(0,p.jsxs)(c.YStack,{pt:u.Ay.isExtensionUiPopup?"$5":"$8",space:"$2.5",flexWrap:"wrap",width:"100%",$gtMd:{maxWidth:480},children:[new Array(Math.ceil(N/2)).fill(0).map((function(t,r){return(0,p.jsx)(c.XStack,{space:"$2.5",children:new Array(2).fill(0).map((function(t,n){var o=e.recommendedTokens?.[2*r+n];return o?(0,p.jsx)(RecommendItem,{coingeckoId:o.coingeckoId,checked:s.includes(o.coingeckoId),icon:o.iconUrl,symbol:o.symbol,tokenName:o.name,onChange:d},o.coingeckoId):null}))},r)})),b?(0,p.jsx)(c.YStack,{mt:"$8",children:g}):null]})]}),b?null:(0,p.jsx)(c.YStack,{p:"$5",children:g})]}):null}),[e.recommendedTokens,s,g,b,d,t]);return n?0===r?.length?x():(0,p.jsx)(D,{showMoreAction:!0,ordered:!0,category:k}):null}var B=r(802172);function MarketHome_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var R,K=(0,o.forwardRef)((function BasicAnimatedIcon({normalColor:e,selectedColor:t},r){var[n,a]=(0,o.useState)(t),i=(0,o.useRef)(!1);return(0,o.useImperativeHandle)(r,(function(){return{setIsSelected:function(r){i.current=r,a(r?t:e)}}}),[e,t]),(0,o.useEffect)((function(){n!==e&&n!==t&&a(i.current?t:e)}),[t,e,n]),(0,p.jsx)(c.Icon,{name:"StarOutline",color:n,size:"$4.5",px:"$1"})}));function MarketHome(){var{screenWidth:e,pageWidth:t}=(0,f.A)();null==R&&(R=new a.A.Value(t)),(0,o.useEffect)((function(){R&&a.A.timing(R,{toValue:t,duration:400,easing:i.A.inOut(i.A.quad),useNativeDriver:!1}).start()}),[t]);var[r,s]=(0,o.useState)([]);(0,o.useEffect)((function(){d.A.serviceMarket.fetchCategories().then((function(e){s(e)}))}),[]);var{gtMd:m}=(0,c.useMedia)(),h=(0,o.useMemo)((function(){return r?.map((function(e,t){return{title:e.name,page:function(){return 0===t?(0,p.jsx)(MarketWatchList,{category:e}):(0,p.jsx)(D,{category:e,tabIndex:t})}}}))||[]}),[r]),b=(0,o.useRef)(null),g=(0,o.useMemo)((function(){return{contentContainerStyle:{paddingRight:"$5"},showHorizontalScrollButton:!m&&u.Ay.isRuntimeBrowser,renderItem:function(e,t,r){return 0!==t||m?(0,p.jsx)(c.Tab.SelectedLabel,function MarketHome_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?MarketHome_ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MarketHome_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r)):(0,p.jsx)(K,{ref:b,normalColor:r?.normalColor,selectedColor:r?.selectedColor})}}}),[m]),k=(0,o.useCallback)((function(e){b?.current?.setIsSelected?.(0===e),l.iL.emit(l.Tu.SwitchMarketHomeTab,{tabIndex:e})}),[]);return(0,p.jsxs)(c.Page,{children:[m?(0,p.jsx)(MarketHomeHeader,{}):(0,p.jsx)(MarketHomeHeader_md_MarketHomeHeader,{}),(0,p.jsx)(c.Page.Body,{children:h.length?(0,p.jsx)(c.Tab.Page,{data:h,contentItemWidth:R,contentWidth:e,headerProps:g,onSelectedPageIndex:k,windowSize:3}):(0,p.jsx)(c.Stack,{flex:1,ai:"center",jc:"center",children:(0,p.jsx)(c.Spinner,{size:"large"})})})]})}function MarketHomeWithProvider(){return(0,p.jsx)(B.m,{storeName:s.EJotaiContextStoreNames.marketWatchList,children:(0,p.jsx)(MarketHome,{})})}},802172:(e,t,r)=>{r.d(t,{m:()=>u});var n=r(324586),o=r(514041),a=r(2577),i=r(597102),c=r(310944),s=r(907481),l=r(831085);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=(0,o.memo)((function(e){var{children:t,storeName:r}=e,n=(0,s.z)(r),o=a.A.getOrCreateStore(n);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.H,_objectSpread({},n)),(0,l.jsx)(c.Hn,{store:o,children:t})]})}));u.displayName="MarketWatchListProviderMirror"},217715:(e,t,r)=>{r.d(t,{I:()=>MarketHomeHeaderSearchBar});var n=r(514041),o=r(908867),a=r(490343),i=r(498356),c=r(254491),s=r(757559),l=r(390574),u=r(506851),d=r(831085);function MarketHomeHeaderSearchBar(){var e=(0,o.A)(),t=(0,i.A)(),r=(0,n.useCallback)((function(){t.pushModal(s.ry.UniversalSearchModal,{screen:l.j.UniversalSearch,params:{filterType:u.j.MarketToken}})}),[t]);return(0,d.jsxs)(a.XStack,{$gtMd:{minWidth:280},children:[(0,d.jsx)(a.SearchBar,{placeholder:e.formatMessage({id:c.ETranslations.global_search_tokens}),containerProps:{w:"100%"},$gtMd:{size:"small"}},"MarketHomeSearchInput"),(0,d.jsx)(a.View,{position:"absolute",top:0,left:0,right:0,bottom:0,onPress:r})]})}},172120:(e,t,r)=>{r.d(t,{J:()=>h});var n=r(324586),o=r(839850),a=r(514041),i=r(908867),c=r(490343),s=r(153763),l=r(318822),u=r(254491),d=r(450255),f=r(831085),m=["coingeckoId","size","tabIndex"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var h=(0,a.memo)((function BasicMarketStar(e){var{coingeckoId:t,size:r,tabIndex:h}=e,b=(0,o.A)(e,m),p=(0,i.A)(),g=(0,d.B)(),[k,x]=(0,a.useState)((function(){return g.isInWatchList(t)})),j=(0,s.E)(),{gtMd:S}=(0,c.useMedia)(),y=(0,a.useCallback)((function({tabIndex:e}){e===h&&x(g.isInWatchList(t))}),[g,t,h]);(0,a.useEffect)((function(){if(S&&h)return l.iL.on(l.Tu.SwitchMarketHomeTab,y),function(){l.iL.off(l.Tu.SwitchMarketHomeTab,y)}}),[S,y,h]),(0,a.useEffect)((function(){j&&x(g.isInWatchList(t))}),[g,t,j]);var w=(0,a.useCallback)((function(){k?g.removeFormWatchList(t):g.addIntoWatchList(t),x(!k)}),[g,t,k]);return(0,f.jsx)(c.IconButton,function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({title:p.formatMessage({id:k?u.ETranslations.market_remove_from_watchlist:u.ETranslations.market_add_to_watchlist}),icon:k?"StarSolid":"StarOutline",variant:"tertiary",size:r,iconSize:r?void 0:"$5",iconProps:{color:k?"$iconActive":"$iconDisabled"},onPress:w},b))}))},202338:(e,t,r)=>{r.d(t,{t:()=>i});var n=r(514041),o=r(490343),a=r(831085);var i=(0,n.memo)((function BasicMarketTokenIcon({uri:e,size:t}){return e?(0,a.jsxs)(o.Image,{size:t,circular:!0,children:[(0,a.jsx)(o.Image.Source,{source:{uri:decodeURIComponent(e)}}),(0,a.jsx)(o.Image.Fallback,{children:(0,a.jsx)(o.Stack,{bg:"$bgStrong",ai:"center",jc:"center",width:"100%",height:"100%",children:(0,a.jsx)(o.Icon,{name:"CoinOutline",size:"$6",color:"$iconSubdued"})})}),(0,a.jsx)(o.Image.Loading,{children:(0,a.jsx)(o.Skeleton,{width:"100%",height:"100%",radius:"round"})})]}):(0,a.jsx)(o.Skeleton,{width:t,height:t})}))},781889:(e,t,r)=>{r.d(t,{E:()=>PriceChangePercentage});var n=r(324586),o=r(839850),a=r(490343),i=r(831085),c=["children"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function PriceChangePercentage(e){var{children:t}=e,r=(0,o.A)(e,c);return t?(0,i.jsx)(a.NumberSizeableText,_objectSpread(_objectSpread({selectable:!1,size:"$bodyMd",formatter:"priceChange",color:Number(t)>0?"$textSuccess":"$textCritical",formatterOptions:{showPlusMinusSigns:!0}},r),{},{children:t})):(0,i.jsx)(a.SizableText,{size:"$bodyMd",children:"-"})}},610101:(e,t,r)=>{r.d(t,{K:()=>useSortType});var n=r(514041),getNumericValue=function(e,t,r){var n=e[t];return"number"==typeof n?n:"desc"===r?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER},useSortType=function(e,t){var r=(0,n.useRef)(),o=(0,n.useRef)(t);r.current!==e&&(r.current=e),o.current!==t&&(o.current=t,r.current=e);var[a,i]=(0,n.useState)({columnName:"default",order:"desc"}),c=(0,n.useCallback)((function(e){i(e)}),[]),s=(0,n.useMemo)((function(){if(r.current?.length){var t=r.current[0]?.[a?.columnName];if(a?.order)return function(e){return"number"==typeof e||null===e||"-"===e}(t)?r.current?.slice().sort((function(e,t){var r=getNumericValue(e,a.columnName,a.order),n=getNumericValue(t,a.columnName,a.order);return"desc"===a.order?n-r:r-n})):"string"==typeof t?r.current?.slice().sort((function(e,t){var r=e[a.columnName],n=t[a.columnName];return"desc"===a.order?r.localeCompare(n,"en",{sensitivity:"base"}):n.localeCompare(r,"en",{sensitivity:"base"})})):e}return r.current}),[e,a?.columnName,a?.order]);return(0,n.useMemo)((function(){return{sortedListData:s,handleSortTypeChange:c,sortByType:a,setSortByType:i}}),[c,a,s,i])}},450255:(e,t,r)=>{r.d(t,{B:()=>useWatchListAction});var n=r(514041),o=r(908867),a=r(490343),i=r(254491),c=r(310944),useWatchListAction=function(){var e=(0,o.A)(),t=(0,c.qr)(),r=(0,n.useCallback)((function(e){var r={coingeckoId:e};t.current.removeFormWatchList(r)}),[t]),s=(0,n.useCallback)((function(r){var n=Array.isArray(r)?r:[r];t.current.addIntoWatchList(n.map((function(e){return{coingeckoId:e}}))),a.Toast.success({title:e.formatMessage({id:i.ETranslations.market_added_to_watchlist})})}),[t,e]),l=(0,n.useCallback)((function(e){var r={coingeckoId:e};t.current.moveToTop(r)}),[t]),u=(0,n.useCallback)((function(e){return t.current.isInWatchList(e)}),[t]);return(0,n.useMemo)((function(){return{removeFormWatchList:r,addIntoWatchList:s,MoveToTop:l,isInWatchList:u}}),[l,s,u,r])}}}]);