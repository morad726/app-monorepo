"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[78234],{793437:(e,t,r)=>{r.d(t,{X:()=>OpenInAppButton});var n=r(586330),a=r(514041),o=r(908867),i=r(17617),s=r(490343),l=r(889949),c=r(726130),d=r(254491),u=r(663522),m=r(117746),h=r(911998),f=r(831085);function OpenInAppButton({buildDeepLinkUrl:e,buildFullUrl:t}){var r=(0,o.A)(),{result:b}=(0,h.yk)((0,n.A)((function*(){var t=e();return(yield m.Ay.linkingCanOpenURL(t))?t:""})),[e]),x=((0,a.useMemo)((function(){return u.Ay.isWebMobile?u.Ay.isWebMobileAndroid?"Open by OneKey Android":u.Ay.isWebMobileIOS?"Open by OneKey iOS":void 0:"Open by OneKey Desktop"}),[]),(0,a.useCallback)((0,n.A)((function*(){var e=yield t();s.Dialog.show({title:r.formatMessage({id:d.ETranslations.open_in_mobile_app}),floatingPanelProps:{overflow:"hidden"},renderContent:(0,f.jsxs)(s.Stack,{children:[(0,f.jsx)(s.Stack,{alignItems:"center",justifyContent:"center",overflow:"hidden",children:(0,f.jsx)(s.Stack,{p:"$4",borderRadius:"$6",borderCurve:"continuous",borderWidth:i.A.hairlineWidth,borderColor:"$borderSubdued",children:(0,f.jsx)(s.QRCode,{value:e,logo:l,logoSize:40,size:224})})}),(0,f.jsxs)(s.XStack,{m:"$-5",mt:"$5",py:"$4",px:"$5",backgroundColor:"$bgSubdued",alignItems:"center",children:[(0,f.jsx)(s.SizableText,{size:"$bodyMd",color:"$textSubdued",flex:1,children:r.formatMessage({id:d.ETranslations.dont_have_mobile_app_yet})}),(0,f.jsx)(s.Button,{size:"small",onPress:function(){(0,m.Dr)(c.A8)},children:r.formatMessage({id:d.ETranslations.global_download})})]})]}),showFooter:!1})})),[t,r]));return(0,f.jsx)(s.Button,{size:"small",onPress:x,children:r.formatMessage({id:d.ETranslations.open_in_mobile_app})})}},714718:(e,t,r)=>{r.d(t,{A:()=>useFormatDate});var n=r(514041),a=r(243915),o=r(152111),i=r(724726),s=r(584941),l=r(121684),c=r(232585),d=r(769059),u=r(830885),m=r(209730),h=r(411887),f=r(886738),parseLocal=function(e){switch(e){case"zh-CN":return c.A;case"en-US":default:return d.A;case"zh-HK":return u.A;case"ja-JP":return m.A;case"ko-KR":return h.A}};function useFormatDate(){var e=(0,f.L)(),t=(0,n.useCallback)((function(t,r){var n;n="string"==typeof t?(0,a.A)(t):t;try{return(0,o.A)(n,null!=r?r:"PPp",{locale:parseLocal(e)})}catch(e){return"-"}}),[e]),r=(0,n.useCallback)((function(r,n){var o,i;i="string"==typeof r?(0,a.A)(r):r;var s=(new Date).getFullYear(),l=(new Date).getMonth(),c="yyyy/LL/dd, HH:mm";return["de","es","en-US","fr-FR","it-IT","uk-UA"].includes(e)&&(c="LL/dd/yyyy, HH:mm"),(s===i.getFullYear()&&n?.hideTheYear||n?.hideYear)&&(c=(c=c.replace("yyyy/","")).replace("/yyyy","")),(l===i.getMonth()&&n?.hideTheMonth||n?.hideMonth)&&(c=c.replace("LL/","")),n?.hideTimeForever&&(c=c.replace(", HH:mm","")),n?.onlyTime&&(c="HH:mm"),null!=(o=t(i,c))?o:""}),[t,e]),c=(0,n.useCallback)((function(e,r){var n,o,i;return o="string"==typeof e?(0,a.A)(e):e,(new Date).getFullYear()===o.getFullYear()&&r?.hideTheYear||r?.hideYear?null!=(i=t(o,"MMMM"))?i:"":null!=(n=t(o,"MMMM, yyyy"))?n:""}),[t]),d=(0,n.useCallback)((function(t,r){var n;return null!=(n=(0,i.A)(t,r,{locale:parseLocal(e)}))?n:""}),[e]),u=(0,n.useCallback)((function(t){var r;return null!=(r=(0,s.A)(t,{addSuffix:!0,locale:parseLocal(e)}))?r:""}),[e]),m=(0,n.useCallback)((function(t){var r;return null!=(r=(0,l.A)(t,{locale:parseLocal(e)}))?r:""}),[e]);return(0,n.useMemo)((function(){return{format:t,formatDate:r,formatMonth:c,formatDistanceToNow:u,formatDuration:m,formatDistanceStrict:d}}),[t,r,c,u,m,d])}},878234:(e,t,r)=>{r.r(t),r.d(t,{default:()=>MarketDetailWithProvider});var n=r(324586),a=r(586330),o=r(514041),i=r(724249),s=r(908867),l=r(490343),c=r(604343),d=r(211129),u=r(254491),m=r(663522),h=r(757559),f=r(796151),b=r(60153),x=r(793437),p=r(498356),j=r(954393),k=r(241440),S=r(839850),g=r(831085),y=["children"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=6;function ViewMoreText(e){var{children:t}=e,r=(0,S.A)(e,y),n=(0,s.A)(),[a,i]=(0,o.useState)(0),[c,d]=(0,o.useState)(v),m=(0,o.useRef)(0),h=(0,o.useCallback)((function({nativeEvent:{layout:{height:e}}}){m.current||(m.current=e,i((function(e){return e+1})))}),[]),f=(0,o.useRef)(0),b=(0,o.useCallback)((function({nativeEvent:{layout:{height:e}}}){f.current||(f.current=e),i((function(e){return e+1}))}),[]),x=f.current<m.current,p=(0,o.useCallback)((function(){d((function(e){return e?void 0:v}))}),[]),j=a<2;return(0,g.jsxs)(l.YStack,{children:[(0,g.jsxs)(l.YStack,{space:"$3",children:[(0,g.jsx)(l.Stack,{onLayout:b,children:(0,g.jsx)(l.SizableText,_objectSpread(_objectSpread({size:"$bodyMd",numberOfLines:c},r),{},{children:t}))}),x?(0,g.jsx)(l.Button,{size:"medium",variant:"secondary",onPress:p,$gtMd:{size:"small"},children:n.formatMessage({id:c?u.ETranslations.global_view_more:u.ETranslations.global_view_less})}):null]}),j?(0,g.jsx)(l.Stack,{onLayout:h,opacity:0,position:"absolute",left:0,top:0,children:(0,g.jsx)(l.SizableText,_objectSpread(_objectSpread({size:"$bodyMd"},r),{},{children:t}))}):null]})}function MarketAbout({children:e}){var t=(0,s.A)();return e?(0,g.jsxs)(l.YStack,{space:"$3",pt:"$10",children:[(0,g.jsx)(l.SizableText,{size:"$headingSm",children:t.formatMessage({id:u.ETranslations.global_about})}),(0,g.jsx)(ViewMoreText,{color:"$textSubdued",children:e})]}):null}var $=r(117746),M=r(880590),w=r(911998);function MarketTokenAddress({tokenName:e,address:t,uri:r,networkId:n,tokenNameColor:i,tokenNameSize:c="$bodyMdMedium",addressSize:d="$bodyMd"}){var m=(0,s.A)(),{copyText:h}=(0,l.useClipboard)(),{result:f}=(0,w.yk)((function(){return b.A.serviceNetwork.getNetwork({networkId:n})}),[n],{checkIsFocused:!1,overrideIsFocused:function(){return!1}}),x=(0,o.useCallback)((0,a.A)((function*(){f?.explorers[0].address&&(0,$.Dr)(f.explorers[0].address.replace("{address}",t))})),[t,f?.explorers]),p=(0,o.useCallback)((function(){return r?(0,g.jsx)(l.Image,{size:"$5",src:decodeURIComponent(r),borderRadius:"$full"}):n?(0,g.jsx)(M.um,{size:"$5",networkId:n}):(0,g.jsx)(l.Stack,{width:"$5",height:"$5",ai:"center",jc:"center",bg:"$bgStrong",borderRadius:"$full",children:(0,g.jsx)(l.Icon,{size:"$2.5",name:"PlaceholderSolid"})})}),[n,r]);return(0,g.jsxs)(l.XStack,{space:"$1.5",ai:"center",children:[p(),(0,g.jsxs)(l.XStack,{space:"$2",children:[(0,g.jsx)(l.SizableText,{color:i,size:c,children:`${e||f?.name||""}:`}),(0,g.jsx)(l.SizableText,{size:d,children:`${t.slice(0,6)}...${t.slice(t.length-4,t.length)}`})]}),(0,g.jsx)(l.IconButton,{title:m.formatMessage({id:u.ETranslations.global_copy}),variant:"tertiary",color:"$iconSubdued",icon:"Copy1Outline",size:"small",iconSize:"$4",onPress:function(){return h(t)}}),(0,g.jsx)(l.IconButton,{title:m.formatMessage({id:u.ETranslations.global_view_in_blockchain_explorer}),variant:"tertiary",color:"$iconSubdued",icon:"OpenOutline",size:"small",iconSize:"$4",onPress:x})]})}var O=4;function MarketDetailOverviewContract({detailPlatforms:e}){var t=(0,s.A)(),r=(0,o.useMemo)((function(){return e?Object.keys(e).filter((function(t){return!!t&&!e[t].hideContractAddress})):[]}),[e]),n=r.length<=O,[a,i]=(0,o.useState)(n),c=(0,o.useCallback)((function(){i((function(e){return!e}))}),[]),d=(0,o.useMemo)((function(){return a?r:r.slice(0,O)}),[a,r]);return e&&r.length?(0,g.jsxs)(l.YStack,{pt:"$3",space:"$3",children:[(0,g.jsx)(l.SizableText,{color:"$textSubdued",size:"$bodySm",children:t.formatMessage({id:u.ETranslations.global_contract})}),d.map((function(t){var r=e[t];return(0,g.jsx)(MarketTokenAddress,{tokenNameSize:"$bodyMd",tokenNameColor:"$textSubdued",addressSize:"$bodyMdMedium",networkId:r.onekeyNetworkId,address:r.contract_address},t)})),n?null:(0,g.jsx)(l.Button,{size:"medium",variant:"secondary",onPress:c,$gtMd:{size:"small"},children:t.formatMessage({id:a?u.ETranslations.global_view_less:u.ETranslations.global_view_more})})]}):null}var T=r(781889);function OverviewPriceChange({title:e,children:t}){return(0,g.jsxs)(l.YStack,{alignItems:"center",flexBasis:0,flexGrow:1,children:[(0,g.jsx)(l.SizableText,{color:"$textSubdued",size:"$bodySm",children:e}),(0,g.jsx)(T.E,{size:"$bodyMdMedium",children:t})]})}function Overview24PriceChange({currentPrice:e,low:t,high:r}){var n=(0,s.A)(),[a]=(0,c.useSettingsPersistAtom)(),i=a.currencyInfo.symbol,d=(0,o.useMemo)((function(){var n=new k.A(t),a=new k.A(r);return new k.A(e).minus(n).div(a.minus(n)).shiftedBy(2).toNumber()}),[e,r,t]);return(0,g.jsxs)(l.YStack,{space:"$2.5",children:[(0,g.jsx)(l.SizableText,{size:"$bodyMd",color:"$textSubdued",children:n.formatMessage({id:u.ETranslations.market_24h_price_range})}),(0,g.jsx)(l.Progress,{value:d,height:"$1"}),(0,g.jsxs)(l.XStack,{jc:"space-between",children:[(0,g.jsxs)(l.XStack,{space:"$1",children:[(0,g.jsx)(l.SizableText,{color:"$textSubdued",size:"$bodyMd",children:n.formatMessage({id:u.ETranslations.market_low})}),(0,g.jsx)(l.NumberSizeableText,{size:"$bodyMdMedium",formatter:"price",formatterOptions:{currency:i},children:t})]}),(0,g.jsxs)(l.XStack,{space:"$1",children:[(0,g.jsx)(l.SizableText,{color:"$textSubdued",size:"$bodyMd",children:n.formatMessage({id:u.ETranslations.market_high})}),(0,g.jsx)(l.NumberSizeableText,{size:"$bodyMdMedium",formatter:"price",formatterOptions:{currency:i},children:r})]})]})]})}function OverviewMarketVOLItem({title:e,rank:t,children:r,currency:n}){var[a]=(0,c.useSettingsPersistAtom)();return(0,g.jsxs)(l.YStack,{pb:"$3",flexBasis:0,flexGrow:1,borderColor:"$borderSubdued",borderBottomWidth:"$px",children:[(0,g.jsx)(l.SizableText,{color:"$textSubdued",size:"$bodySm",children:e}),(0,g.jsxs)(l.XStack,{space:"$1",ai:"center",pt:"$0.5",children:[(0,g.jsx)(l.NumberSizeableText,{size:"$bodyMdMedium",formatter:"marketCap",formatterOptions:n?{currency:a.currencyInfo.symbol}:void 0,children:r}),t?(0,g.jsx)(l.SizableText,{size:"$bodySm",bg:"$bgStrong",color:"$textSubdued",borderRadius:"$1",px:"$1",children:`#${t}`}):null]})]})}function OverviewMarketVOL({fdv:e,volume24h:t,marketCap:r,marketCapRank:n,maxSupply:a,totalSupply:o,circulatingSupply:i,detailPlatforms:c}){var d=(0,s.A)();return(0,g.jsxs)(l.YStack,{pt:"$10",children:[(0,g.jsxs)(l.YStack,{space:"$3",children:[(0,g.jsxs)(l.XStack,{space:"$4",children:[(0,g.jsx)(OverviewMarketVOLItem,{currency:!0,title:d.formatMessage({id:u.ETranslations.market_24h_vol_usd}),children:t||"-"}),(0,g.jsx)(OverviewMarketVOLItem,{currency:!0,title:d.formatMessage({id:u.ETranslations.global_market_cap}),rank:n,children:r||"-"})]}),(0,g.jsxs)(l.XStack,{space:"$4",children:[(0,g.jsx)(OverviewMarketVOLItem,{currency:!0,title:d.formatMessage({id:u.ETranslations.global_fdv}),children:e||"-"}),(0,g.jsx)(OverviewMarketVOLItem,{title:d.formatMessage({id:u.ETranslations.global_circulating_supply}),children:i||"-"})]}),(0,g.jsxs)(l.XStack,{space:"$4",children:[(0,g.jsx)(OverviewMarketVOLItem,{title:d.formatMessage({id:u.ETranslations.global_total_supply}),children:o||"-"}),(0,g.jsx)(OverviewMarketVOLItem,{title:d.formatMessage({id:u.ETranslations.global_max_supply}),children:a||"∞"})]})]}),(0,g.jsx)(MarketDetailOverviewContract,{detailPlatforms:c})]})}function MarketDetailOverview({token:{detailPlatforms:e,stats:{maxSupply:t,totalSupply:r,circulatingSupply:n,currentPrice:a,performance:o,volume24h:i,marketCap:c,marketCapRank:d,fdv:m,low24h:h,high24h:f},about:b}}){var x=(0,s.A)();return(0,g.jsx)(l.NestedScrollView,{children:(0,g.jsxs)(l.YStack,{pb:"$10",px:"$5",children:[(0,g.jsxs)(l.XStack,{borderWidth:"$px",borderRadius:"$2",borderColor:"$borderSubdued",py:"$3",my:"$6",children:[(0,g.jsx)(OverviewPriceChange,{title:x.formatMessage({id:u.ETranslations.market_1d}),children:o.priceChangePercentage24h}),(0,g.jsx)(OverviewPriceChange,{title:x.formatMessage({id:u.ETranslations.market_1w}),children:o.priceChangePercentage7d}),(0,g.jsx)(OverviewPriceChange,{title:x.formatMessage({id:u.ETranslations.market_1m}),children:o.priceChangePercentage30d}),(0,g.jsx)(OverviewPriceChange,{title:x.formatMessage({id:u.ETranslations.market_1y}),children:o.priceChangePercentage1y})]}),(0,g.jsx)(Overview24PriceChange,{currentPrice:a,low:h,high:f}),(0,g.jsx)(OverviewMarketVOL,{volume24h:i,fdv:m,marketCap:c,marketCapRank:d,maxSupply:t,totalSupply:r,circulatingSupply:n,detailPlatforms:e}),(0,g.jsx)(MarketAbout,{children:b})]})})}var P=r(217715),C=r(172120),_=r(202338);function TextCell({title:e,children:t,rank:r}){var[n]=(0,c.useSettingsPersistAtom)(),a=n.currencyInfo.symbol;return(0,g.jsxs)(l.YStack,{pt:"$3",children:[(0,g.jsx)(l.SizableText,{size:"$bodySm",color:"$textSubdued",children:e}),(0,g.jsxs)(l.XStack,{space:"$1",ai:"center",children:[(0,g.jsx)(l.NumberSizeableText,{numberOfLines:1,size:"$bodyMdMedium",formatter:"marketCap",formatterOptions:{currency:a},children:t}),r?(0,g.jsx)(l.YStack,{px:"$1",borderRadius:"$1",bg:"$bgStrong",children:(0,g.jsx)(l.SizableText,{size:"$bodySm",color:"$textSubdued",children:`#${r}`})}):null]})]})}function MarketDetailLinks({token:{links:{discordUrl:e,homePageUrl:t,telegramUrl:r,twitterUrl:n,whitepaper:a},explorers:o}}){var i=(0,s.A)();return(0,g.jsx)(l.NestedScrollView,{children:(0,g.jsxs)(l.YStack,{px:"$5",$gtMd:{pr:0},children:[(0,g.jsxs)(l.YStack,{py:"$5",space:"$2",children:[(0,g.jsx)(l.SizableText,{size:"$headingSm",color:"$textSubdued",children:i.formatMessage({id:u.ETranslations.global_community})}),(0,g.jsxs)(l.XStack,{space:"$3",children:[n?(0,g.jsx)(l.IconButton,{title:"X",icon:"Xbrand",onPress:function(){return(0,$.Dr)(n)}}):null,r?(0,g.jsx)(l.IconButton,{title:"Telegram",icon:"TelegramBrand",onPress:function(){return(0,$.Dr)(r)}}):null,e?(0,g.jsx)(l.IconButton,{title:"Discord",icon:"DiscordBrand",onPress:function(){return(0,$.Dr)(e)}}):null]})]}),(0,g.jsxs)(l.YStack,{py:"$5",space:"$2",children:[(0,g.jsx)(l.SizableText,{size:"$headingSm",color:"$textSubdued",children:i.formatMessage({id:u.ETranslations.global_official_links})}),(0,g.jsxs)(l.XStack,{space:"$3",children:[t?(0,g.jsx)(l.Button,{iconAfter:"OpenOutline",onPress:function(){return(0,$.Dr)(t)},children:i.formatMessage({id:u.ETranslations.global_website})}):null,a?(0,g.jsx)(l.Button,{icon:"BookOpenOutline",iconAfter:"OpenOutline",onPress:function(){return(0,$.Dr)(a)},children:i.formatMessage({id:u.ETranslations.global_white_paper})}):null]})]}),(0,g.jsxs)(l.YStack,{py:"$5",children:[(0,g.jsx)(l.SizableText,{size:"$headingSm",color:"$textSubdued",children:i.formatMessage({id:u.ETranslations.global_explorers})}),(0,g.jsx)(l.XStack,{flexWrap:"wrap",children:o.map((function({url:e,name:t}){return(0,g.jsx)(l.Button,{mt:"$2",mr:"$3",iconAfter:"OpenOutline",onPress:function(){return(0,$.Dr)(e)},children:t},e)}))})]})]})})}var I=r(18910);function MarketPoolIcon({uri:e}){return(0,g.jsxs)(l.Image,{size:"$5",borderRadius:"$full",children:[(0,g.jsx)(l.Image.Source,{src:e}),(0,g.jsx)(l.Image.Fallback,{children:(0,g.jsx)(l.Stack,{flex:1,borderRadius:"$full",bg:"$bgDisabled",ai:"center",jc:"center",children:(0,g.jsx)(l.Icon,{size:"$3.5",color:"$iconSubdued",name:"SwitchHorOutline"})})}),(0,g.jsx)(l.Image.Loading,{children:(0,g.jsx)(l.Skeleton,{width:"100%",height:"100%"})})]})}var D=r(936748);function PoolDetailsItem({title:e,children:t,currency:r,isNumeric:n=!1,formatter:a="marketCap"}){var[i]=(0,c.useSettingsPersistAtom)(),s=i.currencyInfo.symbol,d=(0,o.useMemo)((function(){return n?(0,g.jsx)(l.NumberSizeableText,{size:"$bodyMdMedium",formatter:a,formatterOptions:r?{currency:s}:void 0,children:t}):"string"==typeof t?(0,g.jsx)(l.SizableText,{size:"$bodyMdMedium",children:t}):t}),[t,r,s,a,n]);return(0,g.jsxs)(l.YStack,{pb:"$3",flexBasis:0,flexGrow:1,space:"$0.5",borderColor:"$borderSubdued",borderBottomWidth:"$px",children:[(0,g.jsx)(l.SizableText,{color:"$textSubdued",size:"$bodySm",children:e}),d]})}function PoolDetailDialog({item:{attributes:e,dexName:t,dexLogoUrl:r,onekeyNetworkId:n,id:a,baseTokenImageUrl:o,quoteTokenImageUrl:i,relationships:{baseToken:c,quoteToken:d,dex:{data:{id:m}}}}}){var h=(0,s.A)(),[f,b]=e.name.split("/");return(0,g.jsxs)(l.YStack,{space:"$3",children:[(0,g.jsxs)(l.XStack,{space:"$4",children:[(0,g.jsx)(PoolDetailsItem,{title:h.formatMessage({id:u.ETranslations.global_pair}),children:e.name}),(0,g.jsx)(PoolDetailsItem,{title:h.formatMessage({id:u.ETranslations.global_dex}),children:(0,g.jsxs)(l.XStack,{space:"$1.5",children:[(0,g.jsx)(MarketPoolIcon,{uri:r}),(0,g.jsx)(l.SizableText,{size:"$bodyMdMedium",children:t})]})})]}),(0,g.jsxs)(l.XStack,{space:"$4",children:[(0,g.jsx)(PoolDetailsItem,{title:h.formatMessage({id:u.ETranslations.global_price}),currency:!0,isNumeric:!0,formatter:"price",children:e.baseTokenPriceUsd}),(0,g.jsx)(PoolDetailsItem,{title:h.formatMessage({id:u.ETranslations.market_24h_txns}),isNumeric:!0,children:String(e.transactions.h24.buys+e.transactions.h24.sells)})]}),(0,g.jsxs)(l.XStack,{space:"$4",children:[(0,g.jsx)(PoolDetailsItem,{title:h.formatMessage({id:u.ETranslations.market_twenty_four_hour_volume}),isNumeric:!0,children:e.volumeUsd.h24}),(0,g.jsx)(PoolDetailsItem,{title:h.formatMessage({id:u.ETranslations.global_liquidity}),isNumeric:!0,children:e.reserveInUsd})]}),(0,g.jsxs)(l.XStack,{space:"$4",children:[(0,g.jsx)(PoolDetailsItem,{title:h.formatMessage({id:u.ETranslations.global_fdv}),isNumeric:!0,children:e.fdvUsd}),(0,g.jsx)(PoolDetailsItem,{title:h.formatMessage({id:u.ETranslations.global_age}),children:h.formatMessage({id:u.ETranslations.market_number_of_days},{number:(0,D.A)(new Date,new Date(e.poolCreatedAt))})})]}),(0,g.jsxs)(l.YStack,{space:"$6",pt:"$6",pb:"$10",children:[(0,g.jsx)(MarketTokenAddress,{networkId:n,tokenName:f.trim(),address:c.data.id.split("_").pop(),uri:o}),(0,g.jsx)(MarketTokenAddress,{networkId:n,tokenName:b.trim(),address:d.data.id.split("_").pop(),uri:i}),(0,g.jsx)(MarketTokenAddress,{networkId:n,tokenName:h.formatMessage({id:u.ETranslations.global_pair_contract}),address:a.split("_").pop()})]})]})}var z=r(610101);function MarketDetailPools_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function MarketDetailPools_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?MarketDetailPools_ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MarketDetailPools_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function HeaderColumn({name:e,children:t,jc:r,flexGrow:n=3,sortType:a,onPress:i,order:s}){var c=(0,o.useCallback)((function(){return a===e&&s?(0,g.jsx)(l.Icon,{cursor:"pointer",name:"desc"===s?"ChevronDownSmallOutline":"ChevronTopSmallOutline",color:"$iconSubdued",size:"$4"}):null}),[e,s,a]),d=(0,o.useCallback)((function(){i?.(e)}),[e,i]);return(0,g.jsxs)(l.XStack,{flexGrow:n,flexBasis:0,ai:"center",onPress:d,jc:r,cursor:"pointer",children:["flex-end"===r?c():null,(0,g.jsx)(l.SizableText,{size:"$bodySmMedium",color:"$textSubdued",children:t}),"flex-start"===r?c():null]})}function ItemColumn({children:e,flexGrow:t=3}){return(0,g.jsx)(l.Stack,{flexGrow:t,flexBasis:0,jc:"center",children:e})}function HeaderRow({sortType:e,onSortTypeChange:t}){var r=(0,s.A)(),{gtMd:n,gtXl:a}=(0,l.useMedia)(),i=!(!e&&!t),c=(0,o.useCallback)((function(r){if(i){if(r===e?.columnName){var n="desc";return"desc"===e?.order?n="asc":"asc"===e?.order&&(n=void 0),void t?.({columnName:r,order:n})}t?.({columnName:r,order:"desc"})}}),[t,e?.columnName,e?.order,i]);return(0,g.jsxs)(l.XStack,{py:"$2.5",px:"$5",$gtMd:{pr:0},children:[(0,g.jsx)(HeaderColumn,{name:"dexDataName",jc:"flex-start",flexGrow:5,sortType:e?.columnName,order:e?.order,onPress:c,children:r.formatMessage({id:u.ETranslations.global_pair})}),a?(0,g.jsx)(HeaderColumn,{name:"price",jc:"flex-end",sortType:e?.columnName,order:e?.order,onPress:c,children:r.formatMessage({id:u.ETranslations.global_price})}):null,a?(0,g.jsx)(HeaderColumn,{name:"txTotal",jc:"flex-end",sortType:e?.columnName,order:e?.order,onPress:c,children:r.formatMessage({id:u.ETranslations.market_24h_txns})}):null,(0,g.jsx)(HeaderColumn,{name:"volumeUsdH24",jc:"flex-end",sortType:e?.columnName,order:e?.order,onPress:c,children:r.formatMessage({id:u.ETranslations.market_twenty_four_hour_volume})}),(0,g.jsx)(HeaderColumn,{name:"reserveInUsd",jc:"flex-end",sortType:e?.columnName,order:e?.order,onPress:c,children:r.formatMessage({id:u.ETranslations.global_liquidity})}),(0,g.jsx)(l.View,{pl:"$3",ai:"center",jc:"center",$gtMd:{pl:"$7",pr:"$1"},children:(0,g.jsx)(l.View,{w:"$4",h:"$4"})})]})}function NetworkIdSelect({value:e,onChange:t,options:r}){return(0,g.jsx)(l.XStack,{space:"$2",px:"$5",$gtMd:{pr:0},py:"$2",children:r.map((function(r,n){return(0,g.jsx)(l.Stack,{px:"$3",py:"$2",bg:e===n?"$bgPrimary":"$bgStrong",borderRadius:"$2",onPress:function(){return t(n)},children:(0,g.jsx)(M.um,{networkId:r,size:"$5"})},r)}))})}function MarketDetailPools({pools:e}){var[t]=(0,c.useSettingsPersistAtom)(),r=t.currencyInfo.symbol,n=(0,s.A)(),{gtMd:a,gtXl:i}=(0,l.useMedia)(),d=(0,o.useMemo)((function(){return e.map((function(e){return e.onekeyNetworkId})).filter((function(e){return Boolean(e)}))}),[e]),[m,h]=(0,o.useState)(0),f=(0,o.useMemo)((function(){return e[m]}),[m,e]).data.map((function(e){return MarketDetailPools_objectSpread(MarketDetailPools_objectSpread({},e),{},{dexDataName:e.dexName,price:Number(e.attributes.baseTokenPriceUsd),txTotal:Number(e.attributes.transactions.h24.buys+e.attributes.transactions.h24.sells),volumeUsdH24:Number(e.attributes.volumeUsd.h24),reserveInUsd:Number(e.attributes.reserveInUsd)})})),b=(0,o.useCallback)((function(e){h(e)}),[]),{sortedListData:x,handleSortTypeChange:p,sortByType:j}=(0,z.K)(f,m);return(0,g.jsx)(l.ListView,{data:x,renderScrollComponent:l.renderNestedScrollView,estimatedItemSize:38,ListHeaderComponent:(0,g.jsxs)(l.YStack,{pb:"$2",pt:"$5",children:[(0,g.jsx)(NetworkIdSelect,{options:d,value:m,onChange:b}),(0,g.jsx)(HeaderRow,{sortType:j,onSortTypeChange:p})]}),extraData:m,renderItem:function({item:e}){var{attributes:t,dexLogoUrl:a,dexDataName:o,price:s,txTotal:c,volumeUsdH24:d,reserveInUsd:m}=e;return(0,g.jsxs)(l.XStack,MarketDetailPools_objectSpread(MarketDetailPools_objectSpread({px:"$5",$gtMd:{pr:0},py:"$2",borderRadius:"$3"},I.Y),{},{onPress:function(){l.Dialog.confirm({title:n.formatMessage({id:u.ETranslations.market_pool_details}),renderContent:(0,g.jsx)(PoolDetailDialog,{item:e})})},children:[(0,g.jsx)(ItemColumn,{flexGrow:5,children:(0,g.jsxs)(l.XStack,{space:"$2.5",ai:"center",children:[(0,g.jsx)(MarketPoolIcon,{uri:a}),(0,g.jsxs)(l.YStack,{flexShrink:1,children:[(0,g.jsx)(l.SizableText,{size:"$bodyMdMedium",numberOfLines:1,selectable:!1,children:t.name}),(0,g.jsx)(l.SizableText,{selectable:!1,size:"$bodySm",color:"$textSubdued",numberOfLines:1,children:o})]})]})}),i?(0,g.jsx)(ItemColumn,{children:(0,g.jsx)(l.NumberSizeableText,{selectable:!1,size:"$bodyMd",formatter:"price",formatterOptions:{currency:r},textAlign:"right",children:s})}):null,i?(0,g.jsx)(ItemColumn,{children:(0,g.jsx)(l.NumberSizeableText,{selectable:!1,size:"$bodyMd",formatter:"marketCap",textAlign:"right",children:c})}):null,(0,g.jsx)(ItemColumn,{children:(0,g.jsx)(l.NumberSizeableText,{selectable:!1,size:"$bodyMd",formatter:"marketCap",textAlign:"right",children:d})}),(0,g.jsx)(ItemColumn,{children:(0,g.jsx)(l.NumberSizeableText,{selectable:!1,size:"$bodyMd",formatter:"marketCap",textAlign:"right",children:m})}),(0,g.jsx)(l.View,{pl:"$3",ai:"center",jc:"center",$gtMd:{pl:"$7",pr:"$1"},children:(0,g.jsx)(l.Icon,{name:"ChevronRightSmallOutline",size:"$4"})})]}))}})}function TokenDetailTabs_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function TokenDetailTabs_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?TokenDetailTabs_ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TokenDetailTabs_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function SkeletonRow(){return(0,g.jsxs)(l.XStack,{children:[(0,g.jsx)(l.XStack,{flex:1,children:(0,g.jsx)(l.Skeleton,{w:"$24",h:"$3"})}),(0,g.jsx)(l.XStack,{flex:1,jc:"flex-end",children:(0,g.jsx)(l.Skeleton,{w:"$16",h:"$3"})}),(0,g.jsx)(l.XStack,{flex:1,jc:"flex-end",children:(0,g.jsx)(l.Skeleton,{w:"$16",h:"$3"})}),(0,g.jsx)(l.XStack,{flex:1,jc:"flex-end",children:(0,g.jsx)(l.Skeleton,{w:"$16",h:"$3"})}),(0,g.jsx)(l.XStack,{flex:1,jc:"flex-end",children:(0,g.jsx)(l.Skeleton,{w:"$16",h:"$3"})})]})}function MdSkeletonRow(){return(0,g.jsxs)(l.XStack,{children:[(0,g.jsx)(l.XStack,{flex:1,children:(0,g.jsx)(l.Skeleton,{w:"$24",h:"$3"})}),(0,g.jsx)(l.XStack,{flex:1,jc:"flex-end",children:(0,g.jsx)(l.Skeleton,{w:"$16",h:"$3"})}),(0,g.jsx)(l.XStack,{flex:1,jc:"flex-end",children:(0,g.jsx)(l.Skeleton,{w:"$16",h:"$3"})})]})}var A=(0,o.memo)((function BasicTokenDetailTabs({token:e,listHeaderComponent:t,isRefreshing:r,onRefresh:n,defer:i}){var c=(0,s.A)(),{md:d}=(0,l.useMedia)(),[h,f]=(0,o.useState)(void 0),x=(0,o.useCallback)((0,a.A)((function*(){if(e?.detailPlatforms){var t=yield b.A.serviceMarket.fetchPools(e.detailPlatforms);m.Ay.isNativeAndroid?yield i.promise:setTimeout((function(){i.resolve(null)}),100),f(t)}})),[i,e?.detailPlatforms]);(0,o.useEffect)((function(){x()}),[x]),(0,o.useMemo)((function(){return d?(0,g.jsxs)(l.YStack,{space:"$10",px:"$5",pt:"$11",children:[(0,g.jsx)(MdSkeletonRow,{}),(0,g.jsx)(MdSkeletonRow,{}),(0,g.jsx)(MdSkeletonRow,{}),(0,g.jsx)(MdSkeletonRow,{})]}):(0,g.jsxs)(l.YStack,{space:"$6",px:"$5",pt:"$11",children:[(0,g.jsx)(SkeletonRow,{}),(0,g.jsx)(SkeletonRow,{}),(0,g.jsx)(SkeletonRow,{}),(0,g.jsx)(SkeletonRow,{})]})}),[d]);var p=(0,o.useMemo)((function(){return h?[h.length&&e?{title:c.formatMessage({id:u.ETranslations.global_pools}),page:function(e){return(0,g.jsx)(MarketDetailPools,TokenDetailTabs_objectSpread(TokenDetailTabs_objectSpread({},e),{},{pools:h}))}}:void 0,d&&e?{title:c.formatMessage({id:u.ETranslations.global_overview}),page:function(t){return(0,g.jsx)(MarketDetailOverview,TokenDetailTabs_objectSpread(TokenDetailTabs_objectSpread({},t),{},{token:e}))}}:void 0,e&&{title:c.formatMessage({id:u.ETranslations.global_links}),page:function(t){return(0,g.jsx)(MarketDetailLinks,TokenDetailTabs_objectSpread(TokenDetailTabs_objectSpread({},t),{},{token:e}))}}].filter(Boolean):[]}),[c,d,h,e]);return(0,g.jsx)(l.Tab,{refreshControl:(0,g.jsx)(l.RefreshControl,{refreshing:!!r,onRefresh:n}),$gtMd:{pr:"$5"},$md:{mt:"$5"},data:p,disableRefresh:!0,ListHeaderComponent:(0,g.jsx)(l.Stack,{mb:"$5",children:t}),onSelectedPageIndex:function(e){}})})),E=r(714718),N=r(223946);var ChartViewAdapter=function({data:e,onHover:t,lineColor:r,topColor:n,bottomColor:a,height:i}){var s=(0,o.useRef)(null);return(0,o.useEffect)((function(){if(s.current){var{chart:e,handleResize:r}=function createChartDom(e,t,r,n){var a=e(t,{height:n,layout:{background:{color:"transparent"}},crosshair:{vertLine:{visible:!1},horzLine:{visible:!1}},grid:{vertLines:{visible:!1},horzLines:{visible:!1}},timeScale:{visible:!1,fixLeftEdge:!0,fixRightEdge:!0,lockVisibleTimeRangeOnResize:!0},rightPriceScale:{visible:!1},handleScale:{pinch:!1,mouseWheel:!1}}),handleResize=function(){a.applyOptions({width:t.clientWidth})};return a.subscribeCrosshairMove((function({time:e,seriesPrices:t}){r({time:e,price:t.values().next().value})})),a.timeScale().fitContent(),window.addEventListener("resize",handleResize),window._onekey_chart=a,{chart:a,handleResize}}(N.R9,s.current,t,i);return function(){window.removeEventListener("resize",r),e.remove()}}}),[]),(0,o.useEffect)((function(){!function updateChartDom({lineColor:e,topColor:t,bottomColor:r,data:n}){var a=n.map((function([e,t]){return{time:e,value:t}})),o=window._onekey_chart;if(!o._onekey_series){var i=o.addAreaSeries({lineColor:e,topColor:t,bottomColor:r,lineWidth:2,crosshairMarkerBorderColor:"#fff",crosshairMarkerRadius:5});return i.setData(a),void(o._onekey_series=i)}var s=o._onekey_series;s.applyOptions({lineColor:e,topColor:t,bottomColor:r}),s.setData(a),n.length>2&&o.timeScale().setVisibleLogicalRange({from:.4,to:n.length-1.4})}({bottomColor:a,topColor:n,lineColor:r,data:e})}),[a,n,e,r]),(0,g.jsx)("div",{style:{width:"100%",height:i},ref:s})};ChartViewAdapter.displayName="ChartViewAdapter";const L=ChartViewAdapter;var ChartView=function({data:e,onHover:t,height:r,isFetching:n}){return(0,g.jsx)(L,{isFetching:n,height:r,data:e,lineColor:"#33C641",topColor:"#00B81233",bottomColor:"#00FF1900",onHover:t})};ChartView.displayName="ChartView";const H=(0,o.memo)(ChartView);function PriceLabel({price:e,time:t,opacity:r}){var n;null!==e&&(n=(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(l.SizableText,{size:"$bodyMd",color:"$textSubdued",$md:{size:"$bodySm",color:"$text"},children:t})}));var[a]=(0,c.useSettingsPersistAtom)(),o=a.currencyInfo.symbol;return(0,g.jsxs)(l.Stack,{opacity:r,flexDirection:"column",$md:{flexDirection:"row",pt:"$6"},$gtMd:{height:"$10"},children:[(0,g.jsx)(l.XStack,{children:n}),(0,g.jsx)(l.NumberSizeableText,{size:"$bodyMdMedium",formatter:"price",formatterOptions:{currency:o},$md:{size:"$bodySmMedium",ml:"$2"},children:String(e)})]})}function PriceChart({data:e,isFetching:t,children:r}){var{formatDate:n}=(0,E.A)(),a=(0,s.A)(),[i,c]=(0,o.useState)(),[d,m]=(0,o.useState)(""),{gtMd:h}=(0,l.useMedia)(),f=e?.length?e[0][1]:0,b=e?.length?e[e.length-1][1]:0,x=(0,o.useMemo)((function(){return e?"undefined"===i||void 0===i?b:"string"==typeof i?+i:i:null}),[e,b,i]),p=(0,o.useCallback)((function(e){var t;""===e.price&&""===e.time||(t=e.time instanceof Date?n(e.time):"number"==typeof e.time?n(new Date(e.time)):"string"==typeof e.time?n(new Date(+e.time)):"",m(t),c(e.price))}),[n]),j=(0,g.jsx)(PriceLabel,{opacity:d?1:0,price:x,time:d||"",basePrice:f}),k=(0,o.useMemo)((function(){return t?(0,g.jsx)(l.Spinner,{"$platform-native":{mt:-190}}):(0,g.jsx)(l.Empty,{title:a.formatMessage({id:u.ETranslations.global_no_data})})}),[a,t]),S=e&&e.length>0?(0,g.jsx)(H,{isFetching:t,height:h?298:326,data:e,onHover:p}):k,y=t?(0,g.jsx)(l.Spinner,{}):S;return h?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(l.XStack,{justifyContent:"space-between",children:[t?(0,g.jsxs)(l.YStack,{space:"$2",children:[(0,g.jsx)(l.Skeleton,{w:"$10",h:"$3"}),(0,g.jsx)(l.Skeleton,{w:"$24",h:"$3"})]}):j,r]}),(0,g.jsx)(l.Stack,{h:240,mt:32,$gtMd:{mt:"$1"},justifyContent:"center",alignItems:"center",children:y})]}):(0,g.jsxs)(g.Fragment,{children:[j,(0,g.jsx)(l.Stack,{h:190,mt:24,justifyContent:"center",alignItems:"center",children:y}),(0,g.jsx)(l.Stack,{mt:8,children:r})]})}var R=(0,o.memo)((function BasicTokenPriceChart({coinGeckoId:e,defer:t}){var r=(0,s.A)(),[n,i]=(0,o.useState)([]),[c,d]=(0,o.useState)(!1),h=(0,o.useMemo)((function(){return[{label:r.formatMessage({id:u.ETranslations.market_1d}),value:"1"},{label:r.formatMessage({id:u.ETranslations.market_1w}),value:"7"},{label:r.formatMessage({id:u.ETranslations.market_1m}),value:"30"},{label:r.formatMessage({id:u.ETranslations.market_1y}),value:"365"},{label:r.formatMessage({id:u.ETranslations.global_all}),value:"max"}]}),[r]),[f,x]=(0,o.useState)(h[0].value),p=(0,o.useCallback)((0,a.A)((function*(){d(!0);var r=yield b.A.serviceMarket.fetchTokenChart(e,f);m.Ay.isNativeAndroid?setTimeout((function(){t.resolve(null)}),100):yield t.promise,i(r),d(!1)})),[e,f,t]);(0,o.useEffect)((function(){p()}),[p]);var{gtLg:j}=(0,l.useMedia)();return(0,g.jsxs)(l.YStack,{px:"$5",$gtMd:{pr:0},children:[(0,g.jsx)(l.YStack,{h:326,$gtMd:{h:294},children:(0,g.jsx)(PriceChart,{isFetching:c,data:n,children:j?(0,g.jsx)(l.SegmentControl,{value:f,onChange:x,options:h}):null})}),j?null:(0,g.jsx)(l.Stack,{mt:"$5",children:(0,g.jsx)(l.SegmentControl,{fullWidth:!0,value:f,onChange:x,options:h})})]})})),X=r(993892),Y=r(802172);function MarketDetail_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function MarketDetail_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?MarketDetail_ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MarketDetail_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function TokenDetailHeader({coinGeckoId:e,token:t}){var r=(0,s.A)(),[n]=(0,c.useSettingsPersistAtom)(),i=n.currencyInfo.symbol,[d,m]=(0,o.useState)(t),{name:h,stats:{performance:f,volume24h:x,marketCap:p,marketCapRank:j,fdv:k,currentPrice:S}}=d,{gtMd:y}=(0,l.useMedia)();return(0,o.useEffect)((function(){var t=setInterval((0,a.A)((function*(){var t=yield b.A.serviceMarket.fetchMarketTokenDetail(e);m(t)})),45e3);return function(){clearInterval(t)}}),[e]),(0,g.jsxs)(l.YStack,{px:"$5",$md:{minHeight:150},children:[(0,g.jsxs)(l.YStack,{flex:1,children:[(0,g.jsx)(l.SizableText,{size:"$headingMd",color:"$textSubdued",children:h}),(0,g.jsxs)(l.XStack,{ai:"center",jc:"space-between",pt:"$2",children:[(0,g.jsx)(l.NumberSizeableText,{size:"$heading3xl",formatterOptions:{currency:i},formatter:"price",children:S||0}),(0,g.jsx)(C.J,{coingeckoId:e,mr:"$-2",size:"medium"})]}),(0,g.jsx)(T.E,{pt:"$0.5",children:f.priceChangePercentage24h})]}),y?(0,g.jsx)(MarketDetailOverview,{token:d}):(0,g.jsxs)(l.XStack,{flex:1,ai:"center",alignContent:"stretch",flexWrap:"wrap",space:"$5",children:[(0,g.jsx)(TextCell,{title:r.formatMessage({id:u.ETranslations.market_24h_vol_usd}),children:x||"-"}),(0,g.jsx)(TextCell,{title:r.formatMessage({id:u.ETranslations.global_market_cap}),rank:j,children:p||"-"}),(0,g.jsx)(TextCell,{title:r.formatMessage({id:u.ETranslations.global_fdv}),children:k||"-"})]})]})}function SkeletonHeader(){return(0,g.jsxs)(l.YStack,{children:[(0,g.jsx)(l.Skeleton,{w:"$24",h:"$4"}),(0,g.jsx)(l.View,{pt:"$5",pb:"$3.5",children:(0,g.jsx)(l.Skeleton,{w:"$40",h:"$7"})}),(0,g.jsx)(l.Skeleton,{w:"$24",h:"$3"})]})}function SkeletonHeaderOverItemItem(){return(0,g.jsxs)(l.YStack,{space:"$2",flexGrow:1,flexBasis:0,children:[(0,g.jsx)(l.Skeleton,{w:"$10",h:"$3"}),(0,g.jsx)(l.Skeleton,{w:"$24",h:"$3"})]})}function MarketDetail({route:e}){var{token:t}=e.params,{gtMd:r}=(0,l.useMedia)(),[n,s]=(0,o.useState)(!1),[c,u]=(0,o.useState)(void 0),k=(0,o.useCallback)((0,a.A)((function*(){var e=yield b.A.serviceMarket.fetchMarketTokenDetail(t);u(e)})),[t]),S=(0,o.useCallback)((0,a.A)((function*(){s(!0),yield k(),s(!1)})),[k]);(0,o.useEffect)((function(){k()}),[k]);var y=(0,o.useCallback)((function(){return(0,g.jsxs)(l.XStack,{space:"$2",children:[(0,g.jsx)(_.t,{uri:c?.image||"",size:"$6"}),(0,g.jsx)(l.SizableText,{children:c?.symbol?.toUpperCase()})]})}),[c?.image,c?.symbol]),{shareText:v}=(0,l.useShare)(),$=(0,o.useCallback)((function(){return f.Ay.buildDeepLinkUrl({path:d.oO.market_detail,query:{coinGeckoId:t}})}),[t]),M=(0,o.useCallback)((0,a.A)((function*(){return(0,X.V)({coinGeckoId:t})})),[t]),w=(0,o.useCallback)((function(){return(0,g.jsxs)(l.XStack,{space:"$6",ai:"center",children:[m.Ay.isExtensionUiPopup?null:(0,g.jsx)(x.X,{buildDeepLinkUrl:$,buildFullUrl:M}),(0,g.jsx)(l.HeaderIconButton,{icon:"ShareOutline",onPress:(0,a.A)((function*(){var e=(0,X.V)({coinGeckoId:t});yield v(e)}))}),r?(0,g.jsx)(P.I,{}):null]})}),[$,M,t,r,v]),O=(0,p.A)(),T=(0,o.useCallback)((function(){O.dispatch((function(e){return e.routes.length>1?i.y9.pop(e.routes.length):i.d3.reset({index:0,routes:[{name:h.FE.TabMarket}]})}))}),[O]),C=(0,o.useCallback)((function(){return(0,g.jsx)(l.NavBackButton,{onPress:T})}),[T]),I=(0,o.useMemo)((function(){return c?(0,g.jsx)(TokenDetailHeader,{coinGeckoId:t,token:c}):(0,g.jsx)(l.YStack,{px:"$5",children:r?(0,g.jsxs)(l.YStack,{space:"$12",width:392,children:[(0,g.jsx)(SkeletonHeader,{}),(0,g.jsx)(l.YStack,{space:"$3",children:(0,g.jsx)(l.Skeleton,{w:252,h:"$3"})}),(0,g.jsxs)(l.YStack,{space:"$6",children:[(0,g.jsxs)(l.XStack,{children:[(0,g.jsx)(SkeletonHeaderOverItemItem,{}),(0,g.jsx)(SkeletonHeaderOverItemItem,{})]}),(0,g.jsxs)(l.XStack,{children:[(0,g.jsx)(SkeletonHeaderOverItemItem,{}),(0,g.jsx)(SkeletonHeaderOverItemItem,{})]}),(0,g.jsxs)(l.XStack,{children:[(0,g.jsx)(SkeletonHeaderOverItemItem,{}),(0,g.jsx)(SkeletonHeaderOverItemItem,{})]})]}),(0,g.jsxs)(l.YStack,{space:"$6",children:[(0,g.jsx)(l.Skeleton,{w:"$10",h:"$3"}),(0,g.jsx)(l.Skeleton,{w:252,h:"$3"}),(0,g.jsx)(l.Skeleton,{w:252,h:"$3"}),(0,g.jsx)(l.Skeleton,{w:252,h:"$3"})]})]}):(0,g.jsxs)(l.YStack,{space:"$6",pt:"$1",children:[(0,g.jsx)(SkeletonHeader,{}),(0,g.jsxs)(l.XStack,{children:[(0,g.jsx)(SkeletonHeaderOverItemItem,{}),(0,g.jsx)(SkeletonHeaderOverItemItem,{}),(0,g.jsx)(SkeletonHeaderOverItemItem,{})]})]})})}),[t,r,c]),D=(0,j.Q)(),z=(0,o.useMemo)((function(){return(0,g.jsx)(R,{coinGeckoId:t,defer:D})}),[t,D]);return(0,g.jsxs)(l.Page,{children:[(0,g.jsx)(l.Page.Header,{headerTitle:y,headerRight:w,headerLeft:C}),(0,g.jsx)(l.Page.Body,{children:r?(0,g.jsx)(l.YStack,{flex:1,children:(0,g.jsxs)(l.XStack,{flex:1,pt:"$5",children:[(0,g.jsx)(l.ScrollView,{minWidth:392,maxWidth:392,children:I}),(0,g.jsx)(l.YStack,{flex:1,children:(0,g.jsx)(A,{defer:D,token:c,listHeaderComponent:z})})]})}):(0,g.jsx)(A,{defer:D,isRefreshing:n,onRefresh:S,token:c,listHeaderComponent:(0,g.jsxs)(l.YStack,{children:[I,c?z:null]})})})]})}function MarketDetailWithProvider(e){return(0,g.jsx)(Y.m,{storeName:c.EJotaiContextStoreNames.marketWatchList,children:(0,g.jsx)(MarketDetail,MarketDetail_objectSpread({},e))})}},802172:(e,t,r)=>{r.d(t,{m:()=>d});var n=r(324586),a=r(514041),o=r(2577),i=r(597102),s=r(310944),l=r(907481),c=r(831085);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=(0,a.memo)((function(e){var{children:t,storeName:r}=e,n=(0,l.z)(r),a=o.A.getOrCreateStore(n);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(i.H,_objectSpread({},n)),(0,c.jsx)(s.Hn,{store:a,children:t})]})}));d.displayName="MarketWatchListProviderMirror"},217715:(e,t,r)=>{r.d(t,{I:()=>MarketHomeHeaderSearchBar});var n=r(514041),a=r(908867),o=r(490343),i=r(498356),s=r(254491),l=r(757559),c=r(390574),d=r(506851),u=r(831085);function MarketHomeHeaderSearchBar(){var e=(0,a.A)(),t=(0,i.A)(),r=(0,n.useCallback)((function(){t.pushModal(l.ry.UniversalSearchModal,{screen:c.j.UniversalSearch,params:{filterType:d.j.MarketToken}})}),[t]);return(0,u.jsxs)(o.XStack,{$gtMd:{minWidth:280},children:[(0,u.jsx)(o.SearchBar,{placeholder:e.formatMessage({id:s.ETranslations.global_search_tokens}),containerProps:{w:"100%"},$gtMd:{size:"small"}},"MarketHomeSearchInput"),(0,u.jsx)(o.View,{position:"absolute",top:0,left:0,right:0,bottom:0,onPress:r})]})}},172120:(e,t,r)=>{r.d(t,{J:()=>f});var n=r(324586),a=r(839850),o=r(514041),i=r(908867),s=r(490343),l=r(153763),c=r(318822),d=r(254491),u=r(450255),m=r(831085),h=["coingeckoId","size","tabIndex"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var f=(0,o.memo)((function BasicMarketStar(e){var{coingeckoId:t,size:r,tabIndex:f}=e,b=(0,a.A)(e,h),x=(0,i.A)(),p=(0,u.B)(),[j,k]=(0,o.useState)((function(){return p.isInWatchList(t)})),S=(0,l.E)(),{gtMd:g}=(0,s.useMedia)(),y=(0,o.useCallback)((function({tabIndex:e}){e===f&&k(p.isInWatchList(t))}),[p,t,f]);(0,o.useEffect)((function(){if(g&&f)return c.iL.on(c.Tu.SwitchMarketHomeTab,y),function(){c.iL.off(c.Tu.SwitchMarketHomeTab,y)}}),[g,y,f]),(0,o.useEffect)((function(){S&&k(p.isInWatchList(t))}),[p,t,S]);var v=(0,o.useCallback)((function(){j?p.removeFormWatchList(t):p.addIntoWatchList(t),k(!j)}),[p,t,j]);return(0,m.jsx)(s.IconButton,function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({title:x.formatMessage({id:j?d.ETranslations.market_remove_from_watchlist:d.ETranslations.market_add_to_watchlist}),icon:j?"StarSolid":"StarOutline",variant:"tertiary",size:r,iconSize:r?void 0:"$5",iconProps:{color:j?"$iconActive":"$iconDisabled"},onPress:v},b))}))},202338:(e,t,r)=>{r.d(t,{t:()=>i});var n=r(514041),a=r(490343),o=r(831085);var i=(0,n.memo)((function BasicMarketTokenIcon({uri:e,size:t}){return e?(0,o.jsxs)(a.Image,{size:t,circular:!0,children:[(0,o.jsx)(a.Image.Source,{source:{uri:decodeURIComponent(e)}}),(0,o.jsx)(a.Image.Fallback,{children:(0,o.jsx)(a.Stack,{bg:"$bgStrong",ai:"center",jc:"center",width:"100%",height:"100%",children:(0,o.jsx)(a.Icon,{name:"CoinOutline",size:"$6",color:"$iconSubdued"})})}),(0,o.jsx)(a.Image.Loading,{children:(0,o.jsx)(a.Skeleton,{width:"100%",height:"100%",radius:"round"})})]}):(0,o.jsx)(a.Skeleton,{width:t,height:t})}))},781889:(e,t,r)=>{r.d(t,{E:()=>PriceChangePercentage});var n=r(324586),a=r(839850),o=r(490343),i=r(831085),s=["children"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function PriceChangePercentage(e){var{children:t}=e,r=(0,a.A)(e,s);return t?(0,i.jsx)(o.NumberSizeableText,_objectSpread(_objectSpread({selectable:!1,size:"$bodyMd",formatter:"priceChange",color:Number(t)>0?"$textSuccess":"$textCritical",formatterOptions:{showPlusMinusSigns:!0}},r),{},{children:t})):(0,i.jsx)(o.SizableText,{size:"$bodyMd",children:"-"})}},610101:(e,t,r)=>{r.d(t,{K:()=>useSortType});var n=r(514041),getNumericValue=function(e,t,r){var n=e[t];return"number"==typeof n?n:"desc"===r?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER},useSortType=function(e,t){var r=(0,n.useRef)(),a=(0,n.useRef)(t);r.current!==e&&(r.current=e),a.current!==t&&(a.current=t,r.current=e);var[o,i]=(0,n.useState)({columnName:"default",order:"desc"}),s=(0,n.useCallback)((function(e){i(e)}),[]),l=(0,n.useMemo)((function(){if(r.current?.length){var t=r.current[0]?.[o?.columnName];if(o?.order)return function(e){return"number"==typeof e||null===e||"-"===e}(t)?r.current?.slice().sort((function(e,t){var r=getNumericValue(e,o.columnName,o.order),n=getNumericValue(t,o.columnName,o.order);return"desc"===o.order?n-r:r-n})):"string"==typeof t?r.current?.slice().sort((function(e,t){var r=e[o.columnName],n=t[o.columnName];return"desc"===o.order?r.localeCompare(n,"en",{sensitivity:"base"}):n.localeCompare(r,"en",{sensitivity:"base"})})):e}return r.current}),[e,o?.columnName,o?.order]);return(0,n.useMemo)((function(){return{sortedListData:l,handleSortTypeChange:s,sortByType:o,setSortByType:i}}),[s,o,l,i])}},450255:(e,t,r)=>{r.d(t,{B:()=>useWatchListAction});var n=r(514041),a=r(908867),o=r(490343),i=r(254491),s=r(310944),useWatchListAction=function(){var e=(0,a.A)(),t=(0,s.qr)(),r=(0,n.useCallback)((function(e){var r={coingeckoId:e};t.current.removeFormWatchList(r)}),[t]),l=(0,n.useCallback)((function(r){var n=Array.isArray(r)?r:[r];t.current.addIntoWatchList(n.map((function(e){return{coingeckoId:e}}))),o.Toast.success({title:e.formatMessage({id:i.ETranslations.market_added_to_watchlist})})}),[t,e]),c=(0,n.useCallback)((function(e){var r={coingeckoId:e};t.current.moveToTop(r)}),[t]),d=(0,n.useCallback)((function(e){return t.current.isInWatchList(e)}),[t]);return(0,n.useMemo)((function(){return{removeFormWatchList:r,addIntoWatchList:l,MoveToTop:c,isInWatchList:d}}),[c,l,d,r])}}}]);